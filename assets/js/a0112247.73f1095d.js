"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[961],{28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>d});var l=s(96540);const r={},o=l.createContext(r);function i(e){const n=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),l.createElement(o.Provider,{value:n},e.children)}},69437:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"Development/docker-setup","title":"Docker Development Setup","description":"Complete guide for setting up OpenRegister development environment with Docker","source":"@site/docs/Development/docker-setup.md","sourceDirName":"Development","slug":"/Development/docker-setup","permalink":"/docs/Development/docker-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Development/docker-setup.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Docker Development Setup","sidebar_position":2,"description":"Complete guide for setting up OpenRegister development environment with Docker"},"sidebar":"tutorialSidebar","previous":{"title":"Styleguide","permalink":"/docs/Development/Services/styleguide"},"next":{"title":"Core Features","permalink":"/docs/Features/"}}');var r=s(74848),o=s(28453);const i={title:"Docker Development Setup",sidebar_position:2,description:"Complete guide for setting up OpenRegister development environment with Docker"},d="Docker Development Setup",c={},t=[{value:"\ud83d\ude80 Two Setup Modes",id:"-two-setup-modes",level:2},{value:"\ud83d\udce6 <strong>Production/Testing Mode</strong> (<code>docker-compose.yml</code>)",id:"-productiontesting-mode-docker-composeyml",level:3},{value:"\ud83d\udc68\u200d\ud83d\udcbb <strong>Developer Mode</strong> (<code>docker-compose.dev.yml</code>)",id:"-developer-mode-docker-composedevyml",level:3},{value:"Overview",id:"overview",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Production/Testing Mode (App Store)",id:"productiontesting-mode-app-store",level:3},{value:"Developer Mode (Local Code)",id:"developer-mode-local-code",level:3},{value:"Service Configuration",id:"service-configuration",level:2},{value:"Nextcloud",id:"nextcloud",level:3},{value:"MariaDB",id:"mariadb",level:3},{value:"Solr (Search Engine)",id:"solr-search-engine",level:3},{value:"Ollama (Local LLM)",id:"ollama-local-llm",level:3},{value:"Initial Configuration",id:"initial-configuration",level:2},{value:"1. Verify OpenRegister is Enabled",id:"1-verify-openregister-is-enabled",level:3},{value:"2. Setup Solr",id:"2-setup-solr",level:3},{value:"3. Configure Ollama",id:"3-configure-ollama",level:3},{value:"Download Models",id:"download-models",level:4},{value:"Configure in OpenRegister",id:"configure-in-openregister",level:4},{value:"Development Workflow",id:"development-workflow",level:2},{value:"Production/Testing Mode",id:"productiontesting-mode",level:3},{value:"Developer Mode",id:"developer-mode",level:3},{value:"Making Code Changes",id:"making-code-changes",level:4},{value:"Viewing Logs",id:"viewing-logs",level:4},{value:"Restarting Services",id:"restarting-services",level:4},{value:"Database Access",id:"database-access",level:3},{value:"Accessing Containers",id:"accessing-containers",level:3},{value:"AI Features Testing",id:"ai-features-testing",level:2},{value:"Test Ollama Connection",id:"test-ollama-connection",level:3},{value:"Test Vectorization",id:"test-vectorization",level:3},{value:"Monitor Model Performance",id:"monitor-model-performance",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Auto-Setup Issues",id:"auto-setup-issues",level:3},{value:"Container Won&#39;t Start",id:"container-wont-start",level:3},{value:"Nextcloud Installation Issues",id:"nextcloud-installation-issues",level:3},{value:"Solr Connection Issues",id:"solr-connection-issues",level:3},{value:"Ollama Issues",id:"ollama-issues",level:3},{value:"Out of Memory",id:"out-of-memory",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Stopping the Environment",id:"stopping-the-environment",level:2},{value:"Production/Testing Mode",id:"productiontesting-mode-1",level:3},{value:"Developer Mode",id:"developer-mode-1",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Custom Port Mapping",id:"custom-port-mapping",level:3},{value:"Resource Limits",id:"resource-limits",level:3},{value:"Using GPU for Ollama",id:"using-gpu-for-ollama",level:3},{value:"Production Considerations",id:"production-considerations",level:2},{value:"Additional Resources",id:"additional-resources",level:2},{value:"Support",id:"support",level:2}];function a(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"docker-development-setup",children:"Docker Development Setup"})}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister includes a complete Docker Compose setup for developers and partners. This guide will help you quickly get started with a fully-configured development environment including Nextcloud, MariaDB, Solr, and Ollama."}),"\n",(0,r.jsx)(n.h2,{id:"-two-setup-modes",children:"\ud83d\ude80 Two Setup Modes"}),"\n",(0,r.jsxs)(n.p,{children:["OpenRegister provides ",(0,r.jsx)(n.strong,{children:"two docker-compose configurations"})," to suit different needs:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"Production/Testing Mode"}),(0,r.jsx)(n.th,{children:"Developer Mode"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"File"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker-compose.yml"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker-compose.dev.yml"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Best For"})}),(0,r.jsx)(n.td,{children:"Partners, testers, evaluation"}),(0,r.jsx)(n.td,{children:"Developers, contributors"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"App Source"})}),(0,r.jsx)(n.td,{children:"Nextcloud App Store"}),(0,r.jsx)(n.td,{children:"Local code (mounted)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Code Changes"})}),(0,r.jsx)(n.td,{children:"\u274c Not possible"}),(0,r.jsx)(n.td,{children:"\u2705 Live editing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Dependencies"})}),(0,r.jsx)(n.td,{children:"Auto-downloaded"}),(0,r.jsx)(n.td,{children:"Auto-built from source"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Startup Time"})}),(0,r.jsx)(n.td,{children:"~2-3 minutes"}),(0,r.jsx)(n.td,{children:"~3-5 minutes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Use Case"})}),(0,r.jsx)(n.td,{children:"Testing features"}),(0,r.jsx)(n.td,{children:"Developing features"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Command"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker-compose up -d"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker-compose -f docker-compose.dev.yml up -d"})})]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"-productiontesting-mode-docker-composeyml",children:["\ud83d\udce6 ",(0,r.jsx)(n.strong,{children:"Production/Testing Mode"})," (",(0,r.jsx)(n.code,{children:"docker-compose.yml"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"Perfect for partners, testers, and quick evaluation."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Downloads OpenRegister from Nextcloud App Store"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Automatically installs and enables the app"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Production-ready configuration"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 No local code required"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"-developer-mode-docker-composedevyml",children:["\ud83d\udc68\u200d\ud83d\udcbb ",(0,r.jsx)(n.strong,{children:"Developer Mode"})," (",(0,r.jsx)(n.code,{children:"docker-compose.dev.yml"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"Perfect for developers working on OpenRegister code."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Mounts local code into the container"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Automatically builds dependencies"}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 Live code changes (use ",(0,r.jsx)(n.code,{children:"npm run watch"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Full development environment"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker-compose -f docker-compose.dev.yml up -d\n"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The docker-compose setup provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nextcloud"}),": Latest version with OpenRegister pre-mounted"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MariaDB"}),": Database backend for Nextcloud"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Solr"}),": Full-text search engine in standalone mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ollama"}),": Local LLM inference for AI features (privacy-focused, no external API needed)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Persistent Volumes"}),": Data preservation across container restarts"]}),"\n"]}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TB\n    A[Nextcloud Container] --\x3e B[MariaDB]\n    A --\x3e C[Solr]\n    A --\x3e D[Ollama]\n    \n    F[Host Port 8080] --\x3e A\n    G[Host Port 8983] --\x3e C\n    H[Host Port 11434] --\x3e D\n    \n    style A fill:#0082c9\n    style C fill:#d9411e\n    style D fill:#000000,color:#ffffff\n    style B fill:#003545"}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Docker and Docker Compose installed"}),"\n",(0,r.jsx)(n.li,{children:"WSL2 (for Windows users)"}),"\n",(0,r.jsx)(n.li,{children:"At least 8GB RAM available"}),"\n",(0,r.jsx)(n.li,{children:"20GB free disk space"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"productiontesting-mode-app-store",children:"Production/Testing Mode (App Store)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use this if:"})," You want to test OpenRegister without modifying code."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Navigate to the openregister directory:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd /path/to/apps-extra/openregister\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Start all services:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Wait for services to initialize"})," (first start takes 2-3 minutes):"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Watch the logs (including OpenRegister auto-setup)\ndocker-compose logs -f nextcloud\n\n# Check service health\ndocker-compose ps\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What's happening during startup:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Nextcloud initializes the database"}),"\n",(0,r.jsx)(n.li,{children:"OpenRegister is downloaded from App Store"}),"\n",(0,r.jsx)(n.li,{children:"The app is automatically enabled"}),"\n",(0,r.jsx)(n.li,{children:"Ready to use!"}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Access Nextcloud:"})}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["URL: ",(0,r.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"})]}),"\n",(0,r.jsx)(n.li,{children:"Username: 'admin'"}),"\n",(0,r.jsx)(n.li,{children:"Password: 'admin'"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"OpenRegister is already enabled and ready!"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"developer-mode-local-code",children:"Developer Mode (Local Code)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use this if:"})," You want to develop and make changes to OpenRegister code."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Navigate to the openregister directory:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd /path/to/apps-extra/openregister\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Start all services:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker-compose -f docker-compose.dev.yml up -d\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Wait for services to initialize"})," (first start takes 3-5 minutes):"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Watch the logs (including dependency installation and build)\ndocker-compose -f docker-compose.dev.yml logs -f nextcloud\n\n# Check service health\ndocker-compose -f docker-compose.dev.yml ps\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What's happening during startup:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Nextcloud initializes the database"}),"\n",(0,r.jsx)(n.li,{children:"Composer dependencies are installed"}),"\n",(0,r.jsx)(n.li,{children:"NPM dependencies are installed"}),"\n",(0,r.jsx)(n.li,{children:"Frontend assets are built"}),"\n",(0,r.jsx)(n.li,{children:"The app is enabled and ready"}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Access Nextcloud:"})}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["URL: ",(0,r.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"})]}),"\n",(0,r.jsx)(n.li,{children:"Username: 'admin'"}),"\n",(0,r.jsx)(n.li,{children:"Password: 'admin'"}),"\n",(0,r.jsxs)(n.li,{children:["Container name: ",(0,r.jsx)(n.code,{children:"nextcloud-dev"})]}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Enable live development:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# On your host machine, run:\nnpm run watch\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now any changes to Vue/JS files will automatically rebuild!"}),"\n",(0,r.jsx)(n.h2,{id:"service-configuration",children:"Service Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"nextcloud",children:"Nextcloud"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Container Name:"})," 'nextcloud'",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Port:"})," 8080 \u2192 80",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Volumes:"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'nextcloud:/var/www/html' - Nextcloud core files"}),"\n",(0,r.jsx)(n.li,{children:"'./custom_apps:/var/www/html/custom_apps' - Custom apps folder"}),"\n",(0,r.jsx)(n.li,{children:"'.:/var/www/html/custom_apps/openregister' - OpenRegister app (mounted for development)"}),"\n",(0,r.jsx)(n.li,{children:"'./docker/entrypoint-openregister.sh' - Auto-setup script"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Environment:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PHP Memory Limit: 4G"}),"\n",(0,r.jsx)(n.li,{children:"Upload Limit: 2G"}),"\n",(0,r.jsx)(n.li,{children:"Post Max Size: 2G"}),"\n",(0,r.jsx)(n.li,{children:"Timezone: Europe/Amsterdam"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Database Connection:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Host: 'db'"}),"\n",(0,r.jsx)(n.li,{children:"Database: 'nextcloud'"}),"\n",(0,r.jsx)(n.li,{children:"User: 'nextcloud'"}),"\n",(0,r.jsx)(n.li,{children:"Password: '!ChangeMe!'"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Auto-Setup:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"On startup, automatically installs dependencies and enables OpenRegister"}),"\n",(0,r.jsx)(n.li,{children:"Script location: 'docker/entrypoint-openregister.sh'"}),"\n",(0,r.jsx)(n.li,{children:"Runs in background while Nextcloud starts"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"mariadb",children:"MariaDB"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Container Name:"})," 'db'",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Port:"})," Not exposed (internal only)",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Version:"})," MariaDB 10.6"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Database Credentials:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Root Password: '!ChangeMe!'"}),"\n",(0,r.jsx)(n.li,{children:"Database: 'nextcloud'"}),"\n",(0,r.jsx)(n.li,{children:"User: 'nextcloud'"}),"\n",(0,r.jsx)(n.li,{children:"Password: '!ChangeMe!'"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Transaction isolation: READ-COMMITTED"}),"\n",(0,r.jsx)(n.li,{children:"Binary logging enabled"}),"\n",(0,r.jsx)(n.li,{children:"Persistent volume for data"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"solr-search-engine",children:"Solr (Search Engine)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Container Name:"})," 'openregister-solr'",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Port:"})," 8983 \u2192 8983",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Version:"})," Solr 9 (slim)"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Mode: Standalone (simpler for development)"}),"\n",(0,r.jsx)(n.li,{children:"Heap Size: 512MB"}),"\n",(0,r.jsx)(n.li,{children:"No external dependencies"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Access:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Admin UI: ",(0,r.jsx)(n.a,{href:"http://localhost:8983/solr",children:"http://localhost:8983/solr"})]}),"\n",(0,r.jsxs)(n.li,{children:["API: ",(0,r.jsx)(n.a,{href:"http://localhost:8983/solr/admin/info/system",children:"http://localhost:8983/solr/admin/info/system"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Internal URL for Nextcloud:"}),"\nUse '",(0,r.jsx)(n.a,{href:"http://solr:8983",children:"http://solr:8983"}),"' in OpenRegister Solr configuration."]}),"\n",(0,r.jsx)(n.h3,{id:"ollama-local-llm",children:"Ollama (Local LLM)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Container Name:"})," 'openregister-ollama'",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Port:"})," 11434 \u2192 11434",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Image:"})," ollama/ollama",":latest"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Host: '0.0.0.0' (accessible from other containers)"}),"\n",(0,r.jsx)(n.li,{children:"Volume: 'ollama:/root/.ollama' (persistent model storage)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Internal URL for Nextcloud:"}),"\nUse '",(0,r.jsx)(n.a,{href:"http://ollama:11434",children:"http://ollama:11434"}),"' in OpenRegister LLM configuration."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Models Location:"}),"\nModels are stored in the persistent volume and survive container restarts."]}),"\n",(0,r.jsx)(n.h2,{id:"initial-configuration",children:"Initial Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"1-verify-openregister-is-enabled",children:"1. Verify OpenRegister is Enabled"}),"\n",(0,r.jsx)(n.p,{children:"The app is automatically enabled during container startup. You can verify with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check app status\ndocker exec -u 33 nextcloud php /var/www/html/occ app:list | grep openregister\n\n# View auto-setup logs\ndocker logs nextcloud | grep "OpenRegister"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-setup-solr",children:"2. Setup Solr"}),"\n",(0,r.jsx)(n.p,{children:"Initialize Solr infrastructure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Setup Solr collections and schema\ndocker exec -u 33 nextcloud php /var/www/html/occ openregister:solr:manage setup\n\n# Verify Solr health\ndocker exec -u 33 nextcloud php /var/www/html/occ openregister:solr:manage health\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-configure-ollama",children:"3. Configure Ollama"}),"\n",(0,r.jsx)(n.h4,{id:"download-models",children:"Download Models"}),"\n",(0,r.jsx)(n.p,{children:"Before using Ollama, you need to download the AI models:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Download embedding model (required for search)\ndocker exec openregister-ollama ollama pull nomic-embed-text\n\n# Download chat model (choose one based on your needs)\n\n# Recommended: Meta Llama 3.1 (best balance, function calling support)\ndocker exec openregister-ollama ollama pull llama3.1\n\n# Alternative: Mistral (European AI, ethical focus)\ndocker exec openregister-ollama ollama pull mistral\n\n# Alternative: Phi-3 (smaller, efficient)\ndocker exec openregister-ollama ollama pull phi3\n\n# High Quality (requires powerful hardware)\ndocker exec openregister-ollama ollama pull llama3.1:70b\n"})}),"\n",(0,r.jsx)(n.h4,{id:"configure-in-openregister",children:"Configure in OpenRegister"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Log in to Nextcloud (",(0,r.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.strong,{children:"Settings \u2192 Administration \u2192 OpenRegister"})]}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"LLM Configuration"})]}),"\n",(0,r.jsxs)(n.li,{children:["Set up Ollama:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Embedding Provider:"})," Ollama"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ollama URL:"})," '",(0,r.jsx)(n.a,{href:"http://ollama:11434",children:"http://ollama:11434"}),"'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Embedding Model:"})," 'nomic-embed-text'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chat Provider:"})," Ollama"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chat Model:"})," 'llama3.1' (or your chosen model)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"development-workflow",children:"Development Workflow"}),"\n",(0,r.jsx)(n.h3,{id:"productiontesting-mode",children:"Production/Testing Mode"}),"\n",(0,r.jsx)(n.p,{children:"For testing and evaluation (no code changes):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# View logs\ndocker-compose logs -f nextcloud\n\n# Restart services\ndocker-compose restart nextcloud\n\n# Stop services\ndocker-compose down\n\n# Start services\ndocker-compose up -d\n"})}),"\n",(0,r.jsx)(n.h3,{id:"developer-mode",children:"Developer Mode"}),"\n",(0,r.jsx)(n.p,{children:"For active development with code changes:"}),"\n",(0,r.jsx)(n.h4,{id:"making-code-changes",children:"Making Code Changes"}),"\n",(0,r.jsx)(n.p,{children:"The OpenRegister directory is mounted directly into the container, so changes are immediately available:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install dependencies (run on host)\nnpm install\ncomposer install\n\n# Watch for frontend changes (automatic rebuild)\nnpm run watch\n\n# Lint code\nnpm run lint\n"})}),"\n",(0,r.jsx)(n.h4,{id:"viewing-logs",children:"Viewing Logs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# All services\ndocker-compose -f docker-compose.dev.yml logs -f\n\n# Specific service\ndocker-compose -f docker-compose.dev.yml logs -f nextcloud\ndocker-compose -f docker-compose.dev.yml logs -f solr\ndocker-compose -f docker-compose.dev.yml logs -f ollama\n\n# Filter logs\ndocker logs nextcloud-dev | grep 'OpenRegister'\n"})}),"\n",(0,r.jsx)(n.h4,{id:"restarting-services",children:"Restarting Services"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Restart all services\ndocker-compose -f docker-compose.dev.yml restart\n\n# Restart specific service\ndocker-compose -f docker-compose.dev.yml restart nextcloud\ndocker-compose -f docker-compose.dev.yml restart ollama\n"})}),"\n",(0,r.jsx)(n.h3,{id:"database-access",children:"Database Access"}),"\n",(0,r.jsx)(n.p,{children:"Connect to the database from your host machine:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Using Docker:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -it db mysql -u nextcloud -p'!ChangeMe!' nextcloud\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Using DBeaver or other DB tools:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Host: 'localhost'"}),"\n",(0,r.jsx)(n.li,{children:"Port: 3306 (if exposed in your docker-compose)"}),"\n",(0,r.jsx)(n.li,{children:"Database: 'nextcloud'"}),"\n",(0,r.jsx)(n.li,{children:"Username: 'nextcloud'"}),"\n",(0,r.jsx)(n.li,{children:"Password: '!ChangeMe!'"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"accessing-containers",children:"Accessing Containers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Access Nextcloud container\ndocker exec -it nextcloud bash\n\n# Access as www-data user (for occ commands)\ndocker exec -it -u 33 nextcloud bash\n\n# Access Ollama container\ndocker exec -it openregister-ollama bash\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ai-features-testing",children:"AI Features Testing"}),"\n",(0,r.jsx)(n.h3,{id:"test-ollama-connection",children:"Test Ollama Connection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check if Ollama is running\ndocker exec openregister-ollama curl -s http://localhost:11434/api/tags\n\n# List downloaded models\ndocker exec openregister-ollama ollama list\n\n# Test model inference\ndocker exec openregister-ollama ollama run llama3.1 "Hello, how are you?"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"test-vectorization",children:"Test Vectorization"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a test object in OpenRegister"}),"\n",(0,r.jsx)(n.li,{children:"Check if it was vectorized:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker exec -u 33 nextcloud php /var/www/html/occ openregister:solr:debug query "your search term"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"monitor-model-performance",children:"Monitor Model Performance"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Watch Ollama logs\ndocker logs -f openregister-ollama\n\n# Check resource usage\ndocker stats openregister-ollama\n"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"auto-setup-issues",children:"Auto-Setup Issues"}),"\n",(0,r.jsx)(n.p,{children:"If OpenRegister isn't automatically enabled:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check auto-setup logs\ndocker logs nextcloud | grep "OpenRegister"\n\n# Manually trigger setup\ndocker exec -u 33 nextcloud bash /entrypoint-openregister.sh\n\n# Or manually enable\ndocker exec -u 33 nextcloud php /var/www/html/occ app:enable openregister\n'})}),"\n",(0,r.jsx)(n.h3,{id:"container-wont-start",children:"Container Won't Start"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check container status\ndocker-compose ps\n\n# View error logs\ndocker-compose logs [service-name]\n\n# Restart specific service\ndocker-compose restart [service-name]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"nextcloud-installation-issues",children:"Nextcloud Installation Issues"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Reset Nextcloud (WARNING: destroys data)\ndocker-compose down -v\ndocker-compose up -d\n"})}),"\n",(0,r.jsx)(n.h3,{id:"solr-connection-issues",children:"Solr Connection Issues"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check if Solr is accessible from Nextcloud\ndocker exec nextcloud curl -s http://solr:8983/solr/admin/info/system\n\n# Check Solr health\ndocker exec openregister-solr curl -s http://localhost:8983/solr/admin/info/system\n\n# View Solr logs\ndocker logs openregister-solr\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ollama-issues",children:"Ollama Issues"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check if Ollama is accessible\ndocker exec nextcloud curl -s http://ollama:11434/api/tags\n\n# Check Ollama logs\ndocker logs openregister-ollama\n\n# Restart Ollama\ndocker-compose restart ollama\n\n# Check disk space for models\ndocker exec openregister-ollama df -h\n"})}),"\n",(0,r.jsx)(n.h3,{id:"out-of-memory",children:"Out of Memory"}),"\n",(0,r.jsx)(n.p,{children:"If services crash due to memory:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Increase Docker memory limit:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Docker Desktop: Settings \u2192 Resources \u2192 Memory"}),"\n",(0,r.jsx)(n.li,{children:"Recommended: At least 8GB"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Reduce Solr heap:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Edit 'docker-compose.yml'"}),"\n",(0,r.jsx)(n.li,{children:"Change 'SOLR_HEAP=512m' to '256m'"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use smaller Ollama models:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use 'phi3' instead of 'llama3.1:70b'"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check resource usage\ndocker stats\n\n# Optimize Solr index\ndocker exec -u 33 nextcloud php /var/www/html/occ openregister:solr:manage optimize\n\n# Clear caches\ndocker exec -u 33 nextcloud php /var/www/html/occ maintenance:mode --on\ndocker exec -u 33 nextcloud php /var/www/html/occ files:cleanup\ndocker exec -u 33 nextcloud php /var/www/html/occ maintenance:mode --off\n"})}),"\n",(0,r.jsx)(n.h2,{id:"stopping-the-environment",children:"Stopping the Environment"}),"\n",(0,r.jsx)(n.h3,{id:"productiontesting-mode-1",children:"Production/Testing Mode"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Temporary stop (preserves data)\ndocker-compose stop\n\n# Full shutdown (preserves data)\ndocker-compose down\n\n# Complete reset (DESTROYS ALL DATA)\ndocker-compose down -v\n"})}),"\n",(0,r.jsx)(n.h3,{id:"developer-mode-1",children:"Developer Mode"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Temporary stop (preserves data)\ndocker-compose -f docker-compose.dev.yml stop\n\n# Full shutdown (preserves data)\ndocker-compose -f docker-compose.dev.yml down\n\n# Complete reset (DESTROYS ALL DATA)\ndocker-compose -f docker-compose.dev.yml down -v\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u26a0\ufe0f Warning:"})," Using ",(0,r.jsx)(n.code,{children:"-v"})," flag will delete all data including databases, uploaded files, and downloaded models!"]}),"\n",(0,r.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"custom-port-mapping",children:"Custom Port Mapping"}),"\n",(0,r.jsx)(n.p,{children:"Edit 'docker-compose.yml' to change ports:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'ports:\n  - "8081:80"  # Change Nextcloud port to 8081\n'})}),"\n",(0,r.jsx)(n.h3,{id:"resource-limits",children:"Resource Limits"}),"\n",(0,r.jsx)(n.p,{children:"Add resource limits to services:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  ollama:\n    deploy:\n      resources:\n        limits:\n          memory: 8G\n          cpus: '4'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"using-gpu-for-ollama",children:"Using GPU for Ollama"}),"\n",(0,r.jsx)(n.p,{children:"For NVIDIA GPUs:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  ollama:\n    deploy:\n      resources:\n        reservations:\n          devices:\n            - driver: nvidia\n              count: 1\n              capabilities: [gpu]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"production-considerations",children:"Production Considerations"}),"\n",(0,r.jsxs)(n.p,{children:["This docker-compose setup is designed for ",(0,r.jsx)(n.strong,{children:"development and testing only"}),". For production:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Change all default passwords"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Use proper SSL/TLS certificates"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Set up proper backup procedures"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Configure firewall rules"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Use external database with proper credentials"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Configure Solr authentication"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Set up monitoring and logging"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Review and harden security settings"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Use production-grade hardware/infrastructure"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Consider using managed services for AI (OpenAI) instead of local Ollama"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/technical/solr-setup-configuration",children:"Solr Setup Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/features/ai",children:"AI Features Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/developers/commands",children:"CLI Commands Reference"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.nextcloud.com/server/latest/developer_manual/",children:"Official Nextcloud Development Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://ollama.com",children:"Ollama Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://solr.apache.org",children:"Apache Solr Documentation"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,r.jsx)(n.p,{children:"For issues or questions:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check the ",(0,r.jsx)(n.a,{href:"#troubleshooting",children:"troubleshooting section"})]}),"\n",(0,r.jsx)(n.li,{children:"Review the logs: 'docker-compose logs -f'"}),"\n",(0,r.jsxs)(n.li,{children:["Contact: ",(0,r.jsx)(n.a,{href:"mailto:info@conduction.nl",children:"info@conduction.nl"})]}),"\n",(0,r.jsxs)(n.li,{children:["GitHub Issues: ",(0,r.jsx)(n.a,{href:"https://github.com/ConductionNL/OpenRegister",children:"OpenRegister Issues"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);