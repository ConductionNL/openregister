"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[3362],{23305:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"features/ner-nlp-concepts","title":"NER & NLP Concepts","description":"Overview","source":"@site/docs/features/ner-nlp-concepts.md","sourceDirName":"features","slug":"/features/ner-nlp-concepts","permalink":"/docs/features/ner-nlp-concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/features/ner-nlp-concepts.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"title":"NER & NLP Concepts","sidebar_position":16},"sidebar":"tutorialSidebar","previous":{"title":"Archiving and Metadata Classification","permalink":"/docs/features/archiving-and-metadata"},"next":{"title":"Agents","permalink":"/docs/features/agents"}}');var t=i(74848),r=i(28453);const l={title:"NER & NLP Concepts",sidebar_position:16},c="Named Entity Recognition (NER) & Natural Language Processing (NLP)",o={},d=[{value:"Overview",id:"overview",level:2},{value:"What is NLP?",id:"what-is-nlp",level:2},{value:"Core NLP Capabilities in OpenRegister",id:"core-nlp-capabilities-in-openregister",level:3},{value:"NLP Tasks in OpenRegister",id:"nlp-tasks-in-openregister",level:3},{value:"What is NER?",id:"what-is-ner",level:2},{value:"Entity Categories",id:"entity-categories",level:3},{value:"NER Process Flow",id:"ner-process-flow",level:3},{value:"NER Implementation Options",id:"ner-implementation-options",level:2},{value:"1. MITIE PHP Library (Local - Basic Setup)",id:"1-mitie-php-library-local---basic-setup",level:3},{value:"2. Microsoft Presidio (Production - Recommended)",id:"2-microsoft-presidio-production---recommended",level:3},{value:"3. LLM-Based NER (GPT-4, Claude, Ollama)",id:"3-llm-based-ner-gpt-4-claude-ollama",level:3},{value:"4. Hybrid Approach (Best Accuracy)",id:"4-hybrid-approach-best-accuracy",level:3},{value:"Entity Extraction Accuracy",id:"entity-extraction-accuracy",level:2},{value:"Configuration",id:"configuration",level:2},{value:"GDPR Compliance",id:"gdpr-compliance",level:2},{value:"1. Complete Data Subject Profiles",id:"1-complete-data-subject-profiles",level:3},{value:"2. Role-Based Anonymization",id:"2-role-based-anonymization",level:3},{value:"3. Source Document Tracking",id:"3-source-document-tracking",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Choose the Right Method for Your Use Case",id:"1-choose-the-right-method-for-your-use-case",level:3},{value:"2. Confidence Thresholds",id:"2-confidence-thresholds",level:3},{value:"3. Manual Review Queue",id:"3-manual-review-queue",level:3},{value:"4. Regular Model Updates",id:"4-regular-model-updates",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Processing Speed",id:"processing-speed",level:3},{value:"Scalability",id:"scalability",level:3},{value:"Resource Requirements",id:"resource-requirements",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"MITIE Not Detecting Entities",id:"mitie-not-detecting-entities",level:3},{value:"Presidio Connection Errors",id:"presidio-connection-errors",level:3},{value:"Low Accuracy",id:"low-accuracy",level:3},{value:"Future Enhancements",id:"future-enhancements",level:2},{value:"Related Documentation",id:"related-documentation",level:2},{value:"API Examples",id:"api-examples",level:2},{value:"Extract Entities from Text",id:"extract-entities-from-text",level:3},{value:"Get GDPR Profile",id:"get-gdpr-profile",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"named-entity-recognition-ner--natural-language-processing-nlp",children:"Named Entity Recognition (NER) & Natural Language Processing (NLP)"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"OpenRegister uses Named Entity Recognition (NER) and Natural Language Processing (NLP) techniques to automatically identify and extract sensitive information from documents for GDPR compliance, data classification, and intelligent search capabilities."}),"\n",(0,t.jsx)(n.h2,{id:"what-is-nlp",children:"What is NLP?"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Natural Language Processing (NLP)"})," is a field of artificial intelligence that enables computers to understand, interpret, and process human language in a meaningful way."]}),"\n",(0,t.jsx)(n.h3,{id:"core-nlp-capabilities-in-openregister",children:"Core NLP Capabilities in OpenRegister"}),"\n",(0,t.jsx)(n.mermaid,{value:"graph TB\n    A[Document Text] --\x3e B{NLP Processing}\n    \n    B --\x3e C[Text Extraction]\n    B --\x3e D[Language Detection]\n    B --\x3e E[Entity Recognition]\n    B --\x3e F[Text Classification]\n    B --\x3e G[Sentiment Analysis]\n    \n    C --\x3e C1[PDF, DOCX, Images]\n    D --\x3e D1[Identify Language: EN, NL, DE]\n    E --\x3e E1[Persons, Organizations, Locations]\n    F --\x3e F1[Document Type, Category]\n    G --\x3e G1[Positive, Negative, Neutral]\n    \n    style A fill:#e3f2fd\n    style B fill:#fff3e0\n    style C fill:#c8e6c9\n    style D fill:#b2dfdb\n    style E fill:#ffccbc\n    style F fill:#e1bee7\n    style G fill:#f8bbd0"}),"\n",(0,t.jsx)(n.h3,{id:"nlp-tasks-in-openregister",children:"NLP Tasks in OpenRegister"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Text Extraction"}),": Convert files (PDF, DOCX, images) into machine-readable text"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Language Detection"}),": Identify the language of content (English, Dutch, German, etc.)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Language Level Assessment"}),": Determine reading difficulty (A1-C2 CEFR levels, Flesch-Kincaid scores)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Named Entity Recognition (NER)"}),": Identify persons, organizations, locations, dates, etc."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Text Chunking"}),": Split documents into semantic units for better processing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Text Classification"}),": Categorize documents by type, topic, or sensitivity"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Sentiment Analysis"}),": Understand emotional tone (future feature)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"what-is-ner",children:"What is NER?"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Named Entity Recognition (NER)"})," is a specific NLP task that locates and classifies named entities (proper nouns and important terms) in text into predefined categories."]}),"\n",(0,t.jsx)(n.h3,{id:"entity-categories",children:"Entity Categories"}),"\n",(0,t.jsx)(n.p,{children:"OpenRegister recognizes these entity types for GDPR compliance:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Entity Type"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Examples"}),(0,t.jsx)(n.th,{children:"GDPR Category"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"PERSON"})}),(0,t.jsx)(n.td,{children:"Individual names"}),(0,t.jsx)(n.td,{children:"John Doe, Jane Smith"}),(0,t.jsx)(n.td,{children:"Personal Data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"EMAIL"})}),(0,t.jsx)(n.td,{children:"Email addresses"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"mailto:john@example.com",children:"john@example.com"})}),(0,t.jsx)(n.td,{children:"Personal Data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"PHONE"})}),(0,t.jsx)(n.td,{children:"Phone numbers"}),(0,t.jsx)(n.td,{children:"+31 6 12345678"}),(0,t.jsx)(n.td,{children:"Personal Data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"ADDRESS"})}),(0,t.jsx)(n.td,{children:"Physical addresses"}),(0,t.jsx)(n.td,{children:"123 Main St, Amsterdam"}),(0,t.jsx)(n.td,{children:"Personal Data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"ORGANIZATION"})}),(0,t.jsx)(n.td,{children:"Company/org names"}),(0,t.jsx)(n.td,{children:"Acme Corporation"}),(0,t.jsx)(n.td,{children:"Business Data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"LOCATION"})}),(0,t.jsx)(n.td,{children:"Geographic locations"}),(0,t.jsx)(n.td,{children:"Amsterdam, Netherlands"}),(0,t.jsx)(n.td,{children:"Contextual Data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"DATE"})}),(0,t.jsx)(n.td,{children:"Dates and times"}),(0,t.jsx)(n.td,{children:"2025-01-15, January 15th"}),(0,t.jsx)(n.td,{children:"Temporal Data"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"IBAN"})}),(0,t.jsx)(n.td,{children:"Bank account numbers"}),(0,t.jsx)(n.td,{children:"NL91 ABNA 0417 1643 00"}),(0,t.jsx)(n.td,{children:"Sensitive PII"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"SSN"})}),(0,t.jsx)(n.td,{children:"Social security numbers"}),(0,t.jsx)(n.td,{children:"123-45-6789"}),(0,t.jsx)(n.td,{children:"Sensitive PII"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"ner-process-flow",children:"NER Process Flow"}),"\n",(0,t.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Doc as Document\n    participant Extract as Text Extractor\n    participant Chunk as Chunking Service\n    participant NER as NER Engine\n    participant DB as GDPR Register\n    \n    Doc->>Extract: Upload PDF/DOCX\n    Extract->>Extract: Convert to plain text\n    Extract->>Chunk: Send complete text\n    Chunk->>Chunk: Split into chunks (1000 chars)\n    Chunk->>NER: Process each chunk\n    \n    NER->>NER: Detect entities\n    Note over NER: Method: MITIE/Presidio/LLM\n    \n    NER->>NER: Classify entity types\n    NER->>NER: Calculate confidence\n    \n    NER->>DB: Store Entity (person, email, etc.)\n    NER->>DB: Store EntityRelation (position, chunk)\n    \n    DB--\x3e>NER: Entity ID\n    NER--\x3e>Chunk: Entities detected\n    Chunk--\x3e>Doc: Processing complete"}),"\n",(0,t.jsx)(n.h2,{id:"ner-implementation-options",children:"NER Implementation Options"}),"\n",(0,t.jsx)(n.p,{children:"OpenRegister supports multiple NER engines to balance accuracy, privacy, and infrastructure requirements:"}),"\n",(0,t.jsx)(n.h3,{id:"1-mitie-php-library-local---basic-setup",children:"1. MITIE PHP Library (Local - Basic Setup)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"MITIE"})," (MIT Information Extraction) is an open-source NER library from MIT that runs entirely locally."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Recommended for:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Development environments"}),"\n",(0,t.jsx)(n.li,{children:"Privacy-sensitive deployments with no external API calls"}),"\n",(0,t.jsx)(n.li,{children:"Basic entity recognition needs"}),"\n",(0,t.jsx)(n.li,{children:"Low-resource environments"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 No external dependencies"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Complete privacy (all processing local)"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 No API costs"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Fast processing"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Works offline"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Limitations:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u26a0\ufe0f Lower accuracy than cloud services"}),"\n",(0,t.jsx)(n.li,{children:"\u26a0\ufe0f Requires PHP extension compilation"}),"\n",(0,t.jsx)(n.li,{children:"\u26a0\ufe0f Limited language support"}),"\n",(0,t.jsx)(n.li,{children:"\u26a0\ufe0f Pattern-based detection (regex + ML models)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Installation:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Install MITIE PHP extension\ngit clone https://github.com/mit-nlp/MITIE.git\ncd MITIE\nmkdir build && cd build\ncmake ..\ncmake --build . --config Release --target install\n\n# Enable PHP extension\necho "extension=mitie.so" > /etc/php/8.1/mods-available/mitie.ini\nphpenmod mitie\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usage Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\NerService;\n\n// MITIE will detect entities using local models\n$nerService = $this->container->get(NerService::class);\n$entities = $nerService->extractEntities($text, 'mitie');\n\nforeach ($entities as $entity) {\n    echo \"Found {$entity['type']}: {$entity['value']} (confidence: {$entity['confidence']})\\n\";\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Detection Methods:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Pattern matching (regex) for emails, phones, IBANs"}),"\n",(0,t.jsx)(n.li,{children:"Statistical ML models for persons and organizations"}),"\n",(0,t.jsx)(n.li,{children:"Dictionary-based location detection"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-microsoft-presidio-production---recommended",children:"2. Microsoft Presidio (Production - Recommended)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Presidio"})," is Microsoft's open-source PII detection and anonymization framework with state-of-the-art accuracy."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Recommended for:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Production deployments"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 GDPR compliance requirements"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Multi-language support needed"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 High accuracy requirements"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 High accuracy (90-98% precision)"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Multi-language support (50+ languages)"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 PII-specific focus (built for GDPR/CCPA)"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Anonymization built-in"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Regular updates and improvements"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Self-hosted option (Docker)"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Extensible with custom recognizers"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Deployment:"})}),"\n",(0,t.jsx)(n.p,{children:"Presidio Analyzer can be deployed as a Docker container (included in OpenRegister's docker-compose.yml):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'presidio-analyzer:\n  image: mcr.microsoft.com/presidio-analyzer:latest\n  container_name: openregister-presidio-analyzer\n  restart: always\n  ports:\n    - "5001:5001"\n  environment:\n    - GRPC_PORT=5001\n    - LOG_LEVEL=INFO\n    # Multi-language support including Dutch\n    - PRESIDIO_ANALYZER_LANGUAGES=en,nl,de,fr,es\n  deploy:\n    resources:\n      limits:\n        memory: 2G\n      reservations:\n        memory: 512M\n  healthcheck:\n    test: ["CMD-SHELL", "curl -f http://localhost:5001/health || exit 1"]\n    interval: 30s\n    timeout: 10s\n    retries: 3\n    start_period: 30s\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Presidio also offers a separate Anonymizer service, but OpenRegister handles anonymization internally using the detected entity positions from the Analyzer."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usage Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\NerService;\n\n// Presidio provides higher accuracy\n$nerService = $this->container->get(NerService::class);\n$entities = $nerService->extractEntities($text, 'presidio', [\n    'language' => 'nl'  // Specify Dutch language\n]);\n\nforeach ($entities as $entity) {\n    echo \"Found {$entity['type']}: {$entity['value']}\\n\";\n    echo \"Confidence: {$entity['confidence']}\\n\";\n    echo \"Position: {$entity['start']}-{$entity['end']}\\n\";\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Supported Entity Types:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"PERSON, EMAIL_ADDRESS, PHONE_NUMBER"}),"\n",(0,t.jsx)(n.li,{children:"LOCATION, ORGANIZATION"}),"\n",(0,t.jsx)(n.li,{children:"CREDIT_CARD, IBAN_CODE, SSN"}),"\n",(0,t.jsx)(n.li,{children:"IP_ADDRESS, URL, DATE_TIME"}),"\n",(0,t.jsx)(n.li,{children:"MEDICAL_LICENSE, US_PASSPORT"}),"\n",(0,t.jsx)(n.li,{children:"Custom types via plugins"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-llm-based-ner-gpt-4-claude-ollama",children:"3. LLM-Based NER (GPT-4, Claude, Ollama)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"LLM-based NER"})," uses large language models to detect entities with contextual understanding."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Recommended for:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Complex entity relationships"}),"\n",(0,t.jsx)(n.li,{children:"Domain-specific entities"}),"\n",(0,t.jsx)(n.li,{children:"Ambiguous cases requiring context"}),"\n",(0,t.jsx)(n.li,{children:"Multi-task processing (NER + classification + sentiment)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Best accuracy for complex cases"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Context-aware detection"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Handles ambiguity"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 No training required"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Can detect custom entity types via prompts"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Limitations:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u26a0\ufe0f Slower than dedicated NER systems"}),"\n",(0,t.jsx)(n.li,{children:"\u26a0\ufe0f Higher cost (API calls)"}),"\n",(0,t.jsx)(n.li,{children:"\u26a0\ufe0f Requires careful prompt engineering"}),"\n",(0,t.jsx)(n.li,{children:"\u26a0\ufe0f Privacy considerations for cloud LLMs"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usage Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\NerService;\nuse OCA\\OpenRegister\\Service\\LLMService;\n\n// Use Ollama (local) or OpenAI (cloud) for NER\n$nerService = $this->container->get(NerService::class);\n$entities = $nerService->extractEntities($text, 'llm', [\n    'provider' => 'ollama',\n    'model' => 'llama3.2',\n    'temperature' => 0.1  // Low temperature for consistent extraction\n]);\n\nforeach ($entities as $entity) {\n    echo \"Found {$entity['type']}: {$entity['value']}\\n\";\n    echo \"Context: {$entity['context']}\\n\";\n    echo \"Reasoning: {$entity['reasoning']}\\n\";\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Supported Providers:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ollama"})," (local, privacy-first)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"OpenAI"})," (GPT-4, GPT-4-turbo)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Anthropic"})," (Claude 3)"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Azure OpenAI"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"4-hybrid-approach-best-accuracy",children:"4. Hybrid Approach (Best Accuracy)"}),"\n",(0,t.jsx)(n.p,{children:"Combine multiple methods for optimal accuracy and coverage:"}),"\n",(0,t.jsx)(n.mermaid,{value:"graph LR\n    A[Text Chunk] --\x3e B{NER Method 1: MITIE}\n    A --\x3e C{NER Method 2: Presidio}\n    A --\x3e D{NER Method 3: LLM}\n    \n    B --\x3e E[Entities + Confidence]\n    C --\x3e E\n    D --\x3e E\n    \n    E --\x3e F{Confidence Aggregation}\n    F --\x3e|Consensus| G[High Confidence]\n    F --\x3e|Conflict| H[Review Required]\n    \n    G --\x3e I[Store in GDPR Register]\n    H --\x3e J[Flag for Manual Review]\n    \n    style A fill:#e3f2fd\n    style F fill:#fff3e0\n    style G fill:#c8e6c9\n    style H fill:#ffccbc\n    style I fill:#b2dfdb"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Hybrid Strategy:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"$entities = $nerService->extractEntities($text, 'hybrid', [\n    'methods' => ['mitie', 'presidio', 'llm'],\n    'consensus_threshold' => 0.75,  // Require 2/3 agreement\n    'min_confidence' => 0.6\n]);\n\n// Example result\n[\n    'entity' => 'john.doe@example.com',\n    'type' => 'email',\n    'detections' => [\n        'mitie' => ['confidence' => 0.95],\n        'presidio' => ['confidence' => 0.98],\n        'llm' => ['confidence' => 0.92]\n    ],\n    'final_confidence' => 0.95,  // Average of all methods\n    'consensus' => true  // All 3 methods agreed\n]\n"})}),"\n",(0,t.jsx)(n.h2,{id:"entity-extraction-accuracy",children:"Entity Extraction Accuracy"}),"\n",(0,t.jsx)(n.p,{children:"Typical accuracy ranges by method:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Method"}),(0,t.jsx)(n.th,{children:"Precision"}),(0,t.jsx)(n.th,{children:"Recall"}),(0,t.jsx)(n.th,{children:"F1 Score"}),(0,t.jsx)(n.th,{children:"Speed"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"MITIE"})," (Local)"]}),(0,t.jsx)(n.td,{children:"75-85%"}),(0,t.jsx)(n.td,{children:"70-80%"}),(0,t.jsx)(n.td,{children:"72-82%"}),(0,t.jsx)(n.td,{children:"\u26a1\u26a1\u26a1 Fast"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Presidio"})," (Production)"]}),(0,t.jsx)(n.td,{children:"90-95%"}),(0,t.jsx)(n.td,{children:"85-92%"}),(0,t.jsx)(n.td,{children:"87-93%"}),(0,t.jsx)(n.td,{children:"\u26a1\u26a1 Medium"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"LLM"})," (GPT-4)"]}),(0,t.jsx)(n.td,{children:"92-98%"}),(0,t.jsx)(n.td,{children:"90-95%"}),(0,t.jsx)(n.td,{children:"91-96%"}),(0,t.jsx)(n.td,{children:"\u26a1 Slow"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Hybrid"})}),(0,t.jsx)(n.td,{children:"95-99%"}),(0,t.jsx)(n.td,{children:"92-96%"}),(0,t.jsx)(n.td,{children:"93-97%"}),(0,t.jsx)(n.td,{children:"\u26a1 Slow"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Definitions:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Precision"}),": Percentage of detected entities that are correct (low false positives)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Recall"}),": Percentage of actual entities that were detected (low false negatives)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"F1 Score"}),": Harmonic mean of precision and recall (overall accuracy)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Entity extraction is configured in OpenRegister settings:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// config/ner_config.php\nreturn [\n    'ner_enabled' => true,\n    'ner_method' => 'presidio',  // or 'mitie', 'llm', 'hybrid'\n    \n    // MITIE configuration\n    'mitie' => [\n        'model_path' => '/var/www/html/custom_apps/openregister/models/mitie',\n        'languages' => ['en', 'nl']\n    ],\n    \n    // Presidio configuration\n    'presidio' => [\n        'analyzer_url' => 'http://presidio-analyzer:5001',\n        'anonymizer_url' => 'http://presidio-anonymizer:5002',\n        'languages' => ['en', 'nl', 'de', 'fr', 'es'],\n        'score_threshold' => 0.6  // Minimum confidence\n    ],\n    \n    // LLM configuration\n    'llm' => [\n        'provider' => 'ollama',  // or 'openai', 'anthropic'\n        'model' => 'llama3.2',\n        'temperature' => 0.1,\n        'max_tokens' => 4000\n    ],\n    \n    // Hybrid configuration\n    'hybrid' => [\n        'methods' => ['mitie', 'presidio'],\n        'consensus_threshold' => 0.67,  // Require 2/3 agreement\n        'fallback_to_llm' => true  // Use LLM for conflicts\n    ]\n];\n"})}),"\n",(0,t.jsx)(n.h2,{id:"gdpr-compliance",children:"GDPR Compliance"}),"\n",(0,t.jsx)(n.p,{children:"The NER system supports GDPR compliance through:"}),"\n",(0,t.jsx)(n.h3,{id:"1-complete-data-subject-profiles",children:"1. Complete Data Subject Profiles"}),"\n",(0,t.jsx)(n.p,{children:"Track all occurrences of a person across all documents:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:'// Find all documents containing John Doe\n$person = $entityMapper->findByValue(\'John Doe\', GdprEntity::TYPE_PERSON);\n$relations = $entityRelationMapper->findByEntityId($person->getId());\n\nforeach ($relations as $relation) {\n    $chunk = $chunkMapper->find($relation->getChunkId());\n    echo "Found in: {$chunk->getSourceType()} #{$chunk->getSourceId()}\\n";\n    echo "Position: {$relation->getPositionStart()}-{$relation->getPositionEnd()}\\n";\n    echo "Confidence: {$relation->getConfidence()}\\n";\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-role-based-anonymization",children:"2. Role-Based Anonymization"}),"\n",(0,t.jsx)(n.p,{children:"Different handling based on entity context:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Role types\nEntityRelation::ROLE_PUBLIC_FIGURE      // CEO in press release\nEntityRelation::ROLE_EMPLOYEE           // Staff in official docs\nEntityRelation::ROLE_PRIVATE_INDIVIDUAL // Customer in support ticket\nEntityRelation::ROLE_MENTIONED          // Third party reference\n\n// Anonymization decision\nif ($relation->getRole() === EntityRelation::ROLE_PRIVATE_INDIVIDUAL) {\n    $anonymized = $anonymizationService->anonymize($entity);\n    $relation->setAnonymized(true);\n    $relation->setAnonymizedValue($anonymized);\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-source-document-tracking",children:"3. Source Document Tracking"}),"\n",(0,t.jsx)(n.p,{children:"Always know which files contain which entities:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Get all files containing this person\n$relations = $entityRelationMapper->findByEntityId($personId);\n$fileIds = array_unique(array_column($relations, 'file_id'));\n\n// Prepare for GDPR request\n$documents = $fileMapper->findByIds($fileIds);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"1-choose-the-right-method-for-your-use-case",children:"1. Choose the Right Method for Your Use Case"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Development/Testing"}),": Use MITIE for quick setup"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Production/GDPR"}),": Use Presidio for best accuracy and compliance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Privacy-Critical"}),": Use Ollama (local LLM) to avoid cloud APIs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Complex Cases"}),": Use Hybrid approach with multiple methods"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-confidence-thresholds",children:"2. Confidence Thresholds"}),"\n",(0,t.jsx)(n.p,{children:"Set appropriate confidence thresholds based on use case:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Conservative (fewer false positives)\n'min_confidence' => 0.8\n\n// Balanced (good trade-off)\n'min_confidence' => 0.6\n\n// Aggressive (catch more entities, more false positives)\n'min_confidence' => 0.4\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-manual-review-queue",children:"3. Manual Review Queue"}),"\n",(0,t.jsx)(n.p,{children:"Flag low-confidence detections for human review:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"if ($entity['confidence'] < 0.75) {\n    $reviewQueue->add($entity, $chunk);\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-regular-model-updates",children:"4. Regular Model Updates"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Update MITIE models quarterly"}),"\n",(0,t.jsx)(n.li,{children:"Keep Presidio containers updated"}),"\n",(0,t.jsx)(n.li,{children:"Fine-tune LLM prompts based on false positives"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsx)(n.h3,{id:"processing-speed",children:"Processing Speed"}),"\n",(0,t.jsx)(n.p,{children:"Average processing time per 1000-character chunk:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"MITIE"}),": 10-50ms (local, fast)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Presidio"}),": 100-300ms (API call, medium)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"LLM"})," (Ollama local): 500-2000ms (slow, depends on model)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"LLM"})," (OpenAI API): 200-1000ms (API latency)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hybrid"}),": 500-3000ms (slowest, but most accurate)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"scalability",children:"Scalability"}),"\n",(0,t.jsx)(n.p,{children:"For large document collections:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Process in background jobs\n$job = new EntityExtractionJob($fileId, 'presidio');\n$jobList->add($job);\n\n// Batch processing\n$chunks = $chunkMapper->findPending(100);\n$entities = $nerService->extractBatch($chunks, 'presidio');\n"})}),"\n",(0,t.jsx)(n.h3,{id:"resource-requirements",children:"Resource Requirements"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Method"}),(0,t.jsx)(n.th,{children:"CPU"}),(0,t.jsx)(n.th,{children:"Memory"}),(0,t.jsx)(n.th,{children:"Network"}),(0,t.jsx)(n.th,{children:"Storage"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"MITIE"}),(0,t.jsx)(n.td,{children:"Low"}),(0,t.jsx)(n.td,{children:"100MB"}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:"Minimal"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Presidio"}),(0,t.jsx)(n.td,{children:"Medium"}),(0,t.jsx)(n.td,{children:"500MB"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Minimal"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"LLM (Local)"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"8-16GB"}),(0,t.jsx)(n.td,{children:"None"}),(0,t.jsx)(n.td,{children:"High"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"LLM (API)"}),(0,t.jsx)(n.td,{children:"Low"}),(0,t.jsx)(n.td,{children:"100MB"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Minimal"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"mitie-not-detecting-entities",children:"MITIE Not Detecting Entities"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Check if extension is loaded\nphp -m | grep mitie\n\n# Verify model files exist\nls -la /path/to/mitie/models/\n\n# Test detection\nphp occ openregister:ner:test --method=mitie --text="John Doe works at Acme Corp"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"presidio-connection-errors",children:"Presidio Connection Errors"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check if Presidio is running\ncurl http://presidio-analyzer:5001/health\n\n# View logs\ndocker logs openregister-presidio-analyzer\n\n# Restart Presidio\ndocker-compose restart presidio-analyzer presidio-anonymizer\n"})}),"\n",(0,t.jsx)(n.h3,{id:"low-accuracy",children:"Low Accuracy"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Increase confidence threshold to reduce false positives"}),"\n",(0,t.jsx)(n.li,{children:"Switch to Presidio or Hybrid method"}),"\n",(0,t.jsx)(n.li,{children:"Fine-tune entity types in configuration"}),"\n",(0,t.jsx)(n.li,{children:"Add custom recognizers for domain-specific entities"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,t.jsx)(n.p,{children:"Planned improvements to NER/NLP:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\ud83d\udd2e Custom entity types (product names, project codes)"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udd2e Relationship extraction (person works at company)"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udd2e Sentiment analysis per entity mention"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udd2e Multi-document entity resolution (same person across files)"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udd2e Temporal entity tracking (entity value changes over time)"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udd2e Entity disambiguation (John Smith #1 vs John Smith #2)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/features/text-extraction-enhanced",children:"Text Extraction Enhanced"})," - Complete text extraction pipeline"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/technical/text-extraction-entities",children:"Text Extraction Database Entities"})," - Database schema"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/technical/entity-relationships-addition",children:"Entity Relationships"})," - Entity data model"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/Features/files",children:"GDPR Features"})," - GDPR compliance features"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"api-examples",children:"API Examples"}),"\n",(0,t.jsx)(n.h3,{id:"extract-entities-from-text",children:"Extract Entities from Text"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Using MITIE (local)\ncurl -X POST http://nextcloud.local/index.php/apps/openregister/api/ner/extract \\\n  -u admin:admin \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "text": "Contact John Doe at john.doe@example.com or +31 6 12345678",\n    "method": "mitie"\n  }\'\n\n# Using Presidio (production)\ncurl -X POST http://nextcloud.local/index.php/apps/openregister/api/ner/extract \\\n  -u admin:admin \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "text": "Contact John Doe at john.doe@example.com or +31 6 12345678",\n    "method": "presidio",\n    "anonymize": true\n  }\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"get-gdpr-profile",children:"Get GDPR Profile"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Get all data for a person\ncurl -X GET http://nextcloud.local/index.php/apps/openregister/api/gdpr/profile/john.doe@example.com \\\n  -u admin:admin\n\n# Response includes all files, chunks, and occurrences\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": For production GDPR compliance, we strongly recommend using ",(0,t.jsx)(n.strong,{children:"Presidio"})," or ",(0,t.jsx)(n.strong,{children:"Hybrid"})," methods for optimal accuracy. MITIE is suitable for development and testing purposes."]}),"\n",(0,t.jsxs)(n.p,{children:["For detailed setup instructions including Dutch language support, see ",(0,t.jsx)(n.a,{href:"/docs/development/presidio-setup",children:"Presidio Setup for Dutch Language"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var s=i(96540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);