"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[5745],{28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var s=i(96540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}},31413:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Features/search","title":"Search","description":"An overview of how core concepts in Open Register interact with each other.","source":"@site/docs/Features/search.md","sourceDirName":"Features","slug":"/Features/search","permalink":"/docs/Features/search","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Features/search.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Search","sidebar_position":5,"description":"An overview of how core concepts in Open Register interact with each other.","keywords":["Open Register","Core Concepts","Relationships"]},"sidebar":"tutorialSidebar","previous":{"title":"Sources","permalink":"/docs/Features/sources"},"next":{"title":"Core Features","permalink":"/docs/Features/events"}}');var r=i(74848),l=i(28453);const t={title:"Search",sidebar_position:5,description:"An overview of how core concepts in Open Register interact with each other.",keywords:["Open Register","Core Concepts","Relationships"]},d="Advanced Search",c={},a=[{value:"Automatic Facets",id:"automatic-facets",level:2},{value:"Content Search",id:"content-search",level:2},{value:"Elasticsearch Integration",id:"elasticsearch-integration",level:2},{value:"Overview",id:"overview",level:2},{value:"Key Benefits",id:"key-benefits",level:2},{value:"Overview",id:"overview-1",level:2},{value:"Key Benefits",id:"key-benefits-1",level:2},{value:"Overview",id:"overview-2",level:2},{value:"Open Catalogi Integration",id:"open-catalogi-integration",level:2},{value:"Publications Endpoint Advantages",id:"publications-endpoint-advantages",level:3},{value:"Register and Schema Filtering in Publications",id:"register-and-schema-filtering-in-publications",level:3},{value:"Basic Publications Filtering",id:"basic-publications-filtering",level:4},{value:"Multiple Register/Schema Filtering",id:"multiple-registerschema-filtering",level:4},{value:"Combined with Metadata Filters",id:"combined-with-metadata-filters",level:4},{value:"Comparison: OpenRegister vs Publications Endpoints",id:"comparison-openregister-vs-publications-endpoints",level:3},{value:"Migration Example",id:"migration-example",level:3},{value:"When to Use Each Endpoint",id:"when-to-use-each-endpoint",level:3},{value:"Metadata Filtering",id:"metadata-filtering",level:2},{value:"Core Metadata Fields",id:"core-metadata-fields",level:3},{value:"System Fields",id:"system-fields",level:4},{value:"Timestamps",id:"timestamps",level:4},{value:"Content Fields",id:"content-fields",level:4},{value:"Ownership &amp; Access",id:"ownership--access",level:4},{value:"Status &amp; State",id:"status--state",level:4},{value:"Filtering Operators",id:"filtering-operators",level:3},{value:"Metadata Filtering Examples",id:"metadata-filtering-examples",level:3},{value:"Basic Metadata Filtering",id:"basic-metadata-filtering",level:4},{value:"Advanced Metadata Combinations",id:"advanced-metadata-combinations",level:4},{value:"Register and Schema Filtering",id:"register-and-schema-filtering",level:4},{value:"Date Format Handling",id:"date-format-handling",level:2},{value:"Standard Date Format",id:"standard-date-format",level:3},{value:"Date Range Examples",id:"date-range-examples",level:3},{value:"Frontend Implementation",id:"frontend-implementation",level:3},{value:"Full Text Search",id:"full-text-search",level:2},{value:"Wildcard Search",id:"wildcard-search",level:3},{value:"Pattern Matching",id:"pattern-matching",level:3},{value:"Phrase Search",id:"phrase-search",level:3},{value:"Basic Search",id:"basic-search",level:2},{value:"Comparison Operators",id:"comparison-operators",level:2},{value:"Not Equals <code>ne</code>",id:"not-equals-ne",level:3},{value:"Greater Than <code>gt</code>",id:"greater-than-gt",level:3},{value:"Less Than <code>lt</code>",id:"less-than-lt",level:3},{value:"Greater Than or Equal <code>gte</code>",id:"greater-than-or-equal-gte",level:3},{value:"Less Than or Equal <code>lte</code>",id:"less-than-or-equal-lte",level:3},{value:"Contains <code>~</code>",id:"contains-",level:3},{value:"Starts With <code>^</code>",id:"starts-with-",level:3},{value:"Ends With <code>$</code>",id:"ends-with-",level:3},{value:"Combining Multiple Conditions",id:"combining-multiple-conditions",level:2},{value:"AND Operations",id:"and-operations",level:3},{value:"OR Operations",id:"or-operations",level:3},{value:"Special Filters",id:"special-filters",level:2},{value:"Exists Check",id:"exists-check",level:3},{value:"Empty Check",id:"empty-check",level:3},{value:"Null Check",id:"null-check",level:3},{value:"Between Range",id:"between-range",level:3},{value:"Searching Nested Properties",id:"searching-nested-properties",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Indexing",id:"indexing",level:3},{value:"Query Optimization",id:"query-optimization",level:3},{value:"Pagination with Metadata Filters",id:"pagination-with-metadata-filters",level:3},{value:"Search Engine Implementation",id:"search-engine-implementation",level:2},{value:"Solr Integration",id:"solr-integration",level:3},{value:"Case-Insensitive Search",id:"case-insensitive-search",level:4},{value:"Ordering and Sorting",id:"ordering-and-sorting",level:4},{value:"Search Performance",id:"search-performance",level:4},{value:"Testing Search",id:"testing-search",level:4},{value:"Error Handling",id:"error-handling",level:2},{value:"Invalid Field Names",id:"invalid-field-names",level:3},{value:"Invalid Operators",id:"invalid-operators",level:3},{value:"Invalid Date Formats",id:"invalid-date-formats",level:3},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Architecture Overview",id:"architecture-overview",level:3},{value:"Search Request Flow",id:"search-request-flow",level:3},{value:"Query Building Process",id:"query-building-process",level:3},{value:"Weighted Search Implementation",id:"weighted-search-implementation",level:3},{value:"Filter Operators",id:"filter-operators",level:3},{value:"Performance Optimizations",id:"performance-optimizations",level:3},{value:"1. Schema Analysis Caching",id:"1-schema-analysis-caching",level:4},{value:"2. Query Result Caching",id:"2-query-result-caching",level:4},{value:"3. Bulk Indexing",id:"3-bulk-indexing",level:4},{value:"4. Selective Field Loading",id:"4-selective-field-loading",level:4},{value:"Monitoring and Debugging",id:"monitoring-and-debugging",level:3},{value:"Query Logging",id:"query-logging",level:4},{value:"Performance Metrics",id:"performance-metrics",level:4},{value:"Health Checks",id:"health-checks",level:4},{value:"Error Handling Flow",id:"error-handling-flow",level:3},{value:"Code Examples",id:"code-examples",level:3},{value:"Building a Search Query",id:"building-a-search-query",level:4},{value:"Custom Filter Processing",id:"custom-filter-processing",level:4},{value:"Testing",id:"testing",level:3}];function h(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"advanced-search",children:"Advanced Search"})}),"\n",(0,r.jsx)(n.p,{children:"Open Register provides powerful search capabilities that allow filtering objects based on their properties using a flexible query syntax."}),"\n",(0,r.jsx)(n.h2,{id:"automatic-facets",children:"Automatic Facets"}),"\n",(0,r.jsx)(n.p,{children:"Automatic Facets provide dynamic filtering options based on object properties and metadata."}),"\n",(0,r.jsx)(n.h2,{id:"content-search",children:"Content Search"}),"\n",(0,r.jsx)(n.p,{children:"Content Search provides powerful search capabilities across objects and their associated files."}),"\n",(0,r.jsx)(n.h2,{id:"elasticsearch-integration",children:"Elasticsearch Integration"}),"\n",(0,r.jsx)(n.p,{children:"Elasticsearch Integration provides advanced search and analytics capabilities for objects and their content."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The search system enables:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Full-text search"}),"\n",(0,r.jsx)(n.li,{children:"Metadata search"}),"\n",(0,r.jsx)(n.li,{children:"File content search"}),"\n",(0,r.jsx)(n.li,{children:"Advanced query options"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/features/views",children:"Saved Views"})})," - Save and reuse complex search configurations"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-benefits",children:"Key Benefits"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Discovery"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Find relevant content"}),"\n",(0,r.jsx)(n.li,{children:"Explore relationships"}),"\n",(0,r.jsx)(n.li,{children:"Discover patterns"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Integration"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Combined search results"}),"\n",(0,r.jsx)(n.li,{children:"Unified interface"}),"\n",(0,r.jsx)(n.li,{children:"Rich filtering"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Performance"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optimized indexing"}),"\n",(0,r.jsx)(n.li,{children:"Fast results"}),"\n",(0,r.jsx)(n.li,{children:"Scalable search"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview-1",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The faceting system:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Generates filters automatically"}),"\n",(0,r.jsx)(n.li,{children:"Updates in real-time"}),"\n",(0,r.jsx)(n.li,{children:"Supports multiple filter types"}),"\n",(0,r.jsx)(n.li,{children:"Provides count information"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-benefits-1",children:"Key Benefits"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"User Experience"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Intuitive filtering"}),"\n",(0,r.jsx)(n.li,{children:"Dynamic updates"}),"\n",(0,r.jsx)(n.li,{children:"Clear navigation"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Data Discovery"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Quick filtering"}),"\n",(0,r.jsx)(n.li,{children:"Pattern recognition"}),"\n",(0,r.jsx)(n.li,{children:"Data exploration"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Integration"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Automatic generation"}),"\n",(0,r.jsx)(n.li,{children:"Custom configuration"}),"\n",(0,r.jsx)(n.li,{children:"Search integration"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview-2",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The search system enables you to filter objects using query parameters. However, it's important to note that this approach is limited by the maximum URL length supported by browsers and servers (typically 2,048 characters for most browsers)."}),"\n",(0,r.jsx)(n.p,{children:"For more complex queries that exceed URL length limitations, we are planning to implement GraphQL support in the future. This would enable:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Deeply nested queries"}),"\n",(0,r.jsx)(n.li,{children:"Complex filtering logic"}),"\n",(0,r.jsx)(n.li,{children:"Precise field selection"}),"\n",(0,r.jsx)(n.li,{children:"Batch operations"}),"\n",(0,r.jsx)(n.li,{children:"Real-time subscriptions"}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Note: GraphQL implementation is currently pending funding. If you're interested in supporting this feature, please contact us."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"In the meantime, here are the available search capabilities using URL parameters:"}),"\n",(0,r.jsx)(n.h2,{id:"open-catalogi-integration",children:"Open Catalogi Integration"}),"\n",(0,r.jsxs)(n.p,{children:["If you have ",(0,r.jsx)(n.strong,{children:"Open Catalogi"})," installed alongside OpenRegister, you gain access to the more flexible ",(0,r.jsx)(n.code,{children:"/api/publications"})," endpoint. This endpoint provides enhanced filtering capabilities that allow you to search across multiple registers and schemas without being constrained by URL path parameters."]}),"\n",(0,r.jsx)(n.h3,{id:"publications-endpoint-advantages",children:"Publications Endpoint Advantages"}),"\n",(0,r.jsxs)(n.p,{children:["The publications endpoint (",(0,r.jsx)(n.code,{children:"/api/publications"}),") offers several advantages over register/schema-specific endpoints:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-register searching"}),": Filter objects from multiple registers simultaneously"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dynamic schema filtering"}),": Switch between schemas without changing the endpoint"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cleaner URLs"}),": No need to include register/schema in the URL path"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"More flexible queries"}),": Better support for complex filter combinations"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"register-and-schema-filtering-in-publications",children:"Register and Schema Filtering in Publications"}),"\n",(0,r.jsx)(n.p,{children:"When using the publications endpoint, register and schema become regular query parameters instead of URL path components:"}),"\n",(0,r.jsx)(n.h4,{id:"basic-publications-filtering",children:"Basic Publications Filtering"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Search across all registers and schemas\nGET /api/publications\n\n# Filter by specific register\nGET /api/publications?register=5\n\n# Filter by specific schema  \nGET /api/publications?schema=24\n\n# Filter by both register and schema\nGET /api/publications?register=5&schema=24\n"})}),"\n",(0,r.jsx)(n.h4,{id:"multiple-registerschema-filtering",children:"Multiple Register/Schema Filtering"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Objects from multiple registers\nGET /api/publications?register[]=5&register[]=6&register[]=7\n\n# Objects from multiple schemas\nGET /api/publications?schema[]=24&schema[]=25\n\n# Complex combinations\nGET /api/publications?register[]=5&register[]=6&schema[]=24&schema[]=25\n"})}),"\n",(0,r.jsx)(n.h4,{id:"combined-with-metadata-filters",children:"Combined with Metadata Filters"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Date filtering across multiple registers\nGET /api/publications?register[]=5&register[]=6&@self[created][gte]=2025-06-25T00:00:00\n\n# Schema filtering with content search\nGET /api/publications?schema=24&@self[title][~]=budget&_search=annual\n\n# Complex multi-criteria search\nGET /api/publications?register=5&schema[]=24&schema[]=25&@self[published][exists]=true&@self[created][gte]=2025-01-01T00:00:00\n"})}),"\n",(0,r.jsx)(n.h3,{id:"comparison-openregister-vs-publications-endpoints",children:"Comparison: OpenRegister vs Publications Endpoints"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"OpenRegister Endpoint"}),(0,r.jsx)(n.th,{children:"Publications Endpoint"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"URL Format"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/api/objects/5/24?filters"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/api/publications?register=5&schema=24&filters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cross-register"}),(0,r.jsx)(n.td,{children:"\u274c Not supported"}),(0,r.jsx)(n.td,{children:"\u2705 Supported"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Multiple schemas"}),(0,r.jsx)(n.td,{children:"\u274c Single schema only"}),(0,r.jsx)(n.td,{children:"\u2705 Multiple schemas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"URL complexity"}),(0,r.jsx)(n.td,{children:"Higher (path parameters)"}),(0,r.jsx)(n.td,{children:"Lower (query parameters)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Filter flexibility"}),(0,r.jsx)(n.td,{children:"Limited by path structure"}),(0,r.jsx)(n.td,{children:"Full query parameter flexibility"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"migration-example",children:"Migration Example"}),"\n",(0,r.jsx)(n.p,{children:"Convert existing OpenRegister queries to use the publications endpoint:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# OpenRegister format\nGET /api/objects/5/24?@self[created][gte]=2025-06-25T00:00:00&@self[title][~]=budget\n\n# Equivalent Publications format  \nGET /api/publications?register=5&schema=24&@self[created][gte]=2025-06-25T00:00:00&@self[title][~]=budget\n\n# Enhanced Publications format (multiple schemas)\nGET /api/publications?register=5&schema[]=24&schema[]=25&@self[created][gte]=2025-06-25T00:00:00&@self[title][~]=budget\n"})}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-each-endpoint",children:"When to Use Each Endpoint"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Use OpenRegister endpoints (",(0,r.jsx)(n.code,{children:"/api/objects/{register}/{schema}"}),") when:"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Working with a single, specific register and schema"}),"\n",(0,r.jsx)(n.li,{children:"Building register-specific applications"}),"\n",(0,r.jsx)(n.li,{children:"Need guaranteed register/schema validation in URL routing"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Use Publications endpoint (",(0,r.jsx)(n.code,{children:"/api/publications"}),") when:"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Searching across multiple registers or schemas"}),"\n",(0,r.jsx)(n.li,{children:"Building general-purpose search interfaces"}),"\n",(0,r.jsx)(n.li,{children:"Need maximum query flexibility"}),"\n",(0,r.jsx)(n.li,{children:"Want cleaner, more maintainable URLs"}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Open Catalogi Installation",type:"tip",children:(0,r.jsxs)(n.p,{children:["The publications endpoint requires Open Catalogi to be installed and configured alongside OpenRegister. If you don't see the ",(0,r.jsx)(n.code,{children:"/api/publications"})," endpoint, check your Open Catalogi installation."]})}),"\n",(0,r.jsx)(n.h2,{id:"metadata-filtering",children:"Metadata Filtering"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister supports comprehensive filtering on object metadata using query parameters. All metadata fields can be filtered using the '@self' prefix followed by the field name and optional operator."}),"\n",(0,r.jsx)(n.h3,{id:"core-metadata-fields",children:"Core Metadata Fields"}),"\n",(0,r.jsx)(n.p,{children:"The following metadata fields are available for filtering on all objects:"}),"\n",(0,r.jsx)(n.h4,{id:"system-fields",children:"System Fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"id"})}),(0,r.jsx)(n.td,{children:"Object unique identifier"}),(0,r.jsx)(n.td,{children:"UUID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[id]=550e8400-e29b-41d4-a716-446655440000"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uuid"})}),(0,r.jsx)(n.td,{children:"Object universal unique ID"}),(0,r.jsx)(n.td,{children:"UUID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[uuid]=550e8400-e29b-41d4-a716-446655440000"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"register"})}),(0,r.jsx)(n.td,{children:"Register ID or slug"}),(0,r.jsx)(n.td,{children:"Integer/String"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"@self[register]=5"})," or ",(0,r.jsx)(n.code,{children:"@self[register]=pets"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"schema"})}),(0,r.jsx)(n.td,{children:"Schema ID or slug"}),(0,r.jsx)(n.td,{children:"Integer/String"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"@self[schema]=24"})," or ",(0,r.jsx)(n.code,{children:"@self[schema]=animal"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"version"})}),(0,r.jsx)(n.td,{children:"Object version number"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[version]=1.0.0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"size"})}),(0,r.jsx)(n.td,{children:"Object size in bytes"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[size][gte]=1024"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"schemaVersion"})}),(0,r.jsx)(n.td,{children:"Schema version used"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[schemaVersion]=2.1.0"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"timestamps",children:"Timestamps"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created"})}),(0,r.jsx)(n.td,{children:"Creation timestamp"}),(0,r.jsx)(n.td,{children:"DateTime"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[created][gte]=2025-06-25T00:00:00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"updated"})}),(0,r.jsx)(n.td,{children:"Last update timestamp"}),(0,r.jsx)(n.td,{children:"DateTime"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[updated][lt]=2025-06-30T23:59:59"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"published"})}),(0,r.jsx)(n.td,{children:"Publication timestamp"}),(0,r.jsx)(n.td,{children:"DateTime"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[published][gte]=2025-01-01T00:00:00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"depublished"})}),(0,r.jsx)(n.td,{children:"Depublication timestamp"}),(0,r.jsx)(n.td,{children:"DateTime"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[depublished][lte]=2025-12-31T23:59:59"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"content-fields",children:"Content Fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"Object name"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name][~]=Annual Report"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"description"})}),(0,r.jsx)(n.td,{children:"Object description"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[description][$]=implementation"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uri"})}),(0,r.jsx)(n.td,{children:"Object URI"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[uri][^]=https://api.example.com"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"folder"})}),(0,r.jsx)(n.td,{children:"Object folder path"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[folder][~]=documents"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"ownership--access",children:"Ownership & Access"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"organization"})}),(0,r.jsx)(n.td,{children:"Owning organization ID"}),(0,r.jsx)(n.td,{children:"UUID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[organization]=550e8400-e29b-41d4-a716-446655440000"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"application"})}),(0,r.jsx)(n.td,{children:"Source application ID"}),(0,r.jsx)(n.td,{children:"UUID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[application]=550e8400-e29b-41d4-a716-446655440000"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"owner"})}),(0,r.jsx)(n.td,{children:"Object owner"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[owner]=john.doe"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"license"})}),(0,r.jsx)(n.td,{children:"Object license"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[license]=CC-BY-4.0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"source"})}),(0,r.jsx)(n.td,{children:"Data source identifier"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[source]=external-api"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"status--state",children:"Status & State"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"hash"})}),(0,r.jsx)(n.td,{children:"Object content hash"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[hash]=a1b2c3d4e5f6"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uri"})}),(0,r.jsx)(n.td,{children:"Object URI"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[uri][~]=api.example.com"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"filtering-operators",children:"Filtering Operators"}),"\n",(0,r.jsx)(n.p,{children:"All metadata fields support the following operators for precise filtering:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Operator"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"="})}),(0,r.jsx)(n.td,{children:"Equals (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name]=annual report"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ne"})}),(0,r.jsx)(n.td,{children:"Not equals (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[status][ne]=draft"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gt"})}),(0,r.jsx)(n.td,{children:"Greater than"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[version][gt]=1"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lt"})}),(0,r.jsx)(n.td,{children:"Less than"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[version][lt]=5"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gte"})}),(0,r.jsx)(n.td,{children:"Greater than or equal"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[created][gte]=2025-01-01T00:00:00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lte"})}),(0,r.jsx)(n.td,{children:"Less than or equal"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[updated][lte]=2025-12-31T23:59:59"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"~"})}),(0,r.jsx)(n.td,{children:"Contains (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[description][~]=budget"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"^"})}),(0,r.jsx)(n.td,{children:"Starts with (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name][^]=annual"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$"})}),(0,r.jsx)(n.td,{children:"Ends with (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name][$]=2025"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"==="})}),(0,r.jsx)(n.td,{children:"Equals (case sensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name][===]=Annual Report"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"exists"})}),(0,r.jsx)(n.td,{children:"Property exists check"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[published][exists]=true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"empty"})}),(0,r.jsx)(n.td,{children:"Empty value check"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[summary][empty]=true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"null"})}),(0,r.jsx)(n.td,{children:"Null value check"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[depublished][null]=true"})})]})]})]}),"\n",(0,r.jsxs)(n.admonition,{title:"Why Operator Names Instead of Mathematical Symbols?",type:"info",children:[(0,r.jsxs)(n.p,{children:["We use operator names like ",(0,r.jsx)(n.code,{children:"gte"}),", ",(0,r.jsx)(n.code,{children:"lte"}),", ",(0,r.jsx)(n.code,{children:"gt"}),", ",(0,r.jsx)(n.code,{children:"lt"}),", and ",(0,r.jsx)(n.code,{children:"ne"})," instead of mathematical symbols like ",(0,r.jsx)(n.code,{children:">="}),", ",(0,r.jsx)(n.code,{children:"<="}),", ",(0,r.jsx)(n.code,{children:">"}),", ",(0,r.jsx)(n.code,{children:"<"}),", and ",(0,r.jsx)(n.code,{children:"!="})," to avoid URL encoding problems."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The Problem:"}),"\nWhen using mathematical symbols in URL parameters, they get URL encoded:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"age[>=]=5"})," becomes ",(0,r.jsx)(n.code,{children:"age[%3E=]=5"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"weight[<=]=10"})," becomes ",(0,r.jsx)(n.code,{children:"weight[%3C=]=10"})]}),"\n"]}),(0,r.jsxs)(n.p,{children:["This URL encoding can cause parsing issues with PHP's ",(0,r.jsx)(n.code,{children:"$_GET"})," parameter processing, especially when operators are used within array key brackets."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The Solution:"}),"\nUsing descriptive operator names ensures clean, readable URLs:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"age[gte]=5"})," (greater than or equal)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"weight[lte]=10"})," (less than or equal)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name[ne]=test"})," (not equal)"]}),"\n"]}),(0,r.jsx)(n.p,{children:"This approach maintains compatibility across different web servers and ensures reliable parameter parsing."})]}),"\n",(0,r.jsx)(n.h3,{id:"metadata-filtering-examples",children:"Metadata Filtering Examples"}),"\n",(0,r.jsx)(n.h4,{id:"basic-metadata-filtering",children:"Basic Metadata Filtering"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Filter by register\nGET /api/objects/5/24?@self[register]=5\n\n# Filter by creation date\nGET /api/objects/5/24?@self[created][gte]=2025-06-01T00:00:00\n\n# Filter by name containing specific text\nGET /api/objects/5/24?@self[name][~]=budget\n\n# Filter by published objects\nGET /api/objects/5/24?@self[published][exists]=true\n"})}),"\n",(0,r.jsx)(n.h4,{id:"advanced-metadata-combinations",children:"Advanced Metadata Combinations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Objects created after date AND belonging to specific organization\nGET /api/objects/5/24?@self[created][gte]=2025-01-01T00:00:00&@self[organization]=550e8400-e29b-41d4-a716-446655440000\n\n# Published objects with specific name pattern\nGET /api/objects/5/24?@self[published][exists]=true&@self[name][^]=Annual\n\n# Objects updated within date range\nGET /api/objects/5/24?@self[updated][gte]=2025-06-01T00:00:00&@self[updated][lte]=2025-06-30T23:59:59\n\n# Exclude draft objects\nGET /api/objects/5/24?@self[status][ne]=draft\n"})}),"\n",(0,r.jsx)(n.h4,{id:"register-and-schema-filtering",children:"Register and Schema Filtering"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Objects from multiple registers (when using general search endpoints)\nGET /api/search?@self[register][]=5&@self[register][]=6\n\n# Objects with specific schema\nGET /api/search?@self[schema]=24\n\n# Combined register, schema, and date filter\nGET /api/search?@self[register]=5&@self[schema]=24&@self[created][gte]=2025-06-25T00:00:00\n"})}),"\n",(0,r.jsx)(n.h2,{id:"date-format-handling",children:"Date Format Handling"}),"\n",(0,r.jsxs)(n.p,{children:["When working with date fields like ",(0,r.jsx)(n.code,{children:"created"}),", ",(0,r.jsx)(n.code,{children:"updated"}),", ",(0,r.jsx)(n.code,{children:"published"}),", and ",(0,r.jsx)(n.code,{children:"depublished"}),", it's important to understand the date format requirements."]}),"\n",(0,r.jsx)(n.h3,{id:"standard-date-format",children:"Standard Date Format"}),"\n",(0,r.jsxs)(n.p,{children:["Open Register uses ISO 8601 date format ",(0,r.jsx)(n.strong,{children:"without timezone suffixes"})," for optimal database compatibility:"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Correct Format:"})," ",(0,r.jsx)(n.code,{children:"2025-06-23T14:30:00"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Avoid:"})," ",(0,r.jsx)(n.code,{children:"2025-06-23T14:30:00.000Z"})," or ",(0,r.jsx)(n.code,{children:"2025-06-23T14:30:00+00:00"})]}),"\n",(0,r.jsx)(n.h3,{id:"date-range-examples",children:"Date Range Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Objects created after June 21, 2025 at 22:00\nGET /api/objects?@self[created][gte]=2025-06-21T22:00:00\n\n# Objects updated before June 25, 2025 \nGET /api/objects?@self[updated][lt]=2025-06-25T00:00:00\n\n# Objects published within a specific date range\nGET /api/objects?@self[published][gte]=2025-06-01T00:00:00&@self[published][lte]=2025-06-30T23:59:59\n"})}),"\n",(0,r.jsx)(n.h3,{id:"frontend-implementation",children:"Frontend Implementation"}),"\n",(0,r.jsx)(n.p,{children:"When implementing date filters in JavaScript/frontend code, ensure you convert dates to the correct format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Convert Date object to OpenRegister format\nconst formatDateForOpenRegister = (date) => {\n    if (!date) return null\n    // Remove timezone info to match database format\n    return new Date(date).toISOString().replace(/\\.000Z$/, '')\n}\n\n// Example usage\nconst fromDate = formatDateForOpenRegister(new Date('2025-06-21'))\n// Result: '2025-06-21T00:00:00'\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"This standardized format ensures consistent date comparisons across different timezones and database configurations."})}),"\n",(0,r.jsx)(n.h2,{id:"full-text-search",children:"Full Text Search"}),"\n",(0,r.jsx)(n.p,{children:"The '_search' parameter allows searching across all text properties of objects in a case-insensitive way:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=nemo\n"})}),"\n",(0,r.jsx)(n.p,{children:'This searches for "nemo" in all text fields like name, description, notes etc.'}),"\n",(0,r.jsx)(n.h3,{id:"wildcard-search",children:"Wildcard Search"}),"\n",(0,r.jsx)(n.p,{children:"You can use wildcards in the search term:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"*"})," matches zero or more characters"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=ne*o\n"})}),"\n",(0,r.jsx)(n.p,{children:'Matches "nemo", "negro", "neuro" etc.'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"?"})," matches exactly one character"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=ne?o\n"})}),"\n",(0,r.jsx)(n.p,{children:'Matches "nemo", "nero" but not "neuro"'}),"\n",(0,r.jsx)(n.h3,{id:"pattern-matching",children:"Pattern Matching"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"^"})," matches start of text"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=^ne\n"})}),"\n",(0,r.jsx)(n.p,{children:'Matches text starting with "ne"'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$"})," matches end of text"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=mo$\n"})}),"\n",(0,r.jsx)(n.p,{children:'Matches text ending with "mo"'}),"\n",(0,r.jsx)(n.h3,{id:"phrase-search",children:"Phrase Search"}),"\n",(0,r.jsx)(n.p,{children:"Use quotes for exact phrase matching:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'GET /api/pets?_search="orange fish"\n'})}),"\n",(0,r.jsx)(n.p,{children:'Matches the exact phrase "orange fish"'}),"\n",(0,r.jsx)(n.h2,{id:"basic-search",children:"Basic Search"}),"\n",(0,r.jsx)(n.p,{children:"Simple equals search (case insensitive):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name=nemo\n"})}),"\n",(0,r.jsx)(n.p,{children:'This returns all pets named "nemo", "Nemo", "NEMO", etc.'}),"\n",(0,r.jsx)(n.p,{children:"Case sensitive search:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[===]=Nemo\n"})}),"\n",(0,r.jsx)(n.p,{children:'This returns only pets named exactly "Nemo".'}),"\n",(0,r.jsx)(n.h2,{id:"comparison-operators",children:"Comparison Operators"}),"\n",(0,r.jsxs)(n.h3,{id:"not-equals-ne",children:["Not Equals ",(0,r.jsx)(n.code,{children:"ne"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[ne]=nemo\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns all pets NOT named "nemo" (case insensitive)'}),"\n",(0,r.jsxs)(n.h3,{id:"greater-than-gt",children:["Greater Than ",(0,r.jsx)(n.code,{children:"gt"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[gt]=5\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets older than 5 years"}),"\n",(0,r.jsxs)(n.h3,{id:"less-than-lt",children:["Less Than ",(0,r.jsx)(n.code,{children:"lt"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?weight[lt]=10\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets weighing less than 10kg"}),"\n",(0,r.jsxs)(n.h3,{id:"greater-than-or-equal-gte",children:["Greater Than or Equal ",(0,r.jsx)(n.code,{children:"gte"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[gte]=2\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets 2 years or older"}),"\n",(0,r.jsxs)(n.h3,{id:"less-than-or-equal-lte",children:["Less Than or Equal ",(0,r.jsx)(n.code,{children:"lte"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[lte]=10\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets 10 years or younger"}),"\n",(0,r.jsxs)(n.h3,{id:"contains-",children:["Contains ",(0,r.jsx)(n.code,{children:"~"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[~]=ne\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets with "ne" in their name (like "nemo", "nero", "Nemo", etc) - case insensitive'}),"\n",(0,r.jsxs)(n.h3,{id:"starts-with-",children:["Starts With ",(0,r.jsx)(n.code,{children:"^"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[^]=ne\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets whose names start with "ne" (case insensitive)'}),"\n",(0,r.jsxs)(n.h3,{id:"ends-with-",children:["Ends With ",(0,r.jsx)(n.code,{children:"$"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[$]=mo\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets whose names end with "mo" (case insensitive)'}),"\n",(0,r.jsx)(n.h2,{id:"combining-multiple-conditions",children:"Combining Multiple Conditions"}),"\n",(0,r.jsx)(n.h3,{id:"and-operations",children:"AND Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name=nemo&type=fish\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets named "nemo" (case insensitive) AND of type "fish"'}),"\n",(0,r.jsx)(n.h3,{id:"or-operations",children:"OR Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[]=nemo&name[]=dory\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets named either "nemo" OR "dory" (case insensitive)'}),"\n",(0,r.jsx)(n.h2,{id:"special-filters",children:"Special Filters"}),"\n",(0,r.jsx)(n.h3,{id:"exists-check",children:"Exists Check"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?microchip[exists]=true\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets that have a microchip property"}),"\n",(0,r.jsx)(n.h3,{id:"empty-check",children:"Empty Check"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?notes[empty]=true\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets with empty notes"}),"\n",(0,r.jsx)(n.h3,{id:"null-check",children:"Null Check"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?owner[null]=true\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets with no owner"}),"\n",(0,r.jsx)(n.h3,{id:"between-range",children:"Between Range"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[gte]=2&age[lte]=5\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets between 2 and 5 years old (inclusive)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[gt]=2&age[lt]=5\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets between 2 and 5 years old (exclusive)"}),"\n",(0,r.jsx)(n.h2,{id:"searching-nested-properties",children:"Searching Nested Properties"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?owner.city=Amsterdam\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets whose owners live in Amsterdam (case insensitive)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?vaccinations.date[gt]=2023-01-01\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets with vaccinations after January 1st, 2023"}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Use URL encoding for special characters"}),"\n",(0,r.jsx)(n.li,{children:"Keep queries focused and specific"}),"\n",(0,r.jsx)(n.li,{children:"Use pagination for large result sets"}),"\n",(0,r.jsx)(n.li,{children:"Consider URL length limitations"}),"\n",(0,r.jsx)(n.li,{children:"Break complex queries into multiple requests if needed"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,r.jsx)(n.h3,{id:"indexing",children:"Indexing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Core metadata fields (",(0,r.jsx)(n.code,{children:"id"}),", ",(0,r.jsx)(n.code,{children:"uuid"}),", ",(0,r.jsx)(n.code,{children:"created"}),", ",(0,r.jsx)(n.code,{children:"updated"}),", ",(0,r.jsx)(n.code,{children:"register"}),", ",(0,r.jsx)(n.code,{children:"schema"}),") are automatically indexed"]}),"\n",(0,r.jsx)(n.li,{children:"Date fields support efficient range queries"}),"\n",(0,r.jsxs)(n.li,{children:["String fields with operators like ",(0,r.jsx)(n.code,{children:"~"}),", ",(0,r.jsx)(n.code,{children:"^"}),", ",(0,r.jsx)(n.code,{children:"$"})," may be slower on large datasets"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"query-optimization",children:"Query Optimization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Efficient: Use indexed fields first\nGET /api/objects/5/24?@self[created][gte]=2025-01-01&@self[title][~]=budget\n\n# Less efficient: Complex string operations on large datasets\nGET /api/objects/5/24?@self[description][~]=very_specific_text\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pagination-with-metadata-filters",children:"Pagination with Metadata Filters"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Always use pagination with filters\nGET /api/objects/5/24?@self[created][gte]=2025-01-01&_limit=50&_offset=0\n"})}),"\n",(0,r.jsx)(n.h2,{id:"search-engine-implementation",children:"Search Engine Implementation"}),"\n",(0,r.jsx)(n.h3,{id:"solr-integration",children:"Solr Integration"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister uses Apache Solr as its search engine, providing powerful full-text search and faceting capabilities."}),"\n",(0,r.jsx)(n.h4,{id:"case-insensitive-search",children:"Case-Insensitive Search"}),"\n",(0,r.jsx)(n.p,{children:"All text searches are case-insensitive by default. The search implementation uses 'mb_strtolower()' to normalize search terms before querying Solr:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Search terms are normalized to lowercase\n$cleanTerm = mb_strtolower($cleanTerm);\n"})}),"\n",(0,r.jsx)(n.p,{children:"This ensures that searches work consistently regardless of input case:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'software' = 'SOFTWARE' = 'SoFtWaRe' (all return the same results)"}),"\n",(0,r.jsx)(n.li,{children:"Handles international characters correctly (\xe9, \xf1, \xfc, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Works with UTF-8 encoded strings"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The normalization happens before the query is sent to Solr, ensuring reliable search behavior across different Solr configurations."}),"\n",(0,r.jsx)(n.h4,{id:"ordering-and-sorting",children:"Ordering and Sorting"}),"\n",(0,r.jsx)(n.p,{children:"Objects can be ordered by metadata fields using the '_order' parameter:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sortable Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'@self.name' - Alphabetical by object name (uses 'self_name_s' Solr field)"}),"\n",(0,r.jsx)(n.li,{children:"'@self.published' - Chronological by published date"}),"\n",(0,r.jsx)(n.li,{children:"'@self.created' - Chronological by creation date"}),"\n",(0,r.jsx)(n.li,{children:"'@self.updated' - Chronological by update date"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sorting Directions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'asc' - Ascending order (A\u2192Z, oldest\u2192newest)"}),"\n",(0,r.jsx)(n.li,{children:"'desc' - Descending order (Z\u2192A, newest\u2192oldest)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Alphabetical order (A\u2192Z)\nGET /api/objects?_source=index&_order[@self.name]=asc\n\n# Reverse alphabetical (Z\u2192A)\nGET /api/objects?_source=index&_order[@self.name]=desc\n\n# Newest first\nGET /api/objects?_source=index&_order[@self.published]=desc\n\n# Oldest first\nGET /api/objects?_source=index&_order[@self.created]=asc\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Technical Implementation:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Text fields use sortable string variants (with '_s' suffix)"}),"\n",(0,r.jsx)(n.li,{children:"Solr schema includes sortable copies of searchable fields"}),"\n",(0,r.jsx)(n.li,{children:"Date fields use native Solr date sorting"}),"\n",(0,r.jsx)(n.li,{children:"Field mapping handled by 'translateSortableField()' method"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"search-performance",children:"Search Performance"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Weighted Field Search:"}),"\nThe search engine uses weighted field boosting to prioritize matches in certain fields:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Example weights\n'self_name^10'        // Name field has highest priority\n'self_title^8'        // Title field is second priority\n'self_description^5'  // Description has medium priority\n'self_summary^3'      // Summary has lower priority\n"})}),"\n",(0,r.jsx)(n.p,{children:"This ensures that matches in object names are ranked higher than matches in descriptions."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Field Types in Solr:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'text_general' - Analyzed text fields (tokenized, lowercased, stemmed)"}),"\n",(0,r.jsx)(n.li,{children:"'string' - Exact value fields (not tokenized, for sorting/faceting)"}),"\n",(0,r.jsx)(n.li,{children:"'date' - ISO 8601 date fields (for range queries and sorting)"}),"\n",(0,r.jsx)(n.li,{children:"UUID fields - String fields for identifiers"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"testing-search",children:"Testing Search"}),"\n",(0,r.jsx)(n.p,{children:"The search implementation includes comprehensive integration tests:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Test Coverage:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Case-insensitive search (lowercase, uppercase, mixed case)"}),"\n",(0,r.jsx)(n.li,{children:"Ordering by name (ascending, descending)"}),"\n",(0,r.jsx)(n.li,{children:"Ordering by dates (chronological, reverse chronological)"}),"\n",(0,r.jsx)(n.li,{children:"Combined filters with search"}),"\n",(0,r.jsx)(n.li,{children:"Pagination with ordering"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Running Tests:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Run all search tests\nvendor/bin/phpunit tests/Integration/CoreIntegrationTest.php --filter "testCaseInsensitive|testOrdering"\n\n# Run specific test\nvendor/bin/phpunit tests/Integration/CoreIntegrationTest.php --filter testCaseInsensitiveSearchLowercase\n'})}),"\n",(0,r.jsx)(n.p,{children:"See 'SOLR_TESTING_GUIDE.md' in the repository for detailed testing procedures."}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.h3,{id:"invalid-field-names",children:"Invalid Field Names"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Invalid field name: @self[invalid_field]",\n  "code": 400\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"invalid-operators",children:"Invalid Operators"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Invalid operator: @self[created][invalid_op]",\n  "code": 400\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"invalid-date-formats",children:"Invalid Date Formats"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Invalid date format. Expected: YYYY-MM-DDTHH:MM:SS",\n  "code": 400\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,r.jsx)(n.p,{children:"This section provides detailed technical information about how search is implemented in OpenRegister."}),"\n",(0,r.jsx)(n.h3,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister uses Apache Solr as its search engine, providing powerful full-text search, faceting, and filtering capabilities:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TB\n    A[API Request] --\x3e B[ObjectService]\n    B --\x3e C{Check _source param}\n    C --\x3e|database| D[ObjectEntityMapper]\n    C --\x3e|index| E[GuzzleSolrService]\n    \n    D --\x3e F[(MySQL Database)]\n    F --\x3e G[SQL Query]\n    G --\x3e H[ResultSet]\n    \n    E --\x3e I{SOLR Available?}\n    I --\x3e|No| J[Return Empty Results]\n    I --\x3e|Yes| K[Build SOLR Query]\n    K --\x3e L[Apply Filters]\n    L --\x3e M[Add Facets]\n    M --\x3e N[Execute Search]\n    N --\x3e O[(Apache Solr)]\n    O --\x3e P[Process Results]\n    P --\x3e Q[Reconstruct Objects]\n    \n    H --\x3e R[ObjectEntity Array]\n    Q --\x3e R\n    R --\x3e S[Apply Extensions]\n    S --\x3e T[Return Results]\n    \n    style E fill:#e1f5ff\n    style O fill:#e1ffe1\n    style F fill:#fff4e1\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Components:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ObjectService"}),": High-level orchestration, determines search mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GuzzleSolrService"}),": Main service for Solr integration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ObjectEntityMapper"}),": Database access for non-Solr searches"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query Builder"}),": Translates OpenRegister queries to Solr queries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Filter Processor"}),": Handles metadata and property filters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Facet Engine"}),": Generates facet aggregations"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"search-request-flow",children:"Search Request Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant Client\n    participant API\n    participant ObjectService\n    participant SolrService\n    participant Solr\n    \n    Client->>API: GET /api/objects?_source=index&_search=budget\n    API->>ObjectService: findObjects(_search=budget)\n    \n    Note over ObjectService: Check _source parameter\n    ObjectService->>ObjectService: _source=index? Use Solr\n    \n    ObjectService->>SolrService: searchObjects(query)\n    \n    Note over SolrService: 1. Validate SOLR available\n    SolrService->>SolrService: isAvailable()\n    SolrService->>SolrService: getActiveCollectionName()\n    \n    Note over SolrService: 2. Build SOLR query\n    SolrService->>SolrService: buildSolrQuery(searchParams)\n    SolrService->>SolrService: buildWeightedSearchQuery('budget')\n    SolrService->>SolrService: applyFilters()\n    SolrService->>SolrService: applyFacets()\n    \n    Note over SolrService: 3. Execute search\n    SolrService->>Solr: GET /collection/select?q=...\n    Solr--\x3e>SolrService: SOLR Response\n    \n    Note over SolrService: 4. Process results\n    SolrService->>SolrService: processSearchResults()\n    SolrService->>SolrService: reconstructObjects()\n    \n    SolrService--\x3e>ObjectService: Results array\n    ObjectService--\x3e>API: JSON response\n    API--\x3e>Client: Search results\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Search Flow Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Request Validation"}),": Check for '_source=index' parameter to enable Solr search"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SOLR Availability"}),": Verify Solr service is available and collection exists"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query Building"}),": Convert OpenRegister query to Solr query syntax"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Filter Application"}),": Apply metadata filters, RBAC, multi-tenancy"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Facet Generation"}),": Add facet aggregations if requested"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Search Execution"}),": Send query to Solr and retrieve results"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Result Processing"}),": Convert Solr documents to OpenRegister format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Object Reconstruction"}),": Hydrate full object data from 'self_object' field"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"query-building-process",children:"Query Building Process"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    A[OpenRegister Query] --\x3e B[buildSolrQuery]\n    B --\x3e C[Parse _search parameter]\n    C --\x3e D[buildWeightedSearchQuery]\n    D --\x3e E[Add field boosting]\n    \n    B --\x3e F[Parse filters]\n    F --\x3e G[@self metadata filters]\n    F --\x3e H[Property filters]\n    G --\x3e I[buildFilterQuery]\n    H --\x3e I\n    I --\x3e J[Apply operators]\n    \n    B --\x3e K[Parse sorting]\n    K --\x3e L[translateSortField]\n    L --\x3e M[Map to Solr fields]\n    \n    B --\x3e N[Parse pagination]\n    N --\x3e O[Calculate start/rows]\n    \n    B --\x3e P[Parse facets]\n    P --\x3e Q[Get facetable fields]\n    Q --\x3e R[Add facet.field params]\n    \n    E --\x3e S[Complete SOLR Query]\n    J --\x3e S\n    M --\x3e S\n    O --\x3e S\n    R --\x3e S\n    \n    style B fill:#e1f5ff\n    style S fill:#e1ffe1\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Query Translation Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:'// OpenRegister Query\n{\n  "_search": "annual report",\n  "_limit": 20,\n  "_page": 1,\n  "_order": {"@self.created": "desc"},\n  "@self": {\n    "register": "5",\n    "created": {"gte": "2025-01-01T00:00:00"}\n  },\n  "status": "published",\n  "_facetable": true\n}\n\n// Translated SOLR Query\n{\n  "q": "(self_name:(annual report)^10 OR self_summary:(annual report)^5 OR self_description:(annual report)^2)",\n  "fq": [\n    "self_register:5",\n    "self_created:[2025-01-01T00:00:00Z TO *]",\n    "status_s:published"\n  ],\n  "start": 0,\n  "rows": 20,\n  "sort": "self_created desc",\n  "facet": "true",\n  "facet.field": ["status_s", "self_register_i", "category_s"]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"weighted-search-implementation",children:"Weighted Search Implementation"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister implements intelligent field weighting to improve search relevance:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"private function buildWeightedSearchQuery(string $searchTerm): string\n{\n    $cleanTerm = $this->escapeSolrValue($searchTerm);\n    \n    // Wildcard support for partial matching\n    $wildcardTerm = '*' . $cleanTerm . '*';\n    \n    // Build query with field-specific boosting\n    $queryParts = [\n        \"self_name:($wildcardTerm)^10\",      // Highest priority\n        \"self_summary:($wildcardTerm)^5\",    // Medium-high priority\n        \"self_description:($wildcardTerm)^2\" // Medium priority\n    ];\n    \n    return '(' . implode(' OR ', $queryParts) . ')';\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Field Weight Rationale:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Name (10x)"}),": Most important identifier, should rank highest"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Summary (5x)"}),": Key information, deserves strong ranking"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description (2x)"}),": Detailed content, moderate ranking boost"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Other fields (1x)"}),": Standard relevance scoring"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"filter-operators",children:"Filter Operators"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister supports comprehensive filter operators that are translated to Solr query syntax:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"OpenRegister"}),(0,r.jsx)(n.th,{children:"Solr Syntax"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'=' (equals)"}),(0,r.jsxs)(n.td,{children:["'",":value","'"]}),(0,r.jsxs)(n.td,{children:["'status_s",":active","'"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'ne' (not equals)"}),(0,r.jsxs)(n.td,{children:["'-field",":value","'"]}),(0,r.jsxs)(n.td,{children:["'-status_s",":inactive","'"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'gt' (greater than)"}),(0,r.jsx)(n.td,{children:"':{value TO *}'"}),(0,r.jsx)(n.td,{children:"'age_i:{30 TO *}'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'gte' (greater or equal)"}),(0,r.jsx)(n.td,{children:"':[value TO *]'"}),(0,r.jsx)(n.td,{children:"'age_i:[30 TO *]'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'lt' (less than)"}),(0,r.jsx)(n.td,{children:"':{* TO value}'"}),(0,r.jsx)(n.td,{children:"'age_i:{* TO 30}'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'lte' (less or equal)"}),(0,r.jsx)(n.td,{children:"':[* TO value]'"}),(0,r.jsx)(n.td,{children:"'age_i:[* TO 30]'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'~' (contains)"}),(0,r.jsx)(n.td,{children:"':*value*'"}),(0,r.jsx)(n.td,{children:"'name_s:*john*'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'^' (starts with)"}),(0,r.jsxs)(n.td,{children:["'",":value","*'"]}),(0,r.jsxs)(n.td,{children:["'name_s",":annual","*'"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'$' (ends with)"}),(0,r.jsx)(n.td,{children:"':*value'"}),(0,r.jsx)(n.td,{children:"'name_s:*2025'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'exists'"}),(0,r.jsx)(n.td,{children:"'field:[* TO *]'"}),(0,r.jsx)(n.td,{children:"'published:[* TO *]'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'null'"}),(0,r.jsx)(n.td,{children:"'-field:[* TO *]'"}),(0,r.jsx)(n.td,{children:"'-published:[* TO *]'"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"performance-optimizations",children:"Performance Optimizations"}),"\n",(0,r.jsx)(n.h4,{id:"1-schema-analysis-caching",children:"1. Schema Analysis Caching"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Pre-compute facet configuration when schema is saved\n$schema->setFacets($this->analyzeFacetableFields($schema));\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Eliminates runtime schema analysis"}),"\n",(0,r.jsx)(n.li,{children:"Reduces search request latency"}),"\n",(0,r.jsx)(n.li,{children:"Improves scalability"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2-query-result-caching",children:"2. Query Result Caching"}),"\n",(0,r.jsx)(n.p,{children:"Search results are cached to improve performance for repeated queries:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"TTL: 300 seconds (5 minutes)"}),"\n",(0,r.jsx)(n.li,{children:"Storage: PSR-6 compliant cache"}),"\n",(0,r.jsx)(n.li,{children:"Invalidation: On object updates"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"3-bulk-indexing",children:"3. Bulk Indexing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Index multiple objects in single request\n$this->bulkIndex($documents, $commit = false);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Optimization:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Batch size: 1000 documents"}),"\n",(0,r.jsx)(n.li,{children:"Deferred commits"}),"\n",(0,r.jsx)(n.li,{children:"Optimized for bulk imports"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"4-selective-field-loading",children:"4. Selective Field Loading"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Load only required fields from SOLR\n$solrQuery['fl'] = 'id,self_uuid,self_name,self_created';\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Reduced network transfer"}),"\n",(0,r.jsx)(n.li,{children:"Faster deserialization"}),"\n",(0,r.jsx)(n.li,{children:"Lower memory usage"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-and-debugging",children:"Monitoring and Debugging"}),"\n",(0,r.jsx)(n.h4,{id:"query-logging",children:"Query Logging"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$this->logger->debug('Executing SOLR search', [\n    'original_query' => $query,\n    'solr_query' => $solrQuery,\n    'collection' => $collectionName,\n    'execution_time_ms' => $executionTime\n]);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"performance-metrics",children:"Performance Metrics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$metrics = [\n    'searches' => $this->stats['searches'],\n    'indexes' => $this->stats['indexes'],\n    'search_time' => $this->stats['search_time'],\n    'index_time' => $this->stats['index_time'],\n    'errors' => $this->stats['errors']\n];\n"})}),"\n",(0,r.jsx)(n.h4,{id:"health-checks",children:"Health Checks"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check SOLR availability\nGET /api/solr/health\n\n# Response\n{\n  "available": true,\n  "collection": "openregister_nextcloud_core",\n  "document_count": 1234,\n  "index_size_mb": 45.6\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"error-handling-flow",children:"Error Handling Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    A[Search Request] --\x3e B{SOLR Available?}\n    B --\x3e|No| C[Return Empty Results]\n    B --\x3e|Yes| D{Collection Exists?}\n    D --\x3e|No| E[Create Collection]\n    D --\x3e|Yes| F[Execute Query]\n    E --\x3e F\n    F --\x3e G{Query Success?}\n    G --\x3e|No| H[Log Error]\n    G --\x3e|Yes| I[Process Results]\n    H --\x3e C\n    I --\x3e J[Return Results]\n    \n    style C fill:#ffe1e1\n    style J fill:#e1ffe1\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error Scenarios:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SOLR Unavailable"}),": Return empty results with warning"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Collection Missing"}),": Auto-create collection, retry query"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query Syntax Error"}),": Log error, return validation message"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timeout"}),": Reduce query complexity, retry with simplified query"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Result Too Large"}),": Apply pagination, warn about result size"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(n.h4,{id:"building-a-search-query",children:"Building a Search Query"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\GuzzleSolrService;\n\n// Execute search with filters\n$results = $solrService->searchObjects([\n    '_search' => 'annual report',\n    '_limit' => 20,\n    '_page' => 1,\n    '_order' => ['@self.created' => 'desc'],\n    '@self' => [\n        'register' => '5',\n        'created' => ['gte' => '2025-01-01T00:00:00']\n    ],\n    'status' => 'published',\n    '_facetable' => true\n]);\n\n// Access results\n$objects = $results['data'];\n$total = $results['total'];\n$facets = $results['facets'];\n"})}),"\n",(0,r.jsx)(n.h4,{id:"custom-filter-processing",children:"Custom Filter Processing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Build custom filter query\n$filters = [];\n\n// Add metadata filters\nif (isset($query['@self'])) {\n    foreach ($query['@self'] as $field => $value) {\n        $filters[] = $this->buildMetadataFilter($field, $value);\n    }\n}\n\n// Add property filters\nforeach ($query as $key => $value) {\n    if ($key[0] !== '_' && $key !== '@self') {\n        $filters[] = $this->buildPropertyFilter($key, $value);\n    }\n}\n\n$solrQuery['fq'] = $filters;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Run all search tests\nvendor/bin/phpunit tests/Service/GuzzleSolrServiceTest.php\n\n# Test specific scenarios\nvendor/bin/phpunit --filter testWeightedSearch\nvendor/bin/phpunit --filter testFacetedSearch\nvendor/bin/phpunit --filter testFilterOperators\n\n# Integration tests\nvendor/bin/phpunit tests/Integration/SearchIntegrationTest.php\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Test Coverage:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Query building and translation"}),"\n",(0,r.jsx)(n.li,{children:"Filter operator processing"}),"\n",(0,r.jsx)(n.li,{children:"Facet generation"}),"\n",(0,r.jsx)(n.li,{children:"Result processing"}),"\n",(0,r.jsx)(n.li,{children:"Error handling"}),"\n",(0,r.jsx)(n.li,{children:"Performance benchmarks"}),"\n",(0,r.jsx)(n.li,{children:"Case-insensitive search"}),"\n",(0,r.jsx)(n.li,{children:"Ordering and sorting"}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);