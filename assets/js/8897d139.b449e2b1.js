"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[7106],{28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>l});var r=i(96540);const s={},t=r.createContext(s);function c(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(t.Provider,{value:n},e.children)}},98664:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"fixes/SEARCH_OPTIMIZATION","title":"Search Optimization Implementation","description":"Overview","source":"@site/docs/fixes/SEARCH_OPTIMIZATION.md","sourceDirName":"fixes","slug":"/fixes/SEARCH_OPTIMIZATION","permalink":"/docs/fixes/SEARCH_OPTIMIZATION","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/fixes/SEARCH_OPTIMIZATION.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Organisatie Schema Fix Summary","permalink":"/docs/fixes/SCHEMA_FIX_SUMMARY"},"next":{"title":"\ud83d\udd04 Smart Deduplication Impact: Required Changes and Communication","permalink":"/docs/fixes/SMART_DEDUPLICATION_IMPACT_AND_CHANGES"}}');var s=i(74848),t=i(28453);const c={},l="Search Optimization Implementation",a={},o=[{value:"Overview",id:"overview",level:2},{value:"Problem Statement",id:"problem-statement",level:2},{value:"Solution Implementation",id:"solution-implementation",level:2},{value:"1. Explicit Search Action",id:"1-explicit-search-action",level:3},{value:"2. Multiple Search Terms Support",id:"2-multiple-search-terms-support",level:3},{value:"3. Enhanced User Interface",id:"3-enhanced-user-interface",level:3},{value:"4. Performance Monitoring",id:"4-performance-monitoring",level:3},{value:"API Integration",id:"api-integration",level:2},{value:"Performance Improvements",id:"performance-improvements",level:2},{value:"Before Optimization:",id:"before-optimization",level:3},{value:"After Optimization:",id:"after-optimization",level:3},{value:"User Experience Improvements",id:"user-experience-improvements",level:2},{value:"Technical Benefits",id:"technical-benefits",level:2},{value:"Usage Guidelines",id:"usage-guidelines",level:2},{value:"For Users:",id:"for-users",level:3},{value:"For Developers:",id:"for-developers",level:3},{value:"Migration Notes",id:"migration-notes",level:2},{value:"Breaking Changes:",id:"breaking-changes",level:3},{value:"Backward Compatibility:",id:"backward-compatibility",level:3},{value:"Future Enhancements",id:"future-enhancements",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"search-optimization-implementation",children:"Search Optimization Implementation"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This document describes the search optimization improvements made to reduce excessive API calls and improve the user experience in the OpenRegister search functionality."}),"\n",(0,s.jsx)(n.h2,{id:"problem-statement",children:"Problem Statement"}),"\n",(0,s.jsx)(n.p,{children:"The original search implementation had several performance issues:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Excessive API Calls"}),": Typing 'test' would fire 4 separate API calls (one for each letter: 't', 'te', 'tes', 'test')"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Poor User Experience"}),": No visual feedback about search terms or performance"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automatic Search"}),": Search triggered automatically on every keystroke after 1 second delay"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Limited Search Capabilities"}),": Only single search terms supported"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"solution-implementation",children:"Solution Implementation"}),"\n",(0,s.jsx)(n.h3,{id:"1-explicit-search-action",children:"1. Explicit Search Action"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Before:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Automatic search on every keystroke\nsearchQuery(value) {\n    if (this.searchTimeout) {\n        clearTimeout(this.searchTimeout)\n    }\n    this.searchTimeout = setTimeout(() => {\n        // API call triggered automatically\n        objectStore.refreshObjectList(...)\n    }, 1000)\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Explicit search action\nasync performSearch() {\n    if (!this.canSearch) return;\n    \n    this.searchLoading = true;\n    const startTime = performance.now();\n    \n    // Only trigger API call when user explicitly searches\n    await objectStore.refreshObjectList({...});\n    \n    // Show performance feedback\n    const endTime = performance.now();\n    this.lastSearchStats = {\n        total: this.totalItems,\n        time: (endTime - startTime).toFixed(0),\n    };\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-multiple-search-terms-support",children:"2. Multiple Search Terms Support"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Features:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Support for comma and space-separated search terms"}),"\n",(0,s.jsx)(n.li,{children:"Visual representation with chips"}),"\n",(0,s.jsx)(n.li,{children:"Individual term removal capability"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Implementation:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"handleSearchInput() {\n    this.searchTerms = this.searchQuery.split(/[\\s,]+/).filter(term => term.trim() !== '');\n},\n\nremoveSearchTerm(index) {\n    this.searchTerms.splice(index, 1);\n    this.searchQuery = this.searchTerms.join(' ');\n    this.performSearch();\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-enhanced-user-interface",children:"3. Enhanced User Interface"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Search Section Features:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Moved to top of sidebar for better UX"}),"\n",(0,s.jsx)(n.li,{children:"Search button with loading indicator"}),"\n",(0,s.jsx)(n.li,{children:"Visual search term chips"}),"\n",(0,s.jsx)(n.li,{children:"Performance statistics display"}),"\n",(0,s.jsx)(n.li,{children:"Dynamic placeholder text"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Template Structure:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vue",children:'<div class="searchSection">\n    <h3>{{ t(\'openregister\', \'Search Objects\') }}</h3>\n    <div class="searchGroup">\n        <NcTextField v-model="searchQuery" />\n        <NcButton @click="performSearch">\n            <template #icon>\n                <NcLoadingIcon v-if="searchLoading" />\n                <Magnify v-else />\n            </template>\n            {{ t(\'openregister\', \'Search\') }}\n        </NcButton>\n    </div>\n    \n    \x3c!-- Search term chips --\x3e\n    <div v-if="searchTerms.length > 0" class="search-terms">\n        <NcChip v-for="(term, index) in searchTerms" \n                :key="index" \n                :text="term" \n                @delete="removeSearchTerm(index)" />\n    </div>\n    \n    \x3c!-- Performance stats --\x3e\n    <div v-if="lastSearchStats" class="search-stats">\n        {{ t(\'openregister\', \'Found {total} objects in {time}ms\', lastSearchStats) }}\n    </div>\n</div>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"4-performance-monitoring",children:"4. Performance Monitoring"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Search Statistics:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Total results found"}),"\n",(0,s.jsx)(n.li,{children:"Search execution time in milliseconds"}),"\n",(0,s.jsx)(n.li,{children:"Real-time feedback to users"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Implementation:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Performance timing\nconst startTime = performance.now();\nawait objectStore.refreshObjectList({...});\nconst endTime = performance.now();\n\nthis.lastSearchStats = {\n    total: this.totalItems,\n    time: (endTime - startTime).toFixed(0),\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"api-integration",children:"API Integration"}),"\n",(0,s.jsx)(n.p,{children:"The optimized search works with the existing ObjectsController.php and ObjectService.php:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"API Endpoint:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GET /index.php/apps/openregister/api/objects/{register}/{schema}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_search"}),": Combined search terms (space-separated)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_limit"}),": Results per page"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_page"}),": Current page"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_facetable"}),": Include facetable field discovery"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"_facets"}),": Facet configuration"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example Request:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GET /api/objects/4/22?_limit=20&_page=1&_search=test%20example&_facetable=true\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-improvements",children:"Performance Improvements"}),"\n",(0,s.jsx)(n.h3,{id:"before-optimization",children:"Before Optimization:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"4 API calls"})," for typing 'test' (t, te, tes, test)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automatic triggering"})," on every keystroke"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"No performance feedback"})," for users"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Single search term"})," limitation"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"after-optimization",children:"After Optimization:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"1 API call"})," per explicit search action"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"User-controlled"})," search execution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-time performance stats"})," (execution time, result count)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multiple search terms"})," with visual management"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Better UX"})," with loading states and feedback"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"user-experience-improvements",children:"User Experience Improvements"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Explicit Control"}),": Users control when searches are executed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Visual Feedback"}),": Loading indicators and performance statistics"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multiple Terms"}),": Support for complex search queries"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Term Management"}),": Easy addition/removal of search terms"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance Transparency"}),": Users see search execution time and result counts"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"technical-benefits",children:"Technical Benefits"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reduced Server Load"}),": Fewer unnecessary API calls"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Better Resource Usage"}),": No redundant searches"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Improved Responsiveness"}),": Faster UI interactions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Enhanced Debugging"}),": Performance metrics for troubleshooting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Scalability"}),": Better performance with large datasets"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"usage-guidelines",children:"Usage Guidelines"}),"\n",(0,s.jsx)(n.h3,{id:"for-users",children:"For Users:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Type search terms in the search field (separate multiple terms with commas or spaces)"}),"\n",(0,s.jsx)(n.li,{children:"Click the Search button or press Enter to execute the search"}),"\n",(0,s.jsx)(n.li,{children:"View performance statistics below the search field"}),"\n",(0,s.jsx)(n.li,{children:"Remove individual search terms by clicking the X on term chips"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"for-developers",children:"For Developers:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"The search now uses explicit actions instead of automatic triggers"}),"\n",(0,s.jsx)(n.li,{children:"Multiple search terms are joined with spaces before sending to the API"}),"\n",(0,s.jsx)(n.li,{children:"Performance monitoring is built-in for debugging"}),"\n",(0,s.jsx)(n.li,{children:"The UI provides comprehensive feedback to users"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"migration-notes",children:"Migration Notes"}),"\n",(0,s.jsx)(n.h3,{id:"breaking-changes",children:"Breaking Changes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Removed automatic search on typing"}),"\n",(0,s.jsx)(n.li,{children:"Search now requires explicit user action"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"backward-compatibility",children:"Backward Compatibility:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"API endpoints remain unchanged"}),"\n",(0,s.jsx)(n.li,{children:"Search parameters format is preserved"}),"\n",(0,s.jsx)(n.li,{children:"Existing search functionality is enhanced, not replaced"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search History"}),": Store and recall previous searches"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Advanced Filters"}),": Integration with faceted search"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search Suggestions"}),": Auto-complete based on previous searches"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Saved Searches"}),": Allow users to save complex search queries"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search Analytics"}),": Track search patterns and optimization opportunities"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);