"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[5942],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(96540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}},83854:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"development/presidio-setup","title":"Presidio Setup for Dutch Language","description":"Overview","source":"@site/docs/development/presidio-setup.md","sourceDirName":"development","slug":"/development/presidio-setup","permalink":"/docs/development/presidio-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/development/presidio-setup.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"title":"Presidio Setup for Dutch Language","sidebar_position":12},"sidebar":"tutorialSidebar","previous":{"title":"CLI Commands","permalink":"/docs/development/commands"},"next":{"title":"Hugging Face TGI/vLLM Setup - OpenAI-Compatible API","permalink":"/docs/development/huggingface-tgi-setup"}}');var t=i(74848),r=i(28453);const l={title:"Presidio Setup for Dutch Language",sidebar_position:12},o="Presidio Analyzer Setup for Dutch Language Support",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Why Presidio?",id:"why-presidio",level:2},{value:"Dutch Language Support",id:"dutch-language-support",level:2},{value:"Default Language Model",id:"default-language-model",level:3},{value:"Required Models",id:"required-models",level:3},{value:"Docker Compose Configuration",id:"docker-compose-configuration",level:2},{value:"Starting Presidio",id:"starting-presidio",level:2},{value:"1. Start the Service",id:"1-start-the-service",level:3},{value:"2. First Startup (Dutch Model Download)",id:"2-first-startup-dutch-model-download",level:3},{value:"3. Verify Installation",id:"3-verify-installation",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Using a Larger Dutch Model (Better Accuracy)",id:"using-a-larger-dutch-model-better-accuracy",level:3},{value:"Configuring Recognized Entity Types",id:"configuring-recognized-entity-types",level:3},{value:"Dutch-Specific Patterns",id:"dutch-specific-patterns",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Memory Requirements",id:"memory-requirements",level:3},{value:"Processing Speed",id:"processing-speed",level:3},{value:"Integration with OpenRegister",id:"integration-with-openregister",level:2},{value:"Configuration in OpenRegister",id:"configuration-in-openregister",level:3},{value:"Using Presidio in PHP",id:"using-presidio-in-php",level:3},{value:"Automatic Language Detection",id:"automatic-language-detection",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Presidio Container Won&#39;t Start",id:"presidio-container-wont-start",level:3},{value:"Dutch Model Download Fails",id:"dutch-model-download-fails",level:3},{value:"Low Accuracy for Dutch Text",id:"low-accuracy-for-dutch-text",level:3},{value:"Connection Errors from Nextcloud",id:"connection-errors-from-nextcloud",level:3},{value:"Custom Dutch Recognizers",id:"custom-dutch-recognizers",level:2},{value:"Testing Dutch Entity Detection",id:"testing-dutch-entity-detection",level:2},{value:"Test Script",id:"test-script",level:3},{value:"Resource Management",id:"resource-management",level:2},{value:"Monitor Presidio",id:"monitor-presidio",level:3},{value:"Restart Presidio",id:"restart-presidio",level:3},{value:"Production Checklist",id:"production-checklist",level:2},{value:"Alternative: MITIE for Development",id:"alternative-mitie-for-development",level:2},{value:"Related Documentation",id:"related-documentation",level:2},{value:"External Resources",id:"external-resources",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"presidio-analyzer-setup-for-dutch-language-support",children:"Presidio Analyzer Setup for Dutch Language Support"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Presidio Analyzer is Microsoft's open-source PII detection and Named Entity Recognition (NER) service. This guide covers setting up Presidio with Dutch language support for OpenRegister."}),"\n",(0,t.jsx)(n.h2,{id:"why-presidio",children:"Why Presidio?"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Presidio Analyzer"})," is recommended for production GDPR compliance because:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"High Accuracy"}),": 90-98% precision for entity detection"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Multi-language Support"}),": 50+ languages including Dutch"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"GDPR-Focused"}),": Built specifically for PII detection"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Self-Hosted"}),": Run on your own infrastructure (privacy-first)"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Extensible"}),": Add custom recognizers for domain-specific entities"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Active Development"}),": Maintained by Microsoft with regular updates"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"dutch-language-support",children:"Dutch Language Support"}),"\n",(0,t.jsx)(n.h3,{id:"default-language-model",children:"Default Language Model"}),"\n",(0,t.jsxs)(n.p,{children:["The Presidio Analyzer Docker image includes ",(0,t.jsx)(n.strong,{children:"English (en)"})," language models by default. For Dutch language support, the container automatically downloads the required ",(0,t.jsx)(n.strong,{children:"spaCy Dutch model"})," on first startup."]}),"\n",(0,t.jsx)(n.h3,{id:"required-models",children:"Required Models"}),"\n",(0,t.jsx)(n.p,{children:"For Dutch NER, Presidio uses:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"nl_core_news_sm"})," - Small Dutch spaCy model (43MB, fast, good accuracy)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"nl_core_news_md"})," - Medium Dutch model (optional, 90MB, better accuracy)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"nl_core_news_lg"})," - Large Dutch model (optional, 545MB, best accuracy)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The small model is sufficient for most use cases and is automatically downloaded."}),"\n",(0,t.jsx)(n.h2,{id:"docker-compose-configuration",children:"Docker Compose Configuration"}),"\n",(0,t.jsx)(n.p,{children:"The docker-compose.yml already includes Presidio Analyzer with multi-language support:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'presidio-analyzer:\n  image: mcr.microsoft.com/presidio-analyzer:latest\n  container_name: openregister-presidio-analyzer\n  restart: always\n  ports:\n    - "5001:5001"\n  environment:\n    - GRPC_PORT=5001\n    - LOG_LEVEL=INFO\n    # Multi-language support (Dutch included)\n    - PRESIDIO_ANALYZER_LANGUAGES=en,nl,de,fr,es\n  deploy:\n    resources:\n      limits:\n        memory: 2G\n      reservations:\n        memory: 512M\n  healthcheck:\n    test: ["CMD-SHELL", "curl -f http://localhost:5001/health || exit 1"]\n    interval: 30s\n    timeout: 10s\n    retries: 3\n    start_period: 30s\n'})}),"\n",(0,t.jsx)(n.h2,{id:"starting-presidio",children:"Starting Presidio"}),"\n",(0,t.jsx)(n.h3,{id:"1-start-the-service",children:"1. Start the Service"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Navigate to OpenRegister directory\ncd /path/to/apps-extra/openregister\n\n# Start all services (including Presidio)\ndocker-compose up -d presidio-analyzer\n\n# Or start everything\ndocker-compose up -d\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-first-startup-dutch-model-download",children:"2. First Startup (Dutch Model Download)"}),"\n",(0,t.jsx)(n.p,{children:"On first startup, Presidio will automatically download the Dutch language model:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Watch the logs to see model download\ndocker-compose logs -f presidio-analyzer\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see output like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Downloading Dutch model...\nCollecting nl-core-news-sm\n  Downloading nl_core_news_sm-3.6.0.tar.gz (43 MB)\nSuccessfully installed nl-core-news-sm-3.6.0\n\u2714 Download and installation successful\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": This happens automatically. The download takes 1-3 minutes depending on your internet connection."]}),"\n",(0,t.jsx)(n.h3,{id:"3-verify-installation",children:"3. Verify Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Check if Presidio is running\ncurl http://localhost:5001/health\n\n# Response should be:\n# {"status": "ok"}\n\n# Test Dutch entity detection\ncurl -X POST http://localhost:5001/analyze \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "text": "Jan de Vries woont in Amsterdam en zijn email is jan.devries@example.nl",\n    "language": "nl"\n  }\'\n'})}),"\n",(0,t.jsx)(n.p,{children:"Expected response:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "entity_type": "PERSON",\n    "start": 0,\n    "end": 12,\n    "score": 0.85,\n    "analysis_explanation": {\n      "recognizer": "SpacyRecognizer",\n      "pattern_name": null,\n      "pattern": null,\n      "original_score": 0.85,\n      "score": 0.85,\n      "textual_explanation": null,\n      "score_context_improvement": 0,\n      "supportive_context_word": "",\n      "validation_result": null\n    }\n  },\n  {\n    "entity_type": "LOCATION",\n    "start": 22,\n    "end": 31,\n    "score": 0.85\n  },\n  {\n    "entity_type": "EMAIL_ADDRESS",\n    "start": 48,\n    "end": 73,\n    "score": 0.95\n  }\n]\n'})}),"\n",(0,t.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"using-a-larger-dutch-model-better-accuracy",children:"Using a Larger Dutch Model (Better Accuracy)"}),"\n",(0,t.jsx)(n.p,{children:"If you need higher accuracy for Dutch text, use the medium or large model:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Option 1: Custom Dockerfile"})}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"docker/Dockerfile.presidio-nl"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dockerfile",children:"FROM mcr.microsoft.com/presidio-analyzer:latest\n\n# Install larger Dutch model\nRUN python -m spacy download nl_core_news_md\n\n# Or for best accuracy (large model)\n# RUN python -m spacy download nl_core_news_lg\n"})}),"\n",(0,t.jsx)(n.p,{children:"Update docker-compose.yml:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"presidio-analyzer:\n  build:\n    context: .\n    dockerfile: docker/Dockerfile.presidio-nl\n  container_name: openregister-presidio-analyzer\n  # ... rest of configuration\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Option 2: Volume with Pre-downloaded Models"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Download model locally\ndocker run --rm -v $(pwd)/presidio-models:/models \\\n  mcr.microsoft.com/presidio-analyzer:latest \\\n  python -m spacy download nl_core_news_md\n\n# Mount in docker-compose.yml\npresidio-analyzer:\n  volumes:\n    - ./presidio-models:/usr/local/lib/python3.9/site-packages/nl_core_news_md\n"})}),"\n",(0,t.jsx)(n.h3,{id:"configuring-recognized-entity-types",children:"Configuring Recognized Entity Types"}),"\n",(0,t.jsx)(n.p,{children:"By default, Presidio detects these entity types in Dutch:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Entity Type"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"PERSON"})}),(0,t.jsx)(n.td,{children:"Person names"}),(0,t.jsx)(n.td,{children:"Jan de Vries, Maria van der Berg"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"LOCATION"})}),(0,t.jsx)(n.td,{children:"Places/cities"}),(0,t.jsx)(n.td,{children:"Amsterdam, Rotterdam, Nederland"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"ORGANIZATION"})}),(0,t.jsx)(n.td,{children:"Companies/orgs"}),(0,t.jsx)(n.td,{children:"KPN, Gemeente Amsterdam"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"EMAIL_ADDRESS"})}),(0,t.jsx)(n.td,{children:"Email addresses"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"mailto:jan@example.nl",children:"jan@example.nl"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"PHONE_NUMBER"})}),(0,t.jsx)(n.td,{children:"Phone numbers"}),(0,t.jsx)(n.td,{children:"+31 6 12345678, 06-12345678"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"IBAN_CODE"})}),(0,t.jsx)(n.td,{children:"Bank accounts"}),(0,t.jsx)(n.td,{children:"NL91 ABNA 0417 1643 00"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"NRP"})," (Dutch specific)"]}),(0,t.jsx)(n.td,{children:"BSN numbers"}),(0,t.jsx)(n.td,{children:"123456782 (9-digit)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"DATE_TIME"})}),(0,t.jsx)(n.td,{children:"Dates/times"}),(0,t.jsx)(n.td,{children:"15 januari 2025"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"URL"})}),(0,t.jsx)(n.td,{children:"Web addresses"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://example.nl",children:"https://example.nl"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"IP_ADDRESS"})}),(0,t.jsx)(n.td,{children:"IP addresses"}),(0,t.jsx)(n.td,{children:"192.168.1.1"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"dutch-specific-patterns",children:"Dutch-Specific Patterns"}),"\n",(0,t.jsx)(n.p,{children:"Presidio includes Dutch-specific recognizers:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"BSN (Burgerservicenummer)"}),": Dutch citizen service number"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dutch phone numbers"}),": Multiple formats (+31 6, 06-, etc.)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dutch IBANs"}),": NL-prefixed bank accounts"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dutch addresses"}),": Street patterns common in Netherlands"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsx)(n.h3,{id:"memory-requirements",children:"Memory Requirements"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Model Size"}),(0,t.jsx)(n.th,{children:"Memory Usage"}),(0,t.jsx)(n.th,{children:"Performance"}),(0,t.jsx)(n.th,{children:"Accuracy"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"sm"})," (small)"]}),(0,t.jsx)(n.td,{children:"100-200MB"}),(0,t.jsx)(n.td,{children:"Fast (50-100ms/doc)"}),(0,t.jsx)(n.td,{children:"Good (85-90%)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"md"})," (medium)"]}),(0,t.jsx)(n.td,{children:"200-400MB"}),(0,t.jsx)(n.td,{children:"Medium (100-200ms/doc)"}),(0,t.jsx)(n.td,{children:"Better (88-93%)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"lg"})," (large)"]}),(0,t.jsx)(n.td,{children:"500MB-1GB"}),(0,t.jsx)(n.td,{children:"Slow (200-400ms/doc)"}),(0,t.jsx)(n.td,{children:"Best (90-95%)"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Recommendation"}),": Use ",(0,t.jsx)(n.strong,{children:"small model"})," for development and most production use cases. Only upgrade to medium/large if accuracy is insufficient."]}),"\n",(0,t.jsx)(n.h3,{id:"processing-speed",children:"Processing Speed"}),"\n",(0,t.jsx)(n.p,{children:"Average processing time for Dutch text:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Short text"})," (100 chars): 20-50ms"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Medium text"})," (1000 chars): 50-150ms"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Long text"})," (10000 chars): 200-500ms"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tip"}),": Process text in chunks of ~1000 characters for optimal performance."]}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-openregister",children:"Integration with OpenRegister"}),"\n",(0,t.jsx)(n.h3,{id:"configuration-in-openregister",children:"Configuration in OpenRegister"}),"\n",(0,t.jsx)(n.p,{children:"Configure Presidio in your OpenRegister settings:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// config/ner_config.php\nreturn [\n    'ner_enabled' => true,\n    'ner_method' => 'presidio',  // Use Presidio for production\n    \n    'presidio' => [\n        'analyzer_url' => 'http://presidio-analyzer:5001',\n        'default_language' => 'nl',  // Default to Dutch\n        'languages' => ['nl', 'en'],  // Support Dutch and English\n        'score_threshold' => 0.6,     // Minimum confidence score\n        'entities' => [\n            'PERSON',\n            'EMAIL_ADDRESS',\n            'PHONE_NUMBER',\n            'IBAN_CODE',\n            'LOCATION',\n            'ORGANIZATION',\n            'NRP',  // Dutch BSN numbers\n        ]\n    ]\n];\n"})}),"\n",(0,t.jsx)(n.h3,{id:"using-presidio-in-php",children:"Using Presidio in PHP"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\NerService;\n\n// Initialize NER service\n$nerService = $this->container->get(NerService::class);\n\n// Extract entities from Dutch text\n$dutchText = \"Jan de Vries woont in Amsterdam en zijn telefoonnummer is 06-12345678.\";\n\n$entities = $nerService->extractEntities($dutchText, 'presidio', [\n    'language' => 'nl'\n]);\n\nforeach ($entities as $entity) {\n    echo \"Type: {$entity['type']}\\n\";\n    echo \"Value: {$entity['value']}\\n\";\n    echo \"Confidence: {$entity['confidence']}\\n\";\n    echo \"Position: {$entity['start']}-{$entity['end']}\\n\\n\";\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Output"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Type: PERSON\nValue: Jan de Vries\nConfidence: 0.85\nPosition: 0-12\n\nType: LOCATION\nValue: Amsterdam\nConfidence: 0.85\nPosition: 22-31\n\nType: PHONE_NUMBER\nValue: 06-12345678\nConfidence: 0.95\nPosition: 58-69\n"})}),"\n",(0,t.jsx)(n.h3,{id:"automatic-language-detection",children:"Automatic Language Detection"}),"\n",(0,t.jsx)(n.p,{children:"If your documents are mixed language, detect language first:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Detect language\n$language = $nerService->detectLanguage($text);\n\n// Use detected language for entity extraction\n$entities = $nerService->extractEntities($text, 'presidio', [\n    'language' => $language\n]);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"presidio-container-wont-start",children:"Presidio Container Won't Start"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check logs\ndocker logs openregister-presidio-analyzer\n\n# Common issues:\n# 1. Port 5001 already in use\nsudo lsof -i :5001\n\n# 2. Insufficient memory\n# Increase memory limit in docker-compose.yml\n"})}),"\n",(0,t.jsx)(n.h3,{id:"dutch-model-download-fails",children:"Dutch Model Download Fails"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Manually download Dutch model\ndocker exec -it openregister-presidio-analyzer \\\n  python -m spacy download nl_core_news_sm\n\n# Verify model is installed\ndocker exec -it openregister-presidio-analyzer \\\n  python -m spacy info nl_core_news_sm\n"})}),"\n",(0,t.jsx)(n.h3,{id:"low-accuracy-for-dutch-text",children:"Low Accuracy for Dutch Text"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Upgrade to larger model"})," (see Advanced Configuration)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lower confidence threshold"})," in configuration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Add custom recognizers"})," for domain-specific terms"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use hybrid approach"})," with multiple NER methods"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"connection-errors-from-nextcloud",children:"Connection Errors from Nextcloud"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Test connectivity from Nextcloud container\ndocker exec nextcloud curl http://presidio-analyzer:5001/health\n\n# If fails, check if services are on same network\ndocker network ls\ndocker network inspect openregister_default\n"})}),"\n",(0,t.jsx)(n.h2,{id:"custom-dutch-recognizers",children:"Custom Dutch Recognizers"}),"\n",(0,t.jsx)(n.p,{children:"For domain-specific Dutch entities (e.g., Dutch postcode patterns):"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create custom recognizer"}),": ",(0,t.jsx)(n.code,{children:"custom_recognizers/nl_postcode_recognizer.yaml"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"- name: nl_postcode\n  supported_language: nl\n  patterns:\n    - name: dutch_postcode\n      regex: '\\b[1-9][0-9]{3}\\s?[A-Z]{2}\\b'\n      score: 0.85\n  context:\n    - postcode\n    - adres\n    - woonplaats\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Load custom recognizers"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'docker exec openregister-presidio-analyzer \\\n  curl -X POST http://localhost:5001/recognizers \\\n  -H "Content-Type: application/yaml" \\\n  --data-binary @custom_recognizers/nl_postcode_recognizer.yaml\n'})}),"\n",(0,t.jsx)(n.h2,{id:"testing-dutch-entity-detection",children:"Testing Dutch Entity Detection"}),"\n",(0,t.jsx)(n.h3,{id:"test-script",children:"Test Script"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# test-dutch-ner.sh\n#!/bin/bash\n\necho "Testing Dutch entity detection..."\n\n# Test 1: Person and location\ncurl -X POST http://localhost:5001/analyze \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "text": "Jan de Vries woont in Amsterdam.",\n    "language": "nl"\n  }\' | jq\n\n# Test 2: Email and phone\ncurl -X POST http://localhost:5001/analyze \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "text": "Neem contact op via jan@example.nl of bel 06-12345678.",\n    "language": "nl"\n  }\' | jq\n\n# Test 3: IBAN\ncurl -X POST http://localhost:5001/analyze \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "text": "Maak het bedrag over naar NL91 ABNA 0417 1643 00.",\n    "language": "nl"\n  }\' | jq\n\n# Test 4: Organization\ncurl -X POST http://localhost:5001/analyze \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "text": "De Gemeente Amsterdam heeft een nieuwe website gelanceerd.",\n    "language": "nl"\n  }\' | jq\n\necho "Tests completed!"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Run tests:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"chmod +x test-dutch-ner.sh\n./test-dutch-ner.sh\n"})}),"\n",(0,t.jsx)(n.h2,{id:"resource-management",children:"Resource Management"}),"\n",(0,t.jsx)(n.h3,{id:"monitor-presidio",children:"Monitor Presidio"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check resource usage\ndocker stats openregister-presidio-analyzer\n\n# Check health\ncurl http://localhost:5001/health\n\n# View logs\ndocker logs -f openregister-presidio-analyzer --tail 100\n"})}),"\n",(0,t.jsx)(n.h3,{id:"restart-presidio",children:"Restart Presidio"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Restart service\ndocker-compose restart presidio-analyzer\n\n# Or rebuild (if Dockerfile changed)\ndocker-compose up -d --build presidio-analyzer\n"})}),"\n",(0,t.jsx)(n.h2,{id:"production-checklist",children:"Production Checklist"}),"\n",(0,t.jsx)(n.p,{children:"Before deploying to production:"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Presidio Analyzer is running and healthy"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Dutch model is installed (verify with test query)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Memory limits are appropriate (2GB recommended)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Health checks are working"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Confidence threshold is configured (0.6-0.8 recommended)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Logging level is set to INFO (not DEBUG)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Custom recognizers are loaded (if needed)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Integration tests pass with Dutch text samples"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Performance is acceptable (<200ms per 1000 chars)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"alternative-mitie-for-development",children:"Alternative: MITIE for Development"}),"\n",(0,t.jsxs)(n.p,{children:["For development without Docker dependencies, use ",(0,t.jsx)(n.strong,{children:"MITIE"})," (local PHP library):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Development/testing with MITIE\n$entities = $nerService->extractEntities($text, 'mitie');\n\n// Production with Presidio\n$entities = $nerService->extractEntities($text, 'presidio', [\n    'language' => 'nl'\n]);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/docs/features/ner-nlp-concepts",children:"NER & NLP Concepts"})," for MITIE setup."]}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/features/ner-nlp-concepts",children:"NER & NLP Concepts"})," - Understanding entity recognition"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/development/docker-setup",children:"Docker Setup"})," - Complete Docker development setup guide"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/features/text-extraction-enhanced",children:"Text Extraction Enhanced"})," - Complete extraction pipeline"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/technical/entity-relationships-addition",children:"Entity Relationships"})," - GDPR entity data model"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"external-resources",children:"External Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://microsoft.github.io/presidio/",children:"Presidio Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/microsoft/presidio",children:"Presidio GitHub"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://spacy.io/models/nl",children:"spaCy Dutch Models"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.autoriteitpersoonsgegevens.nl/",children:"Dutch PII Detection Best Practices"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Summary"}),": The default Presidio Analyzer setup automatically supports Dutch language. No additional configuration is required beyond the docker-compose setup. The Dutch spaCy model downloads automatically on first startup."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);