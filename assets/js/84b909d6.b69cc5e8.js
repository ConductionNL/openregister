"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[9147],{28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var s=i(96540);const r={},a=s.createContext(r);function t(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(a.Provider,{value:n},e.children)}},88154:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Features/organisations","title":"Organisations","description":"Multi-Tenancy Organisation Management","source":"@site/docs/Features/organisations.md","sourceDirName":"Features","slug":"/Features/organisations","permalink":"/docs/Features/organisations","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Features/organisations.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"Organisations","description":"Multi-Tenancy Organisation Management"},"sidebar":"tutorialSidebar","previous":{"title":"Enhanced Validation Errors","permalink":"/docs/Features/enhanced-validation-errors"},"next":{"title":"Applications","permalink":"/docs/Features/applications"}}');var r=i(74848),a=i(28453);const t={sidebar_position:10,title:"Organisations",description:"Multi-Tenancy Organisation Management"},l="Organisations",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Data Isolation",id:"data-isolation",level:3},{value:"User Management",id:"user-management",level:3},{value:"Group-Based Access Control",id:"group-based-access-control",level:3},{value:"Resource Quotas",id:"resource-quotas",level:3},{value:"Authorization &amp; RBAC (Role-Based Access Control)",id:"authorization--rbac-role-based-access-control",level:3},{value:"Creating an Organisation",id:"creating-an-organisation",level:2},{value:"Via UI",id:"via-ui",level:3},{value:"Basic Information Tab",id:"basic-information-tab",level:4},{value:"Settings Tab",id:"settings-tab",level:4},{value:"Resource Allocation Tab",id:"resource-allocation-tab",level:4},{value:"Security Tab",id:"security-tab",level:4},{value:"Via API",id:"via-api",level:3},{value:"Managing Organisation Groups",id:"managing-organisation-groups",level:2},{value:"Group Assignment Methods",id:"group-assignment-methods",level:3},{value:"Method 1: Edit Organisation Modal (Recommended)",id:"method-1-edit-organisation-modal-recommended",level:4},{value:"Method 2: Manage Roles Action (Legacy)",id:"method-2-manage-roles-action-legacy",level:4},{value:"How Group Access Works",id:"how-group-access-works",level:3},{value:"Switching Active Organisation",id:"switching-active-organisation",level:2},{value:"Via UI",id:"via-ui-1",level:3},{value:"Via API",id:"via-api-1",level:3},{value:"Editing an Organisation",id:"editing-an-organisation",level:2},{value:"Deleting an Organisation",id:"deleting-an-organisation",level:2},{value:"Organisation Properties",id:"organisation-properties",level:2},{value:"Database Schema",id:"database-schema",level:3},{value:"Groups JSON Structure",id:"groups-json-structure",level:3},{value:"Authorization JSON Structure",id:"authorization-json-structure",level:3},{value:"Authorization &amp; RBAC System",id:"authorization--rbac-system",level:2},{value:"Authorization Structure",id:"authorization-structure",level:3},{value:"Entity-Level Permissions",id:"entity-level-permissions",level:3},{value:"Special Rights",id:"special-rights",level:3},{value:"Permission Check Example",id:"permission-check-example",level:3},{value:"Authorization Flow",id:"authorization-flow",level:3},{value:"Best Practices",id:"best-practices",level:3},{value:"Permission Design",id:"permission-design",level:4},{value:"Group Structure",id:"group-structure",level:4},{value:"Permission Auditing",id:"permission-auditing",level:4},{value:"Use Cases",id:"use-cases",level:2},{value:"Department Organisation",id:"department-organisation",level:3},{value:"Project-Based Organisation",id:"project-based-organisation",level:3},{value:"Multi-Tenant Client Organisation",id:"multi-tenant-client-organisation",level:3},{value:"Best Practices",id:"best-practices-1",level:2},{value:"Naming Conventions",id:"naming-conventions",level:3},{value:"Group Management",id:"group-management",level:3},{value:"Resource Quotas",id:"resource-quotas-1",level:3},{value:"Security",id:"security",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"List Organisations",id:"list-organisations",level:3},{value:"Get Organisation",id:"get-organisation",level:3},{value:"Create Organisation",id:"create-organisation",level:3},{value:"Update Organisation",id:"update-organisation",level:3},{value:"Delete Organisation",id:"delete-organisation",level:3},{value:"Get Active Organisation",id:"get-active-organisation",level:3},{value:"Set Active Organisation",id:"set-active-organisation",level:3},{value:"Join Organisation",id:"join-organisation",level:3},{value:"Leave Organisation",id:"leave-organisation",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Cannot Create Organisation",id:"cannot-create-organisation",level:3},{value:"Groups Not Appearing",id:"groups-not-appearing",level:3},{value:"Cannot Switch Organisation",id:"cannot-switch-organisation",level:3},{value:"Resource Quota Exceeded",id:"resource-quota-exceeded",level:3},{value:"PHP API Examples",id:"php-api-examples",level:2},{value:"Get User&#39;s Organisations",id:"get-users-organisations",level:3},{value:"Create Organisation with Groups and Authorization",id:"create-organisation-with-groups-and-authorization",level:3},{value:"Set Resource Quotas",id:"set-resource-quotas",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"organisations",children:"Organisations"})}),"\n",(0,r.jsx)(n.p,{children:"Organisations are the foundation of OpenRegister's multi-tenancy system, providing complete data isolation and access control. Each organisation represents a separate tenant with its own registers, schemas, objects, and user memberships."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Organisations in OpenRegister enable:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Complete Data Isolation"}),": Each organisation's data remains completely separate"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Membership Management"}),": Users can belong to multiple organisations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Group-Based Access Control"}),": Control access using Nextcloud groups"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Active Organisation Context"}),": Seamless switching between organisations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Resource Quotas"}),": Optional storage, bandwidth, and API request limits"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TB\n    subgraph Organisation\n        A[Organisation Entity]\n        A --\x3e B[Registers]\n        A --\x3e C[Schemas]\n        A --\x3e D[Objects]\n        A --\x3e E[Users]\n        A --\x3e F[Groups]\n        A --\x3e G[Resource Quotas]\n        A --\x3e H[Authorization/RBAC]\n    end\n    \n    style A fill:#e3f2fd\n    style B fill:#fff3e0\n    style C fill:#ffe0b2\n    style D fill:#c8e6c9\n    style E fill:#f3e5f5\n    style F fill:#e1f5fe\n    style G fill:#fff9c4\n    style H fill:#ffcdd2\n"})}),"\n",(0,r.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,r.jsx)(n.h3,{id:"data-isolation",children:"Data Isolation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All entities (registers, schemas, objects) are scoped to organisations"}),"\n",(0,r.jsx)(n.li,{children:"Users can only access data from organisations they belong to"}),"\n",(0,r.jsx)(n.li,{children:"Automatic filtering ensures cross-organisation data protection"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"user-management",children:"User Management"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Users can be members of multiple organisations"}),"\n",(0,r.jsx)(n.li,{children:"One active organisation per session"}),"\n",(0,r.jsx)(n.li,{children:"Seamless context switching"}),"\n",(0,r.jsx)(n.li,{children:"Default organisation for new users"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"group-based-access-control",children:"Group-Based Access Control"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Assign Nextcloud groups to organisations"}),"\n",(0,r.jsx)(n.li,{children:"Only users in assigned groups can access the organisation"}),"\n",(0,r.jsx)(n.li,{children:"Leave groups empty for open access to all members"}),"\n",(0,r.jsx)(n.li,{children:"Integrates with Nextcloud's native group system"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"resource-quotas",children:"Resource Quotas"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Storage Quota"}),": Limit total storage per organisation (0 = unlimited)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bandwidth Quota"}),": Monthly bandwidth limits (0 = unlimited)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API Request Quota"}),": Daily API request limits (0 = unlimited)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Quota"}),": Maximum number of users (configurable)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Group Quota"}),": Maximum number of groups (configurable)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"authorization--rbac-role-based-access-control",children:"Authorization & RBAC (Role-Based Access Control)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hierarchical Permissions"}),": Define CRUD permissions per entity type (register, schema, object, view, agent)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Special Rights"}),": Grant special permissions like object_publish, agent_use, dashboard_view, llm_use"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Group-Based"}),": Assign permissions to Nextcloud groups"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quick Authorization Checks"}),": Use singular entity names for efficient permission checking"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-an-organisation",children:"Creating an Organisation"}),"\n",(0,r.jsx)(n.h3,{id:"via-ui",children:"Via UI"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Organisations"})," in the OpenRegister app"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create Organisation"})]}),"\n",(0,r.jsx)(n.li,{children:"Fill in the organisation details in the modal:"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"basic-information-tab",children:"Basic Information Tab"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Name"})," (required): The organisation name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Slug"})," (optional): URL-friendly identifier"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"})," (optional): Detailed description"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nextcloud Groups"}),": Select which groups have access to this organisation"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"settings-tab",children:"Settings Tab"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default Organisation"}),": Mark as default for new users (admin only)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Active"}),": Enable or disable the organisation"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"resource-allocation-tab",children:"Resource Allocation Tab"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Storage Quota (MB)"}),": Set storage limit (0 = unlimited)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bandwidth Quota (MB/month)"}),": Set monthly bandwidth limit (0 = unlimited)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API Request Quota (requests/day)"}),": Set daily API request limit (0 = unlimited)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"security-tab",children:"Security Tab"}),"\n",(0,r.jsx)(n.p,{children:"Configure fine-grained RBAC permissions:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Entity-Level Permissions"}),": Set CRUD permissions for registers, schemas, objects, views, and agents"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Special Rights"}),": Grant special permissions like object publishing, agent use, dashboard view, and LLM access"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Group Assignment"}),": Assign permissions to specific Nextcloud groups"]}),"\n",(0,r.jsx)(n.li,{children:"View current authorization configuration in an easy-to-read table format"}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create"})," to save the organisation"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"via-api",children:"Via API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"POST /index.php/apps/openregister/api/organisations\nContent-Type: application/json\n\n{\n  'name': 'Engineering Department',\n  'description': 'Engineering team organisation',\n  'slug': 'engineering',\n  'active': true,\n  'roles': [\n    'engineers',\n    'engineering-managers'\n  ],\n  'storageQuota': 10737418240,  // 10GB in bytes\n  'bandwidthQuota': 53687091200, // 50GB in bytes\n  'requestQuota': 10000\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"managing-organisation-groups",children:"Managing Organisation Groups"}),"\n",(0,r.jsx)(n.h3,{id:"group-assignment-methods",children:"Group Assignment Methods"}),"\n",(0,r.jsx)(n.h4,{id:"method-1-edit-organisation-modal-recommended",children:"Method 1: Edit Organisation Modal (Recommended)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Organisations"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Edit"})," on an organisation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Basic Information Tab"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use the 'Nextcloud Groups' multi-select dropdown to add or remove groups"}),"\n",(0,r.jsx)(n.li,{children:"See immediate feedback on selected groups"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security Tab"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"View complete list of assigned groups"}),"\n",(0,r.jsx)(n.li,{children:"Remove individual groups with X button"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Save"})," to persist changes"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"method-2-manage-roles-action-legacy",children:"Method 2: Manage Roles Action (Legacy)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Click the ",(0,r.jsx)(n.strong,{children:"Actions"})," menu (three dots) on an organisation"]}),"\n",(0,r.jsxs)(n.li,{children:["Select ",(0,r.jsx)(n.strong,{children:"Manage Roles"})]}),"\n",(0,r.jsxs)(n.li,{children:["In the modal:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"View currently assigned groups"}),"\n",(0,r.jsx)(n.li,{children:"Add groups from dropdown"}),"\n",(0,r.jsx)(n.li,{children:"Remove groups by clicking X"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Save Roles"})," to persist"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"how-group-access-works",children:"How Group Access Works"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Group Assignment"}),": Nextcloud groups are assigned to the organisation as 'roles'"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Membership"}),": Users are added to Nextcloud groups through normal Nextcloud user management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access Control"}),": When a user tries to access organisation resources:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If no groups are assigned, all authenticated users with organisation membership can access"}),"\n",(0,r.jsx)(n.li,{children:"If groups are assigned, user must belong to at least one of the assigned groups"}),"\n",(0,r.jsx)(n.li,{children:"System administrators always have access"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant User\n    participant System\n    participant Organisation\n    participant Groups as Nextcloud Groups\n    \n    User->>System: Request access to organisation\n    System->>Organisation: Check if groups assigned\n    \n    alt No groups assigned\n        Organisation--\x3e>System: Allow access (open to members)\n    else Groups assigned\n        System->>Groups: Check user membership\n        Groups--\x3e>System: User group list\n        System->>Organisation: Verify user in allowed groups\n        \n        alt User in allowed group\n            Organisation--\x3e>System: Grant access\n        else User not in allowed group\n            Organisation--\x3e>System: Deny access\n        end\n    end\n    \n    System--\x3e>User: Access result\n"})}),"\n",(0,r.jsx)(n.h2,{id:"switching-active-organisation",children:"Switching Active Organisation"}),"\n",(0,r.jsx)(n.h3,{id:"via-ui-1",children:"Via UI"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Click the ",(0,r.jsx)(n.strong,{children:"Organisation Switcher"})," in the top navigation"]}),"\n",(0,r.jsx)(n.li,{children:"Select the organisation you want to switch to"}),"\n",(0,r.jsx)(n.li,{children:"The page reloads with the new organisation context"}),"\n",(0,r.jsx)(n.li,{children:"All subsequent operations use this organisation"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"via-api-1",children:"Via API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"POST /index.php/apps/openregister/api/organisations/{uuid}/set-active\n"})}),"\n",(0,r.jsx)(n.h2,{id:"editing-an-organisation",children:"Editing an Organisation"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Organisations"})]}),"\n",(0,r.jsx)(n.li,{children:"Find the organisation to edit"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Actions"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Edit"})]}),"\n",(0,r.jsxs)(n.li,{children:["Modify any of the tabs:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Basic Information"}),"\n",(0,r.jsx)(n.li,{children:"Settings"}),"\n",(0,r.jsx)(n.li,{children:"Resource Allocation"}),"\n",(0,r.jsx)(n.li,{children:"Security (view groups)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Save"})," to apply changes"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deleting-an-organisation",children:"Deleting an Organisation"}),"\n",(0,r.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,r.jsx)(n.strong,{children:"Warning"}),": Deleting an organisation will delete all associated data:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All registers"}),"\n",(0,r.jsx)(n.li,{children:"All schemas"}),"\n",(0,r.jsx)(n.li,{children:"All objects"}),"\n",(0,r.jsx)(n.li,{children:"User memberships"}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Organisations"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Actions"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Delete"})]}),"\n",(0,r.jsx)(n.li,{children:"Confirm the deletion"}),"\n",(0,r.jsx)(n.li,{children:"The organisation and all its data are permanently removed"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"organisation-properties",children:"Organisation Properties"}),"\n",(0,r.jsx)(n.h3,{id:"database-schema",children:"Database Schema"}),"\n",(0,r.jsx)(n.p,{children:"The Organisation entity includes these fields:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'uuid'"}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"Unique identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'name'"}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"Organisation name (required)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'slug'"}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"URL-friendly identifier (optional)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'description'"}),(0,r.jsx)(n.td,{children:"TEXT"}),(0,r.jsx)(n.td,{children:"Detailed description"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'active'"}),(0,r.jsx)(n.td,{children:"BOOLEAN"}),(0,r.jsx)(n.td,{children:"Whether the organisation is active"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'users'"}),(0,r.jsx)(n.td,{children:"JSON"}),(0,r.jsx)(n.td,{children:"Array of user IDs belonging to organisation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'groups'"}),(0,r.jsx)(n.td,{children:"JSON"}),(0,r.jsx)(n.td,{children:"Array of Nextcloud group IDs with access"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'authorization'"}),(0,r.jsx)(n.td,{children:"JSON"}),(0,r.jsx)(n.td,{children:"RBAC permissions structure (see Authorization section)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'storage_quota'"}),(0,r.jsx)(n.td,{children:"BIGINT"}),(0,r.jsx)(n.td,{children:"Storage limit in bytes (NULL = unlimited)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'bandwidth_quota'"}),(0,r.jsx)(n.td,{children:"BIGINT"}),(0,r.jsx)(n.td,{children:"Monthly bandwidth in bytes (NULL = unlimited)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'request_quota'"}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Daily API requests (NULL = unlimited)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'owner'"}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"User ID of the organisation owner"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'created'"}),(0,r.jsx)(n.td,{children:"DATETIME"}),(0,r.jsx)(n.td,{children:"Creation timestamp"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'updated'"}),(0,r.jsx)(n.td,{children:"DATETIME"}),(0,r.jsx)(n.td,{children:"Last update timestamp"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"groups-json-structure",children:"Groups JSON Structure"}),"\n",(0,r.jsx)(n.p,{children:"Groups are stored as a simple array of group ID strings for basic access control:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'groups': [\n    'engineers',\n    'managers',\n    'viewers'\n  ]\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"authorization-json-structure",children:"Authorization JSON Structure"}),"\n",(0,r.jsx)(n.p,{children:"The authorization field contains the complete RBAC configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'authorization': {\n    'register': {\n      'create': ['admin', 'register-manager'],\n      'read': ['admin', 'register-manager', 'viewer'],\n      'update': ['admin', 'register-manager'],\n      'delete': ['admin']\n    },\n    'schema': {\n      'create': ['admin'],\n      'read': ['admin', 'developer', 'viewer'],\n      'update': ['admin'],\n      'delete': ['admin']\n    },\n    'object': {\n      'create': ['admin', 'editor'],\n      'read': ['admin', 'editor', 'viewer'],\n      'update': ['admin', 'editor'],\n      'delete': ['admin']\n    },\n    'view': {\n      'create': ['admin'],\n      'read': ['admin', 'user'],\n      'update': ['admin'],\n      'delete': ['admin']\n    },\n    'agent': {\n      'create': ['admin'],\n      'read': ['admin', 'developer'],\n      'update': ['admin'],\n      'delete': ['admin']\n    },\n    'object_publish': ['admin', 'publisher'],\n    'agent_use': ['admin', 'ai-user'],\n    'dashboard_view': ['admin', 'manager'],\n    'llm_use': ['admin', 'ai-user']\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"authorization--rbac-system",children:"Authorization & RBAC System"}),"\n",(0,r.jsx)(n.p,{children:"Organisations use a hierarchical Role-Based Access Control (RBAC) system to manage permissions at a granular level."}),"\n",(0,r.jsx)(n.h3,{id:"authorization-structure",children:"Authorization Structure"}),"\n",(0,r.jsxs)(n.p,{children:["The authorization system uses ",(0,r.jsx)(n.strong,{children:"singular entity names"})," for easier permission checking:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'authorization': {\n    'register': {\n      'create': ['admin', 'register-manager'],\n      'read': ['admin', 'register-manager', 'viewer'],\n      'update': ['admin', 'register-manager'],\n      'delete': ['admin']\n    },\n    'schema': {\n      'create': ['admin', 'schema-designer'],\n      'read': ['admin', 'schema-designer', 'developer'],\n      'update': ['admin', 'schema-designer'],\n      'delete': ['admin']\n    },\n    'object': {\n      'create': ['admin', 'editor', 'contributor'],\n      'read': ['admin', 'editor', 'contributor', 'viewer'],\n      'update': ['admin', 'editor'],\n      'delete': ['admin']\n    },\n    'view': {\n      'create': ['admin', 'view-designer'],\n      'read': ['admin', 'view-designer', 'user'],\n      'update': ['admin', 'view-designer'],\n      'delete': ['admin']\n    },\n    'agent': {\n      'create': ['admin', 'ai-specialist'],\n      'read': ['admin', 'ai-specialist', 'developer'],\n      'update': ['admin', 'ai-specialist'],\n      'delete': ['admin']\n    },\n    'object_publish': ['admin', 'publisher'],\n    'agent_use': ['admin', 'ai-user', 'developer'],\n    'dashboard_view': ['admin', 'manager', 'viewer'],\n    'llm_use': ['admin', 'ai-user']\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"entity-level-permissions",children:"Entity-Level Permissions"}),"\n",(0,r.jsx)(n.p,{children:"Each entity type has four standard CRUD permissions:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Entity"}),(0,r.jsx)(n.th,{children:"Create"}),(0,r.jsx)(n.th,{children:"Read"}),(0,r.jsx)(n.th,{children:"Update"}),(0,r.jsx)(n.th,{children:"Delete"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"register"})}),(0,r.jsx)(n.td,{children:"Who can create registers"}),(0,r.jsx)(n.td,{children:"Who can view registers"}),(0,r.jsx)(n.td,{children:"Who can modify registers"}),(0,r.jsx)(n.td,{children:"Who can delete registers"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"schema"})}),(0,r.jsx)(n.td,{children:"Who can create schemas"}),(0,r.jsx)(n.td,{children:"Who can view schemas"}),(0,r.jsx)(n.td,{children:"Who can modify schemas"}),(0,r.jsx)(n.td,{children:"Who can delete schemas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"object"})}),(0,r.jsx)(n.td,{children:"Who can create objects"}),(0,r.jsx)(n.td,{children:"Who can view objects"}),(0,r.jsx)(n.td,{children:"Who can modify objects"}),(0,r.jsx)(n.td,{children:"Who can delete objects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"view"})}),(0,r.jsx)(n.td,{children:"Who can create views"}),(0,r.jsx)(n.td,{children:"Who can view views"}),(0,r.jsx)(n.td,{children:"Who can modify views"}),(0,r.jsx)(n.td,{children:"Who can delete views"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"agent"})}),(0,r.jsx)(n.td,{children:"Who can create agents"}),(0,r.jsx)(n.td,{children:"Who can view agents"}),(0,r.jsx)(n.td,{children:"Who can modify agents"}),(0,r.jsx)(n.td,{children:"Who can delete agents"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"special-rights",children:"Special Rights"}),"\n",(0,r.jsx)(n.p,{children:"Beyond CRUD operations, special rights grant additional capabilities:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Right"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Common Groups"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"object_publish"})}),(0,r.jsx)(n.td,{children:"Publish objects to make them publicly available"}),(0,r.jsx)(n.td,{children:"'publisher', 'editor', 'admin'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"agent_use"})}),(0,r.jsx)(n.td,{children:"Use AI agents for processing and analysis"}),(0,r.jsx)(n.td,{children:"'ai-user', 'developer', 'admin'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"dashboard_view"})}),(0,r.jsx)(n.td,{children:"Access organisation dashboard and analytics"}),(0,r.jsx)(n.td,{children:"'manager', 'admin', 'analyst'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"llm_use"})}),(0,r.jsx)(n.td,{children:"Use Large Language Model features"}),(0,r.jsx)(n.td,{children:"'ai-user', 'researcher', 'admin'"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"permission-check-example",children:"Permission Check Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Quick authorization check using singular entity names\n$canCreateRegister = $organisationService->hasPermission(\n    $organisation,\n    'register',  // Entity type (singular)\n    'create',    // Action\n    $userId\n);\n\n// Check special right\n$canPublish = $organisationService->hasSpecialRight(\n    $organisation,\n    'object_publish',\n    $userId\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"authorization-flow",children:"Authorization Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant User\n    participant System\n    participant Organisation\n    participant Authorization\n    participant Groups as Nextcloud Groups\n    \n    User->>System: Request action (e.g., create register)\n    System->>Organisation: Get organisation context\n    Organisation->>Authorization: Check permission\n    \n    Authorization->>Authorization: Extract entity type (register) and action (create)\n    Authorization->>Groups: Get user's group memberships\n    Groups--\x3e>Authorization: User groups list\n    \n    Authorization->>Authorization: Check if user groups overlap with allowed groups\n    \n    alt User in allowed group\n        Authorization--\x3e>System: Permission granted\n        System->>System: Execute action\n        System--\x3e>User: Success response\n    else User not in allowed group\n        Authorization--\x3e>System: Permission denied\n        System--\x3e>User: 403 Forbidden\n    end\n"})}),"\n",(0,r.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h4,{id:"permission-design",children:"Permission Design"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Use hierarchical permissions (admin \u2192 manager \u2192 user)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Grant least privilege - start restrictive, add as needed"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Use descriptive group names that reflect permissions"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Document why specific groups have specific permissions"}),"\n",(0,r.jsx)(n.li,{children:"\u274c Don't grant 'delete' permissions to regular users"}),"\n",(0,r.jsx)(n.li,{children:"\u274c Don't mix unrelated permissions in a single group"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"group-structure",children:"Group Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"admin                  # Full access to everything\n  \u251c\u2500 register-manager  # Manage registers and schemas\n  \u251c\u2500 content-editor    # Create and edit objects\n  \u251c\u2500 publisher         # Publish objects\n  \u2514\u2500 viewer            # Read-only access\n"})}),"\n",(0,r.jsx)(n.h4,{id:"permission-auditing",children:"Permission Auditing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Review permissions quarterly"}),"\n",(0,r.jsx)(n.li,{children:"Remove permissions from inactive groups"}),"\n",(0,r.jsx)(n.li,{children:"Monitor permission usage in logs"}),"\n",(0,r.jsx)(n.li,{children:"Update documentation when permissions change"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,r.jsx)(n.h3,{id:"department-organisation",children:"Department Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Organisation: 'Engineering Department'\nGroups:\n  - 'engineers' (50 users) - Full access to engineering resources\n  - 'engineering-managers' (5 users) - Administrative access\n  - 'interns' (10 users) - Limited access\nResource Quotas:\n  - Storage: 100 GB\n  - Bandwidth: 500 GB/month\n  - API Requests: 50,000/day\n"})}),"\n",(0,r.jsx)(n.h3,{id:"project-based-organisation",children:"Project-Based Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Organisation: 'Website Redesign Project'\nGroups:\n  - 'designers' (8 users) - Design asset access\n  - 'developers' (12 users) - Code repository access\n  - 'project-managers' (2 users) - Full project oversight\nResource Quotas:\n  - Storage: 50 GB\n  - Bandwidth: 200 GB/month\n  - API Requests: 20,000/day\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multi-tenant-client-organisation",children:"Multi-Tenant Client Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Organisation: 'Client: Acme Corp'\nGroups:\n  - 'acme-admins' (3 users) - Client administrators\n  - 'acme-users' (100 users) - Regular client users\n  - 'support-staff' (10 users) - Internal support team\nResource Quotas:\n  - Storage: 500 GB\n  - Bandwidth: 1 TB/month\n  - API Requests: 100,000/day\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices-1",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use descriptive names that clearly indicate purpose"}),"\n",(0,r.jsx)(n.li,{children:"Use slugs for URL-friendly identifiers"}),"\n",(0,r.jsx)(n.li,{children:"Document the organisation's purpose in the description"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"group-management",children:"Group Management"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Use descriptive Nextcloud group names ('engineering-admins' not 'group1')"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Organize groups hierarchically with prefixes ('hr-admins', 'hr-staff')"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Document group purposes in Nextcloud group descriptions"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Regularly audit group membership"}),"\n",(0,r.jsx)(n.li,{children:"\u274c Don't mix unrelated permissions in a single group"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"resource-quotas-1",children:"Resource Quotas"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set realistic quotas based on expected usage"}),"\n",(0,r.jsx)(n.li,{children:"Monitor quota usage regularly"}),"\n",(0,r.jsx)(n.li,{children:"Use 0 for unlimited where appropriate"}),"\n",(0,r.jsx)(n.li,{children:"Consider organisation size and activity when setting quotas"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Only assign necessary groups to each organisation"}),"\n",(0,r.jsx)(n.li,{children:"Regularly review and update group assignments"}),"\n",(0,r.jsx)(n.li,{children:"Use the Security tab to audit current access"}),"\n",(0,r.jsx)(n.li,{children:"Remove inactive users from groups promptly"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,r.jsx)(n.h3,{id:"list-organisations",children:"List Organisations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /index.php/apps/openregister/api/organisations\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns all organisations the current user belongs to."}),"\n",(0,r.jsx)(n.h3,{id:"get-organisation",children:"Get Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /index.php/apps/openregister/api/organisations/{uuid}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-organisation",children:"Create Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"POST /index.php/apps/openregister/api/organisations\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-organisation",children:"Update Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"PUT /index.php/apps/openregister/api/organisations/{uuid}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"delete-organisation",children:"Delete Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"DELETE /index.php/apps/openregister/api/organisations/{uuid}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"get-active-organisation",children:"Get Active Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /index.php/apps/openregister/api/organisations/active\n"})}),"\n",(0,r.jsx)(n.h3,{id:"set-active-organisation",children:"Set Active Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"POST /index.php/apps/openregister/api/organisations/{uuid}/set-active\n"})}),"\n",(0,r.jsx)(n.h3,{id:"join-organisation",children:"Join Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"POST /index.php/apps/openregister/api/organisations/{uuid}/join\n"})}),"\n",(0,r.jsx)(n.h3,{id:"leave-organisation",children:"Leave Organisation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"POST /index.php/apps/openregister/api/organisations/{uuid}/leave\n"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"cannot-create-organisation",children:"Cannot Create Organisation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Create button is disabled"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Ensure the name field is filled in - it's required."]}),"\n",(0,r.jsx)(n.h3,{id:"groups-not-appearing",children:"Groups Not Appearing"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Group dropdown is empty"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify Nextcloud groups exist: Settings \u2192 Users \u2192 Groups"}),"\n",(0,r.jsx)(n.li,{children:"Check OCS API access"}),"\n",(0,r.jsx)(n.li,{children:"Review browser console for errors"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cannot-switch-organisation",children:"Cannot Switch Organisation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Organisation switching fails"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify you're a member of the target organisation"}),"\n",(0,r.jsx)(n.li,{children:"Check that the organisation is active"}),"\n",(0,r.jsx)(n.li,{children:"Clear browser cache and session"}),"\n",(0,r.jsx)(n.li,{children:"Check server logs for errors"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"resource-quota-exceeded",children:"Resource Quota Exceeded"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Cannot create objects due to quota limits"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Check current usage in organisation details"}),"\n",(0,r.jsx)(n.li,{children:"Request quota increase from administrator"}),"\n",(0,r.jsx)(n.li,{children:"Clean up unused objects and files"}),"\n",(0,r.jsx)(n.li,{children:"Archive old data"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"php-api-examples",children:"PHP API Examples"}),"\n",(0,r.jsx)(n.h3,{id:"get-users-organisations",children:"Get User's Organisations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\OrganisationService;\n\n$organisations = $organisationService->getUserOrganisations();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-organisation-with-groups-and-authorization",children:"Create Organisation with Groups and Authorization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$organisation = $organisationService->createOrganisation(\n    'Research Department',\n    'Handles all research activities'\n);\n\n// Assign groups for basic access\n$organisation->setGroups([\n    'researchers',\n    'lab-managers'\n]);\n\n// Set authorization permissions\n$organisation->setAuthorization([\n    'register' => [\n        'create' => ['lab-managers'],\n        'read'   => ['researchers', 'lab-managers'],\n        'update' => ['lab-managers'],\n        'delete' => ['lab-managers'],\n    ],\n    'schema' => [\n        'create' => ['lab-managers'],\n        'read'   => ['researchers', 'lab-managers'],\n        'update' => ['lab-managers'],\n        'delete' => ['lab-managers'],\n    ],\n    'object' => [\n        'create' => ['researchers', 'lab-managers'],\n        'read'   => ['researchers', 'lab-managers'],\n        'update' => ['researchers', 'lab-managers'],\n        'delete' => ['lab-managers'],\n    ],\n    'view' => [\n        'create' => ['lab-managers'],\n        'read'   => ['researchers', 'lab-managers'],\n        'update' => ['lab-managers'],\n        'delete' => ['lab-managers'],\n    ],\n    'agent' => [\n        'create' => ['lab-managers'],\n        'read'   => ['researchers', 'lab-managers'],\n        'update' => ['lab-managers'],\n        'delete' => ['lab-managers'],\n    ],\n    'object_publish' => ['lab-managers'],\n    'agent_use'      => ['researchers', 'lab-managers'],\n    'dashboard_view' => ['lab-managers'],\n    'llm_use'        => ['researchers', 'lab-managers'],\n]);\n\n$organisationMapper->update($organisation);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"set-resource-quotas",children:"Set Resource Quotas"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$organisation->setStorageQuota(10737418240);  // 10GB\n$organisation->setBandwidthQuota(53687091200); // 50GB\n$organisation->setRequestQuota(10000);         // 10k requests/day\n\n$organisationMapper->update($organisation);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/Features/multi-tenancy",children:"Multi-Tenancy"})," - Multi-tenancy system overview"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/features/organisation-roles",children:"Organisation Roles"})," - Detailed RBAC documentation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/Features/applications",children:"Applications"})," - Application management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/Features/access-control",children:"Access Control"})," - RBAC and security"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.nextcloud.com/server/latest/admin_manual/configuration_user/user_configuration.html",children:"Nextcloud Groups"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);