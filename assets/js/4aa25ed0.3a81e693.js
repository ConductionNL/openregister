"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[6953],{28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var i=r(96540);const s={},a=i.createContext(s);function t(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:n},e.children)}},35904:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"technical/array-faceting","title":"Array Faceting","description":"The OpenRegister faceting system now supports arrays as facetable fields. When a JSON object property contains an array of values, the system automatically creates separate facet buckets for each individual value instead of treating the entire array as a single facet.","source":"@site/docs/technical/array-faceting.md","sourceDirName":"technical","slug":"/technical/array-faceting","permalink":"/docs/technical/array-faceting","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/technical/array-faceting.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"API Caching System","permalink":"/docs/technical/api-caching"},"next":{"title":"Bulk Operations Implementation","permalink":"/docs/technical/bulk-operations-implementation"}}');var s=r(74848),a=r(28453);const t={},l="Array Faceting",c={},o=[{value:"How It Works",id:"how-it-works",level:2},{value:"Previous Behavior",id:"previous-behavior",level:3},{value:"New Behavior",id:"new-behavior",level:3},{value:"Examples",id:"examples",level:2},{value:"Sample Data",id:"sample-data",level:3},{value:"Faceting Results",id:"faceting-results",level:3},{value:"Filtering",id:"filtering",level:3},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Detection",id:"detection",level:3},{value:"Database Queries",id:"database-queries",level:3},{value:"Performance",id:"performance",level:3},{value:"Schema Configuration",id:"schema-configuration",level:2},{value:"Benefits",id:"benefits",level:2},{value:"Limitations",id:"limitations",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"array-faceting",children:"Array Faceting"})}),"\n",(0,s.jsx)(n.p,{children:"The OpenRegister faceting system now supports arrays as facetable fields. When a JSON object property contains an array of values, the system automatically creates separate facet buckets for each individual value instead of treating the entire array as a single facet."}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsx)(n.h3,{id:"previous-behavior",children:"Previous Behavior"}),"\n",(0,s.jsx)(n.p,{children:"Before this enhancement, if you had objects with array fields like:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": 1,\n  "fruit": ["apple", "pear"]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"The faceting system would create a single facet bucket:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'["apple", "pear"]'})," (1 result)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"new-behavior",children:"New Behavior"}),"\n",(0,s.jsx)(n.p,{children:"Now the system creates separate facet buckets for each array element:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"apple"})," (1 result)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pear"})," (1 result)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.h3,{id:"sample-data",children:"Sample Data"}),"\n",(0,s.jsx)(n.p,{children:"Consider these objects in your register:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": 1,\n    "name": "Store A",\n    "categories": ["grocery", "pharmacy"]\n  },\n  {\n    "id": 2,\n    "name": "Store B", \n    "categories": ["grocery", "electronics"]\n  },\n  {\n    "id": 3,\n    "name": "Store C",\n    "categories": ["pharmacy"]\n  }\n]\n'})}),"\n",(0,s.jsx)(n.h3,{id:"faceting-results",children:"Faceting Results"}),"\n",(0,s.jsxs)(n.p,{children:["When faceting on the ",(0,s.jsx)(n.code,{children:"categories"})," field, you'll get:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"grocery"})," (2 results) - appears in Store A and Store B"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pharmacy"})," (2 results) - appears in Store A and Store C"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"electronics"})," (1 result) - appears in Store B"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"filtering",children:"Filtering"}),"\n",(0,s.jsx)(n.p,{children:"The filtering system also works with arrays:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Filter by ",(0,s.jsx)(n.code,{children:'categories: ["grocery"]'})]})," - Returns Store A and Store B"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Filter by ",(0,s.jsx)(n.code,{children:'categories: ["pharmacy"]'})]})," - Returns Store A and Store C"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Filter by ",(0,s.jsx)(n.code,{children:'categories: ["grocery", "pharmacy"]'})]})," - Returns all stores (OR logic)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,s.jsx)(n.h3,{id:"detection",children:"Detection"}),"\n",(0,s.jsx)(n.p,{children:"The system automatically detects array fields by:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Sampling a few objects from the database"}),"\n",(0,s.jsx)(n.li,{children:"Checking if more than 50% of the objects have arrays for that field"}),"\n",(0,s.jsx)(n.li,{children:"If so, treating it as an array field for faceting"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"database-queries",children:"Database Queries"}),"\n",(0,s.jsx)(n.p,{children:"For array fields, the system uses:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Faceting"}),": Processes each object's JSON to extract individual array elements"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Filtering"}),": Uses ",(0,s.jsx)(n.code,{children:"JSON_CONTAINS"})," to check if values exist within arrays"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"performance",children:"Performance"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Array fields are processed in-memory after fetching from database"}),"\n",(0,s.jsx)(n.li,{children:"For large datasets, consider adding database indexes on commonly faceted array fields"}),"\n",(0,s.jsx)(n.li,{children:"The system maintains good performance by only processing array fields when detected"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"schema-configuration",children:"Schema Configuration"}),"\n",(0,s.jsx)(n.p,{children:"To enable faceting on array fields, ensure your schema property has:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "type": "array",\n  "facetable": true,\n  "items": {\n    "type": "string"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Only arrays of simple values (strings, numbers, booleans) are supported for faceting. Arrays of objects are not facetable."}),"\n",(0,s.jsx)(n.h2,{id:"benefits",children:"Benefits"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Better User Experience"}),": Users can filter by individual array elements"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Accurate Counts"}),": Facet counts reflect actual content distribution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Flexible Filtering"}),": Support for both single values and arrays in filters"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automatic Detection"}),": No configuration required - works automatically"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"limitations",children:"Limitations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Only arrays of simple values are supported (strings, numbers, booleans)"}),"\n",(0,s.jsx)(n.li,{children:"Arrays of objects or nested arrays are not facetable"}),"\n",(0,s.jsx)(n.li,{children:"Performance depends on array size and dataset size"}),"\n",(0,s.jsx)(n.li,{children:"Case-insensitive matching for string values"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);