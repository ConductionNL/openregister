"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[4808],{28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>a});var r=t(96540);const i={},s=r.createContext(i);function c(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(s.Provider,{value:n},e.children)}},73058:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"development/external-app-optimization","title":"External App Cache Optimization","description":"Optimizing ObjectService performance for external apps","source":"@site/docs/development/external-app-optimization.md","sourceDirName":"development","slug":"/development/external-app-optimization","permalink":"/docs/development/external-app-optimization","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/development/external-app-optimization.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"External App Cache Optimization","sidebar_position":4,"description":"Optimizing ObjectService performance for external apps"},"sidebar":"tutorialSidebar","previous":{"title":"Ollama Setup and Configuration","permalink":"/docs/development/ollama"},"next":{"title":"Tool Registration","permalink":"/docs/development/tool-registration"}}');var i=t(74848),s=t(28453);const c={title:"External App Cache Optimization",sidebar_position:4,description:"Optimizing ObjectService performance for external apps"},a="External App Cache Optimization",l={},o=[{value:"Overview",id:"overview",level:2},{value:"The Problem",id:"the-problem",level:2},{value:"Cache Thrashing for External Apps",id:"cache-thrashing-for-external-apps",level:3},{value:"The Solution",id:"the-solution",level:2},{value:"Enhanced Cache Isolation",id:"enhanced-cache-isolation",level:3},{value:"Implementation Guide",id:"implementation-guide",level:2},{value:"Method 1: Explicit App Context (Recommended)",id:"method-1-explicit-app-context-recommended",level:3},{value:"Method 2: Automatic Detection (Fallback)",id:"method-2-automatic-detection-fallback",level:3},{value:"Method 3: Query Fingerprinting (Last Resort)",id:"method-3-query-fingerprinting-last-resort",level:3},{value:"Performance Impact",id:"performance-impact",level:2},{value:"Before Optimization",id:"before-optimization",level:3},{value:"After Optimization",id:"after-optimization",level:3},{value:"Cache Key Structure",id:"cache-key-structure",level:2},{value:"Enhanced Cache Key Generation",id:"enhanced-cache-key-generation",level:3},{value:"Cache Isolation Benefits",id:"cache-isolation-benefits",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"For External App Developers",id:"for-external-app-developers",level:3},{value:"For OpenRegister Integration",id:"for-openregister-integration",level:3},{value:"Cache Invalidation Coordination",id:"cache-invalidation-coordination",level:2},{value:"Automatic Invalidation",id:"automatic-invalidation",level:3},{value:"Cache Scope",id:"cache-scope",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:2},{value:"Debug Logging",id:"debug-logging",level:3},{value:"Log Analysis",id:"log-analysis",level:3},{value:"Migration Guide",id:"migration-guide",level:2},{value:"Updating Existing External Apps",id:"updating-existing-external-apps",level:3},{value:"Expected Performance Gains",id:"expected-performance-gains",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Verification Steps",id:"verification-steps",level:3}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"external-app-cache-optimization",children:"External App Cache Optimization"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["External Nextcloud apps calling ",(0,i.jsx)(n.code,{children:"ObjectService.searchObjectsPaginated()"})," can experience ",(0,i.jsx)(n.strong,{children:"slow response times"})," due to cache thrashing. This guide explains how to optimize caching for external apps accessing OpenRegister programmatically."]}),"\n",(0,i.jsx)(n.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,i.jsx)(n.h3,{id:"cache-thrashing-for-external-apps",children:"Cache Thrashing for External Apps"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TD\n    A[External App 1] --\x3e B["ObjectService (no user session)"]\n    C[External App 2] --\x3e B\n    D[External App 3] --\x3e B\n    B --\x3e E["Cache Key: \'anonymous\'"]\n    \n    subgraph "Cache Thrashing"\n        E --\x3e F[App 1 caches results]\n        F --\x3e G[App 2 invalidates cache]\n        G --\x3e H[App 3 misses cache]\n        H --\x3e I[Performance degradation]\n    end\n    \n    style I fill:#ffcdd2\n    style E fill:#fff3e0'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Issue"}),": All external apps without user sessions share the same ",(0,i.jsx)(n.code,{children:"'anonymous'"})," cache namespace, causing:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cache invalidation conflicts"})," between different apps"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Poor cache hit rates"})," due to mixed usage patterns"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Slow responses"})," (2+ seconds instead of <500ms)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Resource waste"})," from repeated identical queries"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"the-solution",children:"The Solution"}),"\n",(0,i.jsx)(n.h3,{id:"enhanced-cache-isolation",children:"Enhanced Cache Isolation"}),"\n",(0,i.jsx)(n.mermaid,{value:"graph TD\n    A[External App 1] --\x3e B[setExternalAppContext('myapp')]\n    C[External App 2] --\x3e D[setExternalAppContext('otherapp')]\n    E[External App 3] --\x3e F[Auto-detection from file path]\n    \n    B --\x3e G[\"Cache: 'external_app_myapp'\"]\n    D --\x3e H[\"Cache: 'external_app_otherapp'\"] \n    F --\x3e I[\"Cache: 'external_app_detected'\"]\n    \n    subgraph \"Isolated Performance\"\n        G --\x3e J[Fast cache hits]\n        H --\x3e K[Fast cache hits]\n        I --\x3e L[Fast cache hits]\n    end\n    \n    style J fill:#c8e6c9\n    style K fill:#c8e6c9\n    style L fill:#c8e6c9"}),"\n",(0,i.jsx)(n.h2,{id:"implementation-guide",children:"Implementation Guide"}),"\n",(0,i.jsx)(n.h3,{id:"method-1-explicit-app-context-recommended",children:"Method 1: Explicit App Context (Recommended)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Best Performance"}),": Explicitly set your app ID for optimal cache isolation."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"<?php\n// Get ObjectService from dependency injection\n$objectService = \\OC::$server->get(\\OCA\\OpenRegister\\Service\\ObjectService::class);\n\n// **CRITICAL**: Set your app context for cache optimization\n$objectService->setExternalAppContext('myapp');\n\n// Now use ObjectService with optimized caching\n$query = [\n    '@self' => ['register' => 19, 'schema' => 116],\n    '_limit' => 50,\n    '_search' => 'test query'\n];\n\n$results = $objectService->searchObjectsPaginated($query);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"method-2-automatic-detection-fallback",children:"Method 2: Automatic Detection (Fallback)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Good Performance"}),": The system automatically detects your app from the call stack."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"<?php\n// System automatically detects calling app from file path\n// /apps/myapp/lib/Service/DataService.php -> 'myapp'\n// /apps-extra/customapp/lib/Controller/ApiController.php -> 'customapp'\n\n$objectService = \\OC::$server->get(\\OCA\\OpenRegister\\Service\\ObjectService::class);\n$results = $objectService->searchObjectsPaginated($query);\n// Cache namespace: 'external_app_myapp' (auto-detected)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"method-3-query-fingerprinting-last-resort",children:"Method 3: Query Fingerprinting (Last Resort)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Basic Performance"}),": For undetectable apps, uses query patterns for isolation."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"<?php\n// When app cannot be detected, system creates query-based cache isolation\n$results = $objectService->searchObjectsPaginated($query);  \n// Cache namespace: 'anonymous_a1b2c3d4' (based on query pattern)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"performance-impact",children:"Performance Impact"}),"\n",(0,i.jsx)(n.h3,{id:"before-optimization",children:"Before Optimization"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Scenario"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Cache Hit Rate"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Response Time"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Issue"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Multiple external apps"}),(0,i.jsx)(n.td,{children:"~10%"}),(0,i.jsx)(n.td,{children:"2-5 seconds"}),(0,i.jsx)(n.td,{children:"Cache thrashing"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Same app, repeated calls"}),(0,i.jsx)(n.td,{children:"~20%"}),(0,i.jsx)(n.td,{children:"1-3 seconds"}),(0,i.jsx)(n.td,{children:"Shared anonymous cache"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Different query patterns"}),(0,i.jsx)(n.td,{children:"~5%"}),(0,i.jsx)(n.td,{children:"3+ seconds"}),(0,i.jsx)(n.td,{children:"Pattern conflicts"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"after-optimization",children:"After Optimization"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Scenario"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Cache Hit Rate"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Response Time"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Improvement"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:["App with ",(0,i.jsx)(n.code,{children:"setExternalAppContext()"})]}),(0,i.jsx)(n.td,{children:"~95%"}),(0,i.jsx)(n.td,{children:"<500ms"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\ud83d\ude80 10x faster"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Auto-detected external app"}),(0,i.jsx)(n.td,{children:"~80%"}),(0,i.jsx)(n.td,{children:"<750ms"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\ud83d\ude80 4x faster"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Query fingerprint isolation"}),(0,i.jsx)(n.td,{children:"~60%"}),(0,i.jsx)(n.td,{children:"<1s"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\ud83d\ude80 3x faster"})})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"cache-key-structure",children:"Cache Key Structure"}),"\n",(0,i.jsx)(n.h3,{id:"enhanced-cache-key-generation",children:"Enhanced Cache Key Generation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Cache key components\n$keyData = [\n    'query' => $query,                    // Actual query parameters\n    'user' => $effectiveUserId,           // Enhanced user context\n    'org' => $orgId,                      // Organization context  \n    'version' => '1.1'                    // Cache version\n];\n\n// Effective user contexts:\n// - Regular users: 'user123'\n// - External apps: 'external_app_myapp'  \n// - Anonymous patterns: 'anonymous_a1b2c3d4'\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cache-isolation-benefits",children:"Cache Isolation Benefits"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Cache Namespaces"\n        A["\'external_app_myapp\'<br/>MyApp cache entries"]\n        B["\'external_app_otherapp\'<br/>OtherApp cache entries"]  \n        C["\'user_admin\'<br/>Admin user cache entries"]\n        D["\'anonymous_pattern1\'<br/>Anonymous pattern cache"]\n    end\n    \n    A --\x3e E[No cache conflicts]\n    B --\x3e E\n    C --\x3e E \n    D --\x3e E\n    E --\x3e F[Optimal cache hit rates]\n    F --\x3e G[Sub-500ms responses]\n    \n    style F fill:#c8e6c9\n    style G fill:#c8e6c9'}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"for-external-app-developers",children:"For External App Developers"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Always set app context"})," before making ObjectService calls:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$objectService->setExternalAppContext('your_app_name');\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Reuse ObjectService instances"})," to maintain app context:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"class MyService {\n    private ObjectService $objectService;\n    \n    public function __construct() {\n        $this->objectService = \\OC::$server->get(ObjectService::class);\n        $this->objectService->setExternalAppContext('myapp');\n    }\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use consistent app IDs"})," across your application:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Good: Consistent app ID\n$objectService->setExternalAppContext('myapp');\n\n// Bad: Different IDs fragment cache\n$objectService->setExternalAppContext('myapp_v1');\n$objectService->setExternalAppContext('myapp_production');\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"for-openregister-integration",children:"For OpenRegister Integration"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check cache performance"})," in logs:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs master-nextcloud-1 | grep 'External app cache context'\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Monitor cache hit rates"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs master-nextcloud-1 | grep 'Cache hit - returning cached response'\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verify app detection"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs master-nextcloud-1 | grep 'External app cache context determined'\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"cache-invalidation-coordination",children:"Cache Invalidation Coordination"}),"\n",(0,i.jsx)(n.h3,{id:"automatic-invalidation",children:"Automatic Invalidation"}),"\n",(0,i.jsx)(n.p,{children:"Cache invalidation works seamlessly for external apps:"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant ExtApp as External App\n    participant ObjService as ObjectService\n    participant Cache as Cache Layer\n    participant Admin as Admin User\n    \n    ExtApp->>ObjService: setExternalAppContext('myapp')\n    ExtApp->>ObjService: searchObjectsPaginated()\n    ObjService->>Cache: Store with 'external_app_myapp' key\n    \n    Admin->>ObjService: Create new object\n    ObjService->>Cache: Invalidate all related caches\n    Note over Cache: Including external app caches\n    \n    ExtApp->>ObjService: searchObjectsPaginated() (same query)\n    ObjService->>Cache: Cache miss due to invalidation\n    ObjService--\x3e>ExtApp: Fresh results with new object"}),"\n",(0,i.jsx)(n.h3,{id:"cache-scope",children:"Cache Scope"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Operation"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Invalidation Scope"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"External App Impact"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Create/Update Object"}),(0,i.jsx)(n.td,{children:"Register + Schema specific"}),(0,i.jsx)(n.td,{children:"\u2705 Affected apps only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Delete Object"}),(0,i.jsx)(n.td,{children:"Register + Schema specific"}),(0,i.jsx)(n.td,{children:"\u2705 Affected apps only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Schema Changes"}),(0,i.jsx)(n.td,{children:"All related caches"}),(0,i.jsx)(n.td,{children:"\u2705 All apps using schema"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Bulk Operations"}),(0,i.jsx)(n.td,{children:"Global or context-specific"}),(0,i.jsx)(n.td,{children:"\u2705 Appropriate scope"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,i.jsx)(n.h3,{id:"debug-logging",children:"Debug Logging"}),"\n",(0,i.jsx)(n.p,{children:"Enable cache monitoring for external apps:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Check if your app context is being detected\n$this->logger->debug('Starting ObjectService call', [\n    'app' => 'myapp',\n    'query' => $query\n]);\n\n$objectService->setExternalAppContext('myapp');\n$results = $objectService->searchObjectsPaginated($query);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"log-analysis",children:"Log Analysis"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check cache performance for your app\ndocker logs master-nextcloud-1 | grep 'external_app_myapp'\n\n# Monitor cache hit rates\ndocker logs master-nextcloud-1 | grep 'Cache hit.*myapp'\n\n# Check for cache invalidation events  \ndocker logs master-nextcloud-1 | grep 'cache invalidation.*completed'\n"})}),"\n",(0,i.jsx)(n.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,i.jsx)(n.h3,{id:"updating-existing-external-apps",children:"Updating Existing External Apps"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Before"})," (slow performance):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$objectService = \\OC::$server->get(ObjectService::class);\n$results = $objectService->searchObjectsPaginated($query); // Shared 'anonymous' cache\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"After"})," (optimized performance):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$objectService = \\OC::$server->get(ObjectService::class);\n$objectService->setExternalAppContext('myapp');           // Isolated cache namespace\n$results = $objectService->searchObjectsPaginated($query); // App-specific caching\n"})}),"\n",(0,i.jsx)(n.h3,{id:"expected-performance-gains",children:"Expected Performance Gains"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"App Usage Pattern"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Before"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"After"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Improvement"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"High-frequency identical queries"}),(0,i.jsx)(n.td,{children:"2-3s"}),(0,i.jsx)(n.td,{children:"<100ms"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\ud83d\ude80 20-30x faster"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Similar query patterns"}),(0,i.jsx)(n.td,{children:"1-2s"}),(0,i.jsx)(n.td,{children:"<300ms"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\ud83d\ude80 5-7x faster"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Mixed query patterns"}),(0,i.jsx)(n.td,{children:"2-5s"}),(0,i.jsx)(n.td,{children:"<500ms"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\ud83d\ude80 4-10x faster"})})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Issue"}),": Still getting slow responses after setting app context\n",(0,i.jsx)(n.strong,{children:"Solution"}),": Verify app context is set before each ObjectService call"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Issue"}),": Cache hits not showing in logs",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Solution"}),": Enable debug logging and check for cache invalidation conflicts"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Issue"}),": Different response times for identical queries\n",(0,i.jsx)(n.strong,{children:"Solution"}),": Ensure consistent app ID usage and check for cache invalidation timing"]}),"\n",(0,i.jsx)(n.h3,{id:"verification-steps",children:"Verification Steps"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check app context detection"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs master-nextcloud-1 | grep 'External app cache context determined'\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verify cache isolation"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs master-nextcloud-1 | grep 'external_app_yourappname'\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Monitor response times"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker logs master-nextcloud-1 | grep 'searchObjectsPaginated.*completed'\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related Documentation"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/technical/cache-invalidation-system",children:"Cache Invalidation System"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/development/object-handlers",children:"Object Handlers"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/technical/api-caching",children:"API Caching"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);