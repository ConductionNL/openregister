"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[1439],{28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>l});var t=i(96540);const r={},s=t.createContext(r);function c(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(s.Provider,{value:n},e.children)}},70235:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"technical/vectorization","title":"Vectorization Technical Documentation","description":"Complete technical documentation for vector embeddings and semantic search","source":"@site/docs/technical/vectorization.md","sourceDirName":"technical","slug":"/technical/vectorization","permalink":"/docs/technical/vectorization","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/technical/vectorization.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Vectorization Technical Documentation","sidebar_position":2,"description":"Complete technical documentation for vector embeddings and semantic search","keywords":["Vectorization","Embeddings","Semantic Search","RAG","Vector Search"]},"sidebar":"tutorialSidebar","previous":{"title":"Text Extraction Technical Documentation","permalink":"/docs/technical/text-extraction"},"next":{"title":"Named Entity Recognition Technical Documentation","permalink":"/docs/technical/named-entity-recognition"}}');var r=i(74848),s=i(28453);const c={title:"Vectorization Technical Documentation",sidebar_position:2,description:"Complete technical documentation for vector embeddings and semantic search",keywords:["Vectorization","Embeddings","Semantic Search","RAG","Vector Search"]},l="Vectorization Technical Documentation",d={},o=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Service Flow",id:"service-flow",level:3},{value:"Strategy Pattern",id:"strategy-pattern",level:3},{value:"Services",id:"services",level:2},{value:"VectorizationService",id:"vectorizationservice",level:3},{value:"VectorEmbeddingService",id:"vectorembeddingservice",level:3},{value:"Vectorization Strategies",id:"vectorization-strategies",level:2},{value:"FileVectorizationStrategy",id:"filevectorizationstrategy",level:3},{value:"ObjectVectorizationStrategy",id:"objectvectorizationstrategy",level:3},{value:"Vector Storage",id:"vector-storage",level:2},{value:"Database Storage",id:"database-storage",level:3},{value:"Solr Storage",id:"solr-storage",level:3},{value:"Vector Search Backends",id:"vector-search-backends",level:2},{value:"PHP Cosine Similarity (Default)",id:"php-cosine-similarity-default",level:3},{value:"PostgreSQL + pgvector",id:"postgresql--pgvector",level:3},{value:"Solr 9+ Dense Vector Search",id:"solr-9-dense-vector-search",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Settings Location",id:"settings-location",level:3},{value:"Configuration Properties",id:"configuration-properties",level:3},{value:"Performance",id:"performance",level:2},{value:"Processing Times",id:"processing-times",level:3},{value:"Performance Comparison",id:"performance-comparison",level:3},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Vectorization",id:"vectorization",level:3},{value:"Semantic Search",id:"semantic-search",level:3},{value:"Backend Configuration",id:"backend-configuration",level:2},{value:"UI Configuration",id:"ui-configuration",level:3},{value:"Backend Detection",id:"backend-detection",level:3},{value:"Recommended Setup",id:"recommended-setup",level:2},{value:"Migration",id:"migration",level:2},{value:"From PHP to PostgreSQL",id:"from-php-to-postgresql",level:3},{value:"From PHP to Solr",id:"from-php-to-solr",level:3},{value:"Switching Backends",id:"switching-backends",level:3},{value:"Solr Integration Details",id:"solr-integration-details",level:2},{value:"Vector Storage in Existing Collections",id:"vector-storage-in-existing-collections",level:3},{value:"Solr Document Structure",id:"solr-document-structure",level:3},{value:"KNN Query Syntax",id:"knn-query-syntax",level:3},{value:"Configuration",id:"configuration-1",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:2},{value:"Current Performance",id:"current-performance",level:3},{value:"Performance Targets",id:"performance-targets",level:3},{value:"Performance Comparison",id:"performance-comparison-1",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Backend Not Available",id:"backend-not-available",level:3},{value:"Slow Performance",id:"slow-performance",level:3},{value:"API Endpoints",id:"api-endpoints-1",level:2},{value:"Get Database Info",id:"get-database-info",level:3},{value:"Get Solr Info",id:"get-solr-info",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Feature Documentation",id:"feature-documentation",level:3},{value:"Technical Documentation",id:"technical-documentation",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"vectorization-technical-documentation",children:"Vectorization Technical Documentation"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udcda Feature Documentation"}),": See ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/Features/text-extraction-vectorization-ner",children:"Text Extraction, Vectorization & Named Entity Recognition"})})," for user-facing documentation and overview."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister's VectorizationService generates semantic embeddings from text chunks, enabling RAG (Retrieval Augmented Generation) and semantic search capabilities. The service supports multiple embedding providers and vector storage backends."}),"\n",(0,r.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsx)(n.h3,{id:"service-flow",children:"Service Flow"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Chunk\n    participant VectorService as VectorizationService\n    participant Strategy as VectorizationStrategy\n    participant EmbeddingService as VectorEmbeddingService\n    participant Storage as Vector Storage\n    \n    Chunk->>VectorService: Process chunk\n    VectorService->>Strategy: Get strategy for source type\n    Strategy->>Strategy: Extract vectorization items\n    Strategy->>Strategy: Prepare metadata\n    Strategy->>EmbeddingService: Generate embedding\n    EmbeddingService->>EmbeddingService: Call LLM API\n    EmbeddingService--\x3e>Strategy: Return embedding vector\n    Strategy->>Storage: Store vector with metadata\n    Storage--\x3e>Chunk: Mark as vectorized"}),"\n",(0,r.jsx)(n.h3,{id:"strategy-pattern",children:"Strategy Pattern"}),"\n",(0,r.jsx)(n.mermaid,{value:"classDiagram\n    class VectorizationStrategyInterface {\n        <<interface>>\n        +supports(string) bool\n        +fetchEntities() array\n        +extractVectorizationItems() array\n        +prepareVectorMetadata() array\n    }\n    \n    class FileVectorizationStrategy {\n        +fetchEntities() array\n        -processFileChunks() array\n    }\n    \n    class ObjectVectorizationStrategy {\n        +fetchEntities() array\n        -processObject() array\n    }\n    \n    VectorizationStrategyInterface <|.. FileVectorizationStrategy\n    VectorizationStrategyInterface <|.. ObjectVectorizationStrategy"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": ",(0,r.jsx)(n.code,{children:"lib/Service/Vectorization/"})]}),"\n",(0,r.jsx)(n.h2,{id:"services",children:"Services"}),"\n",(0,r.jsx)(n.h3,{id:"vectorizationservice",children:"VectorizationService"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": ",(0,r.jsx)(n.code,{children:"lib/Service/VectorizationService.php"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Orchestrates vectorization using strategies."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Methods"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"/**\n * Vectorize entities using appropriate strategy.\n */\npublic function vectorizeEntity(\n    Chunk|ObjectEntity $entity,\n    ?VectorizationStrategyInterface $strategy = null\n): array {\n    // Get strategy for entity type\n    if ($strategy === null) {\n        $strategy = $this->getStrategyForEntity($entity);\n    }\n    \n    // Extract vectorization items\n    $items = $strategy->extractVectorizationItems($entity);\n    \n    // Generate embeddings\n    $embeddings = $this->vectorEmbeddingService->generateBatchEmbeddings(\n        array_column($items, 'text'),\n        $provider\n    );\n    \n    // Store vectors\n    foreach ($items as $index => $item) {\n        $embedding = $embeddings[$index];\n        $strategy->storeVector($item, $embedding);\n    }\n    \n    return ['vectors_created' => count($items)];\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"vectorembeddingservice",children:"VectorEmbeddingService"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": ",(0,r.jsx)(n.code,{children:"lib/Service/VectorEmbeddingService.php"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Generates embeddings using LLM providers."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Supported Providers"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"OpenAI"}),": text-embedding-ada-002, text-embedding-3-small, text-embedding-3-large"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fireworks AI"}),": nomic-ai/nomic-embed-text-v1.5, thenlper/gte-base"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ollama"}),": nomic-embed-text"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Methods"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"/**\n * Generate embedding for single text.\n */\npublic function generateEmbedding(\n    string $text,\n    ?string $provider = null\n): ?array {\n    $provider = $provider ?? $this->getDefaultProvider();\n    \n    return match($provider) {\n        'openai' => $this->generateOpenAIEmbedding($text),\n        'fireworks' => $this->generateFireworksEmbedding($text),\n        'ollama' => $this->generateOllamaEmbedding($text),\n        default => throw new Exception(\"Unknown provider: {$provider}\")\n    };\n}\n\n/**\n * Generate embeddings for multiple texts (batch).\n */\npublic function generateBatchEmbeddings(\n    array $texts,\n    ?string $provider = null\n): array {\n    // Batch processing for efficiency\n    $batchSize = 100;\n    $results = [];\n    \n    foreach (array_chunk($texts, $batchSize) as $batch) {\n        $batchResults = $this->callProviderBatchAPI($batch, $provider);\n        $results = array_merge($results, $batchResults);\n    }\n    \n    return $results;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"vectorization-strategies",children:"Vectorization Strategies"}),"\n",(0,r.jsx)(n.h3,{id:"filevectorizationstrategy",children:"FileVectorizationStrategy"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": ",(0,r.jsx)(n.code,{children:"lib/Service/Vectorization/FileVectorizationStrategy.php"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Process"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Processes file chunks individually"}),"\n",(0,r.jsx)(n.li,{children:"Each chunk gets its own vector"}),"\n",(0,r.jsx)(n.li,{children:"Metadata includes file ID, path, chunk index"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Implementation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function extractVectorizationItems(Chunk $chunk): array\n{\n    return [[\n        'text' => $chunk->getTextContent(),\n        'metadata' => [\n            'source_type' => 'file',\n            'source_id' => $chunk->getSourceId(),\n            'chunk_index' => $chunk->getChunkIndex(),\n            'total_chunks' => $this->getTotalChunks($chunk->getSourceId()),\n        ]\n    ]];\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"objectvectorizationstrategy",children:"ObjectVectorizationStrategy"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": ",(0,r.jsx)(n.code,{children:"lib/Service/Vectorization/ObjectVectorizationStrategy.php"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Process"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Processes entire objects as single vectors"}),"\n",(0,r.jsx)(n.li,{children:"One vector per object (not per chunk)"}),"\n",(0,r.jsx)(n.li,{children:"Metadata includes object UUID, schema, register"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Implementation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function extractVectorizationItems(ObjectEntity $object): array\n{\n    // Convert object to text\n    $text = $this->objectService->convertObjectToText($object);\n    \n    return [[\n        'text' => $text,\n        'metadata' => [\n            'source_type' => 'object',\n            'source_id' => $object->getId(),\n            'uuid' => $object->getUuid(),\n            'schema_id' => $object->getSchema(),\n            'register_id' => $object->getRegister(),\n        ]\n    ]];\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"vector-storage",children:"Vector Storage"}),"\n",(0,r.jsx)(n.h3,{id:"database-storage",children:"Database Storage"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Table"}),": ",(0,r.jsx)(n.code,{children:"oc_openregister_vectors"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE oc_openregister_vectors (\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\n    entity_type VARCHAR(50) NOT NULL,\n    entity_id VARCHAR(255) NOT NULL,\n    chunk_index INT NOT NULL DEFAULT 0,\n    total_chunks INT NOT NULL DEFAULT 1,\n    chunk_text TEXT,\n    vector_data BLOB NOT NULL,\n    embedding_model VARCHAR(100) NOT NULL,\n    embedding_dimensions INT NOT NULL,\n    metadata JSON,\n    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    \n    INDEX idx_entity (entity_type, entity_id),\n    INDEX idx_model (embedding_model)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Storage Format"}),": Serialized binary (PHP ",(0,r.jsx)(n.code,{children:"serialize()"}),")"]}),"\n",(0,r.jsx)(n.h3,{id:"solr-storage",children:"Solr Storage"}),"\n",(0,r.jsx)(n.p,{children:"Vectors stored directly in existing Solr collections:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"FileCollection"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "file_12345_chunk_0",\n  "entity_type_s": "file",\n  "entity_id_s": "12345",\n  "chunk_index_i": 0,\n  "chunk_text_txt": "Text content...",\n  "_embedding_": [0.1, 0.2, 0.3, ...],\n  "_embedding_model_": "text-embedding-3-small",\n  "_embedding_dim_": 1536\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ObjectCollection"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "object_abc123",\n  "entity_type_s": "object",\n  "entity_id_s": "abc123",\n  "chunk_index_i": 0,\n  "chunk_text_txt": "Object text...",\n  "_embedding_": [0.1, 0.2, 0.3, ...],\n  "_embedding_model_": "text-embedding-3-small",\n  "_embedding_dim_": 1536\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"vector-search-backends",children:"Vector Search Backends"}),"\n",(0,r.jsx)(n.h3,{id:"php-cosine-similarity-default",children:"PHP Cosine Similarity (Default)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status"}),": Always available fallback"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"How It Works"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fetches vectors from database"}),"\n",(0,r.jsx)(n.li,{children:"Calculates cosine similarity in PHP"}),"\n",(0,r.jsx)(n.li,{children:"Sorts results in memory"}),"\n",(0,r.jsx)(n.li,{children:"Returns top N matches"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Suitable for small datasets (<500 vectors)"}),"\n",(0,r.jsx)(n.li,{children:"Current optimization: Limited to 500 most recent vectors"}),"\n",(0,r.jsx)(n.li,{children:"Scales linearly: O(n) complexity"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use When"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Small dataset (<500 vectors)"}),"\n",(0,r.jsx)(n.li,{children:"No PostgreSQL or Solr available"}),"\n",(0,r.jsx)(n.li,{children:"Testing/development environment"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"postgresql--pgvector",children:"PostgreSQL + pgvector"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status"}),": Available when PostgreSQL with pgvector extension is installed"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PostgreSQL version >= 11"}),"\n",(0,r.jsx)(n.li,{children:"pgvector extension installed"}),"\n",(0,r.jsx)(n.li,{children:"Vector column migration"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Installation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Install extension\nCREATE EXTENSION IF NOT EXISTS vector;\n\n-- Create optimized vector table\nCREATE TABLE openregister_vectors (\n    id SERIAL PRIMARY KEY,\n    entity_type VARCHAR(50),\n    entity_id VARCHAR(255),\n    chunk_index INTEGER,\n    total_chunks INTEGER,\n    chunk_text TEXT,\n    embedding vector(768),  -- Native vector type!\n    embedding_model VARCHAR(100),\n    embedding_dimensions INTEGER,\n    metadata JSONB,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Create HNSW index for fast similarity search\nCREATE INDEX ON openregister_vectors \nUSING hnsw (embedding vector_cosine_ops);\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"10-100x faster than PHP"}),"\n",(0,r.jsx)(n.li,{children:"Database-level KNN search"}),"\n",(0,r.jsx)(n.li,{children:"Optimal for medium-large datasets"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"solr-9-dense-vector-search",children:"Solr 9+ Dense Vector Search"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status"}),": Available when Solr 9.0+ is configured"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Capabilities"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Dense Vector Field Type: ",(0,r.jsx)(n.code,{children:"DenseVectorField"})]}),"\n",(0,r.jsx)(n.li,{children:"KNN Search: K-Nearest Neighbors query parser"}),"\n",(0,r.jsx)(n.li,{children:"Similarity Functions: Cosine, Dot Product, Euclidean"}),"\n",(0,r.jsx)(n.li,{children:"Indexing Algorithms: HNSW (Hierarchical Navigable Small World)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Schema Configuration"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<fieldType name="knn_vector" class="solr.DenseVectorField" \n           vectorDimension="768" \n           similarityFunction="cosine" \n           knnAlgorithm="hnsw"/>\n\n<field name="_embedding_" type="knn_vector" indexed="true" stored="true"/>\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Query Example"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "q": "{!knn f=_embedding_ topK=10}[0.123, 0.456, ...]",\n  "fl": "id,score"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Very fast distributed vector search"}),"\n",(0,r.jsx)(n.li,{children:"Best for large-scale deployments"}),"\n",(0,r.jsx)(n.li,{children:"100-1000x faster than PHP at scale"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"settings-location",children:"Settings Location"}),"\n",(0,r.jsx)(n.p,{children:"Vector search backend configuration stored in LLM settings:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "llm": {\n    "vectorConfig": {\n      "backend": "solr",\n      "solrCollection": "openregister_vectors",\n      "solrField": "_embedding_"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-properties",children:"Configuration Properties"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"backend"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"'php'"})}),(0,r.jsx)(n.td,{children:"Vector search backend: 'php', 'database', or 'solr'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"solrCollection"})}),(0,r.jsx)(n.td,{children:"string|null"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"null"})}),(0,r.jsx)(n.td,{children:"Solr collection name (required for Solr backend)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"solrField"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"'_embedding_'"})}),(0,r.jsx)(n.td,{children:"Solr field name for dense vectors"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,r.jsx)(n.h3,{id:"processing-times",children:"Processing Times"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Stage"}),(0,r.jsx)(n.th,{children:"Time per Item"}),(0,r.jsx)(n.th,{children:"Notes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Embedding Generation"})}),(0,r.jsx)(n.td,{children:"200-500ms"}),(0,r.jsx)(n.td,{children:"Per chunk (one-time)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Vector Storage"})}),(0,r.jsx)(n.td,{children:"10-50ms"}),(0,r.jsx)(n.td,{children:"Database or Solr"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Vector Search (PHP)"})}),(0,r.jsx)(n.td,{children:"1-10s"}),(0,r.jsx)(n.td,{children:"Depends on dataset size"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Vector Search (PostgreSQL)"})}),(0,r.jsx)(n.td,{children:"20-200ms"}),(0,r.jsx)(n.td,{children:"With HNSW index"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Vector Search (Solr)"})}),(0,r.jsx)(n.td,{children:"10-30ms"}),(0,r.jsx)(n.td,{children:"With HNSW index"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"performance-comparison",children:"Performance Comparison"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test"}),": Search 10,000 vectors, return top 10 results"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Backend"}),(0,r.jsx)(n.th,{children:"Latency"}),(0,r.jsx)(n.th,{children:"Throughput"}),(0,r.jsx)(n.th,{children:"Memory"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"PHP"})}),(0,r.jsx)(n.td,{children:"10s"}),(0,r.jsx)(n.td,{children:"1 req/s"}),(0,r.jsx)(n.td,{children:"Low"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"PostgreSQL + pgvector"})}),(0,r.jsx)(n.td,{children:"50ms"}),(0,r.jsx)(n.td,{children:"50 req/s"}),(0,r.jsx)(n.td,{children:"Medium"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Solr 9+ (HNSW)"})}),(0,r.jsx)(n.td,{children:"20ms"}),(0,r.jsx)(n.td,{children:"100+ req/s"}),(0,r.jsx)(n.td,{children:"Medium-High"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,r.jsx)(n.h3,{id:"vectorization",children:"Vectorization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'POST /api/chunks/vectorize\nContent-Type: application/json\n\n{\n  "source_type": "file",\n  "source_id": 12345,\n  "provider": "openai"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "vectors_created": 14,\n  "model": "text-embedding-3-small",\n  "dimensions": 1536\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"semantic-search",children:"Semantic Search"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'POST /api/search/semantic\nContent-Type: application/json\n\n{\n  "query": "budget discussion with John",\n  "limit": 10,\n  "filters": {\n    "source_type": ["file", "object"]\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "chunk_id": 123,\n      "source_type": "file",\n      "source_id": 12345,\n      "text": "...discussed budget with John Doe...",\n      "similarity": 0.87,\n      "metadata": {\n        "file_name": "meeting-notes.pdf",\n        "chunk_index": 3\n      }\n    }\n  ],\n  "total": 10\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"backend-configuration",children:"Backend Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"ui-configuration",children:"UI Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Configure in ",(0,r.jsx)(n.strong,{children:"Settings \u2192 OpenRegister \u2192 LLM Configuration"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Configure LLM"'})," button"]}),"\n",(0,r.jsxs)(n.li,{children:["Scroll to ",(0,r.jsx)(n.strong,{children:'"Vector Search Backend"'})," section"]}),"\n",(0,r.jsxs)(n.li,{children:["Select backend from dropdown:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PHP Cosine Similarity (\ud83d\udc0c Slow)"}),"\n",(0,r.jsx)(n.li,{children:"PostgreSQL + pgvector (\u26a1 Fast)"}),"\n",(0,r.jsx)(n.li,{children:"Solr 9+ Dense Vector (\ud83d\ude80 Very Fast)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["If Solr selected:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Choose Solr collection from dropdown"}),"\n",(0,r.jsxs)(n.li,{children:["Vector field name is automatically set to ",(0,r.jsx)(n.code,{children:"_embedding_"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:'"Save Configuration"'})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"backend-detection",children:"Backend Detection"}),"\n",(0,r.jsx)(n.p,{children:"The system automatically detects available backends:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Database Detection"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Checks database platform (PostgreSQL vs MariaDB/MySQL)"}),"\n",(0,r.jsx)(n.li,{children:"Queries for pgvector extension"}),"\n",(0,r.jsx)(n.li,{children:"Shows availability status"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solr Detection"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Checks Solr version >= 9.0"}),"\n",(0,r.jsx)(n.li,{children:"Lists available collections"}),"\n",(0,r.jsx)(n.li,{children:"Validates vector field configuration"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"recommended-setup",children:"Recommended Setup"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Dataset Size"}),(0,r.jsx)(n.th,{children:"Recommended Backend"}),(0,r.jsx)(n.th,{children:"Reason"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"< 500 vectors"}),(0,r.jsx)(n.td,{children:"PHP"}),(0,r.jsx)(n.td,{children:"Simple, no setup"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"500 - 10,000"}),(0,r.jsx)(n.td,{children:"PostgreSQL + pgvector"}),(0,r.jsx)(n.td,{children:"Fast, integrated"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"10,000+"}),(0,r.jsx)(n.td,{children:"Solr 9+"}),(0,r.jsx)(n.td,{children:"Best performance, scalability"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"migration",children:"Migration"}),"\n",(0,r.jsx)(n.h3,{id:"from-php-to-postgresql",children:"From PHP to PostgreSQL"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Install PostgreSQL with pgvector extension"}),"\n",(0,r.jsx)(n.li,{children:"Migrate vector table to PostgreSQL"}),"\n",(0,r.jsx)(n.li,{children:"Update Nextcloud database configuration"}),"\n",(0,r.jsx)(n.li,{children:'Select "PostgreSQL + pgvector" in LLM Configuration'}),"\n",(0,r.jsx)(n.li,{children:"System will auto-detect and enable"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"from-php-to-solr",children:"From PHP to Solr"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Ensure Solr 9.0+ is running"}),"\n",(0,r.jsx)(n.li,{children:"Create or select Solr collection"}),"\n",(0,r.jsxs)(n.li,{children:["Configure vector field in Solr schema (",(0,r.jsx)(n.code,{children:"_embedding_"}),")"]}),"\n",(0,r.jsx)(n.li,{children:'Select "Solr 9+ Dense Vector" in LLM Configuration'}),"\n",(0,r.jsx)(n.li,{children:"Choose collection and save"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"switching-backends",children:"Switching Backends"}),"\n",(0,r.jsx)(n.p,{children:"You can switch backends at any time:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configuration changes take effect immediately"}),"\n",(0,r.jsx)(n.li,{children:"Existing vectors remain in database"}),"\n",(0,r.jsx)(n.li,{children:"New searches use selected backend"}),"\n",(0,r.jsx)(n.li,{children:"No data migration required (vectors stored in database regardless of backend)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"solr-integration-details",children:"Solr Integration Details"}),"\n",(0,r.jsx)(n.h3,{id:"vector-storage-in-existing-collections",children:"Vector Storage in Existing Collections"}),"\n",(0,r.jsx)(n.p,{children:"Vectors are stored directly in existing Solr collections (fileCollection and objectCollection) rather than a separate vector collection:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Files"}),": Vectors stored in ",(0,r.jsx)(n.code,{children:"fileCollection"})," alongside file chunks",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Objects"}),": Vectors stored in ",(0,r.jsx)(n.code,{children:"objectCollection"})," alongside object data"]}),"\n",(0,r.jsx)(n.p,{children:"This enables:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Single source of truth for each entity"}),"\n",(0,r.jsx)(n.li,{children:"Full document retrieval without additional lookups"}),"\n",(0,r.jsx)(n.li,{children:"Atomic updates to existing documents"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"solr-document-structure",children:"Solr Document Structure"}),"\n",(0,r.jsx)(n.p,{children:"Vectors are stored as fields in existing Solr documents:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "object_abc123_chunk_0",\n  "entity_type_s": "object",\n  "entity_id_s": "abc123",\n  "chunk_index_i": 0,\n  "chunk_text_txt": "This is the text that was embedded...",\n  "_embedding_": [0.1, 0.2, 0.3, ...],\n  "_embedding_model_": "text-embedding-ada-002",\n  "_embedding_dim_": 1536\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"knn-query-syntax",children:"KNN Query Syntax"}),"\n",(0,r.jsx)(n.p,{children:"The implementation uses Solr's KNN query parser:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"{!knn f=_embedding_ topK=10}[0.1, 0.2, 0.3, ...]\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Very fast (millisecond range)"}),"\n",(0,r.jsx)(n.li,{children:"Uses HNSW indexing algorithm"}),"\n",(0,r.jsx)(n.li,{children:"Returns full documents with all metadata"}),"\n",(0,r.jsx)(n.li,{children:"Supports filtering by entity type"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-1",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["No separate ",(0,r.jsx)(n.code,{children:"solrCollection"})," field needed - uses existing ",(0,r.jsx)(n.code,{children:"fileCollection"})," and ",(0,r.jsx)(n.code,{children:"objectCollection"})," from Solr settings. The ",(0,r.jsx)(n.code,{children:"solrField"})," is hardcoded to ",(0,r.jsx)(n.code,{children:"_embedding_"})," (a reserved system field)."]}),"\n",(0,r.jsx)(n.h2,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,r.jsx)(n.h3,{id:"current-performance",children:"Current Performance"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PHP Backend"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"279 vectors \u2192 ~300ms similarity calculation"}),"\n",(0,r.jsx)(n.li,{children:"1,000 vectors \u2192 ~1 second"}),"\n",(0,r.jsx)(n.li,{children:"10,000 vectors \u2192 ~10 seconds"}),"\n",(0,r.jsx)(n.li,{children:"Plus embedding generation time (~1.5s)"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Current optimization"}),": Limited to 500 most recent vectors"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL + pgvector"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"1K vectors \u2192 ~20ms"}),"\n",(0,r.jsx)(n.li,{children:"10K vectors \u2192 ~50ms"}),"\n",(0,r.jsx)(n.li,{children:"100K vectors \u2192 ~200ms"}),"\n",(0,r.jsx)(n.li,{children:"Uses HNSW indexing"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solr 9+ Dense Vector"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"1K vectors \u2192 ~20ms"}),"\n",(0,r.jsx)(n.li,{children:"10K vectors \u2192 ~15ms"}),"\n",(0,r.jsx)(n.li,{children:"100K vectors \u2192 ~30ms"}),"\n",(0,r.jsx)(n.li,{children:"Uses HNSW indexing algorithm"}),"\n",(0,r.jsx)(n.li,{children:"Distributed search across collections"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performance-targets",children:"Performance Targets"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Metric"}),(0,r.jsx)(n.th,{children:"Current (PHP)"}),(0,r.jsx)(n.th,{children:"Target (PostgreSQL)"}),(0,r.jsx)(n.th,{children:"Best (Solr)"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Search Time (1K vectors)"})}),(0,r.jsx)(n.td,{children:"1s"}),(0,r.jsx)(n.td,{children:"20ms"}),(0,r.jsx)(n.td,{children:"10ms"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Search Time (10K vectors)"})}),(0,r.jsx)(n.td,{children:"10s"}),(0,r.jsx)(n.td,{children:"50ms"}),(0,r.jsx)(n.td,{children:"15ms"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Search Time (100K vectors)"})}),(0,r.jsx)(n.td,{children:"100s"}),(0,r.jsx)(n.td,{children:"200ms"}),(0,r.jsx)(n.td,{children:"30ms"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Indexing"})}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"HNSW"}),(0,r.jsx)(n.td,{children:"ANN algorithms"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Scalability"})}),(0,r.jsx)(n.td,{children:"Poor"}),(0,r.jsx)(n.td,{children:"Good"}),(0,r.jsx)(n.td,{children:"Excellent"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"performance-comparison-1",children:"Performance Comparison"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test"}),": Search 10,000 vectors, return top 10 results"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Backend"}),(0,r.jsx)(n.th,{children:"Latency"}),(0,r.jsx)(n.th,{children:"Throughput"}),(0,r.jsx)(n.th,{children:"Memory"}),(0,r.jsx)(n.th,{children:"Index Time"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"PHP"})}),(0,r.jsx)(n.td,{children:"10s"}),(0,r.jsx)(n.td,{children:"1 req/s"}),(0,r.jsx)(n.td,{children:"Low"}),(0,r.jsx)(n.td,{children:"N/A"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"PostgreSQL + pgvector"})}),(0,r.jsx)(n.td,{children:"50ms"}),(0,r.jsx)(n.td,{children:"50 req/s"}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Fast"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Solr 9+ (HNSW)"})}),(0,r.jsx)(n.td,{children:"20ms"}),(0,r.jsx)(n.td,{children:"100+ req/s"}),(0,r.jsx)(n.td,{children:"Medium-High"}),(0,r.jsx)(n.td,{children:"Medium"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"backend-not-available",children:"Backend Not Available"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL + pgvector"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify PostgreSQL is installed"}),"\n",(0,r.jsxs)(n.li,{children:["Check pgvector extension: ",(0,r.jsx)(n.code,{children:"SELECT * FROM pg_extension WHERE extname = 'vector';"})]}),"\n",(0,r.jsxs)(n.li,{children:["Install if missing: ",(0,r.jsx)(n.code,{children:"CREATE EXTENSION vector;"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solr 9+"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify Solr version >= 9.0"}),"\n",(0,r.jsx)(n.li,{children:"Check Solr is accessible"}),"\n",(0,r.jsx)(n.li,{children:"Verify collection exists"}),"\n",(0,r.jsx)(n.li,{children:"Check vector field is configured in schema"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"slow-performance",children:"Slow Performance"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PHP Backend"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Consider migrating to PostgreSQL or Solr"}),"\n",(0,r.jsx)(n.li,{children:"Current optimization limits to 500 most recent vectors"}),"\n",(0,r.jsx)(n.li,{children:"Performance scales linearly with vector count"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ensure HNSW index is created"}),"\n",(0,r.jsx)(n.li,{children:"Check query execution plan"}),"\n",(0,r.jsx)(n.li,{children:"Monitor database performance"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solr"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify HNSW indexing is enabled"}),"\n",(0,r.jsx)(n.li,{children:"Check collection health"}),"\n",(0,r.jsx)(n.li,{children:"Monitor Solr performance metrics"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"api-endpoints-1",children:"API Endpoints"}),"\n",(0,r.jsx)(n.h3,{id:"get-database-info",children:"Get Database Info"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/settings/database\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns database type, version, and vector support."}),"\n",(0,r.jsx)(n.h3,{id:"get-solr-info",children:"Get Solr Info"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/settings/solr-info\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns Solr availability, version, and collections."}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsx)(n.h3,{id:"feature-documentation",children:"Feature Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/Features/text-extraction-vectorization-ner",children:"Text Extraction, Vectorization & Named Entity Recognition"})})," - Unified feature documentation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/Features/ai",children:"AI Chat Interface"})})," - RAG and semantic search usage"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"technical-documentation",children:"Technical Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/technical/text-extraction",children:"Text Extraction Technical Documentation"})})," - Text extraction implementation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/technical/named-entity-recognition",children:"Named Entity Recognition Technical Documentation"})})," - NER implementation"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);