"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[9220],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var r=s(96540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},57164:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"developers/commands","title":"CLI Commands","description":"Command-line interface reference for OpenRegister administration","source":"@site/docs/developers/commands.md","sourceDirName":"developers","slug":"/developers/commands","permalink":"/docs/developers/commands","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/developers/commands.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12,"title":"CLI Commands","description":"Command-line interface reference for OpenRegister administration"},"sidebar":"tutorialSidebar","previous":{"title":"Frontend Architecture","permalink":"/docs/developers/frontend"},"next":{"title":"Bulk Import Deduplication System","permalink":"/docs/developers/bulk-import-deduplication"}}');var t=s(74848),i=s(28453);const o={sidebar_position:12,title:"CLI Commands",description:"Command-line interface reference for OpenRegister administration"},c="CLI Commands Reference",l={},a=[{value:"Quick Reference",id:"quick-reference",level:2},{value:"Command Execution",id:"command-execution",level:2},{value:"Basic Syntax",id:"basic-syntax",level:3},{value:"Common Container Names",id:"common-container-names",level:3},{value:"OpenRegister Commands",id:"openregister-commands",level:2},{value:"1. SOLR Management Command (&#39;openregister:solr&#39;)",id:"1-solr-management-command-openregistersolr",level:3},{value:"Setup",id:"setup",level:4},{value:"Optimize",id:"optimize",level:4},{value:"Warm",id:"warm",level:4},{value:"Health",id:"health",level:4},{value:"Schema Check",id:"schema-check",level:4},{value:"Clear",id:"clear",level:4},{value:"Stats",id:"stats",level:4},{value:"2. SOLR Debug Command (&#39;openregister:solr&#39;)",id:"2-solr-debug-command-openregistersolr",level:3},{value:"Command Comparison",id:"command-comparison",level:3},{value:"Database Commands",id:"database-commands",level:2},{value:"Standard Nextcloud Commands",id:"standard-nextcloud-commands",level:3},{value:"API Testing Commands",id:"api-testing-commands",level:2},{value:"Object Operations",id:"object-operations",level:3},{value:"Bulk Import Testing",id:"bulk-import-testing",level:3},{value:"SOLR Direct Testing",id:"solr-direct-testing",level:2},{value:"Collection Queries",id:"collection-queries",level:3},{value:"Database Inspection Commands",id:"database-inspection-commands",level:2},{value:"Direct Database Access",id:"direct-database-access",level:3},{value:"Debugging Commands",id:"debugging-commands",level:2},{value:"System Information",id:"system-information",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:3},{value:"App Management Commands",id:"app-management-commands",level:2},{value:"OpenRegister App Commands",id:"openregister-app-commands",level:3},{value:"Development Workflow Commands",id:"development-workflow-commands",level:2},{value:"Complete Testing Sequence",id:"complete-testing-sequence",level:3},{value:"Troubleshooting Commands",id:"troubleshooting-commands",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Security Notes",id:"security-notes",level:2},{value:"Authentication Headers",id:"authentication-headers",level:3},{value:"Container Access",id:"container-access",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Memory Management",id:"memory-management",level:3},{value:"Permanent Memory Limit Increase",id:"permanent-memory-limit-increase",level:4},{value:"Temporary Memory Increase",id:"temporary-memory-increase",level:4},{value:"Bulk Operations",id:"bulk-operations",level:3},{value:"Workflow Examples",id:"workflow-examples",level:2},{value:"Initial Setup Workflow",id:"initial-setup-workflow",level:3},{value:"Maintenance Workflow",id:"maintenance-workflow",level:3},{value:"Debugging Workflow",id:"debugging-workflow",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Production Recommendations",id:"production-recommendations",level:3},{value:"Performance Optimization",id:"performance-optimization-1",level:3},{value:"Security Considerations",id:"security-considerations",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Changelog",id:"changelog",level:2},{value:"Version 0.2.8",id:"version-028",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"cli-commands-reference",children:"CLI Commands Reference"})}),"\n",(0,t.jsx)(n.p,{children:"OpenRegister provides several CLI commands for administration, debugging, and maintenance tasks. All commands are executed using Nextcloud's 'occ' command-line tool."}),"\n",(0,t.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Command"}),(0,t.jsx)(n.th,{children:"Purpose"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["'openregister:solr",":manage","'"]}),(0,t.jsx)(n.td,{children:"Production SOLR management"}),(0,t.jsx)(n.td,{children:"Setup, optimize, maintain SOLR"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["'openregister:solr",":debug","'"]}),(0,t.jsx)(n.td,{children:"SOLR debugging"}),(0,t.jsx)(n.td,{children:"Troubleshoot SOLR issues"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Standard Nextcloud OCC"}),(0,t.jsx)(n.td,{children:"App & system management"}),(0,t.jsx)(n.td,{children:"Enable/disable, maintenance"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"command-execution",children:"Command Execution"}),"\n",(0,t.jsx)(n.h3,{id:"basic-syntax",children:"Basic Syntax"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# From host machine (recommended for WSL/Docker)\ndocker exec -u 33 <nextcloud-container> php /var/www/html/occ <command>\n\n# From within container\nphp /var/www/html/occ <command>\n\n# With increased memory limit (for large operations)\ndocker exec -u 33 <nextcloud-container> php -d memory_limit=4G /var/www/html/occ <command>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"common-container-names",children:"Common Container Names"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Development"}),": 'master-nextcloud-1'"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Production"}),": Usually 'nextcloud' or your custom container name"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Find your container"}),": 'docker ps | grep nextcloud'"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"openregister-commands",children:"OpenRegister Commands"}),"\n",(0,t.jsxs)(n.h3,{id:"1-solr-management-command-openregistersolr",children:["1. SOLR Management Command ('openregister:solr",":manage","')"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Production-ready SOLR management for setup, optimization, and maintenance."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Available Actions"}),":"]}),"\n",(0,t.jsx)(n.h4,{id:"setup",children:"Setup"}),"\n",(0,t.jsx)(n.p,{children:"Initialize complete SOLR infrastructure including configSets, collections, and schema."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage setup\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Creates SOLR configSet"}),"\n",(0,t.jsx)(n.li,{children:"Creates base collection"}),"\n",(0,t.jsx)(n.li,{children:"Deploys schema with ObjectEntity fields"}),"\n",(0,t.jsx)(n.li,{children:"Creates tenant-specific collection"}),"\n",(0,t.jsx)(n.li,{children:"Validates setup"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"optimize",children:"Optimize"}),"\n",(0,t.jsx)(n.p,{children:"Optimize SOLR index for better query performance."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Optimize index\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage optimize\n\n# Optimize and commit immediately\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage optimize --commit\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"When to use"}),": After large bulk imports, during maintenance windows, before high-traffic periods."]}),"\n",(0,t.jsx)(n.h4,{id:"warm",children:"Warm"}),"\n",(0,t.jsx)(n.p,{children:"Pre-load SOLR caches for better performance."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage warm\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"When to use"}),": After server restarts, deployments, or SOLR restarts."]}),"\n",(0,t.jsx)(n.h4,{id:"health",children:"Health"}),"\n",(0,t.jsx)(n.p,{children:"Comprehensive health check of SOLR infrastructure."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage health\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Checks"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Connection status and response time"}),"\n",(0,t.jsx)(n.li,{children:"Tenant collection accessibility"}),"\n",(0,t.jsx)(n.li,{children:"Search functionality"}),"\n",(0,t.jsx)(n.li,{children:"Document counts"}),"\n",(0,t.jsx)(n.li,{children:"Service statistics"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"schema-check",children:"Schema Check"}),"\n",(0,t.jsx)(n.p,{children:"Validate SOLR schema compatibility with ObjectEntity fields."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage schema-check\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Validates"}),": All required ObjectEntity fields are present in SOLR schema."]}),"\n",(0,t.jsx)(n.h4,{id:"clear",children:"Clear"}),"\n",(0,t.jsx)(n.p,{children:"Clear tenant-specific SOLR index (destructive operation)."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Requires --force flag for safety\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage clear --force\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u26a0\ufe0f Warning"}),": This deletes ALL indexed documents for the current tenant!"]}),"\n",(0,t.jsx)(n.h4,{id:"stats",children:"Stats"}),"\n",(0,t.jsx)(n.p,{children:"Display detailed SOLR statistics and performance metrics."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage stats\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Shows"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Collection information"}),"\n",(0,t.jsx)(n.li,{children:"Document counts"}),"\n",(0,t.jsx)(n.li,{children:"Shard information"}),"\n",(0,t.jsx)(n.li,{children:"Performance metrics"}),"\n",(0,t.jsx)(n.li,{children:"Search/index timing statistics"}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"2-solr-debug-command-openregistersolr",children:["2. SOLR Debug Command ('openregister:solr",":debug","')"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Debugging and troubleshooting SOLR configuration issues."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Available Options"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Run all debug tests\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --all\n\n# Show tenant information\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --tenant-info\n\n# Test SOLR setup\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --setup\n\n# Test connection\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --test-connection\n\n# Check cores/collections\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --check-cores\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example Output"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\ud83d\udd0d SOLR Debug Tool - OpenRegister Multi-Tenant\n================================================\n\ud83d\udccb Tenant Information\n  Instance ID: oc6fgt938z8c\n  Overwrite Host: http://nextcloud.local\n  Generated Tenant ID: nc_f0e53393\n  Base Core Name: openregister\n  Tenant Specific Core: openregister_nc_f0e53393\n\n\ud83d\udd27 Testing SOLR Setup\n  SOLR Configuration:\n    Host: nextcloud-dev-solr\n    Port: 8983\n    Path: /solr\n    Core: openregister\n    Scheme: http\n\u2705 SOLR setup completed successfully\n"})}),"\n",(0,t.jsx)(n.h3,{id:"command-comparison",children:"Command Comparison"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsxs)(n.th,{children:["'openregister:solr",":manage","'"]}),(0,t.jsxs)(n.th,{children:["'openregister:solr",":debug","'"]})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Purpose"})}),(0,t.jsx)(n.td,{children:"Production operations"}),(0,t.jsx)(n.td,{children:"Development/troubleshooting"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Setup"})}),(0,t.jsx)(n.td,{children:"Full production setup"}),(0,t.jsx)(n.td,{children:"Test setup process"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Connection Test"})}),(0,t.jsx)(n.td,{children:"Health check (comprehensive)"}),(0,t.jsx)(n.td,{children:"Basic connection test"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Optimization"})}),(0,t.jsx)(n.td,{children:"\u2705 Yes"}),(0,t.jsx)(n.td,{children:"\u274c No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Cache Warming"})}),(0,t.jsx)(n.td,{children:"\u2705 Yes"}),(0,t.jsx)(n.td,{children:"\u274c No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Statistics"})}),(0,t.jsx)(n.td,{children:"\u2705 Detailed metrics"}),(0,t.jsx)(n.td,{children:"\u274c Basic info only"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Use Case"})}),(0,t.jsx)(n.td,{children:"Production deployments"}),(0,t.jsx)(n.td,{children:"Debugging issues"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"database-commands",children:"Database Commands"}),"\n",(0,t.jsx)(n.h3,{id:"standard-nextcloud-commands",children:"Standard Nextcloud Commands"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Database status\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ db:add-missing-indices\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ db:add-missing-columns\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ db:convert-filecache-bigint\n\n# Maintenance mode\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ maintenance:mode --on\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ maintenance:mode --off\n"})}),"\n",(0,t.jsx)(n.h2,{id:"api-testing-commands",children:"API Testing Commands"}),"\n",(0,t.jsx)(n.h3,{id:"object-operations",children:"Object Operations"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create test object\ndocker exec -u 33 master-nextcloud-1 curl -s -u 'admin:admin' \\\n  -X POST \\\n  -H 'Content-Type: application/json' \\\n  -H 'OCS-APIREQUEST: true' \\\n  'http://localhost/index.php/apps/openregister/api/objects/19/105' \\\n  -d '{\"naam\": \"Test Object\", \"beschrijving\": \"Test description\"}'\n\n# Get objects\ndocker exec -u 33 master-nextcloud-1 curl -s -u 'admin:admin' \\\n  -H 'Content-Type: application/json' \\\n  'http://localhost/index.php/apps/openregister/api/objects?register=19&schema=105'\n\n# Delete object by UUID\ndocker exec -u 33 master-nextcloud-1 curl -s -u 'admin:admin' \\\n  -X DELETE \\\n  -H 'OCS-APIREQUEST: true' \\\n  'http://localhost/index.php/apps/openregister/api/objects/19/105/<uuid>'\n"})}),"\n",(0,t.jsx)(n.h3,{id:"bulk-import-testing",children:"Bulk Import Testing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Get object count before import\nbefore_count=$(docker exec -u 33 master-nextcloud-1 curl -s -u 'admin:admin' \\\n  -H 'Content-Type: application/json' \\\n  'http://localhost/index.php/apps/openregister/api/objects?register=19&schema=105' | jq -r '.total // 0')\necho \"Objects before: $before_count\"\n\n# Perform bulk import\ndocker exec -u 33 master-nextcloud-1 curl -s -u 'admin:admin' \\\n  -X POST \\\n  -H 'OCS-APIREQUEST: true' \\\n  'http://localhost/index.php/apps/openregister/api/import/19/105' \\\n  -F \"file=@/var/www/html/apps-extra/openregister/lib/Settings/organisatie.csv\"\n\n# Check object count after import\nafter_count=$(docker exec -u 33 master-nextcloud-1 curl -s -u 'admin:admin' \\\n  -H 'Content-Type: application/json' \\\n  'http://localhost/index.php/apps/openregister/api/objects?register=19&schema=105' | jq -r '.total // 0')\necho \"Objects after: $after_count\"\necho \"Imported: $(($after_count - $before_count))\"\n"})}),"\n",(0,t.jsx)(n.h2,{id:"solr-direct-testing",children:"SOLR Direct Testing"}),"\n",(0,t.jsx)(n.h3,{id:"collection-queries",children:"Collection Queries"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Test SOLR collection directly\ndocker exec -u 33 master-nextcloud-1 curl -s \\\n  "http://nextcloud-dev-solr:8983/solr/openregister/select?q=*:*&rows=10&wt=json" \\\n  | jq -r \'{total: .response.numFound, docs: [.response.docs[]? | {id: .id, name: .name}]}\'\n\n# Search for specific content\ndocker exec -u 33 master-nextcloud-1 curl -s \\\n  "http://nextcloud-dev-solr:8983/solr/openregister/select?q=name:test&wt=json" \\\n  | jq .response.docs\n\n# Check SOLR admin APIs\ndocker exec -u 33 master-nextcloud-1 curl -s \\\n  "http://nextcloud-dev-solr:8983/solr/admin/collections?action=CLUSTERSTATUS&wt=json" \\\n  | jq .cluster.collections\n'})}),"\n",(0,t.jsx)(n.h2,{id:"database-inspection-commands",children:"Database Inspection Commands"}),"\n",(0,t.jsx)(n.h3,{id:"direct-database-access",children:"Direct Database Access"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Get database connection info\ndocker exec -u 33 master-nextcloud-1 php -r \"\n\\$config = include '/var/www/html/config/config.php';\necho 'DB_HOST=' . \\$config['dbhost'] . PHP_EOL;\necho 'DB_NAME=' . \\$config['dbname'] . PHP_EOL;\necho 'DB_USER=' . \\$config['dbuser'] . PHP_EOL;\necho 'DB_PASSWORD=' . \\$config['dbpassword'] . PHP_EOL;\n\"\n\n# Connect to database\ndocker exec -u 33 master-nextcloud-1 mysql -h master-database-mysql-1 -u nextcloud -pnextcloud nextcloud\n\n# Object count queries\ndocker exec -u 33 master-nextcloud-1 mysql -h master-database-mysql-1 -u nextcloud -pnextcloud nextcloud -e \"\nSELECT COUNT(*) as total_objects \nFROM oc_openregister_objects \nWHERE register = 19 AND schema = 105;\n\"\n\n# Recent objects\ndocker exec -u 33 master-nextcloud-1 mysql -h master-database-mysql-1 -u nextcloud -pnextcloud nextcloud -e \"\nSELECT \n    LEFT(id, 8) as short_id,\n    name,\n    published IS NOT NULL as auto_published,\n    created,\n    published\nFROM oc_openregister_objects \nWHERE register = 19 AND schema = 105 \nORDER BY created DESC \nLIMIT 5;\n\"\n"})}),"\n",(0,t.jsx)(n.h2,{id:"debugging-commands",children:"Debugging Commands"}),"\n",(0,t.jsx)(n.h3,{id:"system-information",children:"System Information"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# PHP memory and settings\ndocker exec -u 33 master-nextcloud-1 php -r \"\necho 'PHP Memory Limit: ' . ini_get('memory_limit') . PHP_EOL;\necho 'Current usage: ' . round(memory_get_usage(true)/1024/1024, 2) . 'MB' . PHP_EOL;\necho 'Peak usage: ' . round(memory_get_peak_usage(true)/1024/1024, 2) . 'MB' . PHP_EOL;\n\"\n\n# Nextcloud status\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ status\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ app:list | grep openregister\n\n# Log monitoring\ndocker logs master-nextcloud-1 --since 10m | grep -i -E 'solr|openregister|error'\ndocker logs master-nextcloud-1 -f | grep openregister\n"})}),"\n",(0,t.jsx)(n.h3,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Memory usage during operations\ndocker stats master-nextcloud-1 --no-stream\n\n# Container resource usage\ndocker exec master-nextcloud-1 top -bn1 | head -20\n\n# Apache processes\ndocker exec master-nextcloud-1 ps aux | grep apache\n"})}),"\n",(0,t.jsx)(n.h2,{id:"app-management-commands",children:"App Management Commands"}),"\n",(0,t.jsx)(n.h3,{id:"openregister-app-commands",children:"OpenRegister App Commands"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Enable/disable app\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ app:enable openregister\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ app:disable openregister\n\n# App information\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ app:list | grep openregister\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ app:info openregister\n"})}),"\n",(0,t.jsx)(n.h2,{id:"development-workflow-commands",children:"Development Workflow Commands"}),"\n",(0,t.jsx)(n.h3,{id:"complete-testing-sequence",children:"Complete Testing Sequence"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# Complete SOLR and object testing workflow\n\necho "=== OpenRegister Development Testing Sequence ==="\n\n# 1. Check system status\necho "1. System Status Check..."\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ status\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ app:list | grep openregister\n\n# 2. SOLR debugging\necho "2. SOLR Debug Check..."\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --all\n\n# 3. Test object creation\necho "3. Creating test object..."\nuuid=$(docker exec -u 33 master-nextcloud-1 curl -s -u \'admin:admin\' \\\n  -X POST -H \'Content-Type: application/json\' -H \'OCS-APIREQUEST: true\' \\\n  \'http://localhost/index.php/apps/openregister/api/objects/19/105\' \\\n  -d \'{"naam": "CLI Test Object", "beschrijving": "Created via CLI test"}\' | jq -r \'.id\')\n\necho "Created object: $uuid"\n\n# 4. Check SOLR indexing\necho "4. Checking SOLR indexing..."\nsleep 2  # Allow time for indexing\ndocker exec -u 33 master-nextcloud-1 curl -s \\\n  "http://nextcloud-dev-solr:8983/solr/openregister/select?q=*:*&wt=json" \\\n  | jq -r \'{total: .response.numFound, sample: [.response.docs[]? | {id: .id, name: .name}] | .[0:3]}\'\n\n# 5. Test retrieval\necho "5. Testing object retrieval..."\ndocker exec -u 33 master-nextcloud-1 curl -s -u \'admin:admin\' \\\n  "http://localhost/index.php/apps/openregister/api/objects/19/105/$uuid" \\\n  | jq -r \'{id: .id, name: .naam, created: ."@self".created}\'\n\necho "=== Testing Complete ==="\n'})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting-commands",children:"Troubleshooting Commands"}),"\n",(0,t.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Memory exhaustion\ndocker exec -u 33 master-nextcloud-1 php -d memory_limit=4G /var/www/html/occ <command>\n\n# Permission issues\ndocker exec master-nextcloud-1 chown -R www-data:www-data /var/www/html/apps-extra/openregister\n\n# Clear caches\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ maintenance:repair\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ files:scan --all\n\n# Reset SOLR connection\ndocker restart <solr-container-name>\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --setup\n"})}),"\n",(0,t.jsx)(n.h2,{id:"security-notes",children:"Security Notes"}),"\n",(0,t.jsx)(n.h3,{id:"authentication-headers",children:"Authentication Headers"}),"\n",(0,t.jsx)(n.p,{children:"Always include required headers for API calls:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-u 'admin:admin'"})," for basic authentication"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-H 'OCS-APIREQUEST: true'"})," for OCS API requests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-H 'Content-Type: application/json'"})," for JSON payloads"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"container-access",children:"Container Access"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"-u 33"})," (www-data user) for PHP commands"]}),"\n",(0,t.jsx)(n.li,{children:"Use root access only when necessary for system changes"}),"\n",(0,t.jsx)(n.li,{children:"Never expose database credentials in production logs"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(n.h3,{id:"memory-management",children:"Memory Management"}),"\n",(0,t.jsx)(n.h4,{id:"permanent-memory-limit-increase",children:"Permanent Memory Limit Increase"}),"\n",(0,t.jsx)(n.p,{children:"The Docker setup has been configured with 4GB PHP memory limit (matching production). To apply these changes:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# 1. Stop the Nextcloud container\ndocker-compose stop nextcloud\n\n# 2. Start with new configuration\ndocker-compose up -d nextcloud\n\n# 3. Verify new memory limit\ndocker exec -u 33 master-nextcloud-1 php -r \"echo 'PHP Memory Limit: ' . ini_get('memory_limit') . PHP_EOL;\"\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Expected Output:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"PHP Memory Limit: 4G\n"})}),"\n",(0,t.jsx)(n.h4,{id:"temporary-memory-increase",children:"Temporary Memory Increase"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Increase PHP memory limit for single command\ndocker exec -u 33 master-nextcloud-1 php -d memory_limit=4G /var/www/html/occ <command>\n\n# Monitor memory usage during operations\ndocker exec master-nextcloud-1 bash -c 'while true; do free -h; sleep 5; done' &\n"})}),"\n",(0,t.jsx)(n.h3,{id:"bulk-operations",children:"Bulk Operations"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Process large imports in chunks\n# Use pagination for large datasets\n# Monitor system resources during bulk operations\n"})}),"\n",(0,t.jsx)(n.h2,{id:"workflow-examples",children:"Workflow Examples"}),"\n",(0,t.jsx)(n.h3,{id:"initial-setup-workflow",children:"Initial Setup Workflow"}),"\n",(0,t.jsx)(n.p,{children:"Complete workflow for setting up OpenRegister with SOLR:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# Initial OpenRegister setup\n\n# 1. Enable the app\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ app:enable openregister\n\n# 2. Check app status\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ app:info openregister\n\n# 3. Setup SOLR infrastructure\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage setup\n\n# 4. Verify SOLR health\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage health\n\n# 5. Warm up caches\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage warm\n\necho "OpenRegister is ready for use!"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"maintenance-workflow",children:"Maintenance Workflow"}),"\n",(0,t.jsx)(n.p,{children:"Regular maintenance tasks:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# Weekly maintenance\n\n# 1. Check SOLR health\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage health\n\n# 2. Optimize index (run during low-traffic hours)\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage optimize --commit\n\n# 3. Display statistics\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:manage stats\n\n# 4. Check system status\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ status\n\necho "Maintenance complete!"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"debugging-workflow",children:"Debugging Workflow"}),"\n",(0,t.jsx)(n.p,{children:"Troubleshooting when SOLR issues occur:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# Debug SOLR issues\n\n# 1. Run all debug tests\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --all\n\n# 2. Check tenant information\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --tenant-info\n\n# 3. Test connection specifically\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --test-connection\n\n# 4. Check cores/collections\ndocker exec -u 33 master-nextcloud-1 php /var/www/html/occ openregister:solr:debug --check-cores\n\n# 5. Check logs\ndocker logs master-nextcloud-1 --since 10m | grep -i solr\n\necho "Debug information collected!"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"production-recommendations",children:"Production Recommendations"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Initial Setup"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Run 'openregister:solr",":manage"," setup' once during deployment"]}),"\n",(0,t.jsxs)(n.li,{children:["Verify with 'openregister:solr",":manage"," health'"]}),"\n",(0,t.jsxs)(n.li,{children:["Warm caches with 'openregister:solr",":manage"," warm'"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Regular Maintenance"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Run 'optimize' weekly or after large imports"}),"\n",(0,t.jsx)(n.li,{children:"Check 'health' daily via monitoring"}),"\n",(0,t.jsx)(n.li,{children:"Review 'stats' for performance insights"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Troubleshooting"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use 'openregister:solr",":debug","' for initial diagnostics"]}),"\n",(0,t.jsx)(n.li,{children:"Check tenant information to verify multi-tenancy setup"}),"\n",(0,t.jsx)(n.li,{children:"Test connection when experiencing search issues"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-optimization-1",children:"Performance Optimization"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Memory Management"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use '-d memory_limit=4G' for bulk operations"}),"\n",(0,t.jsx)(n.li,{children:"Monitor memory usage during imports"}),"\n",(0,t.jsx)(n.li,{children:"Optimize index after large data changes"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Cache Warming"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Warm caches after cold starts"}),"\n",(0,t.jsx)(n.li,{children:"Run after major deployments"}),"\n",(0,t.jsx)(n.li,{children:"Schedule before high-traffic periods"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Index Optimization"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Run during maintenance windows"}),"\n",(0,t.jsx)(n.li,{children:"Use '--commit' flag for immediate effect"}),"\n",(0,t.jsx)(n.li,{children:"Monitor execution time for large indexes"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Container Access"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Always use '-u 33' (www-data user) for OCC commands"}),"\n",(0,t.jsx)(n.li,{children:"Never expose admin credentials in scripts"}),"\n",(0,t.jsx)(n.li,{children:"Use root access only when necessary"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Data Safety"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Always use '--force' flag for destructive operations"}),"\n",(0,t.jsx)(n.li,{children:"Test commands in development first"}),"\n",(0,t.jsx)(n.li,{children:"Back up before running 'clear' operations"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Production vs Development"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use 'openregister:solr",":manage","' for production"]}),"\n",(0,t.jsxs)(n.li,{children:["Use 'openregister:solr",":debug","' for development only"]}),"\n",(0,t.jsx)(n.li,{children:"Never run debug commands in production load"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Nextcloud OCC"}),": ",(0,t.jsx)(n.a,{href:"https://docs.nextcloud.com/server/latest/admin_manual/occ_command.html",children:"Nextcloud OCC Commands"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"OpenRegister Features"}),": ",(0,t.jsx)(n.a,{href:"/docs/Features/search",children:"SOLR Search"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Development"}),": ",(0,t.jsx)(n.a,{href:"/docs/developers/testing",children:"Testing Guide"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Testing"}),": ",(0,t.jsx)(n.a,{href:"/docs/developers/testing",children:"Testing Guide"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RBAC"}),": ",(0,t.jsx)(n.a,{href:"/docs/developers/rbac",children:"RBAC Implementation"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Frontend"}),": ",(0,t.jsx)(n.a,{href:"/docs/developers/frontend",children:"Frontend Architecture"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"changelog",children:"Changelog"}),"\n",(0,t.jsx)(n.h3,{id:"version-028",children:"Version 0.2.8"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 Added 'openregister:solr",":manage","' for production operations"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 Added 'openregister:solr",":debug","' for troubleshooting"]}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Comprehensive command documentation"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Workflow examples and best practices"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Performance optimization guidelines"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);