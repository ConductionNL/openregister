(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[9417],{7411:()=>{},28453:(e,r,n)=>{"use strict";n.d(r,{R:()=>a,x:()=>o});var s=n(96540);const t={},i=s.createContext(t);function a(e){const r=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:r},e.children)}},28825:()=>{},45673:(e,r,n)=>{"use strict";n.d(r,{A:()=>u});var s=n(96540),t=n(20053),i=n(44404),a=(n(34345),n(28794)),o=n(54022),c=n(72077);function l(e){const r=(0,c.kh)("docusaurus-plugin-redoc");return e?r?.[e]:Object.values(r??{})?.[0]}var d=n(74848);const h=e=>{let{id:r,example:n,pointer:c,...h}=e;const u=l(r),{store:p}=(0,o.r)(u);return(0,s.useEffect)((()=>{p.menu.dispose()}),[p]),(0,d.jsx)(i.ThemeProvider,{theme:p.options.theme,children:(0,d.jsx)("div",{className:(0,t.A)(["redocusaurus","redocusaurus-schema",n?null:"hide-example"]),children:(0,d.jsx)(a.SchemaDefinition,{parser:p.spec.parser,options:p.options,schemaRef:c,...h})})})};h.defaultProps={example:!1};const u=h},63375:(e,r,n)=>{"use strict";n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Features/registers","title":"Register","description":"An overview of how core concepts in Open Register interact with each other.","source":"@site/docs/Features/registers.md","sourceDirName":"Features","slug":"/Features/registers","permalink":"/docs/Features/registers","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Features/registers.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Register","sidebar_position":1,"description":"An overview of how core concepts in Open Register interact with each other.","keywords":["Open Register","Core Concepts","Relationships"]},"sidebar":"tutorialSidebar","previous":{"title":"Core Features","permalink":"/docs/Features/"},"next":{"title":"Schemas","permalink":"/docs/Features/schemas"}}');var t=n(74848),i=n(28453),a=n(45673);n(65537),n(79329);const o={title:"Register",sidebar_position:1,description:"An overview of how core concepts in Open Register interact with each other.",keywords:["Open Register","Core Concepts","Relationships"]},c="Registers",l={},d=[{value:"What is a Register?",id:"what-is-a-register",level:2},{value:"Register Structure",id:"register-structure",level:2},{value:"Register Use Cases",id:"register-use-cases",level:2},{value:"1. Master Data Management",id:"1-master-data-management",level:3},{value:"2. Domain-Specific Data Collections",id:"2-domain-specific-data-collections",level:3},{value:"3. Integration Hubs",id:"3-integration-hubs",level:3},{value:"Working with Registers",id:"working-with-registers",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Creating a Register",id:"creating-a-register",level:3},{value:"Retrieving Register Information",id:"retrieving-register-information",level:3},{value:"Updating a Register",id:"updating-a-register",level:3},{value:"Deleting a Register",id:"deleting-a-register",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Relationship to Other Concepts",id:"relationship-to-other-concepts",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Architecture Overview",id:"architecture-overview",level:3},{value:"Register Lifecycle",id:"register-lifecycle",level:3},{value:"Register-Schema-Object Relationship",id:"register-schema-object-relationship",level:3},{value:"Database Schema",id:"database-schema",level:3},{value:"Register Statistics",id:"register-statistics",level:3},{value:"Folder Management",id:"folder-management",level:3},{value:"Authorization System",id:"authorization-system",level:3},{value:"Event System",id:"event-system",level:3},{value:"Code Examples",id:"code-examples",level:3},{value:"Performance Optimizations",id:"performance-optimizations",level:3},{value:"Best Practices",id:"best-practices-1",level:3},{value:"Monitoring and Debugging",id:"monitoring-and-debugging",level:3}];function h(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"registers",children:"Registers"})}),"\n",(0,t.jsx)(r.h2,{id:"what-is-a-register",children:"What is a Register?"}),"\n",(0,t.jsxs)(r.p,{children:["In Open Register, a ",(0,t.jsx)(r.strong,{children:"Register"})," is a specialized container that holds objects conforming to specific schemas. You can think of a register as:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["A ",(0,t.jsx)(r.strong,{children:"collection"})," of related data objects"]}),"\n",(0,t.jsxs)(r.li,{children:["A ",(0,t.jsx)(r.strong,{children:"domain-specific database"})," focused on a particular subject area"]}),"\n",(0,t.jsxs)(r.li,{children:["A ",(0,t.jsx)(r.strong,{children:"logical grouping"})," of information with common validation rules"]}),"\n",(0,t.jsxs)(r.li,{children:["A ",(0,t.jsx)(r.strong,{children:"database"})," for structured data storage"]}),"\n",(0,t.jsxs)(r.li,{children:["A ",(0,t.jsx)(r.strong,{children:"object store"})," for unstructured data"]}),"\n",(0,t.jsxs)(r.li,{children:["A ",(0,t.jsx)(r.strong,{children:"data lake"})," for large-scale data storage and analysis"]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Registers provide a way to organize data by purpose, domain, or function, making it easier to manage and retrieve related information."}),"\n",(0,t.jsx)(r.h2,{id:"register-structure",children:"Register Structure"}),"\n",(0,t.jsx)(a.A,{id:"open-register",example:!0,pointer:"#/components/schemas/Register"}),"\n",(0,t.jsx)(r.h2,{id:"register-use-cases",children:"Register Use Cases"}),"\n",(0,t.jsx)(r.p,{children:"Registers can be used for various purposes:"}),"\n",(0,t.jsx)(r.h3,{id:"1-master-data-management",children:"1. Master Data Management"}),"\n",(0,t.jsx)(r.p,{children:"Create registers for core business entities like customers, products, or locations to ensure a single source of truth."}),"\n",(0,t.jsx)(r.h3,{id:"2-domain-specific-data-collections",children:"2. Domain-Specific Data Collections"}),"\n",(0,t.jsx)(r.p,{children:"Organize data by business domains such as:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"HR Register (employees, departments, positions)"}),"\n",(0,t.jsx)(r.li,{children:"Financial Register (accounts, transactions, budgets)"}),"\n",(0,t.jsx)(r.li,{children:"Product Register (products, categories, specifications)"}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"3-integration-hubs",children:"3. Integration Hubs"}),"\n",(0,t.jsx)(r.p,{children:"Use registers as integration points between different systems, providing a standardized way to exchange data."}),"\n",(0,t.jsx)(r.h2,{id:"working-with-registers",children:"Working with Registers"}),"\n",(0,t.jsx)(r.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(r.p,{children:"Registers in Open Register can be maintained through both the user interface (UI) and the API. This flexibility allows users to manage registers in a way that best suits their workflow and technical capabilities."}),"\n",(0,t.jsxs)(r.p,{children:["For detailed information on the API endpoints and how to use them, please refer to the ",(0,t.jsx)(r.a,{href:"https://openregisters.app/api#tag/Registers",children:"API documentation for registers"}),"."]}),"\n",(0,t.jsx)(r.h3,{id:"creating-a-register",children:"Creating a Register"}),"\n",(0,t.jsx)(r.p,{children:"To create a new register, you need to define its basic properties and specify which schemas it will support:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'POST /api/registers\n{\n  "title": "Customer Register",\n  "description": "Central repository for customer information",\n  "schemas": ["customer", "address", "preference"],\n  "source": "primary-source",\n  "databaseId": "customer-db"\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"retrieving-register-information",children:"Retrieving Register Information"}),"\n",(0,t.jsx)(r.p,{children:"You can retrieve information about a specific register:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"GET /api/registers/{id}\n"})}),"\n",(0,t.jsx)(r.p,{children:"Or list all available registers:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"GET /api/registers\n"})}),"\n",(0,t.jsx)(r.h3,{id:"updating-a-register",children:"Updating a Register"}),"\n",(0,t.jsx)(r.p,{children:"Registers can be updated to add or remove supported schemas or change other properties:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'PUT /api/registers/{id}\n{\n  "title": "Customer Register",\n  "description": "Updated repository for customer information",\n  "schemas": ["customer", "address", "preference", "communication-history"],\n  "source": "primary-source",\n  "databaseId": "customer-db"\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"deleting-a-register",children:"Deleting a Register"}),"\n",(0,t.jsx)(r.p,{children:"Registers can be deleted when no longer needed:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"DELETE /api/registers/{id}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Logical Grouping"}),": Create registers around logical domains or business functions"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Clear Naming"}),": Use clear, descriptive names for registers"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Documentation"}),": Provide detailed descriptions of each register's purpose"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Schema Selection"}),": Carefully select which schemas belong in each register"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Access Control"}),": Define appropriate access controls for each register"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"relationship-to-other-concepts",children:"Relationship to Other Concepts"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Schemas"}),": Registers specify which schemas they support, defining what types of objects can be stored"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Objects"}),": Objects are stored within registers and must conform to one of the register's supported schemas"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Sources"}),": Registers use sources to determine where and how their data is stored"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(r.p,{children:"Registers are a fundamental organizing principle in Open Register, providing structure and context for your data. By grouping related schemas and objects into registers, you create a more manageable and intuitive data architecture that aligns with your business domains."}),"\n",(0,t.jsx)(r.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,t.jsx)(r.h3,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,t.jsx)(r.p,{children:"Registers serve as organizational containers that group related schemas and objects into logical domains:"}),"\n",(0,t.jsx)(r.mermaid,{value:'graph TB\n    subgraph "Register Layer"\n        Register[Register Entity<br/>Container Definition]\n        RegisterMapper[Register Mapper<br/>Database Operations]\n    end\n    \n    subgraph "Schema Layer"\n        Schema1[Schema: Customer]\n        Schema2[Schema: Address]\n        Schema3[Schema: Preference]\n    end\n    \n    subgraph "Object Layer"\n        Object1[Customer Object 1]\n        Object2[Customer Object 2]\n        Object3[Address Object 1]\n        Object4[Preference Object 1]\n    end\n    \n    subgraph "Storage"\n        DB[(MySQL<br/>oc_openregister_registers)]\n        Folder[/Nextcloud Folder<br/>File Storage/]\n    end\n    \n    Register --\x3e|defines schemas| Schema1\n    Register --\x3e|defines schemas| Schema2\n    Register --\x3e|defines schemas| Schema3\n    \n    Schema1 --\x3e|validates| Object1\n    Schema1 --\x3e|validates| Object2\n    Schema2 --\x3e|validates| Object3\n    Schema3 --\x3e|validates| Object4\n    \n    Object1 --\x3e|belongs to| Register\n    Object2 --\x3e|belongs to| Register\n    Object3 --\x3e|belongs to| Register\n    Object4 --\x3e|belongs to| Register\n    \n    RegisterMapper --\x3e|persists| DB\n    Register --\x3e|stores files| Folder\n    \n    style Register fill:#e1f5ff\n    style RegisterMapper fill:#fff4e1'}),"\n",(0,t.jsx)(r.h3,{id:"register-lifecycle",children:"Register Lifecycle"}),"\n",(0,t.jsx)(r.p,{children:"The lifecycle of a register from creation to deletion:"}),"\n",(0,t.jsx)(r.mermaid,{value:"sequenceDiagram\n    participant API as API Endpoint\n    participant Controller as Register Controller\n    participant Mapper as Register Mapper\n    participant EventDispatcher as Event Dispatcher\n    participant DB as Database\n    participant FileService as File Service\n    \n    Note over API: Register Creation\n    \n    API->>Controller: POST /api/registers\n    Controller->>Mapper: insert(register)\n    \n    Mapper->>Mapper: Generate UUID\n    Mapper->>DB: INSERT into oc_openregister_registers\n    DB--\x3e>Mapper: Register saved\n    \n    Mapper->>FileService: ensureRegisterFolder(register)\n    FileService->>FileService: Create Nextcloud folder\n    FileService--\x3e>Mapper: Folder created\n    \n    Mapper->>EventDispatcher: dispatch(RegisterCreatedEvent)\n    EventDispatcher->>EventDispatcher: Notify listeners\n    \n    Mapper--\x3e>Controller: Register entity\n    Controller--\x3e>API: 200 OK + Register JSON\n    \n    Note over API: Register Update\n    \n    API->>Controller: PUT /api/registers/{id}\n    Controller->>Mapper: update(register)\n    \n    Mapper->>DB: UPDATE oc_openregister_registers\n    DB--\x3e>Mapper: Register updated\n    \n    Mapper->>EventDispatcher: dispatch(RegisterUpdatedEvent)\n    \n    Mapper--\x3e>Controller: Updated register\n    Controller--\x3e>API: 200 OK + Register JSON\n    \n    Note over API: Register Deletion\n    \n    API->>Controller: DELETE /api/registers/{id}\n    Controller->>Mapper: delete(register)\n    \n    alt Soft Delete\n        Mapper->>DB: UPDATE deleted = NOW()\n        Mapper->>EventDispatcher: dispatch(RegisterDeletedEvent)\n    else Hard Delete\n        Mapper->>Mapper: Check for dependent objects\n        alt Has Objects\n            Mapper--\x3e>Controller: Error: Objects exist\n            Controller--\x3e>API: 400 Bad Request\n        else No Objects\n            Mapper->>DB: DELETE FROM oc_openregister_registers\n            Mapper->>FileService: deleteRegisterFolder(register)\n            Mapper->>EventDispatcher: dispatch(RegisterDeletedEvent)\n            Mapper--\x3e>Controller: Deleted\n            Controller--\x3e>API: 204 No Content\n        end\n    end"}),"\n",(0,t.jsx)(r.h3,{id:"register-schema-object-relationship",children:"Register-Schema-Object Relationship"}),"\n",(0,t.jsx)(r.p,{children:"How registers, schemas, and objects interact:"}),"\n",(0,t.jsx)(r.mermaid,{value:"graph TD\n    Start[Create Object] --\x3e CheckRegister{Register<br/>exists?}\n    CheckRegister --\x3e|No| ErrorRegister[\u274c Error: Register not found]\n    CheckRegister --\x3e|Yes| CheckSchema{Schema in<br/>register.schemas?}\n    \n    CheckSchema --\x3e|No| ErrorSchema[\u274c Error: Schema not allowed<br/>in this register]\n    CheckSchema --\x3e|Yes| CreateObject[Create Object]\n    \n    CreateObject --\x3e AssignRegister[Set object.register = register.id]\n    AssignRegister --\x3e AssignSchema[Set object.schema = schema.id]\n    AssignSchema --\x3e AssignFolder[Set object.folder = register.folder]\n    \n    AssignFolder --\x3e SaveObject[Save Object]\n    SaveObject --\x3e IndexSolr[Index to Solr<br/>with register metadata]\n    \n    IndexSolr --\x3e Success[\u2713 Object Created]\n    \n    style ErrorRegister fill:#FFB6C1\n    style ErrorSchema fill:#FFB6C1\n    style Success fill:#90EE90"}),"\n",(0,t.jsx)(r.h3,{id:"database-schema",children:"Database Schema"}),"\n",(0,t.jsxs)(r.p,{children:["Registers are stored in the ",(0,t.jsx)(r.code,{children:"oc_openregister_registers"})," table:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sql",children:"CREATE TABLE oc_openregister_registers (\n    id INTEGER PRIMARY KEY AUTO_INCREMENT,\n    uuid VARCHAR(255) UNIQUE NOT NULL,\n    slug VARCHAR(255) NOT NULL,\n    title VARCHAR(255),\n    version VARCHAR(50),\n    description TEXT,\n    schemas JSON,\n    source VARCHAR(255),\n    table_prefix VARCHAR(50),\n    folder VARCHAR(255),\n    updated DATETIME,\n    created DATETIME,\n    owner VARCHAR(255),\n    application VARCHAR(255),\n    organisation VARCHAR(255),\n    authorization JSON,\n    groups JSON,\n    deleted DATETIME,\n    INDEX idx_slug (slug),\n    INDEX idx_uuid (uuid),\n    INDEX idx_folder (folder)\n);\n"})}),"\n",(0,t.jsx)(r.h3,{id:"register-statistics",children:"Register Statistics"}),"\n",(0,t.jsxs)(r.p,{children:["Registers can be extended with object statistics using the ",(0,t.jsx)(r.code,{children:"@self.stats"})," extension:"]}),"\n",(0,t.jsx)(r.mermaid,{value:"sequenceDiagram\n    participant API as API\n    participant Mapper as Register Mapper\n    participant ObjectMapper as Object Mapper\n    participant DB as Database\n    \n    API->>Mapper: find(id, extend: ['@self.stats'])\n    Mapper->>DB: SELECT * FROM registers WHERE id = ?\n    DB--\x3e>Mapper: Register data\n    \n    Mapper->>ObjectMapper: countObjectsByRegister(registerId)\n    ObjectMapper->>DB: SELECT COUNT(*)<br/>FROM objects<br/>WHERE register = ?<br/>GROUP BY schema\n    DB--\x3e>ObjectMapper: Counts per schema\n    ObjectMapper--\x3e>Mapper: Statistics data\n    \n    Mapper->>Mapper: Add statistics to register entity\n    Mapper--\x3e>API: Register with stats:<br/>- Total objects<br/>- Objects per schema<br/>- Creation dates"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Example Response:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "id": 1,\n  "uuid": "abc123...",\n  "title": "Customer Register",\n  "schemas": [5, 7, 9],\n  "@self": {\n    "stats": {\n      "totalObjects": 1523,\n      "objectsBySchema": {\n        "5": 1200,\n        "7": 300,\n        "9": 23\n      },\n      "oldestObject": "2024-01-15T10:00:00Z",\n      "newestObject": "2025-01-31T14:30:00Z"\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"folder-management",children:"Folder Management"}),"\n",(0,t.jsx)(r.p,{children:"Registers automatically manage Nextcloud folders for file storage:"}),"\n",(0,t.jsx)(r.mermaid,{value:'graph TD\n    RegisterCreated[Register Created] --\x3e GenerateFolder[Generate Folder Path]\n    GenerateFolder --\x3e FolderPattern["/OpenRegister/{register.slug}"]\n    \n    FolderPattern --\x3e CheckExists{Folder<br/>exists?}\n    CheckExists --\x3e|No| CreateFolder[Create Folder in Nextcloud]\n    CheckExists --\x3e|Yes| UseExisting[Use Existing Folder]\n    \n    CreateFolder --\x3e SetPermissions[Set Folder Permissions]\n    UseExisting --\x3e SetPermissions\n    \n    SetPermissions --\x3e StoreObjects[Objects Store Files Here]\n    StoreObjects --\x3e SubFolders[Create Object Subfolders:<br/>/OpenRegister/{slug}/{object-uuid}/]\n    \n    SubFolders --\x3e FileStorage[Files Stored in Object Folders]\n    \n    style FileStorage fill:#90EE90'}),"\n",(0,t.jsx)(r.h3,{id:"authorization-system",children:"Authorization System"}),"\n",(0,t.jsx)(r.p,{children:"Registers support group-based permissions similar to schemas:"}),"\n",(0,t.jsx)(r.mermaid,{value:"graph TD\n    Start[Check Register Permission] --\x3e CheckAdmin{User in<br/>'admin' group?}\n    CheckAdmin --\x3e|Yes| GrantAccess[\u2713 Grant Access]\n    CheckAdmin --\x3e|No| CheckOwner{Is register<br/>owner?}\n    \n    CheckOwner --\x3e|Yes| GrantAccess\n    CheckOwner --\x3e|No| CheckAuth{Register has<br/>authorization?}\n    \n    CheckAuth --\x3e|No| GrantAccess\n    CheckAuth --\x3e|Yes| CheckAction{Action defined?}\n    \n    CheckAction --\x3e|No| GrantAccess\n    CheckAction --\x3e|Yes| CheckGroup{User's group<br/>in allowed list?}\n    \n    CheckGroup --\x3e|Yes| GrantAccess\n    CheckGroup --\x3e|No| CheckSchemaAuth[Check Schema<br/>Authorization]\n    \n    CheckSchemaAuth --\x3e SchemaResult{Schema allows?}\n    SchemaResult --\x3e|Yes| GrantAccess\n    SchemaResult --\x3e|No| DenyAccess[\u2717 Deny Access]\n    \n    style GrantAccess fill:#90EE90\n    style DenyAccess fill:#FFB6C1"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Authorization Configuration:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "authorization": {\n    "create": ["group-editors", "group-admin"],\n    "read": ["group-viewers", "group-editors", "group-admin"],\n    "update": ["group-editors", "group-admin"],\n    "delete": ["group-admin"]\n  },\n  "groups": ["group-editors", "group-admin", "group-viewers"]\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"event-system",children:"Event System"}),"\n",(0,t.jsx)(r.p,{children:"Registers emit events for lifecycle operations:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Event"}),(0,t.jsx)(r.th,{children:"Fired When"}),(0,t.jsx)(r.th,{children:"Use Cases"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RegisterCreatedEvent"})}),(0,t.jsx)(r.td,{children:"New register created"}),(0,t.jsxs)(r.td,{children:["- Initialize folder structure",(0,t.jsx)("br",{}),"- Setup default configurations",(0,t.jsx)("br",{}),"- Audit logging"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RegisterUpdatedEvent"})}),(0,t.jsx)(r.td,{children:"Register properties updated"}),(0,t.jsxs)(r.td,{children:["- Update folder permissions",(0,t.jsx)("br",{}),"- Sync external systems",(0,t.jsx)("br",{}),"- Cache invalidation"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RegisterDeletedEvent"})}),(0,t.jsx)(r.td,{children:"Register deleted"}),(0,t.jsxs)(r.td,{children:["- Cleanup files and folders",(0,t.jsx)("br",{}),"- Archive objects",(0,t.jsx)("br",{}),"- Notify dependent systems"]})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"code-examples",children:"Code Examples"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Creating a Register:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-php",children:"use OCA\\OpenRegister\\Db\\Register;\nuse OCA\\OpenRegister\\Db\\RegisterMapper;\n\n$register = new Register();\n$register->hydrate([\n    'title' => 'Customer Data Register',\n    'slug' => 'customers',\n    'description' => 'Central repository for all customer information',\n    'schemas' => [5, 7, 9], // Schema IDs\n    'folder' => '/OpenRegister/customers',\n    'owner' => 'admin',\n    'organisation' => 'ACME Corp'\n]);\n\n$savedRegister = $registerMapper->insert($register);\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Retrieving Register with Statistics:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-php",children:"// Get register with object statistics\n$register = $registerMapper->find($registerId, ['@self.stats']);\n\n$stats = $register->jsonSerialize()['@self']['stats'];\necho \"Total objects: {$stats['totalObjects']}\\n\";\n\nforeach ($stats['objectsBySchema'] as $schemaId => $count) {\n    echo \"Schema {$schemaId}: {$count} objects\\n\";\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Filtering Objects by Register:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-php",children:"// Find all objects in a register\n$objects = $objectEntityMapper->findByRegister($registerId);\n\n// Search objects in register via Solr\n$results = $solrService->searchObjects([\n    '@self' => [\n        'register' => $registerId\n    ]\n]);\n"})}),"\n",(0,t.jsx)(r.h3,{id:"performance-optimizations",children:"Performance Optimizations"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"1. Indexed Queries"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Database indexes on ",(0,t.jsx)(r.code,{children:"slug"}),", ",(0,t.jsx)(r.code,{children:"uuid"}),", ",(0,t.jsx)(r.code,{children:"folder"})]}),"\n",(0,t.jsx)(r.li,{children:"Fast register lookups"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"2. Schema Array Storage"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Schemas stored as JSON array"}),"\n",(0,t.jsx)(r.li,{children:"Quick validation checks"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"3. Folder Path Caching"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Folder paths cached during request"}),"\n",(0,t.jsx)(r.li,{children:"Reduces file system calls"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"4. Statistics Lazy Loading"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Statistics loaded only when requested"}),"\n",(0,t.jsxs)(r.li,{children:["Controlled via ",(0,t.jsx)(r.code,{children:"@self.stats"})," extension"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"best-practices-1",children:"Best Practices"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"1. Register Organization"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Group related schemas logically"}),"\n",(0,t.jsx)(r.li,{children:"Use clear, descriptive names"}),"\n",(0,t.jsx)(r.li,{children:"Maintain one register per domain"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"2. Schema Selection"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Only include schemas that belong together"}),"\n",(0,t.jsx)(r.li,{children:"Keep schema lists manageable (<20 schemas)"}),"\n",(0,t.jsx)(r.li,{children:"Document why schemas are grouped"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"3. Folder Structure"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Use meaningful folder paths"}),"\n",(0,t.jsx)(r.li,{children:"Follow naming conventions"}),"\n",(0,t.jsx)(r.li,{children:"Maintain folder hierarchy"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"4. Authorization"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Set appropriate access controls"}),"\n",(0,t.jsx)(r.li,{children:"Use groups for team permissions"}),"\n",(0,t.jsx)(r.li,{children:"Review permissions regularly"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"5. Maintenance"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Monitor object counts per register"}),"\n",(0,t.jsx)(r.li,{children:"Archive unused registers"}),"\n",(0,t.jsx)(r.li,{children:"Clean up orphaned folders"}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"monitoring-and-debugging",children:"Monitoring and Debugging"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Register Statistics:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# Count objects per register\nSELECT r.id, r.title, COUNT(o.id) as object_count\nFROM oc_openregister_registers r\nLEFT JOIN oc_openregister_objects o ON r.id = o.register\nGROUP BY r.id, r.title\nORDER BY object_count DESC;\n\n# Find registers with no objects\nSELECT r.id, r.title\nFROM oc_openregister_registers r\nLEFT JOIN oc_openregister_objects o ON r.id = o.register\nWHERE o.id IS NULL;\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Folder Management:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# Check folder structure\ndocker exec nextcloud-container ls -la /var/www/html/data/OpenRegister/\n\n# Find registers with folder issues\nSELECT id, title, folder\nFROM oc_openregister_registers\nWHERE folder IS NULL OR folder = '';\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Authorization Issues:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# Check register permissions\ndocker logs nextcloud-container | grep 'Register.*permission'\n\n# List registers by authorization config\nSELECT id, title, authorization, groups\nFROM oc_openregister_registers\nWHERE authorization IS NOT NULL;\n"})})]})}function u(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},65537:(e,r,n)=>{"use strict";n.d(r,{A:()=>C});var s=n(96540),t=n(18215),i=n(65627),a=n(56347),o=n(50372),c=n(30604),l=n(11861),d=n(78749);function h(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:r,children:n}=e;return(0,s.useMemo)((()=>{const e=r??function(e){return h(e).map((e=>{let{props:{value:r,label:n,attributes:s,default:t}}=e;return{value:r,label:n,attributes:s,default:t}}))}(n);return function(e){const r=(0,l.XI)(e,((e,r)=>e.value===r.value));if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[r,n])}function p(e){let{value:r,tabValues:n}=e;return n.some((e=>e.value===r))}function g(e){let{queryString:r=!1,groupId:n}=e;const t=(0,a.W6)(),i=function(e){let{queryString:r=!1,groupId:n}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:r,groupId:n});return[(0,c.aZ)(i),(0,s.useCallback)((e=>{if(!i)return;const r=new URLSearchParams(t.location.search);r.set(i,e),t.replace({...t.location,search:r.toString()})}),[i,t])]}function x(e){const{defaultValue:r,queryString:n=!1,groupId:t}=e,i=u(e),[a,c]=(0,s.useState)((()=>function(e){let{defaultValue:r,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!p({value:r,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:r,tabValues:i}))),[l,h]=g({queryString:n,groupId:t}),[x,m]=function(e){let{groupId:r}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(r),[t,i]=(0,d.Dv)(n);return[t,(0,s.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:t}),j=(()=>{const e=l??x;return p({value:e,tabValues:i})?e:null})();(0,o.A)((()=>{j&&c(j)}),[j]);return{selectedValue:a,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);c(e),h(e),m(e)}),[h,m,i]),tabValues:i}}var m=n(9136);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=n(74848);function f(e){let{className:r,block:n,selectedValue:s,selectValue:a,tabValues:o}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),d=e=>{const r=e.currentTarget,n=c.indexOf(r),t=o[n].value;t!==s&&(l(r),a(t))},h=e=>{let r=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;r=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;r=c[n]??c[c.length-1];break}}r?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},r),children:o.map((e=>{let{value:r,label:n,attributes:i}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:s===r?0:-1,"aria-selected":s===r,ref:e=>{c.push(e)},onKeyDown:h,onClick:d,...i,className:(0,t.A)("tabs__item",j.tabItem,i?.className,{"tabs__item--active":s===r}),children:n??r},r)}))})}function v(e){let{lazy:r,children:n,selectedValue:i}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(r){const e=a.find((e=>e.props.value===i));return e?(0,s.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:a.map(((e,r)=>(0,s.cloneElement)(e,{key:r,hidden:e.props.value!==i})))})}function R(e){const r=x(e);return(0,b.jsxs)("div",{className:(0,t.A)("tabs-container",j.tabList),children:[(0,b.jsx)(f,{...r,...e}),(0,b.jsx)(v,{...r,...e})]})}function C(e){const r=(0,m.A)();return(0,b.jsx)(R,{...e,children:h(e.children)},String(r))}},67992:()=>{},79329:(e,r,n)=>{"use strict";n.d(r,{A:()=>a});n(96540);var s=n(18215);const t={tabItem:"tabItem_Ymn6"};var i=n(74848);function a(e){let{children:r,hidden:n,className:a}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)(t.tabItem,a),hidden:n,children:r})}},92441:()=>{},93290:()=>{}}]);