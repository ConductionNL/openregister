"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[5968],{28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>c});var l=r(96540);const i={},s=l.createContext(i);function o(e){const n=l.useContext(s);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),l.createElement(s.Provider,{value:n},e.children)}},62939:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"development/docker-services","title":"Docker Services Overview","description":"Services Included in OpenRegister Docker Compose","source":"@site/docs/development/docker-services.md","sourceDirName":"development","slug":"/development/docker-services","permalink":"/docs/development/docker-services","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/development/docker-services.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Docker Services Overview","sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Tool Testing Guide","permalink":"/docs/development/tool-registration-testing"},"next":{"title":"Docker Services - Quick Reference","permalink":"/docs/development/DOCKER_SERVICES_SUMMARY"}}');var i=r(74848),s=r(28453);const o={title:"Docker Services Overview",sidebar_position:10},c="Docker Services Overview",d={},t=[{value:"Services Included in OpenRegister Docker Compose",id:"services-included-in-openregister-docker-compose",level:2},{value:"Service Architecture",id:"service-architecture",level:2},{value:"Core Services",id:"core-services",level:2},{value:"1. Nextcloud (Application Server)",id:"1-nextcloud-application-server",level:3},{value:"2. MariaDB (Database)",id:"2-mariadb-database",level:3},{value:"Search Services",id:"search-services",level:2},{value:"3. Apache Solr (Full-Text Search)",id:"3-apache-solr-full-text-search",level:3},{value:"4. ZooKeeper (Solr Coordinator)",id:"4-zookeeper-solr-coordinator",level:3},{value:"AI &amp; NLP Services",id:"ai--nlp-services",level:2},{value:"5. Ollama (Local LLM)",id:"5-ollama-local-llm",level:3},{value:"6. Presidio Analyzer (NER &amp; PII Detection)",id:"6-presidio-analyzer-ner--pii-detection",level:3},{value:"Optional: Dolphin Document Parser",id:"optional-dolphin-document-parser",level:3},{value:"Docker Compose Files",id:"docker-compose-files",level:2},{value:"Production: <code>docker-compose.yml</code>",id:"production-docker-composeyml",level:3},{value:"Development: <code>docker-compose.dev.yml</code>",id:"development-docker-composedevyml",level:3},{value:"Service Dependencies",id:"service-dependencies",level:2},{value:"Resource Requirements",id:"resource-requirements",level:2},{value:"Minimum (Development)",id:"minimum-development",level:3},{value:"Recommended (Production)",id:"recommended-production",level:3},{value:"Per-Service Memory Usage",id:"per-service-memory-usage",level:3},{value:"Network Configuration",id:"network-configuration",level:2},{value:"Health Checks",id:"health-checks",level:2},{value:"Volume Management",id:"volume-management",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Service won&#39;t start",id:"service-wont-start",level:3},{value:"Out of memory",id:"out-of-memory",level:3},{value:"Network issues",id:"network-issues",level:3},{value:"Alternative Configurations",id:"alternative-configurations",level:2},{value:"Minimal Setup (No AI)",id:"minimal-setup-no-ai",level:3},{value:"Privacy-First (No Cloud Services)",id:"privacy-first-no-cloud-services",level:3},{value:"Maximum Accuracy (All Services)",id:"maximum-accuracy-all-services",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function a(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"docker-services-overview",children:"Docker Services Overview"})}),"\n",(0,i.jsx)(n.h2,{id:"services-included-in-openregister-docker-compose",children:"Services Included in OpenRegister Docker Compose"}),"\n",(0,i.jsx)(n.p,{children:"OpenRegister uses Docker Compose to manage multiple services that work together to provide a complete development and production environment. This document provides an overview of all services included in the stack."}),"\n",(0,i.jsx)(n.h2,{id:"service-architecture",children:"Service Architecture"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:'graph TB\n    subgraph "Frontend & API"\n        NC[Nextcloud Container<br/>Port 8080]\n    end\n    \n    subgraph "Data Storage"\n        DB[(MariaDB Database<br/>MySQL Compatible)]\n        ZK[ZooKeeper<br/>Port 2181<br/>Solr Coordinator]\n    end\n    \n    subgraph "Search & Indexing"\n        SOLR[Apache Solr<br/>Port 8983<br/>Full-Text Search]\n    end\n    \n    subgraph "AI & Machine Learning"\n        OL[Ollama<br/>Port 11434<br/>Local LLM]\n        PA[Presidio Analyzer<br/>Port 5001<br/>NER/PII Detection]\n    end\n    \n    NC --\x3e DB\n    NC --\x3e SOLR\n    NC --\x3e OL\n    NC --\x3e PA\n    SOLR --\x3e ZK\n    \n    style NC fill:#0082c9,color:#fff\n    style DB fill:#003545,color:#fff\n    style SOLR fill:#d9411e,color:#fff\n    style OL fill:#000000,color:#fff\n    style PA fill:#00BCF2,color:#000\n    style PAN fill:#00BCF2,color:#000\n    style ZK fill:#ffa500,color:#000\n'})}),"\n",(0,i.jsx)(n.h2,{id:"core-services",children:"Core Services"}),"\n",(0,i.jsx)(n.h3,{id:"1-nextcloud-application-server",children:"1. Nextcloud (Application Server)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Image"}),": ",(0,i.jsx)(n.code,{children:"nextcloud:latest"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Container"}),": ",(0,i.jsx)(n.code,{children:"nextcloud"})," (prod) / ",(0,i.jsx)(n.code,{children:"nextcloud-dev"})," (dev)",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Port"}),": ",(0,i.jsx)(n.code,{children:"8080"})]}),"\n",(0,i.jsx)(n.p,{children:"The main application container running Nextcloud with OpenRegister app mounted."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Admin credentials: ",(0,i.jsx)(n.code,{children:"admin"})," / ",(0,i.jsx)(n.code,{children:"admin"})," (development only)"]}),"\n",(0,i.jsx)(n.li,{children:"PHP Memory: 4G"}),"\n",(0,i.jsx)(n.li,{children:"Upload limit: 2G"}),"\n",(0,i.jsx)(n.li,{children:"Timezone: Europe/Amsterdam"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Volumes"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nextcloud:/var/www/html"})," - Nextcloud installation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".:/var/www/html/custom_apps/openregister"})," - OpenRegister source code (mounted for development)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Environment Variables"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"MYSQL_HOST: db\nMYSQL_DATABASE: nextcloud\nMYSQL_USER: nextcloud\nMYSQL_PASSWORD: '!ChangeMe!'\nPHP_MEMORY_LIMIT: 4G\nPHP_UPLOAD_LIMIT: 2G\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-mariadb-database",children:"2. MariaDB (Database)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Image"}),": ",(0,i.jsx)(n.code,{children:"mariadb:10.6"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Port"}),": Internal only",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Volume"}),": ",(0,i.jsx)(n.code,{children:"db:/var/lib/mysql"})]}),"\n",(0,i.jsx)(n.p,{children:"MySQL-compatible database server for Nextcloud and OpenRegister data storage."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Database: ",(0,i.jsx)(n.code,{children:"nextcloud"})]}),"\n",(0,i.jsxs)(n.li,{children:["User: ",(0,i.jsx)(n.code,{children:"nextcloud"})]}),"\n",(0,i.jsxs)(n.li,{children:["Password: ",(0,i.jsx)(n.code,{children:"!ChangeMe!"})," (change in production)"]}),"\n",(0,i.jsx)(n.li,{children:"Transaction isolation: READ-COMMITTED"}),"\n",(0,i.jsx)(n.li,{children:"Binary logging: Enabled"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"search-services",children:"Search Services"}),"\n",(0,i.jsx)(n.h3,{id:"3-apache-solr-full-text-search",children:"3. Apache Solr (Full-Text Search)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Image"}),": ",(0,i.jsx)(n.code,{children:"solr:9-slim"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Container"}),": ",(0,i.jsx)(n.code,{children:"openregister-solr"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Port"}),": ",(0,i.jsx)(n.code,{children:"8983"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Volume"}),": ",(0,i.jsx)(n.code,{children:"solr:/var/solr"})]}),"\n",(0,i.jsx)(n.p,{children:"Enterprise search platform for full-text indexing and search across objects and files."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"SolrCloud mode (production) with ZooKeeper coordination"}),"\n",(0,i.jsx)(n.li,{children:"Standalone mode (development)"}),"\n",(0,i.jsx)(n.li,{children:"Faceted search support"}),"\n",(0,i.jsx)(n.li,{children:"Multi-language support"}),"\n",(0,i.jsx)(n.li,{children:"Vector search support (future)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Heap size: 512MB (adjustable)"}),"\n",(0,i.jsxs)(n.li,{children:["ZooKeeper host: ",(0,i.jsx)(n.code,{children:"zookeeper:2181"})," (production only)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Access"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Admin UI: ",(0,i.jsx)(n.a,{href:"http://localhost:8983/solr/",children:"http://localhost:8983/solr/"})]}),"\n",(0,i.jsxs)(n.li,{children:["API: ",(0,i.jsx)(n.a,{href:"http://localhost:8983/solr/%7Bcollection%7D/select",children:"http://localhost:8983/solr/{collection}/select"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-zookeeper-solr-coordinator",children:"4. ZooKeeper (Solr Coordinator)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Image"}),": ",(0,i.jsx)(n.code,{children:"zookeeper:3.8"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Container"}),": ",(0,i.jsx)(n.code,{children:"openregister-zookeeper"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Port"}),": ",(0,i.jsx)(n.code,{children:"2181"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Volume"}),": ",(0,i.jsx)(n.code,{children:"zookeeper:/data"})]}),"\n",(0,i.jsx)(n.p,{children:"Distributed coordination service for SolrCloud configuration and cluster management."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Only used in production docker-compose.yml, not in dev mode."]}),"\n",(0,i.jsx)(n.h2,{id:"ai--nlp-services",children:"AI & NLP Services"}),"\n",(0,i.jsx)(n.h3,{id:"5-ollama-local-llm",children:"5. Ollama (Local LLM)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Image"}),": ",(0,i.jsx)(n.code,{children:"ollama/ollama:latest"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Container"}),": ",(0,i.jsx)(n.code,{children:"openregister-ollama"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Port"}),": ",(0,i.jsx)(n.code,{children:"11434"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Volume"}),": ",(0,i.jsx)(n.code,{children:"ollama:/root/.ollama"})]}),"\n",(0,i.jsx)(n.p,{children:"Local large language model server for privacy-first AI capabilities."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Chat and conversational AI"}),"\n",(0,i.jsx)(n.li,{children:"RAG (Retrieval Augmented Generation)"}),"\n",(0,i.jsx)(n.li,{children:"Agent functionality"}),"\n",(0,i.jsx)(n.li,{children:"Entity extraction (alternative to Presidio)"}),"\n",(0,i.jsx)(n.li,{children:"No external API calls required"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Parallel requests: 2 (prod) / 4 (dev)"}),"\n",(0,i.jsx)(n.li,{children:"Keep alive: 15m (prod) / 30m (dev)"}),"\n",(0,i.jsx)(n.li,{children:"Memory: 8-16GB (supports GPU acceleration)"}),"\n",(0,i.jsx)(n.li,{children:"Shared memory: 2GB"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Supported Models"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"llama3.2, llama3.1, llama2"}),"\n",(0,i.jsx)(n.li,{children:"mistral, mixtral"}),"\n",(0,i.jsx)(n.li,{children:"qwen, gemma, phi"}),"\n",(0,i.jsx)(n.li,{children:"Custom models"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pull Models"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker exec openregister-ollama ollama pull llama3.2\ndocker exec openregister-ollama ollama pull mistral\ndocker exec openregister-ollama ollama list\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Access"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["API: ",(0,i.jsx)(n.a,{href:"http://localhost:11434",children:"http://localhost:11434"})]}),"\n",(0,i.jsxs)(n.li,{children:["Health check: ",(0,i.jsx)(n.a,{href:"http://localhost:11434/api/tags",children:"http://localhost:11434/api/tags"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"6-presidio-analyzer-ner--pii-detection",children:"6. Presidio Analyzer (NER & PII Detection)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Image"}),": ",(0,i.jsx)(n.code,{children:"mcr.microsoft.com/presidio-analyzer:latest"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Container"}),": ",(0,i.jsx)(n.code,{children:"openregister-presidio-analyzer"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Port"}),": ",(0,i.jsx)(n.code,{children:"5001"})]}),"\n",(0,i.jsx)(n.p,{children:"Microsoft's open-source PII detection service for Named Entity Recognition (NER)."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"High-accuracy entity detection (90-98% precision)"}),"\n",(0,i.jsx)(n.li,{children:"Multi-language support (50+ languages)"}),"\n",(0,i.jsx)(n.li,{children:"GDPR compliance focused"}),"\n",(0,i.jsx)(n.li,{children:"Detects: persons, emails, phones, addresses, IBAN, SSN, credit cards, etc."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recommended For"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Production deployments"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 GDPR compliance requirements"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 High accuracy needs"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Multi-language content"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Languages: en, nl, de, fr, es (configurable)"}),"\n",(0,i.jsx)(n.li,{children:"Log level: INFO (prod) / DEBUG (dev)"}),"\n",(0,i.jsx)(n.li,{children:"Memory: 512MB-2GB"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Entity Types Detected"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"PERSON, EMAIL_ADDRESS, PHONE_NUMBER"}),"\n",(0,i.jsx)(n.li,{children:"LOCATION, ORGANIZATION"}),"\n",(0,i.jsx)(n.li,{children:"CREDIT_CARD, IBAN_CODE, SSN"}),"\n",(0,i.jsx)(n.li,{children:"IP_ADDRESS, URL, DATE_TIME"}),"\n",(0,i.jsx)(n.li,{children:"MEDICAL_LICENSE, US_PASSPORT"}),"\n",(0,i.jsx)(n.li,{children:"Custom types via configuration"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Access"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["API: ",(0,i.jsx)(n.a,{href:"http://localhost:5001",children:"http://localhost:5001"})]}),"\n",(0,i.jsxs)(n.li,{children:["Health check: ",(0,i.jsx)(n.a,{href:"http://localhost:5001/health",children:"http://localhost:5001/health"})]}),"\n",(0,i.jsxs)(n.li,{children:["Docs: ",(0,i.jsx)(n.a,{href:"http://localhost:5001/docs",children:"http://localhost:5001/docs"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example Request"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:5001/analyze \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "text": "John Doe can be reached at john.doe@example.com",\n    "language": "en"\n  }\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Presidio also offers a separate Anonymizer service, but OpenRegister handles anonymization internally using the detected entity positions from the Analyzer."]}),"\n",(0,i.jsx)(n.h3,{id:"optional-dolphin-document-parser",children:"Optional: Dolphin Document Parser"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Status"}),": Not included in docker-compose (requires separate deployment)",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Repository"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/bytedance/Dolphin",children:"github.com/bytedance/Dolphin"})]}),"\n",(0,i.jsx)(n.p,{children:"Dolphin is an open-source document parsing model that can be deployed separately for advanced document processing:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Advanced PDF parsing and OCR"}),"\n",(0,i.jsx)(n.li,{children:"Layout analysis with reading order detection"}),"\n",(0,i.jsx)(n.li,{children:"Table and formula extraction"}),"\n",(0,i.jsx)(n.li,{children:"Lightweight (0.3B parameters)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Deployment"}),":\nDolphin requires custom containerization. See the ",(0,i.jsx)(n.a,{href:"https://github.com/bytedance/Dolphin",children:"Dolphin GitHub repository"})," for deployment guides using Hugging Face Inference Toolkit."]}),"\n",(0,i.jsx)(n.p,{children:"Once deployed, configure the API endpoint in OpenRegister settings to use it for document extraction."}),"\n",(0,i.jsx)(n.h2,{id:"docker-compose-files",children:"Docker Compose Files"}),"\n",(0,i.jsxs)(n.h3,{id:"production-docker-composeyml",children:["Production: ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})]}),"\n",(0,i.jsx)(n.p,{children:"Includes all services with production-ready configuration:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Nextcloud"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 MariaDB"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Solr (SolrCloud mode)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 ZooKeeper"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Ollama"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Presidio Analyzer"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd openregister\ndocker-compose up -d\ndocker-compose logs -f nextcloud\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"development-docker-composedevyml",children:["Development: ",(0,i.jsx)(n.code,{children:"docker-compose.dev.yml"})]}),"\n",(0,i.jsx)(n.p,{children:"Optimized for development with verbose logging:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Nextcloud (dev mode)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 MariaDB"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Solr (standalone mode, no ZooKeeper)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Ollama (more concurrent requests, longer keep-alive)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Presidio Analyzer (DEBUG logging)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd openregister\ndocker-compose -f docker-compose.dev.yml up -d\ndocker-compose -f docker-compose.dev.yml logs -f nextcloud\n"})}),"\n",(0,i.jsx)(n.h2,{id:"service-dependencies",children:"Service Dependencies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    NC[Nextcloud] --\x3e|Required| DB[MariaDB]\n    NC --\x3e|Required| SOLR[Solr]\n    NC --\x3e|Optional| OL[Ollama]\n    NC --\x3e|Optional| PA[Presidio Analyzer]\n    NC --\x3e|Optional| PAN[Presidio Anonymizer]\n    \n    SOLR --\x3e|Production Only| ZK[ZooKeeper]\n    PA -.Works with.-> PAN\n    \n    style NC fill:#0082c9,color:#fff\n    style DB fill:#003545,color:#fff\n    style SOLR fill:#d9411e,color:#fff\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Required Services"})," (core functionality):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Nextcloud"}),"\n",(0,i.jsx)(n.li,{children:"MariaDB"}),"\n",(0,i.jsx)(n.li,{children:"Solr"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Optional Services"})," (enhanced features):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ollama (AI chat, RAG, local NER)"}),"\n",(0,i.jsx)(n.li,{children:"Presidio Analyzer (production-grade NER)"}),"\n",(0,i.jsx)(n.li,{children:"ZooKeeper (Solr clustering)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"resource-requirements",children:"Resource Requirements"}),"\n",(0,i.jsx)(n.h3,{id:"minimum-development",children:"Minimum (Development)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CPU: 4 cores"}),"\n",(0,i.jsx)(n.li,{children:"RAM: 8GB"}),"\n",(0,i.jsx)(n.li,{children:"Disk: 20GB"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"recommended-production",children:"Recommended (Production)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CPU: 8 cores"}),"\n",(0,i.jsx)(n.li,{children:"RAM: 16GB (32GB with Ollama large models)"}),"\n",(0,i.jsx)(n.li,{children:"Disk: 100GB+ (depending on data volume)"}),"\n",(0,i.jsx)(n.li,{children:"Optional: NVIDIA GPU for Ollama acceleration"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"per-service-memory-usage",children:"Per-Service Memory Usage"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Service"}),(0,i.jsx)(n.th,{children:"Development"}),(0,i.jsx)(n.th,{children:"Production"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Nextcloud"}),(0,i.jsx)(n.td,{children:"512MB-2GB"}),(0,i.jsx)(n.td,{children:"2GB-4GB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MariaDB"}),(0,i.jsx)(n.td,{children:"512MB-1GB"}),(0,i.jsx)(n.td,{children:"2GB-4GB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Solr"}),(0,i.jsx)(n.td,{children:"512MB-1GB"}),(0,i.jsx)(n.td,{children:"2GB-8GB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ZooKeeper"}),(0,i.jsx)(n.td,{children:"N/A"}),(0,i.jsx)(n.td,{children:"256MB-512MB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Ollama"}),(0,i.jsx)(n.td,{children:"8GB-16GB"}),(0,i.jsx)(n.td,{children:"8GB-32GB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Presidio Analyzer"}),(0,i.jsx)(n.td,{children:"512MB-2GB"}),(0,i.jsx)(n.td,{children:"1GB-2GB"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Total"}),": 10-23GB (dev), 15-52GB (prod with all services)"]}),"\n",(0,i.jsx)(n.h2,{id:"network-configuration",children:"Network Configuration"}),"\n",(0,i.jsx)(n.p,{children:"All services run on the same Docker network and can communicate via service names:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Internal hostnames"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"db"})," - MariaDB"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"openregister-solr"})," or ",(0,i.jsx)(n.code,{children:"solr"})," - Solr"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"openregister-zookeeper"})," or ",(0,i.jsx)(n.code,{children:"zookeeper"})," - ZooKeeper"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"openregister-ollama"})," or ",(0,i.jsx)(n.code,{children:"ollama"})," - Ollama"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"openregister-presidio-analyzer"})," or ",(0,i.jsx)(n.code,{children:"presidio-analyzer"})," - Presidio Analyzer"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Exposed ports"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"8080"})," \u2192 Nextcloud"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"8983"})," \u2192 Solr Admin UI"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"11434"})," \u2192 Ollama API"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"5001"})," \u2192 Presidio Analyzer API"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"health-checks",children:"Health Checks"}),"\n",(0,i.jsx)(n.p,{children:"All services include health checks for monitoring:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check all services\ndocker-compose ps\n\n# Check specific service\ndocker exec openregister-solr curl -f http://localhost:8983/solr/admin/info/system\ndocker exec openregister-ollama curl -f http://localhost:11434/api/tags\ncurl -f http://localhost:5001/health  # Presidio Analyzer\n"})}),"\n",(0,i.jsx)(n.h2,{id:"volume-management",children:"Volume Management"}),"\n",(0,i.jsx)(n.p,{children:"Persistent data is stored in Docker volumes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# List volumes\ndocker volume ls | grep openregister\n\n# Backup volumes\ndocker run --rm -v openregister_db:/data -v $(pwd):/backup alpine tar czf /backup/db-backup.tar.gz /data\n\n# Remove all volumes (WARNING: deletes all data)\ndocker-compose down -v\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"service-wont-start",children:"Service won't start"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check logs\ndocker-compose logs [service-name]\n\n# Restart service\ndocker-compose restart [service-name]\n\n# Rebuild service\ndocker-compose up -d --force-recreate [service-name]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"out-of-memory",children:"Out of memory"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check memory usage\ndocker stats\n\n# Increase memory limits in docker-compose.yml\n# Or reduce services (disable Ollama if not needed)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"network-issues",children:"Network issues"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check network connectivity between services\ndocker exec nextcloud ping db\ndocker exec nextcloud ping solr\ndocker exec nextcloud curl http://presidio-analyzer:5001/health\n\n# Recreate network\ndocker-compose down\ndocker-compose up -d\n"})}),"\n",(0,i.jsx)(n.h2,{id:"alternative-configurations",children:"Alternative Configurations"}),"\n",(0,i.jsx)(n.h3,{id:"minimal-setup-no-ai",children:"Minimal Setup (No AI)"}),"\n",(0,i.jsx)(n.p,{children:"For basic OpenRegister without AI features:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"services:\n  - nextcloud\n  - db\n  - solr\n"})}),"\n",(0,i.jsx)(n.h3,{id:"privacy-first-no-cloud-services",children:"Privacy-First (No Cloud Services)"}),"\n",(0,i.jsx)(n.p,{children:"For maximum privacy with local AI only:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"services:\n  - nextcloud\n  - db\n  - solr\n  - ollama  # Local LLM for NER\n  # NO Presidio (cloud-based)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"maximum-accuracy-all-services",children:"Maximum Accuracy (All Services)"}),"\n",(0,i.jsx)(n.p,{children:"For production with best NER accuracy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"services:\n  - nextcloud\n  - db\n  - solr\n  - zookeeper\n  - ollama\n  - presidio-analyzer  # Best accuracy for entity detection\n"})}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/Development/docker-setup",children:"Docker Setup Guide"})," - Complete setup instructions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/features/ner-nlp-concepts",children:"NER & NLP Concepts"})," - Understanding entity recognition"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/features/text-extraction-enhanced",children:"Text Extraction Enhanced"})," - File processing pipeline"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/user/settings-configuration",children:"Settings Configuration"})," - Configure services in Nextcloud"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": For production GDPR compliance, we recommend including ",(0,i.jsx)(n.strong,{children:"Presidio Analyzer"})," for state-of-the-art entity detection. OpenRegister handles anonymization internally using the detected entity positions."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);