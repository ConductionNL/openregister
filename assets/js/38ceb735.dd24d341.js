"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[8043],{556:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"api/vector-search-api","title":"Vector & Hybrid Search API Documentation","description":"Overview","source":"@site/docs/api/vector-search-api.md","sourceDirName":"api","slug":"/api/vector-search-api","permalink":"/docs/api/vector-search-api","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/api/vector-search-api.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"schemas","permalink":"/docs/api/schemas"},"next":{"title":"External App Cache Optimization","permalink":"/docs/developers/external-app-optimization"}}');var i=s(74848),t=s(28453);const c={},l="Vector & Hybrid Search API Documentation",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Search Endpoints",id:"search-endpoints",level:2},{value:"Semantic Search",id:"semantic-search",level:3},{value:"Hybrid Search",id:"hybrid-search",level:3},{value:"Vectorization Endpoints",id:"vectorization-endpoints",level:2},{value:"Vectorize Single Object",id:"vectorize-single-object",level:3},{value:"Bulk Vectorize Objects",id:"bulk-vectorize-objects",level:3},{value:"Get Vectorization Statistics",id:"get-vectorization-statistics",level:3},{value:"Chat API Endpoints",id:"chat-api-endpoints",level:2},{value:"Send Chat Message",id:"send-chat-message",level:3},{value:"Get Chat History",id:"get-chat-history",level:3},{value:"Clear Chat History",id:"clear-chat-history",level:3},{value:"Send Feedback",id:"send-feedback",level:3},{value:"Rate Limits",id:"rate-limits",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Search Optimization",id:"search-optimization",level:3},{value:"Vectorization Best Practices",id:"vectorization-best-practices",level:3},{value:"Chat Integration",id:"chat-integration",level:3},{value:"SDK Examples",id:"sdk-examples",level:2},{value:"JavaScript (Axios)",id:"javascript-axios",level:3},{value:"Python (requests)",id:"python-requests",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"&quot;No embedding model configured&quot;",id:"no-embedding-model-configured",level:4},{value:"&quot;Search returns empty results&quot;",id:"search-returns-empty-results",level:4},{value:"&quot;Vectorization fails with API error&quot;",id:"vectorization-fails-with-api-error",level:4},{value:"&quot;Chat responses are slow&quot;",id:"chat-responses-are-slow",level:4},{value:"Changelog",id:"changelog",level:2},{value:"v2.4.0 (2025-10-13)",id:"v240-2025-10-13",level:3},{value:"v2.3.0 (2025-10-01)",id:"v230-2025-10-01",level:3}];function a(e){const n={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"vector--hybrid-search-api-documentation",children:"Vector & Hybrid Search API Documentation"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"OpenRegister provides powerful semantic and hybrid search capabilities through REST API endpoints. This document covers all vector-related endpoints for search, vectorization, and statistics."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Base URL"}),": ",(0,i.jsx)(n.code,{children:"/apps/openregister/api"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Authentication"}),": All endpoints require Nextcloud authentication (Basic Auth or session)"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"search-endpoints",children:"Search Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"semantic-search",children:"Semantic Search"}),"\n",(0,i.jsx)(n.p,{children:"Find documents by meaning using vector similarity."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"GET /solr/search/semantic"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Performs pure semantic search using vector embeddings. Finds conceptually similar content even if keywords don't match."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"query"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Search query (natural language)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"limit"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"10"}),(0,i.jsx)(n.td,{children:"Maximum results to return (1-100)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"threshold"})}),(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"0.7"}),(0,i.jsx)(n.td,{children:"Minimum similarity score (0.0-1.0)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"entityType"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"both"}),(0,i.jsx)(n.td,{children:"Filter by type: 'file', 'object', or 'both'"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X GET 'http://nextcloud.local/apps/openregister/api/solr/search/semantic?query=budget+planning&limit=5&threshold=0.75' \\\n  -u admin:admin \\\n  -H \"Content-Type: application/json\"\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "entity_id": "file_123",\n      "entity_type": "file",\n      "chunk_index": 2,\n      "total_chunks": 5,\n      "chunk_text": "The budget planning process for 2025 includes...",\n      "similarity": 0.87,\n      "metadata": {\n        "filename": "financial-plan-2025.pdf",\n        "file_path": "/documents/finance/",\n        "chunk_size": 1000\n      }\n    },\n    {\n      "entity_id": "obj_456",\n      "entity_type": "object",\n      "chunk_index": 0,\n      "chunk_text": "Project: Budget Optimization Initiative...",\n      "similarity": 0.82,\n      "metadata": {\n        "schema": "Project",\n        "title": "Budget Optimization Initiative"\n      }\n    }\n  ],\n  "total": 2,\n  "query_time_ms": 145,\n  "search_mode": "semantic"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response Fields"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"results"}),": Array of matching documents","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"entity_id"}),": Unique identifier (file ID or object ID)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"entity_type"}),": 'file' or 'object'"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"chunk_index"}),": Chunk number within document"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"total_chunks"}),": Total chunks in document"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"chunk_text"}),": Relevant text excerpt"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"similarity"}),": Cosine similarity score (0.0-1.0)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"metadata"}),": Additional context about the source"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"total"}),": Number of results returned"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"query_time_ms"}),": Query execution time in milliseconds"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"search_mode"}),": 'semantic'"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error Responses"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// 400 Bad Request\n{\n  "error": "Query parameter is required"\n}\n\n// 500 Internal Server Error\n{\n  "error": "Semantic search failed: No embedding model configured"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"hybrid-search",children:"Hybrid Search"}),"\n",(0,i.jsx)(n.p,{children:"Combines keyword (SOLR) and semantic (vector) search for best results."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"GET /solr/search/hybrid"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Performs both keyword and semantic search, then merges results using Reciprocal Rank Fusion (RRF) for optimal relevance."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"query"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Search query (natural language)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"limit"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"10"}),(0,i.jsx)(n.td,{children:"Maximum results to return (1-100)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"60"}),(0,i.jsx)(n.td,{children:"RRF constant (higher = more balanced)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"semanticWeight"})}),(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"0.5"}),(0,i.jsx)(n.td,{children:"Weight for semantic results (0.0-1.0)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"keywordWeight"})}),(0,i.jsx)(n.td,{children:"float"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"0.5"}),(0,i.jsx)(n.td,{children:"Weight for keyword results (0.0-1.0)"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X GET 'http://nextcloud.local/apps/openregister/api/solr/search/hybrid?query=Amsterdam+projects&limit=10&semanticWeight=0.6&keywordWeight=0.4' \\\n  -u admin:admin \\\n  -H \"Content-Type: application/json\"\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "entity_id": "obj_789",\n      "entity_type": "object",\n      "chunk_text": "Amsterdam Urban Renewal Project aims to...",\n      "similarity": 0.91,\n      "score": 12.5,\n      "sources": ["keyword", "semantic"],\n      "metadata": {\n        "schema": "Project",\n        "title": "Amsterdam Urban Renewal"\n      }\n    },\n    {\n      "entity_id": "file_234",\n      "entity_type": "file",\n      "chunk_text": "Infrastructure projects in the Netherlands capital...",\n      "similarity": 0.75,\n      "score": 8.3,\n      "sources": ["semantic"],\n      "metadata": {\n        "filename": "netherlands-infrastructure.pdf"\n      }\n    }\n  ],\n  "total": 2,\n  "query_time_ms": 287,\n  "search_mode": "hybrid",\n  "breakdown": {\n    "keyword_results": 5,\n    "semantic_results": 8,\n    "merged_results": 2\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response Fields"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["All fields from semantic search, plus:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"score"}),": RRF score (higher = more relevant)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sources"}),": Array showing which search modes found this result"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"breakdown"}),": Statistics about result merging"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"RRF Algorithm"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"RRF_score = \u03a3 (1 / (k + rank_in_method))\n\nwhere:\n- k = RRF constant (default: 60)\n- rank_in_method = position in keyword or semantic results\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error Responses"}),": Same as semantic search"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"vectorization-endpoints",children:"Vectorization Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"vectorize-single-object",children:"Vectorize Single Object"}),"\n",(0,i.jsx)(n.p,{children:"Generate and store embedding for a specific object."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"POST /solr/objects/{objectId}/vectorize"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Converts an object to text, generates its embedding, and stores it in the vector database."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Path Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"objectId"})," (integer): ID of the object to vectorize"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"provider"})," (string, optional): Embedding provider ('openai' or 'ollama'). Defaults to configured provider."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X POST 'http://nextcloud.local/apps/openregister/api/solr/objects/123/vectorize?provider=openai' \\\n  -u admin:admin \\\n  -H \"Content-Type: application/json\"\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "object_id": 123,\n  "vector_id": 4567,\n  "text_length": 1234,\n  "embedding_model": "text-embedding-3-large",\n  "embedding_dimensions": 3072,\n  "processing_time_ms": 850\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error Responses"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// 404 Not Found\n{\n  "error": "Object not found"\n}\n\n// 500 Internal Server Error\n{\n  "error": "Vectorization failed: OpenAI API key not configured"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"bulk-vectorize-objects",children:"Bulk Vectorize Objects"}),"\n",(0,i.jsx)(n.p,{children:"Vectorize multiple objects in batch (efficient for large datasets)."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"POST /solr/objects/vectorize/bulk"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Processes multiple objects at once with progress tracking and error handling."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "schemaId": 5,           // Optional: Filter by schema\n  "registerId": 10,        // Optional: Filter by register\n  "limit": 100,            // Max objects per batch (1-1000)\n  "offset": 0,             // Pagination offset\n  "provider": "openai"     // Optional: Override default provider\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://nextcloud.local/apps/openregister/api/solr/objects/vectorize/bulk\' \\\n  -u admin:admin \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "schemaId": 5,\n    "limit": 100,\n    "offset": 0\n  }\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "processed": 100,\n  "successful": 97,\n  "failed": 3,\n  "progress": {\n    "total_objects": 1000,\n    "processed_so_far": 100,\n    "percentage": 10\n  },\n  "errors": [\n    {\n      "object_id": 145,\n      "error": "Text extraction failed"\n    },\n    {\n      "object_id": 167,\n      "error": "API rate limit exceeded"\n    },\n    {\n      "object_id": 189,\n      "error": "Object has no extractable text"\n    }\n  ],\n  "timing": {\n    "total_time_ms": 12500,\n    "avg_per_object_ms": 128\n  },\n  "pagination": {\n    "limit": 100,\n    "offset": 0,\n    "has_more": true,\n    "next_offset": 100\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response Fields"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"processed"}),": Number of objects attempted"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"successful"}),": Number successfully vectorized"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"failed"}),": Number that failed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"progress"}),": Overall progress statistics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"errors"}),": Array of errors (max 10 shown)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"timing"}),": Performance metrics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pagination"}),": Info for next batch"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage Pattern"})," (Process all objects):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Batch 1\ncurl -X POST '.../bulk' -d '{\"limit\":100, \"offset\":0}'\n\n# Batch 2\ncurl -X POST '.../bulk' -d '{\"limit\":100, \"offset\":100}'\n\n# Continue until has_more = false\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"get-vectorization-statistics",children:"Get Vectorization Statistics"}),"\n",(0,i.jsx)(n.p,{children:"Retrieve stats about vectorized content."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"GET /solr/objects/vectorize/stats"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Returns comprehensive statistics about vector embeddings."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X GET 'http://nextcloud.local/apps/openregister/api/solr/objects/vectorize/stats' \\\n  -u admin:admin\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "total_vectors": 5678,\n  "by_type": {\n    "file": 3456,\n    "object": 2222\n  },\n  "by_model": {\n    "text-embedding-3-large": 4000,\n    "text-embedding-3-small": 1678\n  },\n  "storage": {\n    "total_bytes": 67890123,\n    "total_mb": 64.7,\n    "avg_per_vector_kb": 11.6\n  },\n  "objects": {\n    "total_objects": 3000,\n    "vectorized_objects": 2222,\n    "pending_objects": 778,\n    "percentage_complete": 74\n  },\n  "files": {\n    "total_files": 500,\n    "vectorized_files": 450,\n    "pending_files": 50,\n    "percentage_complete": 90,\n    "total_chunks": 3456,\n    "avg_chunks_per_file": 7.7\n  },\n  "recent_activity": {\n    "last_24h": 234,\n    "last_7d": 1567,\n    "last_30d": 4321\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"chat-api-endpoints",children:"Chat API Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"send-chat-message",children:"Send Chat Message"}),"\n",(0,i.jsx)(n.p,{children:"Send a message to the AI assistant and get a RAG-powered response."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"POST /chat/send"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Processes user query, retrieves relevant context, and generates AI response."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "message": "What projects are we working on in Amsterdam?",\n  "searchMode": "hybrid",      // \'hybrid\', \'semantic\', or \'keyword\'\n  "numSources": 5,             // 1-10\n  "includeFiles": true,        // Include file content\n  "includeObjects": true       // Include object data\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://nextcloud.local/apps/openregister/api/chat/send\' \\\n  -u admin:admin \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "message": "What are our sustainability goals?",\n    "searchMode": "hybrid",\n    "numSources": 5\n  }\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "response": "Based on your documents, your sustainability goals include:\\n\\n1. **Carbon Neutrality by 2030**: Reduce emissions by 50% by 2025, then offset remaining.\\n2. **Renewable Energy**: Transition to 100% renewable sources by 2028.\\n3. **Waste Reduction**: Achieve zero-waste operations by 2027.\\n\\nThese goals are outlined in the Sustainability Strategy 2025 document and the Board Meeting Minutes from March 2024.",\n  "sources": [\n    {\n      "id": "file_567",\n      "type": "file",\n      "name": "Sustainability-Strategy-2025.pdf",\n      "similarity": 0.92,\n      "text": "Our primary goal is carbon neutrality by 2030..."\n    },\n    {\n      "id": "obj_123",\n      "type": "object",\n      "name": "Board Meeting Minutes - March 2024",\n      "similarity": 0.87,\n      "text": "The board approved the waste reduction initiative..."\n    }\n  ],\n  "conversationId": 42,\n  "searchMode": "hybrid"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error Responses"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// 400 Bad Request\n{\n  "error": "Message is required"\n}\n\n// 500 Internal Server Error\n{\n  "error": "OpenAI chat provider is not configured"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"get-chat-history",children:"Get Chat History"}),"\n",(0,i.jsx)(n.p,{children:"Retrieve conversation history for the current user."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"GET /chat/history"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"limit"})," (integer, optional): Max messages to return (default: 50)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"offset"})," (integer, optional): Pagination offset (default: 0)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X GET 'http://nextcloud.local/apps/openregister/api/chat/history?limit=20' \\\n  -u admin:admin\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "messages": [\n    {\n      "role": "user",\n      "content": "What are our sustainability goals?",\n      "timestamp": "2025-10-13T14:30:00Z"\n    },\n    {\n      "role": "assistant",\n      "content": "Based on your documents...",\n      "sources": [...],\n      "timestamp": "2025-10-13T14:30:05Z"\n    }\n  ],\n  "count": 2\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"clear-chat-history",children:"Clear Chat History"}),"\n",(0,i.jsx)(n.p,{children:"Delete all conversation history for the current user."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"DELETE /chat/history"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X DELETE 'http://nextcloud.local/apps/openregister/api/chat/history' \\\n  -u admin:admin\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "deleted": 45\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"send-feedback",children:"Send Feedback"}),"\n",(0,i.jsx)(n.p,{children:"Submit feedback (thumbs up/down) for an AI response."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"POST /chat/feedback"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "messageId": 42,\n  "feedback": "positive"  // \'positive\', \'negative\', or null\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://nextcloud.local/apps/openregister/api/chat/feedback\' \\\n  -u admin:admin \\\n  -H "Content-Type: application/json" \\\n  -d \'{"messageId": 42, "feedback": "positive"}\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"})," (200 OK):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"rate-limits",children:"Rate Limits"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Current Limits"})," (default):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Search endpoints: 100 requests/minute per user"}),"\n",(0,i.jsx)(n.li,{children:"Vectorization: 10 requests/minute per user"}),"\n",(0,i.jsx)(n.li,{children:"Chat: 20 messages/minute per user"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Rate Limit Headers"})," (in responses):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 87\nX-RateLimit-Reset: 1697203200\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Rate Limit Response"})," (429 Too Many Requests):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Rate limit exceeded",\n  "retry_after_seconds": 45\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"search-optimization",children:"Search Optimization"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Hybrid Mode"}),": Best balance of accuracy and recall"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Set Appropriate Thresholds"}),": 0.7-0.8 for semantic search"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Limit Results"}),": Request only what you need (10-20 typical)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cache Common Queries"}),": Implement client-side caching"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"vectorization-best-practices",children:"Vectorization Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Batch Processing"}),": Use bulk endpoint for > 10 objects"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Off-Peak Processing"}),": Run large batches during low-traffic hours"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Handling"}),": Retry failed objects after delay"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monitor Progress"}),": Check stats endpoint to track completion"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"chat-integration",children:"Chat Integration"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Stream Responses"}),": Implement SSE for real-time feel (future feature)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle Errors Gracefully"}),": Show user-friendly messages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Provide Feedback UI"}),": Enable thumbs up/down for quality tracking"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cache History"}),": Load recent messages on page load"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"sdk-examples",children:"SDK Examples"}),"\n",(0,i.jsx)(n.h3,{id:"javascript-axios",children:"JavaScript (Axios)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'http://nextcloud.local/apps/openregister/api',\n  auth: {\n    username: 'admin',\n    password: 'admin'\n  }\n});\n\n// Semantic search\nasync function semanticSearch(query, limit = 10) {\n  try {\n    const response = await api.get('/solr/search/semantic', {\n      params: { query, limit }\n    });\n    return response.data.results;\n  } catch (error) {\n    console.error('Search failed:', error.response.data);\n  }\n}\n\n// Bulk vectorization\nasync function vectorizeObjects(schemaId, limit = 100, offset = 0) {\n  try {\n    const response = await api.post('/solr/objects/vectorize/bulk', {\n      schemaId,\n      limit,\n      offset\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Vectorization failed:', error.response.data);\n  }\n}\n\n// Chat\nasync function sendChatMessage(message) {\n  try {\n    const response = await api.post('/chat/send', {\n      message,\n      searchMode: 'hybrid',\n      numSources: 5\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Chat failed:', error.response.data);\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"python-requests",children:"Python (requests)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import requests\nfrom requests.auth import HTTPBasicAuth\n\nBASE_URL = 'http://nextcloud.local/apps/openregister/api'\nAUTH = HTTPBasicAuth('admin', 'admin')\n\ndef semantic_search(query, limit=10):\n    \"\"\"Perform semantic search\"\"\"\n    response = requests.get(\n        f'{BASE_URL}/solr/search/semantic',\n        params={'query': query, 'limit': limit},\n        auth=AUTH\n    )\n    response.raise_for_status()\n    return response.json()['results']\n\ndef vectorize_objects(schema_id, limit=100, offset=0):\n    \"\"\"Bulk vectorize objects\"\"\"\n    response = requests.post(\n        f'{BASE_URL}/solr/objects/vectorize/bulk',\n        json={\n            'schemaId': schema_id,\n            'limit': limit,\n            'offset': offset\n        },\n        auth=AUTH\n    )\n    response.raise_for_status()\n    return response.json()\n\ndef send_chat_message(message):\n    \"\"\"Send message to AI chat\"\"\"\n    response = requests.post(\n        f'{BASE_URL}/chat/send',\n        json={\n            'message': message,\n            'searchMode': 'hybrid',\n            'numSources': 5\n        },\n        auth=AUTH\n    )\n    response.raise_for_status()\n    return response.json()\n\n# Usage\nresults = semantic_search('budget planning')\nfor result in results:\n    print(f\"{result['similarity']:.2f}: {result['chunk_text'][:100]}...\")\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsx)(n.h4,{id:"no-embedding-model-configured",children:'"No embedding model configured"'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),": Configure OpenAI or Ollama in Settings \u2192 LLM Configuration"]}),"\n",(0,i.jsx)(n.h4,{id:"search-returns-empty-results",children:'"Search returns empty results"'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensure content is vectorized (check stats endpoint)"}),"\n",(0,i.jsx)(n.li,{children:"Lower similarity threshold"}),"\n",(0,i.jsx)(n.li,{children:"Try hybrid mode instead of semantic"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"vectorization-fails-with-api-error",children:'"Vectorization fails with API error"'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verify API key is correct"}),"\n",(0,i.jsx)(n.li,{children:"Check API quota/billing"}),"\n",(0,i.jsx)(n.li,{children:"Try Ollama for local processing"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"chat-responses-are-slow",children:'"Chat responses are slow"'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reduce numSources (default: 5)"}),"\n",(0,i.jsx)(n.li,{children:"Use keyword mode for faster (but less accurate) results"}),"\n",(0,i.jsx)(n.li,{children:"Consider using Ollama locally"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"changelog",children:"Changelog"}),"\n",(0,i.jsx)(n.h3,{id:"v240-2025-10-13",children:"v2.4.0 (2025-10-13)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Added hybrid search endpoint"}),"\n",(0,i.jsx)(n.li,{children:"Added bulk vectorization"}),"\n",(0,i.jsx)(n.li,{children:"Added chat API endpoints"}),"\n",(0,i.jsx)(n.li,{children:"Improved error handling"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"v230-2025-10-01",children:"v2.3.0 (2025-10-01)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Initial semantic search implementation"}),"\n",(0,i.jsx)(n.li,{children:"Single object vectorization"}),"\n",(0,i.jsx)(n.li,{children:"Vector statistics endpoint"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Last updated: October 13, 2025"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.em,{children:"API Version: 2.4.0"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var r=s(96540);const i={},t=r.createContext(i);function c(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);