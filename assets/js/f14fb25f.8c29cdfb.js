"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[3619],{28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(96540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},35095:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"development/tool-metadata-architecture","title":"Tool Metadata Architecture - Documentation Update","description":"What We Clarified","source":"@site/docs/development/tool-metadata-architecture.md","sourceDirName":"development","slug":"/development/tool-metadata-architecture","permalink":"/docs/development/tool-metadata-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/development/tool-metadata-architecture.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ObjectService Refactoring","permalink":"/docs/development/object-service-refactoring"},"next":{"title":"Organisation Roles (RBAC)","permalink":"/docs/features/organisation-roles"}}');var o=t(74848),s=t(28453);const r={},l="Tool Metadata Architecture - Documentation Update",a={},c=[{value:"What We Clarified",id:"what-we-clarified",level:2},{value:"The Current Architecture",id:"the-current-architecture",level:2},{value:"Two-Part System",id:"two-part-system",level:3},{value:"Why This Separation?",id:"why-this-separation",level:3},{value:"What We Updated",id:"what-we-updated",level:2},{value:"1. Documentation (<code>tool-registration.md</code>)",id:"1-documentation-tool-registrationmd",level:3},{value:"2. Implementation Updates",id:"2-implementation-updates",level:3},{value:"Benefits of This Architecture",id:"benefits-of-this-architecture",level:2},{value:"1. Single Source of Truth",id:"1-single-source-of-truth",level:3},{value:"2. Testability",id:"2-testability",level:3},{value:"3. Flexibility",id:"3-flexibility",level:3},{value:"4. Maintainability",id:"4-maintainability",level:3},{value:"Metadata Flow Diagram",id:"metadata-flow-diagram",level:2},{value:"Frontend Display",id:"frontend-display",level:2},{value:"Icon Options Reference",id:"icon-options-reference",level:2},{value:"Nextcloud Built-in Icons",id:"nextcloud-built-in-icons",level:3},{value:"MDI Icons",id:"mdi-icons",level:3},{value:"Testing",id:"testing",level:2},{value:"Lessons Learned",id:"lessons-learned",level:2},{value:"For Future Developers",id:"for-future-developers",level:2},{value:"Files Modified",id:"files-modified",level:2},{value:"Status",id:"status",level:2}];function d(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"tool-metadata-architecture---documentation-update",children:"Tool Metadata Architecture - Documentation Update"})}),"\n",(0,o.jsx)(n.h2,{id:"what-we-clarified",children:"What We Clarified"}),"\n",(0,o.jsx)(n.p,{children:"Based on your excellent question about where tool metadata comes from, we've improved the documentation to explain the architecture more clearly."}),"\n",(0,o.jsx)(n.h2,{id:"the-current-architecture",children:"The Current Architecture"}),"\n",(0,o.jsx)(n.h3,{id:"two-part-system",children:"Two-Part System"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"1. Tool Class (ToolInterface)"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"interface ToolInterface {\n    public function getName(): string;         // \u2705 Self-describing\n    public function getDescription(): string;  // \u2705 Self-describing\n    public function getFunctions(): array;     // \u2705 Self-describing\n    public function executeFunction(...);      // \u2705 Logic\n    public function setAgent(Agent $agent);    // \u2705 Context\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"2. Registration Metadata"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"$event->registerTool('myapp.tool', $tool, [\n    'name' => $tool->getName(),        // \ud83d\udccb From tool (best practice)\n    'description' => $tool->getDescription(), // \ud83d\udccb From tool (best practice)\n    'icon' => 'icon-category-office',  // \ud83c\udfa8 UI concern (registration only)\n    'app' => 'myapp'                   // \ud83c\udff7\ufe0f Metadata (registration only)\n]);\n"})}),"\n",(0,o.jsx)(n.h3,{id:"why-this-separation",children:"Why This Separation?"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Aspect"}),(0,o.jsx)(n.th,{children:"Tool Class"}),(0,o.jsx)(n.th,{children:"Registration Metadata"}),(0,o.jsx)(n.th,{children:"Reason"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Name"})}),(0,o.jsx)(n.td,{children:"\u2705 Primary source"}),(0,o.jsx)(n.td,{children:"\ud83d\udccb Should reference tool"}),(0,o.jsx)(n.td,{children:"Tool knows its own name"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Description"})}),(0,o.jsx)(n.td,{children:"\u2705 Primary source"}),(0,o.jsx)(n.td,{children:"\ud83d\udccb Should reference tool"}),(0,o.jsx)(n.td,{children:"Tool knows its purpose"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Icon"})}),(0,o.jsx)(n.td,{children:"\u274c Not in interface"}),(0,o.jsx)(n.td,{children:"\u2705 Only here"}),(0,o.jsx)(n.td,{children:"UI presentation concern"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"App"})}),(0,o.jsx)(n.td,{children:"\u274c Not in interface"}),(0,o.jsx)(n.td,{children:"\u2705 Only here"}),(0,o.jsx)(n.td,{children:"Context/grouping metadata"})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"what-we-updated",children:"What We Updated"}),"\n",(0,o.jsxs)(n.h3,{id:"1-documentation-tool-registrationmd",children:["1. Documentation (",(0,o.jsx)(n.code,{children:"tool-registration.md"}),")"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Added:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u2705 Best practice: Use ",(0,o.jsx)(n.code,{children:"$tool->getName()"})," and ",(0,o.jsx)(n.code,{children:"$tool->getDescription()"})]}),"\n",(0,o.jsx)(n.li,{children:"\u2705 Explanation of why icon/app are registration-only"}),"\n",(0,o.jsx)(n.li,{children:"\u2705 Table showing metadata sources and purposes"}),"\n",(0,o.jsx)(n.li,{children:"\u2705 Architecture rationale section"}),"\n",(0,o.jsx)(n.li,{children:"\u2705 Available icons reference (Nextcloud + MDI)"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Example from docs:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"// \u274c OLD WAY (duplication)\n$event->registerTool('myapp.tool', $tool, [\n    'name' => 'My Tool',  // Hardcoded, duplicates $tool->getName()\n    'description' => 'Does things',  // Hardcoded, duplicates $tool->getDescription()\n    'icon' => 'icon-category-office',\n    'app' => 'myapp'\n]);\n\n// \u2705 NEW WAY (best practice)\n$event->registerTool('myapp.tool', $tool, [\n    'name' => $tool->getName(),  // Pulls from tool class\n    'description' => $tool->getDescription(),  // Pulls from tool class\n    'icon' => 'icon-category-office',  // UI concern, stays here\n    'app' => 'myapp'  // Metadata, stays here\n]);\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-implementation-updates",children:"2. Implementation Updates"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["OpenRegister's ",(0,o.jsx)(n.code,{children:"ToolRegistrationListener.php"}),":"]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"// Now uses getName() and getDescription()\n$event->registerTool('openregister.objects', $this->objectsTool, [\n    'name' => $this->objectsTool->getName(),          // \u2705 \n    'description' => $this->objectsTool->getDescription(), // \u2705 \n    'icon' => 'icon-category-organization',\n    'app' => 'openregister',\n]);\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["OpenCatalogi's ",(0,o.jsx)(n.code,{children:"ToolRegistrationListener.php"}),":"]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"// Now uses getName() and getDescription()\n$event->registerTool('opencatalogi.cms', $this->cmsTool, [\n    'name' => $this->cmsTool->getName(),          // \u2705 \n    'description' => $this->cmsTool->getDescription(), // \u2705 \n    'icon' => 'icon-category-office',\n    'app' => 'opencatalogi',\n]);\n"})}),"\n",(0,o.jsx)(n.h2,{id:"benefits-of-this-architecture",children:"Benefits of This Architecture"}),"\n",(0,o.jsx)(n.h3,{id:"1-single-source-of-truth",children:"1. Single Source of Truth"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Tool class ",(0,o.jsx)(n.strong,{children:"owns"})," its name and description"]}),"\n",(0,o.jsx)(n.li,{children:"No duplication between class and registration"}),"\n",(0,o.jsx)(n.li,{children:"Changes to tool name/description automatically reflected in UI"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"2-testability",children:"2. Testability"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"// Can test tool independently of registration\npublic function testToolName() {\n    $tool = new CMSTool(...);\n    $this->assertEquals('CMS Tool', $tool->getName());\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-flexibility",children:"3. Flexibility"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Can override name/description in registration if needed (rare cases)"}),"\n",(0,o.jsx)(n.li,{children:"UI concerns (icon, app badge) kept separate from business logic"}),"\n",(0,o.jsx)(n.li,{children:"Tools remain framework-agnostic"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"4-maintainability",children:"4. Maintainability"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Tool class is self-documenting"}),"\n",(0,o.jsx)(n.li,{children:"Registration is minimal configuration"}),"\n",(0,o.jsx)(n.li,{children:"Clear separation of concerns"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"metadata-flow-diagram",children:"Metadata Flow Diagram"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    A[Tool Class] --\x3e|getName/getDescription| B[ToolInterface Methods]\n    C[ToolRegistrationListener] --\x3e|Calls| B\n    C --\x3e|Adds icon/app| D[Registration Metadata]\n    D --\x3e|Dispatches| E[ToolRegistrationEvent]\n    E --\x3e|Stores in| F[ToolRegistry]\n    F --\x3e|API Response| G[Frontend /api/agents/tools]\n    G --\x3e|Displays| H[Agent Editor UI]\n    \n    style A fill:#e1f5e1\n    style D fill:#ffe1e1\n    style H fill:#e1e5ff\n"})}),"\n",(0,o.jsx)(n.h2,{id:"frontend-display",children:"Frontend Display"}),"\n",(0,o.jsx)(n.p,{children:"What you see in the UI comes from:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2610  \ud83d\udcc4 CMS Tool          opencatalogi       \u2502  \u2190 Checkbox + Icon + Name + App Badge\n\u2502     Manage website content: create pages... \u2502  \u2190 Description\n\u2502                                             \u2502\n\u2502  Icon:        $metadata['icon']             \u2502  \u2190 Registration only\n\u2502  Name:        $tool->getName()              \u2502  \u2190 From tool class\n\u2502  Description: $tool->getDescription()       \u2502  \u2190 From tool class  \n\u2502  App Badge:   $metadata['app']              \u2502  \u2190 Registration only\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,o.jsx)(n.h2,{id:"icon-options-reference",children:"Icon Options Reference"}),"\n",(0,o.jsx)(n.h3,{id:"nextcloud-built-in-icons",children:"Nextcloud Built-in Icons"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"'icon' => 'icon-category-office'         // \ud83d\udcc4 Office/documents\n'icon' => 'icon-category-customization'  // \u2699\ufe0f Settings/config\n'icon' => 'icon-category-organization'   // \ud83c\udfe2 Structure/org\n'icon' => 'icon-category-monitoring'     // \ud83d\udcca Analytics\n'icon' => 'icon-category-integration'    // \ud83d\udd17 Connections\n'icon' => 'icon-category-workflow'       // \ud83d\udd04 Automation\n'icon' => 'icon-category-auth'          // \ud83d\udd10 Security\n'icon' => 'icon-category-social'        // \ud83d\udcac Communication\n"})}),"\n",(0,o.jsx)(n.h3,{id:"mdi-icons",children:"MDI Icons"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"'icon' => 'mdi-database'  // \ud83d\uddc4\ufe0f Database\n'icon' => 'mdi-web'       // \ud83c\udf10 Website\n'icon' => 'mdi-api'       // \ud83d\udd0c API\n'icon' => 'mdi-robot'     // \ud83e\udd16 AI/Bot\n'icon' => 'mdi-tools'     // \ud83d\udd27 Tools\n"})}),"\n",(0,o.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,o.jsx)(n.p,{children:"After updates, verified API response:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ curl http://localhost/index.php/apps/openregister/api/agents/tools\n"})}),"\n",(0,o.jsx)(n.p,{children:"Response shows tools using their self-describing names:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "results": {\n    "opencatalogi.cms": {\n      "name": "CMS Tool",\n      "description": "Manage website content: create and manage pages...",\n      "icon": "icon-category-office",\n      "app": "opencatalogi"\n    },\n    "openregister.objects": {\n      "name": "objects",\n      "description": "Manage objects in OpenRegister...",\n      "icon": "icon-category-organization",\n      "app": "openregister"\n    }\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"lessons-learned",children:"Lessons Learned"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Documentation is iterative"}),": Your question helped us realize the docs didn't clearly explain where metadata comes from."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Best practices emerge"}),": Through implementation, we discovered that pulling name/description from the tool class reduces duplication."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Separation of concerns matters"}),": Keeping UI concerns (icon) separate from business logic (tool class) makes the system more maintainable."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Examples are crucial"}),": The updated docs now show both \u274c wrong and \u2705 right ways to register tools."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"for-future-developers",children:"For Future Developers"}),"\n",(0,o.jsx)(n.p,{children:"When creating a new tool:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Implement ToolInterface"})," with clear name/description"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Register with metadata"})," using ",(0,o.jsx)(n.code,{children:"$tool->getName()"})," and ",(0,o.jsx)(n.code,{children:"$tool->getDescription()"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Choose an appropriate icon"})," from the reference list"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Provide your app ID"})," for proper badging"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"This ensures consistency across the platform and makes your tool self-documenting!"}),"\n",(0,o.jsx)(n.h2,{id:"files-modified",children:"Files Modified"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.code,{children:"openregister/website/docs/development/tool-registration.md"})," - Updated with best practices"]}),"\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.code,{children:"openregister/lib/Listener/ToolRegistrationListener.php"})," - Uses getName/getDescription"]}),"\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.code,{children:"opencatalogi/lib/Listener/ToolRegistrationListener.php"})," - Uses getName/getDescription"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"status",children:"Status"}),"\n",(0,o.jsxs)(n.p,{children:["\u2705 ",(0,o.jsx)(n.strong,{children:"Documentation updated"}),(0,o.jsx)(n.br,{}),"\n","\u2705 ",(0,o.jsx)(n.strong,{children:"Implementation updated to best practices"}),(0,o.jsx)(n.br,{}),"\n","\u2705 ",(0,o.jsx)(n.strong,{children:"API tested and working"}),(0,o.jsx)(n.br,{}),"\n","\u2705 ",(0,o.jsx)(n.strong,{children:"Ready for developers to use"})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Great question!"})," Your curiosity about where the metadata comes from led to significant documentation improvements that will help all future developers. \ud83c\udf89"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);