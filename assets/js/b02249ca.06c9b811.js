"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[9232],{9956:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"Integrations/dolphin","title":"Dolphin LLM Model Integration","description":"Dolphin is an open-source document image parsing model (0.3B parameters) developed by ByteDance. It provides advanced document processing capabilities including OCR, layout analysis, and structured extraction.","source":"@site/docs/Integrations/dolphin.md","sourceDirName":"Integrations","slug":"/Integrations/dolphin","permalink":"/docs/Integrations/dolphin","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Integrations/dolphin.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Custom Webhooks","permalink":"/docs/Integrations/custom-webhooks"},"next":{"title":"Hugging Face Integration","permalink":"/docs/Integrations/huggingface"}}');var s=i(74848),t=i(28453);const r={},o="Dolphin LLM Model Integration",c={},a=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Step 1: Deploy Dolphin Container",id:"step-1-deploy-dolphin-container",level:3},{value:"Step 2: Configure OpenRegister",id:"step-2-configure-openregister",level:3},{value:"Step 3: Test Integration",id:"step-3-test-integration",level:3},{value:"Configuration Details",id:"configuration-details",level:2},{value:"Dolphin Service Configuration",id:"dolphin-service-configuration",level:3},{value:"Accessing Dolphin",id:"accessing-dolphin",level:3},{value:"Use Cases",id:"use-cases",level:2},{value:"1. Scanned Document Processing",id:"1-scanned-document-processing",level:3},{value:"2. Complex Layout Analysis",id:"2-complex-layout-analysis",level:3},{value:"3. Table Extraction",id:"3-table-extraction",level:3},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Health Check",id:"health-check",level:3},{value:"Parse Document",id:"parse-document",level:3},{value:"Parse PDF",id:"parse-pdf",level:3},{value:"Integration with Text Extraction Pipeline",id:"integration-with-text-extraction-pipeline",level:2},{value:"When to Use Dolphin",id:"when-to-use-dolphin",level:2},{value:"Use Dolphin When:",id:"use-dolphin-when",level:3},{value:"Use LLPhant When:",id:"use-llphant-when",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Container Won&#39;t Start",id:"container-wont-start",level:3},{value:"Model Download Fails",id:"model-download-fails",level:3},{value:"Connection Errors from OpenRegister",id:"connection-errors-from-openregister",level:3},{value:"Slow Processing",id:"slow-processing",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"GPU Acceleration",id:"gpu-acceleration",level:3},{value:"Batch Processing",id:"batch-processing",level:3},{value:"Maintenance",id:"maintenance",level:2},{value:"View Logs",id:"view-logs",level:3},{value:"Restart Container",id:"restart-container",level:3},{value:"Update Model",id:"update-model",level:3},{value:"Check GPU Usage",id:"check-gpu-usage",level:3},{value:"Further Reading",id:"further-reading",level:2},{value:"Support",id:"support",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"dolphin-llm-model-integration",children:"Dolphin LLM Model Integration"})}),"\n",(0,s.jsx)(n.p,{children:"Dolphin is an open-source document image parsing model (0.3B parameters) developed by ByteDance. It provides advanced document processing capabilities including OCR, layout analysis, and structured extraction."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Dolphin is a Vision-Language Model (VLM) that excels at:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Advanced OCR"}),": Better accuracy on scanned documents and images"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Layout Analysis"}),": Understand document structure and reading order"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Complex Documents"}),": Handle multi-column layouts, mixed content types"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Table Extraction"}),": Parse complex tables with high accuracy"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Formula Recognition"}),": Extract mathematical formulas from documents"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Nextcloud 28+ with OpenRegister installed"}),"\n",(0,s.jsx)(n.li,{children:"Docker and Docker Compose"}),"\n",(0,s.jsx)(n.li,{children:"GPU recommended (4GB+ VRAM) for optimal performance"}),"\n",(0,s.jsx)(n.li,{children:"At least 8GB RAM"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-deploy-dolphin-container",children:"Step 1: Deploy Dolphin Container"}),"\n",(0,s.jsxs)(n.p,{children:["Dolphin is included in ",(0,s.jsx)(n.code,{children:"docker-compose.huggingface.yml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start Dolphin service\ndocker-compose -f docker-compose.huggingface.yml up -d dolphin-vlm\n\n# Wait for model download and initialization\ndocker logs -f openregister-dolphin-vlm\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-configure-openregister",children:"Step 2: Configure OpenRegister"}),"\n",(0,s.jsx)(n.p,{children:"Once Dolphin is deployed, configure in OpenRegister:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"PHP Configuration"})," (",(0,s.jsx)(n.code,{children:"config/text_extraction.php"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"return [\n    'text_extraction' => [\n        'dolphin' => [\n            'enabled' => true,\n            'api_url' => 'http://dolphin-vlm:5000',  // From Nextcloud container\n            'timeout' => 60,  // Longer timeout for complex documents\n            'fallback_to_llphant' => true  // Fallback if Dolphin unavailable\n        ]\n    ]\n];\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-test-integration",children:"Step 3: Test Integration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Test Dolphin health\ncurl http://localhost:8083/health\n\n# Test document parsing\ncurl -X POST http://localhost:8083/parse \\\n  -F "file=@document.pdf" \\\n  -F "format=text"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"configuration-details",children:"Configuration Details"}),"\n",(0,s.jsx)(n.h3,{id:"dolphin-service-configuration",children:"Dolphin Service Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'dolphin-vlm:\n  build:\n    context: ./docker/dolphin\n    dockerfile: Dockerfile\n  container_name: openregister-dolphin-vlm\n  restart: always\n  ports:\n    - "8083:5000"\n  volumes:\n    - ./docker/dolphin/models:/app/models\n  environment:\n    - MODEL_PATH=/app/models\n    - LOG_LEVEL=INFO\n  deploy:\n    resources:\n      limits:\n        memory: 8G\n      reservations:\n        memory: 4G\n      devices:\n        - driver: nvidia\n          count: all\n          capabilities: [gpu]\n'})}),"\n",(0,s.jsx)(n.h3,{id:"accessing-dolphin",children:"Accessing Dolphin"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Important: Docker Container Communication"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"From Nextcloud container"}),": ",(0,s.jsx)(n.code,{children:"http://dolphin-vlm:5000"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"From host machine"}),": ",(0,s.jsx)(n.code,{children:"http://localhost:8083"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"NOT"}),": ",(0,s.jsx)(n.code,{children:"http://localhost:5000"})," (from Nextcloud container)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,s.jsx)(n.h3,{id:"1-scanned-document-processing",children:"1. Scanned Document Processing"}),"\n",(0,s.jsx)(n.p,{children:"Dolphin excels at extracting text from scanned PDFs and images:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\TextExtractionService;\n\n$textExtractionService = $this->container->get(TextExtractionService::class);\n\n// Extract text from scanned PDF\n$text = $textExtractionService->extractFromFile($fileId, [\n    'method' => 'dolphin',  // Use Dolphin for OCR\n    'format' => 'text'\n]);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-complex-layout-analysis",children:"2. Complex Layout Analysis"}),"\n",(0,s.jsx)(n.p,{children:"Parse documents with complex layouts:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Multi-column layouts"}),"\n",(0,s.jsx)(n.li,{children:"Mixed text and images"}),"\n",(0,s.jsx)(n.li,{children:"Tables and forms"}),"\n",(0,s.jsx)(n.li,{children:"Mathematical formulas"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-table-extraction",children:"3. Table Extraction"}),"\n",(0,s.jsx)(n.p,{children:"Extract structured data from tables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Extract tables from document\n$result = $textExtractionService->extractFromFile($fileId, [\n    'method' => 'dolphin',\n    'format' => 'structured',  // Get structured output\n    'extract_tables' => true\n]);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,s.jsx)(n.h3,{id:"health-check",children:"Health Check"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GET http://dolphin-vlm:5000/health\n"})}),"\n",(0,s.jsx)(n.p,{children:"Response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "ok",\n  "service": "dolphin-api"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"parse-document",children:"Parse Document"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"POST http://dolphin-vlm:5000/parse\nContent-Type: multipart/form-data\n\nfile: <file>\nformat: text|structured|json\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parse-pdf",children:"Parse PDF"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"POST http://dolphin-vlm:5000/parse/pdf\nContent-Type: multipart/form-data\n\nfile: <pdf_file>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"integration-with-text-extraction-pipeline",children:"Integration with Text Extraction Pipeline"}),"\n",(0,s.jsx)(n.p,{children:"Dolphin integrates with OpenRegister's text extraction pipeline:"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph TD\n    A[File Upload] --\x3e B{Extraction Method?}\n    B --\x3e|Dolphin Enabled| C[Dolphin API]\n    B --\x3e|Dolphin Disabled| D[LLPhant]\n    \n    C --\x3e E{Document Type?}\n    E --\x3e|Scanned PDF| F[OCR Processing]\n    E --\x3e|Image| F\n    E --\x3e|Complex Layout| G[Layout Analysis]\n    \n    F --\x3e H[Extracted Text]\n    G --\x3e H\n    D --\x3e H\n    \n    H --\x3e I[Chunking]\n    I --\x3e J[Solr Indexing]\n    I --\x3e K[Vector Embeddings]"}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-dolphin",children:"When to Use Dolphin"}),"\n",(0,s.jsx)(n.h3,{id:"use-dolphin-when",children:"Use Dolphin When:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Processing scanned documents"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Complex multi-column layouts"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Tables and structured data extraction"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Mathematical formulas"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 High accuracy OCR required"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"use-llphant-when",children:"Use LLPhant When:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Simple text documents"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Privacy-first requirements (no external API)"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Fast processing needed"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 No GPU available"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"container-wont-start",children:"Container Won't Start"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check logs\ndocker logs openregister-dolphin-vlm\n\n# Common issues:\n# 1. Port 8083 already in use\nsudo lsof -i :8083\n\n# 2. Insufficient memory\ndocker stats openregister-dolphin-vlm\n\n# 3. GPU not available\ndocker exec openregister-dolphin-vlm nvidia-smi\n"})}),"\n",(0,s.jsx)(n.h3,{id:"model-download-fails",children:"Model Download Fails"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check internet connection\ndocker exec openregister-dolphin-vlm ping -c 3 huggingface.co\n\n# Manual model download\ndocker exec openregister-dolphin-vlm \\\n  huggingface-cli download ByteDance/Dolphin-1.5 \\\n  --local-dir /app/models\n"})}),"\n",(0,s.jsx)(n.h3,{id:"connection-errors-from-openregister",children:"Connection Errors from OpenRegister"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": OpenRegister can't connect to Dolphin."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Verify API URL uses container name: ",(0,s.jsx)(n.code,{children:"http://dolphin-vlm:5000"})]}),"\n",(0,s.jsx)(n.li,{children:"Check containers are on same Docker network"}),"\n",(0,s.jsxs)(n.li,{children:["Test connection from Nextcloud container:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker exec <nextcloud-container> curl http://dolphin-vlm:5000/health\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"slow-processing",children:"Slow Processing"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Use GPU acceleration (10-100x faster)"}),"\n",(0,s.jsx)(n.li,{children:"Process smaller documents"}),"\n",(0,s.jsx)(n.li,{children:"Increase timeout settings"}),"\n",(0,s.jsx)(n.li,{children:"Use batch processing for multiple files"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"gpu-acceleration",children:"GPU Acceleration"}),"\n",(0,s.jsx)(n.p,{children:"For best performance, use GPU:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"deploy:\n  resources:\n    devices:\n      - driver: nvidia\n        count: all\n        capabilities: [gpu]\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Performance Gain"}),": 10-100x faster processing with GPU"]}),"\n",(0,s.jsx)(n.h3,{id:"batch-processing",children:"Batch Processing"}),"\n",(0,s.jsx)(n.p,{children:"Process multiple documents efficiently:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// Process multiple files\n$fileIds = [123, 124, 125];\nforeach ($fileIds as $fileId) {\n    $textExtractionService->extractFromFile($fileId, [\n        'method' => 'dolphin',\n        'async' => true  // Process asynchronously\n    ]);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"maintenance",children:"Maintenance"}),"\n",(0,s.jsx)(n.h3,{id:"view-logs",children:"View Logs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker logs -f openregister-dolphin-vlm\n"})}),"\n",(0,s.jsx)(n.h3,{id:"restart-container",children:"Restart Container"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker restart openregister-dolphin-vlm\n"})}),"\n",(0,s.jsx)(n.h3,{id:"update-model",children:"Update Model"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker exec openregister-dolphin-vlm \\\n  huggingface-cli download ByteDance/Dolphin-2.0 \\\n  --local-dir /app/models\n  \ndocker restart openregister-dolphin-vlm\n"})}),"\n",(0,s.jsx)(n.h3,{id:"check-gpu-usage",children:"Check GPU Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker exec openregister-dolphin-vlm nvidia-smi\n"})}),"\n",(0,s.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/development/dolphin-deployment",children:"Dolphin Deployment Guide"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/technical/text-extraction-implementation",children:"Text Extraction Implementation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/bytedance/Dolphin",children:"Dolphin GitHub Repository"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://huggingface.co/ByteDance/Dolphin-1.5",children:"Hugging Face Dolphin Model"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,s.jsx)(n.p,{children:"For issues specific to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dolphin setup"}),": Check ",(0,s.jsx)(n.a,{href:"/docs/development/dolphin-deployment",children:"Dolphin Deployment Guide"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"OpenRegister integration"}),": OpenRegister GitHub issues"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Model issues"}),": Check ",(0,s.jsx)(n.a,{href:"https://github.com/bytedance/Dolphin",children:"Dolphin GitHub"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var l=i(96540);const s={},t=l.createContext(s);function r(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);