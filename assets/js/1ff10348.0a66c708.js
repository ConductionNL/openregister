"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[9742],{28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var a=t(96540);const i={},s=a.createContext(i);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:n},e.children)}},94716:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"technical/schema-based-facets","title":"Schema-Based Faceting","description":"OpenRegister now supports schema-based faceting, which allows you to define facetable fields directly in your schema properties. This approach is more efficient and provides consistent faceting behavior based on your schema design rather than analyzing object data.","source":"@site/docs/technical/schema-based-facets.md","sourceDirName":"technical","slug":"/technical/schema-based-facets","permalink":"/docs/technical/schema-based-facets","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/technical/schema-based-facets.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"php","permalink":"/docs/technical/php"},"next":{"title":"SOLR Dashboard Management - Technical Implementation","permalink":"/docs/technical/solr-dashboard-management"}}');var i=t(74848),s=t(28453);const r={},c="Schema-Based Faceting",l={},o=[{value:"Overview",id:"overview",level:2},{value:"Benefits",id:"benefits",level:2},{value:"Configuring Facetable Properties",id:"configuring-facetable-properties",level:2},{value:"Basic Configuration",id:"basic-configuration",level:3},{value:"Complete Example",id:"complete-example",level:3},{value:"Automatic Facet Type Detection",id:"automatic-facet-type-detection",level:2},{value:"String Properties",id:"string-properties",level:3},{value:"Numeric Properties",id:"numeric-properties",level:3},{value:"Boolean Properties",id:"boolean-properties",level:3},{value:"Array Properties",id:"array-properties",level:3},{value:"Using Facets in the Interface",id:"using-facets-in-the-interface",level:2},{value:"API Usage",id:"api-usage",level:2},{value:"Discovering Available Facets",id:"discovering-available-facets",level:3},{value:"Requesting Facet Data",id:"requesting-facet-data",level:3},{value:"Migration from Object-Based Faceting",id:"migration-from-object-based-faceting",level:2},{value:"Update Your Schemas",id:"update-your-schemas",level:3},{value:"Benefits of Migration",id:"benefits-of-migration",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"When to Mark Fields as Facetable",id:"when-to-mark-fields-as-facetable",level:3},{value:"When NOT to Mark Fields as Facetable",id:"when-not-to-mark-fields-as-facetable",level:3},{value:"Performance Tips",id:"performance-tips",level:3},{value:"Examples by Use Case",id:"examples-by-use-case",level:2},{value:"Document Management",id:"document-management",level:3},{value:"Product Catalog",id:"product-catalog",level:3},{value:"Event Management",id:"event-management",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"No Facets Appear",id:"no-facets-appear",level:3},{value:"Facets Show No Data",id:"facets-show-no-data",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Custom Facet Types",id:"custom-facet-types",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"schema-based-faceting",children:"Schema-Based Faceting"})}),"\n",(0,i.jsx)(n.p,{children:"OpenRegister now supports schema-based faceting, which allows you to define facetable fields directly in your schema properties. This approach is more efficient and provides consistent faceting behavior based on your schema design rather than analyzing object data."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Schema-based faceting works by marking properties in your schema as facetable using the ",(0,i.jsx)(n.code,{children:"'facetable': true"})," flag. The system then automatically:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Discovers facetable fields from schema definitions"}),"\n",(0,i.jsx)(n.li,{children:"Determines appropriate facet types based on property types and formats"}),"\n",(0,i.jsx)(n.li,{children:"Provides efficient faceting without analyzing object data"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"benefits",children:"Benefits"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Better Performance"}),": No need to analyze object data for field discovery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistent Behavior"}),": Facets are always available based on schema design"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type-Aware"}),": Automatically determines appropriate facet types"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Designer Control"}),": Schema designers control which fields are facetable"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configuring-facetable-properties",children:"Configuring Facetable Properties"}),"\n",(0,i.jsx)(n.h3,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["To make a property facetable, add ",(0,i.jsx)(n.code,{children:"'facetable': true"})," to the property definition:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'status': {\n      'type': 'string',\n      'title': 'Status',\n      'description': 'Current status of the item',\n      'facetable': true,\n      'example': 'active'\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"complete-example",children:"Complete Example"}),"\n",(0,i.jsx)(n.p,{children:"Here's a complete schema example with various facetable field types:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'title': 'Publication Schema',\n  'description': 'Schema for academic publications',\n  'properties': {\n    'title': {\n      'type': 'string',\n      'title': 'Publication Title',\n      'description': 'The title of the publication',\n      'facetable': false\n    },\n    'category': {\n      'type': 'string',\n      'title': 'Category',\n      'description': 'Publication category',\n      'facetable': true,\n      'example': 'Research'\n    },\n    'published_date': {\n      'type': 'string',\n      'format': 'date',\n      'title': 'Publication Date',\n      'description': 'When the publication was published',\n      'facetable': true\n    },\n    'priority': {\n      'type': 'integer',\n      'title': 'Priority',\n      'description': 'Priority level from 1 to 5',\n      'minimum': 1,\n      'maximum': 5,\n      'facetable': true\n    },\n    'is_featured': {\n      'type': 'boolean',\n      'title': 'Featured Publication',\n      'description': 'Whether this is a featured publication',\n      'facetable': true\n    },\n    'tags': {\n      'type': 'array',\n      'title': 'Tags',\n      'description': 'Publication tags',\n      'items': {\n        'type': 'string'\n      },\n      'facetable': true\n    },\n    'internal_notes': {\n      'type': 'string',\n      'title': 'Internal Notes',\n      'description': 'Notes for internal use only',\n      'facetable': false\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"automatic-facet-type-detection",children:"Automatic Facet Type Detection"}),"\n",(0,i.jsx)(n.p,{children:"The system automatically determines appropriate facet types based on property definitions:"}),"\n",(0,i.jsx)(n.h3,{id:"string-properties",children:"String Properties"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Regular strings"}),": Terms facet for categorical filtering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Date/datetime format"}),": Date histogram and range facets"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Email/URI/UUID format"}),": Terms facet"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'email': {\n    'type': 'string',\n    'format': 'email',\n    'facetable': true\n  },\n  'created_date': {\n    'type': 'string',\n    'format': 'date',\n    'facetable': true\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"numeric-properties",children:"Numeric Properties"}),"\n",(0,i.jsx)(n.p,{children:"Integer and number properties get both range and terms facets:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'priority': {\n    'type': 'integer',\n    'minimum': 1,\n    'maximum': 10,\n    'facetable': true\n  },\n  'rating': {\n    'type': 'number',\n    'facetable': true\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"boolean-properties",children:"Boolean Properties"}),"\n",(0,i.jsx)(n.p,{children:"Boolean properties get terms facets (true/false options):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'is_published': {\n    'type': 'boolean',\n    'facetable': true\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"array-properties",children:"Array Properties"}),"\n",(0,i.jsx)(n.p,{children:"Array properties get terms facets for filtering by array values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'categories': {\n    'type': 'array',\n    'items': {\n      'type': 'string'\n    },\n    'facetable': true\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"using-facets-in-the-interface",children:"Using Facets in the Interface"}),"\n",(0,i.jsx)(n.p,{children:"Once you've configured facetable properties in your schema:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Navigate"})," to the objects list for your register and schema"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Open"})," the filters sidebar"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Scroll"})," to the 'Facets' section at the bottom of the filters tab"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enable"})," facets by checking the boxes for fields you want to filter by"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"View"})," the facet results showing available values and counts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Filter"})," by clicking on specific facet values"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"api-usage",children:"API Usage"}),"\n",(0,i.jsx)(n.h3,{id:"discovering-available-facets",children:"Discovering Available Facets"}),"\n",(0,i.jsx)(n.p,{children:"Get facetable fields defined in schemas:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /api/objects/{register}/{schema}?_facetable=true&_limit=0\n"})}),"\n",(0,i.jsx)(n.p,{children:"Response includes schema-based facet configuration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'facetable': {\n    'object_fields': {\n      'category': {\n        'type': 'string',\n        'title': 'Category',\n        'description': 'Publication category',\n        'facet_types': ['terms'],\n        'source': 'schema',\n        'example': 'Research'\n      },\n      'priority': {\n        'type': 'integer',\n        'title': 'Priority',\n        'facet_types': ['range', 'terms'],\n        'source': 'schema',\n        'minimum': 1,\n        'maximum': 5\n      }\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"requesting-facet-data",children:"Requesting Facet Data"}),"\n",(0,i.jsx)(n.p,{children:"Request specific facets:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /api/objects/{register}/{schema}?_facets[category][type]=terms&_facets[priority][type]=range\n"})}),"\n",(0,i.jsx)(n.h2,{id:"migration-from-object-based-faceting",children:"Migration from Object-Based Faceting"}),"\n",(0,i.jsx)(n.p,{children:"If you're upgrading from the previous system that analyzed object data:"}),"\n",(0,i.jsx)(n.h3,{id:"update-your-schemas",children:"Update Your Schemas"}),"\n",(0,i.jsxs)(n.p,{children:["Add ",(0,i.jsx)(n.code,{children:"'facetable': true"})," to properties you want to be facetable:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"// Before: Facets discovered by analyzing objects\n{\n  'status': {\n    'type': 'string',\n    'title': 'Status'\n  }\n}\n\n// After: Explicitly mark as facetable\n{\n  'status': {\n    'type': 'string',\n    'title': 'Status',\n    'facetable': true\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"benefits-of-migration",children:"Benefits of Migration"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Faster Performance"}),": No object analysis required"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistent Results"}),": Facets always available based on schema"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Better Control"}),": Designers control which fields are facetable"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type Safety"}),": Proper facet types based on schema definitions"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"when-to-mark-fields-as-facetable",children:"When to Mark Fields as Facetable"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Categorical data"}),": Status, category, type fields"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Date fields"}),": Creation dates, publication dates, deadlines"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Numeric ranges"}),": Priorities, ratings, scores"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Boolean flags"}),": Published status, featured items"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tags/arrays"}),": Multi-value categorical data"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"when-not-to-mark-fields-as-facetable",children:"When NOT to Mark Fields as Facetable"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Large text fields"}),": Descriptions, content, notes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unique identifiers"}),": UUIDs, unique names"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"High-cardinality strings"}),": Email addresses, URLs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sensitive data"}),": Internal notes, private information"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use facets on fields that have reasonable cardinality (not too many unique values)"}),"\n",(0,i.jsx)(n.li,{children:"Consider the user experience - only make fields facetable if users would want to filter by them"}),"\n",(0,i.jsx)(n.li,{children:"Use meaningful titles and descriptions for better user interface"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"examples-by-use-case",children:"Examples by Use Case"}),"\n",(0,i.jsx)(n.h3,{id:"document-management",children:"Document Management"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'document_type': {\n    'type': 'string',\n    'title': 'Document Type',\n    'facetable': true\n  },\n  'department': {\n    'type': 'string', \n    'title': 'Department',\n    'facetable': true\n  },\n  'created_date': {\n    'type': 'string',\n    'format': 'date',\n    'facetable': true\n  },\n  'is_confidential': {\n    'type': 'boolean',\n    'title': 'Confidential',\n    'facetable': true\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"product-catalog",children:"Product Catalog"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'category': {\n    'type': 'string',\n    'title': 'Product Category',\n    'facetable': true\n  },\n  'price': {\n    'type': 'number',\n    'title': 'Price',\n    'facetable': true\n  },\n  'brand': {\n    'type': 'string',\n    'title': 'Brand',\n    'facetable': true\n  },\n  'in_stock': {\n    'type': 'boolean',\n    'title': 'In Stock',\n    'facetable': true\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"event-management",children:"Event Management"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'event_type': {\n    'type': 'string',\n    'title': 'Event Type',\n    'facetable': true\n  },\n  'event_date': {\n    'type': 'string',\n    'format': 'date',\n    'title': 'Event Date',\n    'facetable': true\n  },\n  'capacity': {\n    'type': 'integer',\n    'title': 'Capacity',\n    'facetable': true\n  },\n  'is_public': {\n    'type': 'boolean',\n    'title': 'Public Event',\n    'facetable': true\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"no-facets-appear",children:"No Facets Appear"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Check that your schema properties have ",(0,i.jsx)(n.code,{children:"'facetable': true"})]}),"\n",(0,i.jsx)(n.li,{children:"Verify the register and schema are selected"}),"\n",(0,i.jsx)(n.li,{children:"Ensure the schema contains at least one facetable property"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"facets-show-no-data",children:"Facets Show No Data"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Make sure objects exist for the schema"}),"\n",(0,i.jsx)(n.li,{children:"Check that object data contains the facetable fields"}),"\n",(0,i.jsx)(n.li,{children:"Verify the property names match between schema and object data"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,i.jsx)(n.p,{children:"Schema-based faceting should be much faster than object-based analysis. If you experience performance issues:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Check database indexes on metadata fields"}),"\n",(0,i.jsx)(n.li,{children:"Consider the cardinality of your facetable fields"}),"\n",(0,i.jsx)(n.li,{children:"Monitor query performance in logs"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"custom-facet-types",children:"Custom Facet Types"}),"\n",(0,i.jsx)(n.p,{children:"While facet types are automatically determined, you can influence them through property configuration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'date_field': {\n    'type': 'string',\n    'format': 'date-time',  // Enables date_histogram facets\n    'facetable': true\n  },\n  'numeric_field': {\n    'type': 'integer',\n    'minimum': 1,           // Provides range context\n    'maximum': 100,         // Provides range context\n    'facetable': true\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For more advanced faceting features and configuration options, see the ",(0,i.jsx)(n.a,{href:"/docs/technical/unified-faceting-system",children:"Unified Faceting System"})," and ",(0,i.jsx)(n.a,{href:"/docs/technical/array-faceting",children:"Array Faceting"})," guides."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);