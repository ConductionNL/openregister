(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[9941],{7411:()=>{},9146:(e,n,s)=>{"use strict";s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"Features/schemas","title":"Schemas","description":"An overview of how core concepts in Open Register interact with each other.","source":"@site/docs/Features/schemas.md","sourceDirName":"Features","slug":"/Features/schemas","permalink":"/docs/Features/schemas","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Features/schemas.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Schemas","sidebar_position":2,"description":"An overview of how core concepts in Open Register interact with each other.","keywords":["Open Register","Core Concepts","Relationships"]},"sidebar":"tutorialSidebar","previous":{"title":"Register","permalink":"/docs/Features/registers"},"next":{"title":"Objects","permalink":"/docs/Features/objects"}}');var r=s(74848),t=s(28453),a=s(45673);s(65537),s(79329);const l={title:"Schemas",sidebar_position:2,description:"An overview of how core concepts in Open Register interact with each other.",keywords:["Open Register","Core Concepts","Relationships"]},c="Schemas",d={},o=[{value:"What is a Schema?",id:"what-is-a-schema",level:2},{value:"Schema Structure",id:"schema-structure",level:2},{value:"Schema Validation",id:"schema-validation",level:2},{value:"Validation Types",id:"validation-types",level:3},{value:"Custom Validation Rules",id:"custom-validation-rules",level:3},{value:"Validation Process",id:"validation-process",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Best Practices",id:"best-practices",level:3},{value:"Example Schema with Validation",id:"example-schema-with-validation",level:3},{value:"Property Structure",id:"property-structure",level:2},{value:"File Properties",id:"file-properties",level:3},{value:"Basic File Property",id:"basic-file-property",level:4},{value:"Array of Files Property",id:"array-of-files-property",level:4},{value:"File Property Configuration",id:"file-property-configuration",level:4},{value:"File Input Types",id:"file-input-types",level:4},{value:"File Property Processing",id:"file-property-processing",level:4},{value:"Auto Tag Placeholders",id:"auto-tag-placeholders",level:4},{value:"File Upload Examples",id:"file-upload-examples",level:4},{value:"Best Practices",id:"best-practices-1",level:4},{value:"Example Schema",id:"example-schema",level:2},{value:"Schema Use Cases",id:"schema-use-cases",level:2},{value:"1. Data Validation",id:"1-data-validation",level:3},{value:"2. Documentation",id:"2-documentation",level:3},{value:"3. API Contract",id:"3-api-contract",level:3},{value:"4. UI Generation",id:"4-ui-generation",level:3},{value:"Working with Schemas",id:"working-with-schemas",level:2},{value:"Creating a Schema",id:"creating-a-schema",level:3},{value:"Retrieving Schema Information",id:"retrieving-schema-information",level:3},{value:"Updating a Schema",id:"updating-a-schema",level:3},{value:"Nesting schema&#39;s",id:"nesting-schemas",level:3},{value:"Schema Versioning",id:"schema-versioning",level:3},{value:"API Property Filtering",id:"api-property-filtering",level:2},{value:"Available Filtering Parameters",id:"available-filtering-parameters",level:3},{value:"Property Inclusion with &#39;_fields&#39;",id:"property-inclusion-with-_fields",level:3},{value:"Property Removal with &#39;_unset&#39;",id:"property-removal-with-_unset",level:3},{value:"Alternative Syntax",id:"alternative-syntax",level:3},{value:"Collection Endpoints",id:"collection-endpoints",level:3},{value:"Best Practices",id:"best-practices-2",level:3},{value:"Important Notes",id:"important-notes",level:3},{value:"Reference Format",id:"reference-format",level:2},{value:"Examples",id:"examples",level:3},{value:"Object Handling Configuration",id:"object-handling-configuration",level:2},{value:"1. Nested Objects (<code>nested-object</code>)",id:"1-nested-objects-nested-object",level:3},{value:"2. Cascading Objects (<code>cascade</code>)",id:"2-cascading-objects-cascade",level:3},{value:"2a. Cascading with <code>inversedBy</code> (Relational Cascading)",id:"2a-cascading-with-inversedby-relational-cascading",level:4},{value:"2b. Cascading without <code>inversedBy</code> (ID Storage Cascading)",id:"2b-cascading-without-inversedby-id-storage-cascading",level:4},{value:"Cascading Configuration",id:"cascading-configuration",level:2},{value:"Optional Configuration",id:"optional-configuration",level:3},{value:"Cascading Types",id:"cascading-types",level:3},{value:"Single Object Cascading",id:"single-object-cascading",level:3},{value:"With <code>inversedBy</code> (Relational)",id:"with-inversedby-relational",level:4},{value:"Without <code>inversedBy</code> (ID Storage)",id:"without-inversedby-id-storage",level:4},{value:"Array Object Cascading",id:"array-object-cascading",level:3},{value:"With <code>inversedBy</code> (Relational)",id:"with-inversedby-relational-1",level:4},{value:"Without <code>inversedBy</code> (ID Storage)",id:"without-inversedby-id-storage-1",level:4},{value:"Schema Resolution Process",id:"schema-resolution-process",level:2},{value:"1. Schema Pre-processing",id:"1-schema-pre-processing",level:3},{value:"2. Reference Resolution Order",id:"2-reference-resolution-order",level:3},{value:"3. Union Type Creation",id:"3-union-type-creation",level:3},{value:"Cascading Behavior",id:"cascading-behavior",level:2},{value:"Object Creation Flow",id:"object-creation-flow",level:3},{value:"Example Flow",id:"example-flow",level:3},{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"E-commerce Product with Reviews",id:"e-commerce-product-with-reviews",level:3},{value:"Organization with Departments",id:"organization-with-departments",level:3},{value:"Project with Tasks",id:"project-with-tasks",level:3},{value:"Schema Exploration",id:"schema-exploration",level:2},{value:"How Schema Exploration Works",id:"how-schema-exploration-works",level:3},{value:"Starting Schema Exploration",id:"starting-schema-exploration",level:3},{value:"Understanding Analysis Results",id:"understanding-analysis-results",level:3},{value:"Property Information",id:"property-information",level:4},{value:"Advanced Analysis",id:"advanced-analysis",level:4},{value:"Property Behaviors Table",id:"property-behaviors-table",level:4},{value:"Configuration Options",id:"configuration-options",level:3},{value:"Technical Configuration",id:"technical-configuration",level:4},{value:"User-Facing Configuration",id:"user-facing-configuration",level:4},{value:"Analysis Process Details",id:"analysis-process-details",level:3},{value:"Length Analysis",id:"length-analysis",level:4},{value:"Format Detection",id:"format-detection",level:4},{value:"Type Consistency",id:"type-consistency",level:4},{value:"Pattern Recognition",id:"pattern-recognition",level:4},{value:"Usage Workflow",id:"usage-workflow",level:3},{value:"Step 1: Initiate Exploration",id:"step-1-initiate-exploration",level:4},{value:"Step 2: Configure Properties",id:"step-2-configure-properties",level:4},{value:"Step 3: Apply Changes",id:"step-3-apply-changes",level:4},{value:"Best Practices",id:"best-practices-3",level:3},{value:"Before Exploration",id:"before-exploration",level:4},{value:"During Analysis",id:"during-analysis",level:4},{value:"After Exploration",id:"after-exploration",level:4},{value:"Monitoring and Maintenance",id:"monitoring-and-maintenance",level:3},{value:"Regular Exploration",id:"regular-exploration",level:4},{value:"Performance Considerations",id:"performance-considerations",level:4},{value:"Common Use Cases",id:"common-use-cases",level:3},{value:"Data Import Discovery",id:"data-import-discovery",level:4},{value:"Schema Evolution",id:"schema-evolution",level:4},{value:"Data Quality Analysis",id:"data-quality-analysis",level:4},{value:"Best Practices",id:"best-practices-4",level:2},{value:"When to Use Cascading",id:"when-to-use-cascading",level:3},{value:"When to Use Nested Objects",id:"when-to-use-nested-objects",level:3},{value:"Configuration Tips",id:"configuration-tips",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Debug Tips",id:"debug-tips",level:3},{value:"Understanding Two-Way Relationships",id:"understanding-two-way-relationships",level:2},{value:"Key Concepts",id:"key-concepts",level:3},{value:"Relationship Flow",id:"relationship-flow",level:3},{value:"Schema Configuration",id:"schema-configuration",level:2},{value:"Basic Two-Way Relationship",id:"basic-two-way-relationship",level:3},{value:"Configuration Properties",id:"configuration-properties",level:3},{value:"Implementation Details",id:"implementation-details",level:2},{value:"How It Works",id:"how-it-works",level:3},{value:"Processing Order",id:"processing-order",level:3},{value:"UUID Validation",id:"uuid-validation",level:3},{value:"Example: Samenwerking and Organizations",id:"example-samenwerking-and-organizations",level:2},{value:"Samenwerking Schema (Source)",id:"samenwerking-schema-source",level:3},{value:"Organization Schema (Target)",id:"organization-schema-target",level:3},{value:"API Usage",id:"api-usage",level:2},{value:"Creating a Samenwerking",id:"creating-a-samenwerking",level:3},{value:"Checking the Organization",id:"checking-the-organization",level:3},{value:"Best Practices",id:"best-practices-5",level:2},{value:"When to Use Two-Way Relationships",id:"when-to-use-two-way-relationships",level:3},{value:"Configuration Guidelines",id:"configuration-guidelines",level:3},{value:"Performance Considerations",id:"performance-considerations-1",level:3},{value:"Default Values Configuration",id:"default-values-configuration",level:2},{value:"Basic Default Values",id:"basic-default-values",level:3},{value:"Array Default Values",id:"array-default-values",level:3},{value:"Object Default Values",id:"object-default-values",level:3},{value:"Default Behavior Configuration",id:"default-behavior-configuration",level:3},{value:"Mode 1: &#39;false&#39; (Default Behavior)",id:"mode-1-false-default-behavior",level:4},{value:"Mode 2: &#39;falsy&#39; (Enhanced Behavior)",id:"mode-2-falsy-enhanced-behavior",level:4},{value:"Practical Use Cases",id:"practical-use-cases",level:3},{value:"Preventing Empty Values",id:"preventing-empty-values",level:4},{value:"Optional Fields with Fallbacks",id:"optional-fields-with-fallbacks",level:4},{value:"Template Support",id:"template-support",level:3},{value:"Processing Order",id:"processing-order-1",level:3},{value:"Frontend Configuration",id:"frontend-configuration",level:3},{value:"Troubleshooting",id:"troubleshooting-1",level:2},{value:"Common Issues",id:"common-issues-1",level:3},{value:"Debug Steps",id:"debug-steps",level:3},{value:"Recent Fixes",id:"recent-fixes",level:3},{value:"UUID Regex Fix (v1.0.0)",id:"uuid-regex-fix-v100",level:4},{value:"Cascade Integration Fix (v1.0.0)",id:"cascade-integration-fix-v100",level:4},{value:"Schema Composition (Inheritance &amp; Extension)",id:"schema-composition-inheritance--extension",level:2},{value:"Core Concepts",id:"core-concepts",level:3},{value:"Liskov Substitution Principle",id:"liskov-substitution-principle",level:4},{value:"Composition Patterns",id:"composition-patterns",level:3},{value:"1. allOf - Multiple Inheritance (Recommended for Extension)",id:"1-allof---multiple-inheritance-recommended-for-extension",level:4},{value:"2. oneOf - Mutually Exclusive Options",id:"2-oneof---mutually-exclusive-options",level:4},{value:"3. anyOf - Flexible Composition",id:"3-anyof---flexible-composition",level:4},{value:"Retrieval (Automatic Resolution)",id:"retrieval-automatic-resolution",level:4},{value:"Property Merging Rules",id:"property-merging-rules",level:3},{value:"Multi-Level Inheritance",id:"multi-level-inheritance",level:3},{value:"Using Schema Composition",id:"using-schema-composition",level:3},{value:"Creating a Composed Schema",id:"creating-a-composed-schema",level:4},{value:"Updating an Extended Schema",id:"updating-an-extended-schema",level:4},{value:"Preventing Circular References",id:"preventing-circular-references",level:3},{value:"Performance Considerations",id:"performance-considerations-2",level:3},{value:"Use Cases",id:"use-cases",level:3},{value:"1. Entity Hierarchies",id:"1-entity-hierarchies",level:4},{value:"2. Versioned Schemas",id:"2-versioned-schemas",level:4},{value:"3. Domain-Specific Extensions",id:"3-domain-specific-extensions",level:4},{value:"4. Multi-Tenant Customization",id:"4-multi-tenant-customization",level:4},{value:"Best Practices",id:"best-practices-6",level:3},{value:"1. Design Clear Hierarchies",id:"1-design-clear-hierarchies",level:4},{value:"2. Document Extension Purpose",id:"2-document-extension-purpose",level:4},{value:"3. Consider Maintenance",id:"3-consider-maintenance",level:4},{value:"4. Property Override Strategy",id:"4-property-override-strategy",level:4},{value:"5. Required Fields",id:"5-required-fields",level:4},{value:"Limitations and Constraints",id:"limitations-and-constraints",level:3},{value:"For allOf (Extension/Inheritance):",id:"for-allof-extensioninheritance",level:4},{value:"For oneOf/anyOf:",id:"for-oneofanyof",level:4},{value:"General Limitations:",id:"general-limitations",level:4},{value:"Troubleshooting",id:"troubleshooting-2",level:3},{value:"Schema Not Found",id:"schema-not-found",level:4},{value:"Circular Reference",id:"circular-reference",level:4},{value:"Liskov Substitution Violation",id:"liskov-substitution-violation",level:4},{value:"Property Conflicts",id:"property-conflicts",level:4},{value:"Resolution Issues",id:"resolution-issues",level:4},{value:"Self-Reference",id:"self-reference",level:4},{value:"API Examples",id:"api-examples",level:3},{value:"Get Extended Schema (Resolved)",id:"get-extended-schema-resolved",level:4},{value:"Get Raw Schema (Delta Only)",id:"get-raw-schema-delta-only",level:4},{value:"Update Extended Schema",id:"update-extended-schema",level:4},{value:"Check Which Schemas Extend This Schema",id:"check-which-schemas-extend-this-schema",level:4},{value:"Advanced Topics",id:"advanced-topics",level:3},{value:"Custom Merge Logic",id:"custom-merge-logic",level:4},{value:"Migration Strategies",id:"migration-strategies",level:4},{value:"Testing Extended Schemas",id:"testing-extended-schemas",level:4},{value:"Quick Reference",id:"quick-reference",level:3},{value:"Composition Pattern Selection Guide",id:"composition-pattern-selection-guide",level:4},{value:"What Can Be Changed in Child Schemas (allOf)",id:"what-can-be-changed-in-child-schemas-allof",level:4},{value:"Schema Exploration &amp; Analysis",id:"schema-exploration--analysis",level:2},{value:"Overview",id:"overview",level:3},{value:"Analysis Process",id:"analysis-process",level:3},{value:"Discovery Types",id:"discovery-types",level:3},{value:"New Properties",id:"new-properties",level:4},{value:"Property Enhancements",id:"property-enhancements",level:4},{value:"Analysis Features",id:"analysis-features",level:3},{value:"Type Detection",id:"type-detection",level:4},{value:"Constraint Analysis",id:"constraint-analysis",level:4},{value:"Enhancement Opportunities",id:"enhancement-opportunities",level:4},{value:"Filtering &amp; Selection",id:"filtering--selection",level:3},{value:"Usage Recommendations",id:"usage-recommendations",level:3},{value:"For New Properties",id:"for-new-properties",level:4},{value:"For Property Enhancements",id:"for-property-enhancements",level:4},{value:"Best Practices",id:"best-practices-7",level:3},{value:"Monitoring &amp; Troubleshooting",id:"monitoring--troubleshooting",level:3},{value:"Large Datasets",id:"large-datasets",level:4},{value:"Memory Usage",id:"memory-usage",level:4},{value:"Common Issues",id:"common-issues-2",level:4},{value:"Integration with Schema Management",id:"integration-with-schema-management",level:3},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Architecture Overview",id:"architecture-overview",level:3},{value:"Schema Definition Flow",id:"schema-definition-flow",level:3},{value:"Property Validation System",id:"property-validation-system",level:3},{value:"Schema Exploration Process",id:"schema-exploration-process",level:3},{value:"Property Analysis Flow",id:"property-analysis-flow",level:3},{value:"Facet Pre-computation",id:"facet-pre-computation",level:3},{value:"Schema-Aware Solr Indexing",id:"schema-aware-solr-indexing",level:3},{value:"Authorization System",id:"authorization-system",level:3},{value:"Configuration System",id:"configuration-system",level:3},{value:"Database Schema",id:"database-schema",level:3},{value:"Performance Optimizations",id:"performance-optimizations",level:3},{value:"Code Examples",id:"code-examples",level:3},{value:"Testing",id:"testing",level:3},{value:"Best Practices",id:"best-practices-8",level:3},{value:"Monitoring and Debugging",id:"monitoring-and-debugging",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"schemas",children:"Schemas"})}),"\n",(0,r.jsx)(n.h2,{id:"what-is-a-schema",children:"What is a Schema?"}),"\n",(0,r.jsxs)(n.p,{children:["In Open Register, a ",(0,r.jsx)(n.strong,{children:"Schema"})," defines the structure, validation rules, and relationships for data objects. Schemas act as blueprints that specify:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["What ",(0,r.jsx)(n.strong,{children:"fields"})," an object should have"]}),"\n",(0,r.jsxs)(n.li,{children:["What ",(0,r.jsx)(n.strong,{children:"data types"})," those fields should be"]}),"\n",(0,r.jsxs)(n.li,{children:["Which fields are ",(0,r.jsx)(n.strong,{children:"required"})," vs. optional"]}),"\n",(0,r.jsxs)(n.li,{children:["Any ",(0,r.jsx)(n.strong,{children:"constraints"})," on field values (min/max, patterns, enums)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Relationships"})," between different objects"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Open Register uses ",(0,r.jsx)(n.a,{href:"https://json-schema.org/",children:"JSON Schema"})," as its schema definition language, providing a powerful and standardized way to describe data structures."]}),"\n",(0,r.jsx)(n.h2,{id:"schema-structure",children:"Schema Structure"}),"\n",(0,r.jsxs)(n.p,{children:["A schema in Open Register follows the JSON Schema specification (see ",(0,r.jsx)(n.a,{href:"https://json-schema.org/understanding-json-schema",children:"JSON Schema Core"})," and ",(0,r.jsx)(n.a,{href:"https://json-schema.org/draft/2020-12/json-schema-validation.html",children:"JSON Schema Validation"}),") and consists of the following key components defined in the specification:"]}),"\n",(0,r.jsx)(a.A,{id:"open-register",example:!0,pointer:"#/components/schemas/Schema"}),"\n",(0,r.jsx)(n.h2,{id:"schema-validation",children:"Schema Validation"}),"\n",(0,r.jsx)(n.p,{children:"Open Register provides robust schema validation capabilities to ensure data integrity and quality. The validation system is built on top of JSON Schema validation and includes additional custom validation rules."}),"\n",(0,r.jsx)(n.h3,{id:"validation-types",children:"Validation Types"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Type Validation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ensures data types match schema definitions"}),"\n",(0,r.jsx)(n.li,{children:"Validates string, number, boolean, object, and array types"}),"\n",(0,r.jsx)(n.li,{children:"Checks format specifications (email, date, URI, etc.)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Required Fields"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Validates presence of mandatory fields"}),"\n",(0,r.jsx)(n.li,{children:"Supports conditional requirements"}),"\n",(0,r.jsx)(n.li,{children:"Handles nested required fields"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Constraints"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Minimum/maximum values for numbers"}),"\n",(0,r.jsx)(n.li,{children:"String length limits"}),"\n",(0,r.jsx)(n.li,{children:"Pattern matching for strings"}),"\n",(0,r.jsx)(n.li,{children:"Array size limits"}),"\n",(0,r.jsx)(n.li,{children:"Custom validation rules"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Relationships"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Validates object references"}),"\n",(0,r.jsx)(n.li,{children:"Checks relationship integrity"}),"\n",(0,r.jsx)(n.li,{children:"Ensures bidirectional relationships"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"custom-validation-rules",children:"Custom Validation Rules"}),"\n",(0,r.jsx)(n.p,{children:"Open Register supports custom validation rules through PHP classes. These rules can be defined in your schema:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "properties": {\n    "age": {\n      "type": "integer",\n      "minimum": 0,\n      "maximum": 150,\n      "customValidation": {\n        "class": "OCA\\\\OpenRegister\\\\Validation\\\\AgeValidator",\n        "method": "validate"\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"validation-process",children:"Validation Process"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pre-validation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Schema structure validation"}),"\n",(0,r.jsx)(n.li,{children:"Custom rule registration"}),"\n",(0,r.jsx)(n.li,{children:"Relationship validation setup"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Data Validation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Type checking"}),"\n",(0,r.jsx)(n.li,{children:"Required field verification"}),"\n",(0,r.jsx)(n.li,{children:"Constraint validation"}),"\n",(0,r.jsx)(n.li,{children:"Custom rule execution"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Post-validation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Relationship integrity check"}),"\n",(0,r.jsx)(n.li,{children:"Cross-field validation"}),"\n",(0,r.jsx)(n.li,{children:"Business rule validation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.p,{children:"The validation system provides detailed error messages:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "valid": false,\n  "errors": [\n    {\n      "field": "email",\n      "message": "Invalid email format",\n      "code": "INVALID_EMAIL"\n    },\n    {\n      "field": "age",\n      "message": "Age must be between 0 and 150",\n      "code": "INVALID_AGE"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Validation Design"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Define clear validation rules"}),"\n",(0,r.jsx)(n.li,{children:"Use appropriate constraints"}),"\n",(0,r.jsx)(n.li,{children:"Consider performance impact"}),"\n",(0,r.jsx)(n.li,{children:"Document custom rules"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error Messages"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Provide clear error descriptions"}),"\n",(0,r.jsx)(n.li,{children:"Include helpful suggestions"}),"\n",(0,r.jsx)(n.li,{children:"Use consistent error codes"}),"\n",(0,r.jsx)(n.li,{children:"Support multiple languages"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Performance"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optimize validation rules"}),"\n",(0,r.jsx)(n.li,{children:"Cache validation results"}),"\n",(0,r.jsx)(n.li,{children:"Batch validate when possible"}),"\n",(0,r.jsx)(n.li,{children:"Monitor validation times"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-schema-with-validation",children:"Example Schema with Validation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "Person",\n  "version": "1.0.0",\n  "required": ["firstName", "lastName", "email", "age"],\n  "properties": {\n    "firstName": {\n      "type": "string",\n      "minLength": 2,\n      "maxLength": 50,\n      "pattern": "^[A-Za-z\\\\s-]+$",\n      "description": "Person\'s first name"\n    },\n    "lastName": {\n      "type": "string",\n      "minLength": 2,\n      "maxLength": 50,\n      "pattern": "^[A-Za-z\\\\s-]+$",\n      "description": "Person\'s last name"\n    },\n    "email": {\n      "type": "string",\n      "format": "email",\n      "description": "Person\'s email address"\n    },\n    "age": {\n      "type": "integer",\n      "minimum": 0,\n      "maximum": 150,\n      "description": "Person\'s age"\n    },\n    "phoneNumbers": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "required": ["type", "number"],\n        "properties": {\n          "type": {\n            "type": "string",\n            "enum": ["home", "work", "mobile"]\n          },\n          "number": {\n            "type": "string",\n            "pattern": "^\\\\+?[1-9]\\\\d{1,14}$"\n          }\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"property-structure",children:"Property Structure"}),"\n",(0,r.jsxs)(n.p,{children:["Before diving into schema examples, let's understand the key components of a property definition. These components are primarily derived from JSON Schema specifications (see ",(0,r.jsx)(n.a,{href:"https://json-schema.org/draft/2020-12/json-schema-validation.html",children:"JSON Schema Validation"}),") with some additional extensions required for storage and validation purposes:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://json-schema.org/understanding-json-schema/reference/type#type-specific-keywords",children:(0,r.jsx)(n.code,{children:"type"})})}),(0,r.jsx)(n.td,{children:"Data type of the property (string, number, boolean, object, array)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"type": "string"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://json-schema.org/understanding-json-schema/keywords#description",children:(0,r.jsx)(n.code,{children:"description"})})}),(0,r.jsx)(n.td,{children:"Human-readable explanation of the property's purpose"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"description": "Person\'s full name"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://json-schema.org/understanding-json-schema/reference/type#format",children:(0,r.jsx)(n.code,{children:"format"})})}),(0,r.jsx)(n.td,{children:"Specific for the type (date, email, uri, etc)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"format": "date-time"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"pattern"})}),(0,r.jsx)(n.td,{children:"Regular expression pattern the value must match"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"pattern": "^[A-Z][a-z]+$"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"enum"})}),(0,r.jsx)(n.td,{children:"Array of allowed values"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"enum": ["active", "inactive"]'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"minimum"}),"/",(0,r.jsx)(n.code,{children:"maximum"})]}),(0,r.jsx)(n.td,{children:"Numeric range constraints"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"minimum": 0, "maximum": 100'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"minLength"}),"/",(0,r.jsx)(n.code,{children:"maxLength"})]}),(0,r.jsx)(n.td,{children:"String length constraints"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"minLength": 3, "maxLength": 50'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"required"})}),(0,r.jsx)(n.td,{children:"Whether the property is mandatory"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"required": true'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"default"})}),(0,r.jsx)(n.td,{children:"Default value if none provided"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"default": "pending"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"examples"})}),(0,r.jsx)(n.td,{children:"Sample valid values"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"examples": ["John Smith"]'})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Properties can also have nested objects and arrays with their own validation rules, allowing for complex data structures while maintaining strict validation. See the ",(0,r.jsx)(n.a,{href:"#nesting-schemas",children:"Nesting schema's"})," section below for more details."]}),"\n",(0,r.jsx)(n.h3,{id:"file-properties",children:"File Properties"}),"\n",(0,r.jsx)(n.p,{children:"File properties allow you to attach files directly to specific object properties with validation and automatic processing. File properties support both single files and arrays of files."}),"\n",(0,r.jsx)(n.h4,{id:"basic-file-property",children:"Basic File Property"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'avatar': {\n      'type': 'file',\n      'description': 'User profile picture',\n      'allowedTypes': ['image/jpeg', 'image/png', 'image/gif'],\n      'maxSize': 2097152,\n      'autoTags': ['profile-image', 'auto-uploaded']\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"array-of-files-property",children:"Array of Files Property"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'attachments': {\n      'type': 'array',\n      'description': 'Document attachments',\n      'items': {\n        'type': 'file',\n        'allowedTypes': ['application/pdf', 'image/jpeg', 'image/png'],\n        'maxSize': 10485760,\n        'allowedTags': ['document', 'attachment'],\n        'autoTags': ['auto-uploaded', 'property-attachments']\n      }\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"file-property-configuration",children:"File Property Configuration"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'allowedTypes'"}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"Array of allowed MIME types"}),(0,r.jsx)(n.td,{children:"'['image/jpeg', 'image/png']'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'maxSize'"}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"Maximum file size in bytes"}),(0,r.jsx)(n.td,{children:"'5242880' (5MB)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'allowedTags'"}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"Tags that are allowed on files"}),(0,r.jsx)(n.td,{children:"'['document', 'public']'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'autoTags'"}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"Tags automatically applied to uploaded files"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"['auto-uploaded', 'property-{propertyName}']"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"file-input-types",children:"File Input Types"}),"\n",(0,r.jsx)(n.p,{children:"File properties support three types of input:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Base64 Data URIs"}),": ",(0,r.jsx)(n.code,{children:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAAA..."})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"URLs"}),": ",(0,r.jsx)(n.code,{children:"https://example.com/image.jpg"})," (system fetches the file)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"File Objects"}),": ",(0,r.jsx)(n.code,{children:"{id: '12345', title: 'image.jpg', downloadUrl: '...'}"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"file-property-processing",children:"File Property Processing"}),"\n",(0,r.jsx)(n.p,{children:"When objects are saved:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"File Detection"}),": System detects file data (base64, URLs, or file objects) in file properties"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"File Processing"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Base64: Decoded and validated"}),"\n",(0,r.jsx)(n.li,{children:"URLs: Fetched from remote source"}),"\n",(0,r.jsx)(n.li,{children:"File Objects: Validated against existing files"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation"}),": Files are validated against 'allowedTypes' and 'maxSize' constraints"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"File Creation"}),": Files are created and stored in the object's folder"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Auto Tagging"}),": 'autoTags' are automatically applied to files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ID Storage"}),": File IDs replace file content in the object data"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"When objects are rendered:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ID Detection"}),": System detects file IDs in file properties"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"File Hydration"}),": File IDs are replaced with complete file objects"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Metadata"}),": File objects include path, size, type, tags, and access URLs"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"auto-tag-placeholders",children:"Auto Tag Placeholders"}),"\n",(0,r.jsx)(n.p,{children:"Auto tags support placeholder replacement:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Placeholder"}),(0,r.jsx)(n.th,{children:"Replacement"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"'{property}'"})," or ",(0,r.jsx)(n.code,{children:"'{propertyName}'"})]}),(0,r.jsx)(n.td,{children:"Property name"}),(0,r.jsx)(n.td,{children:"'property-avatar'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"'{index}'"})}),(0,r.jsx)(n.td,{children:"Array index (for array properties)"}),(0,r.jsx)(n.td,{children:"'file-0', 'file-1'"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"file-upload-examples",children:"File Upload Examples"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Base64 Input:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"// Input object with base64 file data\n{\n  'name': 'John Doe',\n  'avatar': 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAAA...',\n  'documents': [\n    'data:application/pdf;base64,JVBERi0xLjQKJcOkw6k...',\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...'\n  ]\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"URL Input:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"// Input object with URLs (system fetches files)\n{\n  'name': 'Jane Smith',\n  'avatar': 'https://example.com/avatars/jane.jpg',\n  'documents': [\n    'https://example.com/docs/resume.pdf',\n    'https://example.com/certificates/cert.png'\n  ]\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"File Object Input:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"// Input object with existing file objects\n{\n  'name': 'Bob Wilson',\n  'avatar': {\n    'id': '12345',\n    'title': 'profile.jpg',\n    'downloadUrl': 'https://example.com/s/AbCdEfGh/download'\n  },\n  'documents': [\n    {\n      'id': '12346',\n      'title': 'document1.pdf',\n      'downloadUrl': 'https://example.com/s/XyZwVuTs/download'\n    }\n  ]\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"All Input Types - Final Storage:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'// Stored object with file IDs\n{\n  "name": "John Doe",\n  "avatar": 12345,\n  "documents": [12346, 12347]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rendered object with file objects:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "name": "John Doe",\n  "avatar": {\n    "id": "12345",\n    "title": "avatar_1640995200.jpg",\n    "type": "image/jpeg",\n    "size": 15420,\n    "accessUrl": "https://example.com/s/AbCdEfGh",\n    "downloadUrl": "https://example.com/s/AbCdEfGh/download",\n    "labels": ["profile-image", "auto-uploaded"]\n  },\n  "documents": [\n    {\n      "id": "12346",\n      "title": "documents_0_1640995200.pdf",\n      "type": "application/pdf",\n      "size": 245760,\n      "accessUrl": "https://example.com/s/XyZwVuTs",\n      "labels": ["auto-uploaded", "property-documents"]\n    },\n    {\n      "id": "12347",\n      "title": "documents_1_1640995200.png",\n      "type": "image/png",\n      "size": 89123,\n      "accessUrl": "https://example.com/s/MnOpQrSt",\n      "labels": ["auto-uploaded", "property-documents"]\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"best-practices-1",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MIME Type Validation"}),": Always specify 'allowedTypes' to prevent unwanted file uploads"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Size Limits"}),": Set appropriate 'maxSize' limits to prevent storage abuse"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Auto Tags"}),": Use descriptive auto tags for better file organization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Property Names"}),": Use clear property names that indicate file purpose"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Array Usage"}),": Use array properties for multiple files of the same type"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example-schema",children:"Example Schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "person",\n  "title": "Person",\n  "version": "1.0.0",\n  "description": "Schema for representing a person with basic information",\n  "summary": "Basic person information",\n  "required": ["firstName", "lastName", "birthDate"],\n  "properties": {\n    "firstName": {\n      "type": "string",\n      "description": "Person\'s first name"\n    },\n    "lastName": {\n      "type": "string",\n      "description": "Person\'s last name"\n    },\n    "birthDate": {\n      "type": "string",\n      "format": "date",\n      "description": "Person\'s date of birth in ISO 8601 format"\n    },\n    "email": {\n      "type": "string",\n      "format": "email",\n      "description": "Person\'s email address"\n    },\n    "address": {\n      "type": "object",\n      "description": "Person\'s address",\n      "properties": {\n        "street": { "type": "string" },\n        "city": { "type": "string" },\n        "postalCode": { "type": "string" },\n        "country": { "type": "string" }\n      }\n    },\n    "phoneNumbers": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "properties": {\n          "type": { \n            "type": "string",\n            "enum": ["home", "work", "mobile"]\n          },\n          "number": { "type": "string" }\n        }\n      }\n    }\n  },\n  "archive": {},\n  "updated": "2023-04-20T11:25:00Z",\n  "created": "2023-01-05T08:30:00Z"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"schema-use-cases",children:"Schema Use Cases"}),"\n",(0,r.jsx)(n.p,{children:"Schemas serve multiple purposes in Open Register:"}),"\n",(0,r.jsx)(n.h3,{id:"1-data-validation",children:"1. Data Validation"}),"\n",(0,r.jsx)(n.p,{children:"Schemas ensure that all data entering the system meets defined requirements, maintaining data quality and consistency."}),"\n",(0,r.jsx)(n.h3,{id:"2-documentation",children:"2. Documentation"}),"\n",(0,r.jsx)(n.p,{children:"Schemas serve as self-documenting specifications for data structures, helping developers understand what data is available and how it's organized."}),"\n",(0,r.jsx)(n.h3,{id:"3-api-contract",children:"3. API Contract"}),"\n",(0,r.jsx)(n.p,{children:"Schemas define the contract between different systems, specifying what data can be exchanged and in what format."}),"\n",(0,r.jsx)(n.h3,{id:"4-ui-generation",children:"4. UI Generation"}),"\n",(0,r.jsx)(n.p,{children:"Schemas can be used to automatically generate forms and other UI elements, ensuring that user interfaces align with data requirements."}),"\n",(0,r.jsx)(n.h2,{id:"working-with-schemas",children:"Working with Schemas"}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-schema",children:"Creating a Schema"}),"\n",(0,r.jsx)(n.p,{children:"To create a new schema, you define its structure and validation rules:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'POST /api/schemas\n{\n  "title": "Product",\n  "version": "1.0.0",\n  "description": "Schema for product information",\n  "required": ["name", "sku", "price"],\n  "properties": {\n    "name": {\n      "type": "string",\n      "description": "Product name"\n    },\n    "sku": {\n      "type": "string",\n      "description": "Stock keeping unit"\n    },\n    "price": {\n      "type": "number",\n      "minimum": 0,\n      "description": "Product price"\n    },\n    "description": {\n      "type": "string",\n      "description": "Product description"\n    },\n    "category": {\n      "type": "string",\n      "description": "Product category"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"retrieving-schema-information",children:"Retrieving Schema Information"}),"\n",(0,r.jsx)(n.p,{children:"You can retrieve information about a specific schema:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/schemas/{id}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Or list all available schemas:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/schemas\n"})}),"\n",(0,r.jsx)(n.h3,{id:"updating-a-schema",children:"Updating a Schema"}),"\n",(0,r.jsx)(n.p,{children:"Schemas can be updated to add new fields, change validation rules, or fix issues:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'PUT /api/schemas/{id}\n{\n  "title": "Product",\n  "version": "1.1.0",\n  "description": "Schema for product information",\n  "required": ["name", "sku", "price"],\n  "properties": {\n    "name": {\n      "type": "string",\n      "description": "Product name"\n    },\n    "sku": {\n      "type": "string",\n      "description": "Stock keeping unit"\n    },\n    "price": {\n      "type": "number",\n      "minimum": 0,\n      "description": "Product price"\n    },\n    "description": {\n      "type": "string",\n      "description": "Product description"\n    },\n    "category": {\n      "type": "string",\n      "description": "Product category"\n    },\n    "tags": {\n      "type": "array",\n      "items": {\n        "type": "string"\n      },\n      "description": "Product tags"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"nesting-schemas",children:"Nesting schema's"}),"\n",(0,r.jsx)(n.h3,{id:"schema-versioning",children:"Schema Versioning"}),"\n",(0,r.jsx)(n.p,{children:"Open Register supports schema versioning to manage changes over time:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Minor Updates"}),": Adding optional fields or relaxing constraints"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Major Updates"}),": Adding required fields, removing fields, or changing field types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Archive"}),": Previous versions are stored in the schema's archive property"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"api-property-filtering",children:"API Property Filtering"}),"\n",(0,r.jsx)(n.p,{children:"When retrieving objects via the API, OpenRegister provides several parameters to control which properties are included or excluded from the response. This is particularly useful for optimizing performance, reducing payload sizes, or filtering out sensitive information."}),"\n",(0,r.jsx)(n.h3,{id:"available-filtering-parameters",children:"Available Filtering Parameters"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Usage Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'_fields'"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Whitelist"})," - Include only specified properties"]}),(0,r.jsx)(n.td,{children:"'?_fields=id,name,description'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'_unset'"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Blacklist"})," - Remove specified properties"]}),(0,r.jsx)(n.td,{children:"'?_unset=internal,private,metadata'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'_filter'"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Conditional"})," - Filter objects by property values"]}),(0,r.jsx)(n.td,{children:"'?_filter=status,active'"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"property-inclusion-with-_fields",children:"Property Inclusion with '_fields'"}),"\n",(0,r.jsx)(n.p,{children:"Use '_fields' to specify exactly which properties should be included in the response:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Only return id, name, and description\nGET /api/objects/register/schema/123?_fields=id,name,description\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "123",\n  "name": "Sample Object",\n  "description": "This is a sample",\n  "@self": {\n    "id": "123",\n    "name": "Sample Object",\n    "register": "1",\n    "schema": "5"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"property-removal-with-_unset",children:"Property Removal with '_unset'"}),"\n",(0,r.jsx)(n.p,{children:"Use '_unset' to remove specific properties from the response:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Remove internal and metadata properties\nGET /api/objects/register/schema/123?_unset=internal,metadata,created\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Before '_unset':"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "123",\n  "name": "Sample Object",\n  "internal": "sensitive data",\n  "metadata": {"version": "1.0"},\n  "created": "2023-01-01T00:00:00Z",\n  "@self": {...}\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After '_unset=internal,metadata,created':"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "123", \n  "name": "Sample Object",\n  "@self": {...}\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"alternative-syntax",children:"Alternative Syntax"}),"\n",(0,r.jsx)(n.p,{children:"Both underscore and non-underscore versions are supported:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# These are equivalent:\nGET /api/objects/123?_unset=field1,field2\nGET /api/objects/123?unset=field1,field2\n\nGET /api/objects/123?_fields=id,name\nGET /api/objects/123?fields=id,name\n"})}),"\n",(0,r.jsx)(n.h3,{id:"collection-endpoints",children:"Collection Endpoints"}),"\n",(0,r.jsx)(n.p,{children:"Property filtering works on both single object and collection endpoints:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Remove sensitive data from all objects in collection\nGET /api/objects?_unset=password,token,internal\n\n# Only include essential fields for list view\nGET /api/objects?_fields=id,name,status\n"})}),"\n",(0,r.jsx)(n.h3,{id:"best-practices-2",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": Use '_fields' for large objects to reduce response size"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security"}),": Use '_unset' to remove sensitive properties without affecting underlying data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistency"}),": Choose one parameter style ('_unset' vs 'unset') and use consistently"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Documentation"}),": Document which fields can be filtered for API consumers"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"important-notes",children:"Important Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Property filtering only affects the API response, not the stored data"}),"\n",(0,r.jsx)(n.li,{children:"The '@self' metadata object is always included and contains core object information"}),"\n",(0,r.jsx)(n.li,{children:"Filtering is applied after object rendering and relationship resolution"}),"\n",(0,r.jsx)(n.li,{children:"Invalid property names in filtering parameters are silently ignored"}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"schema-references-and-object-cascading",children:"Schema References and Object Cascading"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister supports schema references to enable reusable schema definitions and complex object relationships. This document explains how schema references work, how they are resolved, and how to configure object cascading."}),"\n",(0,r.jsx)(n.h2,{id:"reference-format",children:"Reference Format"}),"\n",(0,r.jsxs)(n.p,{children:["Schema references use the JSON Schema format: ",(0,r.jsx)(n.code,{children:"#/components/schemas/[slug]"})]}),"\n",(0,r.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'type': 'object',\n  'properties': {\n    'person': {\n      'type': 'object',\n      '$ref': '#/components/schemas/Person'\n    },\n    'contacts': {\n      'type': 'array',\n      'items': {\n        '$ref': '#/components/schemas/Contactgegevens'\n      }\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"object-handling-configuration",children:"Object Handling Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["OpenRegister provides different ways to handle nested objects through the ",(0,r.jsx)(n.code,{children:"objectConfiguration.handling"})," property:"]}),"\n",(0,r.jsxs)(n.h3,{id:"1-nested-objects-nested-object",children:["1. Nested Objects (",(0,r.jsx)(n.code,{children:"nested-object"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"Objects are stored as nested data within the parent object. This is the default behavior."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'contactgegevens': {\n    'type': 'object',\n    '$ref': '#/components/schemas/Contactgegevens',\n    'objectConfiguration': {\n      'handling': 'nested-object'\n    }\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Result"}),": The contactgegevens data is stored directly in the parent object."]}),"\n",(0,r.jsxs)(n.h3,{id:"2-cascading-objects-cascade",children:["2. Cascading Objects (",(0,r.jsx)(n.code,{children:"cascade"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"Objects are created as separate entities. There are two types of cascading behavior:"}),"\n",(0,r.jsxs)(n.h4,{id:"2a-cascading-with-inversedby-relational-cascading",children:["2a. Cascading with ",(0,r.jsx)(n.code,{children:"inversedBy"})," (Relational Cascading)"]}),"\n",(0,r.jsx)(n.p,{children:"Creates separate entities with back-references to the parent object:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n'contactgegevens': {\n 'type': 'array',\n 'items': {\n   'type': 'object',\n   '$ref': '#/components/schemas/Contactgegevens',\n   'inversedBy': 'organisatie'\n },\n 'objectConfiguration': {\n   'handling': 'cascade',\n   'schema': '34'\n }\n}\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Result"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Each contactgegevens object is created as a separate entity with the ",(0,r.jsx)(n.code,{children:"organisatie"})," property set to the parent object's UUID"]}),"\n",(0,r.jsxs)(n.li,{children:["The parent object's ",(0,r.jsx)(n.code,{children:"contactgegevens"})," property becomes an empty array ",(0,r.jsx)(n.code,{children:"[]"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"2b-cascading-without-inversedby-id-storage-cascading",children:["2b. Cascading without ",(0,r.jsx)(n.code,{children:"inversedBy"})," (ID Storage Cascading)"]}),"\n",(0,r.jsx)(n.p,{children:"Creates independent entities and stores their IDs in the parent object:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'contactgegevens': {\n    'type': 'array',\n    'items': {\n      'type': 'object',\n      '$ref': '#/components/schemas/Contactgegevens'\n    },\n    'objectConfiguration': {\n      'handling': 'cascade',\n      'schema': '34'\n    }\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Result"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Each contactgegevens object is created as a separate, independent entity"}),"\n",(0,r.jsxs)(n.li,{children:["The parent object's ",(0,r.jsx)(n.code,{children:"contactgegevens"})," property stores an array of the created objects' UUIDs: ",(0,r.jsx)(n.code,{children:"['uuid1', 'uuid2']"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cascading-configuration",children:"Cascading Configuration"}),"\n",(0,r.jsx)(n.p,{children:"For objects to be cascaded (saved as separate entities), they must have:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Schema Reference"}),": ",(0,r.jsx)(n.code,{children:"$ref"})," property pointing to the target schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Object Configuration"}),": ",(0,r.jsx)(n.code,{children:"objectConfiguration.handling"})," set to ",(0,r.jsx)(n.code,{children:"'cascade'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Target Schema"}),": ",(0,r.jsx)(n.code,{children:"objectConfiguration.schema"})," property specifying the schema ID for cascaded objects"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"optional-configuration",children:"Optional Configuration"}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Inverse Relationship"}),": ",(0,r.jsx)(n.code,{children:"inversedBy"})," property for relational cascading (creates back-reference)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Register"}),": ",(0,r.jsx)(n.code,{children:"register"})," property (defaults to parent object's register)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cascading-types",children:"Cascading Types"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["With ",(0,r.jsx)(n.code,{children:"inversedBy"})]}),": Creates relational cascading where cascaded objects reference the parent"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Without ",(0,r.jsx)(n.code,{children:"inversedBy"})]}),": Creates independent cascading where parent stores cascaded object IDs"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"single-object-cascading",children:"Single Object Cascading"}),"\n",(0,r.jsxs)(n.h4,{id:"with-inversedby-relational",children:["With ",(0,r.jsx)(n.code,{children:"inversedBy"})," (Relational)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'manager': {\n    'type': 'object',\n    '$ref': '#/components/schemas/Person',\n    'inversedBy': 'managedOrganisation',\n    'register': '6',\n    'objectConfiguration': {\n      'handling': 'cascade',\n      'schema': '12'\n    }\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Result"}),": Manager object is created separately with ",(0,r.jsx)(n.code,{children:"managedOrganisation"})," property set to parent UUID. Parent object's ",(0,r.jsx)(n.code,{children:"manager"})," property becomes ",(0,r.jsx)(n.code,{children:"null"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"without-inversedby-id-storage",children:["Without ",(0,r.jsx)(n.code,{children:"inversedBy"})," (ID Storage)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'manager': {\n    'type': 'object',\n    '$ref': '#/components/schemas/Person',\n    'register': '6',\n    'objectConfiguration': {\n      'handling': 'cascade',\n      'schema': '12'\n       }\n     }\n   }\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Result"}),": Manager object is created independently. Parent object's ",(0,r.jsx)(n.code,{children:"manager"})," property stores the manager's UUID as a string."]}),"\n",(0,r.jsx)(n.h3,{id:"array-object-cascading",children:"Array Object Cascading"}),"\n",(0,r.jsxs)(n.h4,{id:"with-inversedby-relational-1",children:["With ",(0,r.jsx)(n.code,{children:"inversedBy"})," (Relational)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'employees': {\n    'type': 'array',\n    'items': {\n      'type': 'object',\n      '$ref': '#/components/schemas/Person',\n      'inversedBy': 'employer'\n    },\n    'objectConfiguration': {\n      'handling': 'cascade',\n      'schema': '12'\n    }\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Result"}),": Each employee object is created separately with ",(0,r.jsx)(n.code,{children:"employer"})," property set to parent UUID. Parent object's ",(0,r.jsx)(n.code,{children:"employees"})," property becomes an empty array ",(0,r.jsx)(n.code,{children:"[]"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"without-inversedby-id-storage-1",children:["Without ",(0,r.jsx)(n.code,{children:"inversedBy"})," (ID Storage)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n'employees': {\n 'type': 'array',\n 'items': {\n   'type': 'object',\n   '$ref': '#/components/schemas/Person'\n },\n 'objectConfiguration': {\n   'handling': 'cascade',\n   'schema': '12'\n    }\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Result"}),": Each employee object is created independently. Parent object's ",(0,r.jsx)(n.code,{children:"employees"})," property stores an array of employee UUIDs: ",(0,r.jsx)(n.code,{children:"['uuid1', 'uuid2', 'uuid3']"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"schema-resolution-process",children:"Schema Resolution Process"}),"\n",(0,r.jsxs)(n.p,{children:["Schema references are resolved through a ",(0,r.jsx)(n.strong,{children:"pre-processing approach"})," that happens before validation:"]}),"\n",(0,r.jsx)(n.h3,{id:"1-schema-pre-processing",children:"1. Schema Pre-processing"}),"\n",(0,r.jsx)(n.p,{children:"Before validation, the system:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Scans the schema for ",(0,r.jsx)(n.code,{children:"$ref"})," properties"]}),"\n",(0,r.jsx)(n.li,{children:"Resolves references to actual schema definitions"}),"\n",(0,r.jsx)(n.li,{children:"Embeds the resolved schemas in place of references"}),"\n",(0,r.jsx)(n.li,{children:"Creates union types for properties that support both objects and UUID references"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-reference-resolution-order",children:"2. Reference Resolution Order"}),"\n",(0,r.jsx)(n.p,{children:"The system resolves schema references in the following order:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Direct ID/UUID"}),": ",(0,r.jsx)(n.code,{children:"'34'"}),", ",(0,r.jsx)(n.code,{children:"'21aab6e0-2177-4920-beb0-391492fed04b'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"JSON Schema path"}),": ",(0,r.jsx)(n.code,{children:"'#/components/schemas/Contactgegevens'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"URL references"}),": ",(0,r.jsx)(n.code,{children:"'http://example.com/api/schemas/34'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Slug references"}),": ",(0,r.jsx)(n.code,{children:"'contactgegevens'"})," (case-insensitive)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For path and URL references, the system extracts the last path segment and matches it against schema slugs."}),"\n",(0,r.jsx)(n.h3,{id:"3-union-type-creation",children:"3. Union Type Creation"}),"\n",(0,r.jsx)(n.p,{children:"For cascading objects, the system creates union types that allow both:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Full nested object"}),": Complete object data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"UUID reference"}),": String UUID pointing to an existing object"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'type': ['object', 'string'],\n  'properties': {\n    // ... full schema properties\n  },\n  'pattern': '^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$'\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"cascading-behavior",children:"Cascading Behavior"}),"\n",(0,r.jsx)(n.h3,{id:"object-creation-flow",children:"Object Creation Flow"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation"}),": Objects are validated against the union type schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sanitization"}),": Empty values are cleaned up"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cascading"}),": Objects with ",(0,r.jsx)(n.code,{children:"inversedBy"})," are extracted and saved separately"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Relationship Setting"}),": The ",(0,r.jsx)(n.code,{children:"inversedBy"})," property is set to the parent object's UUID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Separate Storage"}),": Cascaded objects are saved as independent entities"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parent Update"}),": Cascaded objects are removed from the parent object's data"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-flow",children:"Example Flow"}),"\n",(0,r.jsx)(n.p,{children:"Input data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'naam': 'Test Organization',\n  'contactgegevens': [\n    {\n      'email': 'contact@example.com',\n      'telefoon': '123-456-7890',\n      'voornaam': 'John',\n      'achternaam': 'Doe'\n    }\n  ]\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Result:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parent object"})," (organisatie): Stored with ",(0,r.jsx)(n.code,{children:"contactgegevens: []"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cascaded object"})," (contactgegevens): Stored separately with ",(0,r.jsx)(n.code,{children:"organisatie: 'parent-uuid'"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,r.jsx)(n.h3,{id:"e-commerce-product-with-reviews",children:"E-commerce Product with Reviews"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'reviews': {\n    'type': 'array',\n    'items': {\n      'type': 'object',\n      '$ref': '#/components/schemas/Review',\n      'inversedBy': 'product'\n    },\n    'objectConfiguration': {\n      'handling': 'cascade',\n      'schema': '25'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"organization-with-departments",children:"Organization with Departments"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'departments': {\n    'type': 'array',\n    'items': {\n      'type': 'object',\n      '$ref': '#/components/schemas/Department',\n      'inversedBy': 'organization',\n      'register': '6'\n    },\n    'objectConfiguration': {\n      'handling': 'cascade'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"project-with-tasks",children:"Project with Tasks"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'tasks': {\n    'type': 'array',\n    'items': {\n      'type': 'object',\n      '$ref': '#/components/schemas/Task',\n      'inversedBy': 'project'\n    },\n    'objectConfiguration': {\n      'handling': 'cascade',\n      'schema': '18'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"schema-exploration",children:"Schema Exploration"}),"\n",(0,r.jsxs)(n.p,{children:["Open Register includes a powerful ",(0,r.jsx)(n.strong,{children:"Schema Exploration"})," feature that analyzes existing object data to discover properties not defined in the current schema. This is particularly useful when:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Objects were created with validation disabled"}),"\n",(0,r.jsx)(n.li,{children:"Data was imported from external sources"}),"\n",(0,r.jsx)(n.li,{children:"The schema evolved over time and some properties weren't properly documented"}),"\n",(0,r.jsx)(n.li,{children:"You need to discover the actual data structure within your objects"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"how-schema-exploration-works",children:"How Schema Exploration Works"}),"\n",(0,r.jsx)(n.p,{children:"The exploration process involves several steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Object Retrieval"}),": Collects all objects belonging to a specific schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Property Extraction"}),": Analyzes each object's properties and their values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type Detection"}),": Determines data types, formats, and patterns from real data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Gap Analysis"}),": Identifies properties present in objects but missing from the schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Confidence Scoring"}),": Provides confidence levels for property recommendations"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"starting-schema-exploration",children:"Starting Schema Exploration"}),"\n",(0,r.jsx)(n.p,{children:"To explore a schema's properties:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Schemas"})," in the Open Register interface"]}),"\n",(0,r.jsx)(n.li,{children:"Find the schema you want to explore"}),"\n",(0,r.jsxs)(n.li,{children:["Click the ",(0,r.jsx)(n.strong,{children:'"Explore Properties"'})," action button (database search icon)"]}),"\n",(0,r.jsx)(n.li,{children:"Review the analysis results showing discovered properties"}),"\n",(0,r.jsx)(n.li,{children:"Select which properties to add to your schema"}),"\n",(0,r.jsx)(n.li,{children:"Configure property settings (types, constraints, behaviors)"}),"\n",(0,r.jsx)(n.li,{children:"Apply changes to update the schema"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"understanding-analysis-results",children:"Understanding Analysis Results"}),"\n",(0,r.jsx)(n.p,{children:"The exploration results provide detailed information about each discovered property:"}),"\n",(0,r.jsx)(n.h4,{id:"property-information",children:"Property Information"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Recommended Type"}),": Auto-detected data type (string, number, boolean, etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Detected Format"}),": Specific format like date, email, URL, UUID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type Variations"}),": Cases where the same property has different types across objects"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Confidence Score"}),": Reliability percentage based on data consistency"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Examples"}),": Sample values found in the data"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"advanced-analysis",children:"Advanced Analysis"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Numeric Range"}),": Min/max values and data type (integer vs float)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Length Range"}),": Minimum and maximum string lengths"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"String Patterns"}),": Detected formats like camelCase, snake_case, etc."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Auto-generated description based on property usage"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"property-behaviors-table",children:"Property Behaviors Table"}),"\n",(0,r.jsx)(n.p,{children:"Discovered properties can be configured with a comprehensive set of behaviors:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Behavior"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Required field"})}),(0,r.jsx)(n.td,{children:"Property must be present in objects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Immutable"})}),(0,r.jsx)(n.td,{children:"Property cannot be changed after creation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Deprecated"})}),(0,r.jsx)(n.td,{children:"Property is marked for removal"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Visible to end users"})}),(0,r.jsx)(n.td,{children:"Show property in user interfaces"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Hide in collection view"})}),(0,r.jsx)(n.td,{children:"Hide property in list/grid views"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Hide in form view"})}),(0,r.jsx)(n.td,{children:"Hide property in forms"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Enable faceting"})}),(0,r.jsx)(n.td,{children:"Allow filtering/searching by this property"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,r.jsx)(n.p,{children:"For technical vs user-facing settings:"}),"\n",(0,r.jsx)(n.h4,{id:"technical-configuration",children:"Technical Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Technical Description"}),": For developers and administrators"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Property Type"}),": Data type with auto-detected recommendations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example Values"}),": Sample data from analysis"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Constraints"}),": Type-specific limits (length, range, patterns)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"user-facing-configuration",children:"User-Facing Configuration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Display Title"}),": Label shown to end users"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Description"}),": Helpful text shown in forms and interfaces"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"analysis-process-details",children:"Analysis Process Details"}),"\n",(0,r.jsx)(n.p,{children:"The exploration analyzes each property across all objects to determine:"}),"\n",(0,r.jsx)(n.h4,{id:"length-analysis",children:"Length Analysis"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "property_name": "description",\n  "min_length": 15,\n  "max_length": 256,\n  "recommended_type": "string"\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"format-detection",children:"Format Detection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "property_name": "email_address", \n  "detected_format": "email",\n  "confidence_score": 95,\n  "examples": ["user@example.com", "test@domain.org"]\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"type-consistency",children:"Type Consistency"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "property_name": "score",\n  "type_variations": ["integer", "string"],\n  "recommended_type": "integer",\n  "warnings": ["Mixed types detected - consider data cleanup"]\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"pattern-recognition",children:"Pattern Recognition"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "property_name": "user_id",\n  "string_patterns": ["integer_string", "snake_case"],\n  "numeric_range": {"min": 1, "max": 9999, "type": "integer"}\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"usage-workflow",children:"Usage Workflow"}),"\n",(0,r.jsx)(n.h4,{id:"step-1-initiate-exploration",children:"Step 1: Initiate Exploration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# API endpoint for exploration\nGET /api/schemas/{schemaId}/explore\n\n# Example response\n{\n  "total_objects": 242,\n  "discovered_properties": {\n    "new_field": {\n      "type": "string",\n      "confidence_score": 85,\n      "examples": ["value1", "value2"],\n      "max_length": 50\n    }\n  },\n  "analysis_date": "2025-01-10T11:30:00Z"\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"step-2-configure-properties",children:"Step 2: Configure Properties"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'# Select and configure properties to add\n{\n  "properties": [\n    {\n      "property_name": "new_field",\n      "type": "string",\n      "title": "New Field",\n      "technical_description": "Field discovered through object analysis",\n      "user_description": "This is a new field",\n      "required": false,\n      "facetable": true,\n      "visible": true,\n      "max_length": 50\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"step-3-apply-changes",children:"Step 3: Apply Changes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Update schema with discovered properties\nPOST /api/schemas/{schemaId}/update-from-exploration\n\n# Response\n{\n  "success": true,\n  "message": "Schema updated successfully with 3 properties",\n  "schema": { /* updated schema object */ }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"best-practices-3",children:"Best Practices"}),"\n",(0,r.jsx)(n.h4,{id:"before-exploration",children:"Before Exploration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validate Data Quality"}),": Ensure your objects have reasonably clean data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Check Object Count"}),": Exploration works with all objects for a schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review Existing Schema"}),": Understand what properties you already have defined"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"during-analysis",children:"During Analysis"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review Confidence Scores"}),": Higher scores indicate more reliable recommendations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Check Type Variations"}),": Investigate properties with inconsistent types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Examine Examples"}),": Use sample values to understand property purpose"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"after-exploration",children:"After Exploration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test Validation"}),": Create test objects with the updated schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update Documentation"}),": Document newly discovered properties"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clean Data"}),": Address any type inconsistencies found during analysis"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-and-maintenance",children:"Monitoring and Maintenance"}),"\n",(0,r.jsx)(n.h4,{id:"regular-exploration",children:"Regular Exploration"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Run exploration when importing large datasets"}),"\n",(0,r.jsx)(n.li,{children:"Schedule periodic exploration after schema updates"}),"\n",(0,r.jsx)(n.li,{children:"Use exploration after disabling validation for bulk operations"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Large Schemas"}),": Exploration may take time with thousands of objects"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Progress Indicators"}),": UI shows analysis progress and object counts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Caching"}),": Results are cached to avoid repeated analysis"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,r.jsx)(n.h4,{id:"data-import-discovery",children:"Data Import Discovery"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// After importing legacy data, discover actual structure\nconst exploration = await schemaService.exploreSchemaProperties(schemaId);\n\n// Review discovered properties\nexploration.suggestions.forEach(property => {\n  console.log(`${property.property_name}: ${property.recommended_type} (${property.confidence_score}%)`);\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"schema-evolution",children:"Schema Evolution"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// When schema changes over time, discover what developers are actually using\nconst updatedSchema = await schemaService.updateSchemaFromExploration(\n  schemaId, \n  selectedProperties\n);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"data-quality-analysis",children:"Data Quality Analysis"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Identify data inconsistencies\nexploration.suggestions\n  .filter(p => p.type_variations && p.type_variations.length > 1)\n  .forEach(property => {\n    console.warn(`Inconsistent types for ${property.property_name}: ${property.type_variations.join(', ')}`);\n  });\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices-4",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-cascading",children:"When to Use Cascading"}),"\n",(0,r.jsx)(n.p,{children:"Use cascading when:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Objects have independent lifecycle management"}),"\n",(0,r.jsx)(n.li,{children:"You need to query/filter child objects separately"}),"\n",(0,r.jsx)(n.li,{children:"Child objects may be referenced by multiple parents"}),"\n",(0,r.jsx)(n.li,{children:"You want to maintain referential integrity"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-nested-objects",children:"When to Use Nested Objects"}),"\n",(0,r.jsx)(n.p,{children:"Use nested objects when:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Data is simple and doesn't need independent management"}),"\n",(0,r.jsx)(n.li,{children:"Objects are tightly coupled to their parent"}),"\n",(0,r.jsx)(n.li,{children:"Performance is critical (fewer database queries)"}),"\n",(0,r.jsx)(n.li,{children:"You don't need to query child objects separately"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-tips",children:"Configuration Tips"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Always specify ",(0,r.jsx)(n.code,{children:"inversedBy"})]})," for cascading relationships"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use descriptive relationship names"})," that make sense from the child's perspective"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consider register boundaries"})," - cascaded objects can be in different registers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test with both object and UUID inputs"})," to ensure union types work correctly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Document your schema relationships"})," for other developers"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Objects not cascading"}),": Check that both ",(0,r.jsx)(n.code,{children:"$ref"})," and ",(0,r.jsx)(n.code,{children:"inversedBy"})," are present"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation errors"}),": Ensure the referenced schema exists and is accessible"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Missing relationships"}),": Verify the ",(0,r.jsx)(n.code,{children:"inversedBy"})," property name matches the target schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance issues"}),": Consider using nested objects for simple, non-queryable data"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"debug-tips",children:"Debug Tips"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Check the schema resolution logs for reference resolution issues"}),"\n",(0,r.jsxs)(n.li,{children:["Verify that the target schema exists and has the expected ",(0,r.jsx)(n.code,{children:"inversedBy"})," property"]}),"\n",(0,r.jsx)(n.li,{children:"Test with simple object data first before complex nested structures"}),"\n",(0,r.jsx)(n.li,{children:"Use the API to inspect created objects and verify relationships"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"two-way-relationships-with-writeback",children:"Two-Way Relationships with writeBack"}),"\n",(0,r.jsxs)(n.p,{children:["OpenRegister supports ",(0,r.jsx)(n.strong,{children:"two-way relationships"})," that automatically maintain bidirectional references between objects. This feature allows you to create relationships where both objects reference each other, ensuring data consistency and enabling efficient queries from either direction."]}),"\n",(0,r.jsx)(n.h2,{id:"understanding-two-way-relationships",children:"Understanding Two-Way Relationships"}),"\n",(0,r.jsx)(n.h3,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"inversedBy"})}),': Declarative property that defines the relationship direction ("referenced objects have a property that points back to me")']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"writeBack"})}),': Action property that triggers the actual update ("when I set this property, update the referenced objects\' reverse property")']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"removeAfterWriteBack"})}),": Optional property that removes the source property after the write-back is complete"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"relationship-flow",children:"Relationship Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:'graph TD\n    A[Samenwerking Object] --\x3e|deelnemers: [org1, org2]| B[Organization 1]\n    A --\x3e|deelnemers: [org1, org2]| C[Organization 2]\n    B --\x3e|deelnames: [samenwerking]| A\n    C --\x3e|deelnames: [samenwerking]| A\n    \n    subgraph "Write-Back Process"\n        D[Create Samenwerking] --\x3e E[Process deelnemers]\n        E --\x3e F[Find Organizations]\n        F --\x3e G[Update deelnames on each Organization]\n        G --\x3e H[Remove deelnemers from Samenwerking]\n    end\n'})}),"\n",(0,r.jsx)(n.h2,{id:"schema-configuration",children:"Schema Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"basic-two-way-relationship",children:"Basic Two-Way Relationship"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "deelnemers": {\n    "type": "array",\n    "title": "Deelnemers",\n    "description": "Organisaties die deelnemen aan deze community",\n    "items": {\n      "type": "object",\n      "objectConfiguration": {"handling": "related-object"},\n      "$ref": "#/components/schemas/organisatie",\n      "inversedBy": "deelnames",\n      "writeBack": true,\n      "removeAfterWriteBack": true\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-properties",children:"Configuration Properties"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"inversedBy"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Name of the property on the referenced object that points back"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"deelnames"'})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"writeBack"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Enables automatic update of the reverse relationship"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"removeAfterWriteBack"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Removes the source property after write-back (optional)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,r.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Object Creation"}),": When a samenwerking is created with ",(0,r.jsx)(n.code,{children:"deelnemers"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Property Detection"}),": System detects properties with ",(0,r.jsx)(n.code,{children:"writeBack: true"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Target Resolution"}),": Finds the referenced organizations using UUIDs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reverse Update"}),": Updates each organization's ",(0,r.jsx)(n.code,{children:"deelnames"})," property"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cleanup"}),": Optionally removes the ",(0,r.jsx)(n.code,{children:"deelnemers"})," property from the samenwerking"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"processing-order",children:"Processing Order"}),"\n",(0,r.jsxs)(n.p,{children:["The write-back process happens ",(0,r.jsx)(n.strong,{children:"before"})," cascading operations to ensure the source data is available:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sanitization"}),": Clean empty values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Write-Back"}),": Process inverse relationships"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cascading"}),": Handle object cascading"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default Values"}),": Set any default values"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"uuid-validation",children:"UUID Validation"}),"\n",(0,r.jsx)(n.p,{children:"The system validates UUIDs using a strict regex pattern:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$\n"})}),"\n",(0,r.jsx)(n.p,{children:"This ensures only valid UUIDs are processed for write-back operations."}),"\n",(0,r.jsx)(n.h2,{id:"example-samenwerking-and-organizations",children:"Example: Samenwerking and Organizations"}),"\n",(0,r.jsx)(n.h3,{id:"samenwerking-schema-source",children:"Samenwerking Schema (Source)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "properties": {\n    "naam": {\n      "type": "string",\n      "title": "Naam",\n      "description": "Naam van de samenwerking"\n    },\n    "deelnemers": {\n      "type": "array",\n      "title": "Deelnemers",\n      "description": "Organisaties die deelnemen aan deze community",\n      "items": {\n        "type": "object",\n        "objectConfiguration": {"handling": "related-object"},\n        "$ref": "#/components/schemas/organisatie",\n        "inversedBy": "deelnames",\n        "writeBack": true,\n        "removeAfterWriteBack": true\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"organization-schema-target",children:"Organization Schema (Target)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "properties": {\n    "naam": {\n      "type": "string",\n      "title": "Naam",\n      "description": "Naam van de organisatie"\n    },\n    "deelnames": {\n      "type": "array",\n      "title": "Deelnames",\n      "description": "UUIDs van communities waar deze organisatie aan deelneemt",\n      "items": {\n        "type": "string",\n        "format": "uuid"\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"api-usage",children:"API Usage"}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-samenwerking",children:"Creating a Samenwerking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -u \'admin:admin\' \\\n  -H \'OCS-APIREQUEST: true\' \\\n  -H \'Content-Type: application/json\' \\\n  -X POST \'http://localhost/index.php/apps/openregister/api/objects/6/35\' \\\n  -d \'{\n    "naam": "Test Samenwerking",\n    "website": "https://samenwerking.nl",\n    "type": "Samenwerking",\n    "deelnemers": ["13382394-13cf-4f59-93ae-4c4e4998543f"]\n  }\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "9ee70e18-1852-4321-a70a-dff29c604aaa",\n  "naam": "Test Samenwerking",\n  "website": "https://samenwerking.nl",\n  "type": "Samenwerking",\n  "deelnemers": [],\n  "@self": {\n    "id": "9ee70e18-1852-4321-a70a-dff29c604aaa",\n    "name": "Test Samenwerking",\n    "description": 2806,\n    "uri": "http://localhost/index.php/apps/openregister/api/objects/voorzieningen/organisatie/9ee70e18-1852-4321-a70a-dff29c604aaa",\n    "register": "6",\n    "schema": "35"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"checking-the-organization",children:"Checking the Organization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n  -H 'OCS-APIREQUEST: true' \\\n  'http://localhost/index.php/apps/openregister/api/objects/6/35/13382394-13cf-4f59-93ae-4c4e4998543f'\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "13382394-13cf-4f59-93ae-4c4e4998543f",\n  "naam": "Test Organisatie 1",\n  "website": "https://test1.nl",\n  "type": "Leverancier",\n  "deelnames": ["9ee70e18-1852-4321-a70a-dff29c604aaa"],\n  "deelnemers": [],\n  "@self": {\n    "id": "13382394-13cf-4f59-93ae-4c4e4998543f",\n    "name": "Test Organisatie 1",\n    "updated": "2025-07-14T20:14:46+00:00"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices-5",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-two-way-relationships",children:"When to Use Two-Way Relationships"}),"\n",(0,r.jsx)(n.p,{children:"Use two-way relationships when:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You need to query relationships from both directions"}),"\n",(0,r.jsx)(n.li,{children:"Data consistency is critical"}),"\n",(0,r.jsx)(n.li,{children:"You want to maintain referential integrity"}),"\n",(0,r.jsx)(n.li,{children:"Performance benefits from bidirectional queries"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-guidelines",children:"Configuration Guidelines"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clear Property Names"}),": Use descriptive names for both sides of the relationship"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistent Data Types"}),": Ensure both sides use compatible data types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"UUID Validation"}),": Always use valid UUIDs for references"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Documentation"}),": Document the relationship purpose and behavior"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performance-considerations-1",children:"Performance Considerations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Write-back operations add processing time to object creation"}),"\n",(0,r.jsx)(n.li,{children:"Consider the impact on bulk operations"}),"\n",(0,r.jsx)(n.li,{children:"Monitor database performance with large relationship sets"}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"removeAfterWriteBack"})," to reduce storage overhead"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"default-values-configuration",children:"Default Values Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Open Register provides enhanced default value functionality that allows you to configure how and when default values are applied to object properties."}),"\n",(0,r.jsx)(n.h3,{id:"basic-default-values",children:"Basic Default Values"}),"\n",(0,r.jsx)(n.p,{children:"Default values can be set for any property type to provide fallback values when data is not provided:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'status': {\n      'type': 'string',\n      'default': 'pending',\n      'description': 'Object status'\n    },\n    'priority': {\n      'type': 'integer',\n      'default': 1,\n      'description': 'Priority level'\n    },\n    'active': {\n      'type': 'boolean',\n      'default': true,\n      'description': 'Whether object is active'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"array-default-values",children:"Array Default Values"}),"\n",(0,r.jsx)(n.p,{children:"For array properties with string items, you can set default values that will be applied as arrays:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'tags': {\n      'type': 'array',\n      'items': {\n        'type': 'string'\n      },\n      'default': ['general', 'untagged'],\n      'description': 'Default tags applied to objects'\n    },\n    'categories': {\n      'type': 'array',\n      'items': {\n        'type': 'string'\n      },\n      'default': ['uncategorized'],\n      'description': 'Object categories'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"object-default-values",children:"Object Default Values"}),"\n",(0,r.jsx)(n.p,{children:"Object properties can have default JSON values:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'metadata': {\n      'type': 'object',\n      'default': {\n        'version': '1.0',\n        'author': 'system',\n        'created': true\n      },\n      'description': 'Default metadata object'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"default-behavior-configuration",children:"Default Behavior Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Open Register supports two modes for applying default values via the ",(0,r.jsx)(n.code,{children:"defaultBehavior"})," property:"]}),"\n",(0,r.jsx)(n.h4,{id:"mode-1-false-default-behavior",children:"Mode 1: 'false' (Default Behavior)"}),"\n",(0,r.jsxs)(n.p,{children:["Default values are only applied when the property is ",(0,r.jsx)(n.strong,{children:"missing"})," or ",(0,r.jsx)(n.strong,{children:"null"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'status': {\n      'type': 'string',\n      'default': 'pending',\n      'defaultBehavior': 'false'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Application Logic:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Property not provided \u2192 Apply default"}),"\n",(0,r.jsxs)(n.li,{children:["Property is ",(0,r.jsx)(n.code,{children:"null"})," \u2192 Apply default"]}),"\n",(0,r.jsxs)(n.li,{children:["Property is empty string ",(0,r.jsx)(n.code,{children:"''"})," \u2192 Keep empty string"]}),"\n",(0,r.jsx)(n.li,{children:"Property has value \u2192 Keep existing value"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"mode-2-falsy-enhanced-behavior",children:"Mode 2: 'falsy' (Enhanced Behavior)"}),"\n",(0,r.jsxs)(n.p,{children:["Default values are applied when the property is ",(0,r.jsx)(n.strong,{children:"missing"}),", ",(0,r.jsx)(n.strong,{children:"null"}),", ",(0,r.jsx)(n.strong,{children:"empty string"}),", or ",(0,r.jsx)(n.strong,{children:"empty array/object"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'description': {\n      'type': 'string',\n      'default': 'No description provided',\n      'defaultBehavior': 'falsy'\n    },\n    'tags': {\n      'type': 'array',\n      'items': { 'type': 'string' },\n      'default': ['untagged'],\n      'defaultBehavior': 'falsy'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Application Logic:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Property not provided \u2192 Apply default"}),"\n",(0,r.jsxs)(n.li,{children:["Property is ",(0,r.jsx)(n.code,{children:"null"})," \u2192 Apply default"]}),"\n",(0,r.jsxs)(n.li,{children:["Property is empty string ",(0,r.jsx)(n.code,{children:"''"})," \u2192 Apply default"]}),"\n",(0,r.jsxs)(n.li,{children:["Property is empty array ",(0,r.jsx)(n.code,{children:"[]"})," \u2192 Apply default"]}),"\n",(0,r.jsxs)(n.li,{children:["Property is empty object ",(0,r.jsx)(n.code,{children:"{}"})," \u2192 Apply default"]}),"\n",(0,r.jsx)(n.li,{children:"Property has meaningful value \u2192 Keep existing value"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"practical-use-cases",children:"Practical Use Cases"}),"\n",(0,r.jsx)(n.h4,{id:"preventing-empty-values",children:"Preventing Empty Values"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"defaultBehavior: 'falsy'"})," when you want to ensure properties always have meaningful values:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'title': {\n      'type': 'string',\n      'default': 'Untitled',\n      'defaultBehavior': 'falsy',\n      'description': 'Ensures every object has a title'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"optional-fields-with-fallbacks",children:"Optional Fields with Fallbacks"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"defaultBehavior: 'false'"})," when empty values should be preserved but missing values need defaults:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'notes': {\n      'type': 'string',\n      'default': 'No notes',\n      'defaultBehavior': 'false',\n      'description': 'User can intentionally leave empty'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"template-support",children:"Template Support"}),"\n",(0,r.jsx)(n.p,{children:"Default values support Twig templating for dynamic defaults:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'properties': {\n    'created_by': {\n      'type': 'string',\n      'default': '{{ user.name }}',\n      'description': 'Auto-filled with current user'\n    },\n    'reference': {\n      'type': 'string', \n      'default': 'REF-{{ uuid }}',\n      'description': 'Generated reference number'\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"processing-order-1",children:"Processing Order"}),"\n",(0,r.jsx)(n.p,{children:"Default values are applied during object saving in this order:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sanitization"}),": Clean empty values based on schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Write-Back"}),": Process inverse relationships"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cascading"}),": Handle object cascading"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Default Values"}),": Apply defaults based on behavior configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Constants"}),": Apply constant values (always override)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"frontend-configuration",children:"Frontend Configuration"}),"\n",(0,r.jsx)(n.p,{children:"In the OpenRegister frontend, default values can be configured through the schema editor:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Basic Defaults"}),": Set default values for string, number, boolean properties"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Array Defaults"}),": Comma-separated values for string arrays"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Object Defaults"}),": JSON object notation for object properties"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Behavior Toggle"}),": Choose between 'false' and 'falsy' behavior modes"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The behavior toggle appears when a default value is set and shows helpful hints about when defaults will be applied."}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting-1",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"common-issues-1",children:"Common Issues"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Write-back not working"}),": Check that both ",(0,r.jsx)(n.code,{children:"inversedBy"})," and ",(0,r.jsx)(n.code,{children:"writeBack"})," are configured"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"UUID validation errors"}),": Ensure UUIDs match the expected format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Missing reverse properties"}),": Verify the target schema has the expected property"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance issues"}),": Consider the number of relationships being processed"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"debug-steps",children:"Debug Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Check the debug logs for write-back processing"}),"\n",(0,r.jsx)(n.li,{children:"Verify schema configuration is correct"}),"\n",(0,r.jsx)(n.li,{children:"Test with simple UUIDs first"}),"\n",(0,r.jsx)(n.li,{children:"Inspect both objects to confirm the relationship"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"recent-fixes",children:"Recent Fixes"}),"\n",(0,r.jsx)(n.h4,{id:"uuid-regex-fix-v100",children:"UUID Regex Fix (v1.0.0)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": UUID validation regex was incorrectly configured for the third group.\n",(0,r.jsx)(n.strong,{children:"Fix"}),": Updated regex from ",(0,r.jsx)(n.code,{children:"[0-9a-f]{3}"})," to ",(0,r.jsx)(n.code,{children:"[0-9a-f]{4}"})," for the third UUID group.\n",(0,r.jsx)(n.strong,{children:"Impact"}),": Enables proper UUID validation for write-back operations."]}),"\n",(0,r.jsx)(n.h4,{id:"cascade-integration-fix-v100",children:"Cascade Integration Fix (v1.0.0)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Properties with ",(0,r.jsx)(n.code,{children:"writeBack"})," were being removed by cascade operations before write-back processing.\n",(0,r.jsx)(n.strong,{children:"Fix"}),": Modified cascade logic to skip properties with ",(0,r.jsx)(n.code,{children:"writeBack"})," enabled.\n",(0,r.jsx)(n.strong,{children:"Impact"}),": Ensures write-back operations receive the correct data for processing."]}),"\n",(0,r.jsx)(n.h2,{id:"schema-composition-inheritance--extension",children:"Schema Composition (Inheritance & Extension)"}),"\n",(0,r.jsxs)(n.p,{children:["Schema Composition allows schemas to reference and build upon other schemas, enabling schema reusability and maintaining DRY (Don't Repeat Yourself) principles. OpenRegister implements JSON Schema composition patterns conforming to the ",(0,r.jsx)(n.a,{href:"https://json-schema.org/understanding-json-schema/reference/combining",children:"JSON Schema specification"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister supports three JSON Schema composition patterns:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"allOf"}),": Instance must validate against ALL referenced schemas (multiple inheritance/extension)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"oneOf"}),": Instance must validate against EXACTLY ONE referenced schema (mutually exclusive options)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"anyOf"}),": Instance must validate against AT LEAST ONE referenced schema (flexible composition)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"liskov-substitution-principle",children:"Liskov Substitution Principle"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"IMPORTANT"}),": When extending schemas using 'allOf', OpenRegister enforces the ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Liskov_substitution_principle",children:"Liskov Substitution Principle"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Child schemas can ONLY ADD constraints, never relax them"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Metadata fields CAN be overridden"})," (title, description, order, icon, placeholder, help)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation rules CANNOT be relaxed"})," (type, format, enum, pattern, min/max values)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This ensures that any instance valid for a child schema is also valid for its parent schemas, maintaining type safety and predictability."}),"\n",(0,r.jsx)(n.h3,{id:"composition-patterns",children:"Composition Patterns"}),"\n",(0,r.jsx)(n.h4,{id:"1-allof---multiple-inheritance-recommended-for-extension",children:"1. allOf - Multiple Inheritance (Recommended for Extension)"}),"\n",(0,r.jsx)(n.p,{children:"Use 'allOf' when a schema should inherit from one or more parent schemas. The instance must validate against ALL referenced schemas."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Properties from all parent schemas are merged"}),"\n",(0,r.jsx)(n.li,{children:"Child can add new properties"}),"\n",(0,r.jsx)(n.li,{children:"Child can add stricter validation to existing properties"}),"\n",(0,r.jsx)(n.li,{children:"Child CANNOT relax parent constraints"}),"\n",(0,r.jsx)(n.li,{children:"Metadata can be overridden"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Storage (Delta Approach):"})}),"\n",(0,r.jsx)(n.p,{children:"When you save a schema with 'allOf':"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"The system compares the child schema properties with all parent schemas"}),"\n",(0,r.jsx)(n.li,{children:"Only the differences (new properties or stricter constraints) are stored in the database"}),"\n",(0,r.jsx)(n.li,{children:"The 'allOf' property stores an array of parent schema references (IDs, UUIDs, or slugs)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example - Single Parent:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"// Parent Schema (id: 42, slug: 'person')\n{\n  'title': 'Person',\n  'properties': {\n    'firstName': { 'type': 'string', 'minLength': 2 },\n    'lastName': { 'type': 'string', 'minLength': 2 },\n    'email': { 'type': 'string' }\n  },\n  'required': ['firstName', 'lastName']\n}\n\n// Child Schema (stored in database) - VALID\n{\n  'title': 'Employee',\n  'allOf': ['42'],  // References parent schema\n  'properties': {\n    'employeeId': { 'type': 'string' },  // New property - ALLOWED\n    'email': { 'type': 'string', 'format': 'email' }  // Adds format constraint - ALLOWED\n  },\n  'required': ['employeeId']  // Additional required field - ALLOWED\n}\n\n// INVALID Extension Example (would throw error)\n{\n  'title': 'Customer',\n  'allOf': ['42'],\n  'properties': {\n    'firstName': { 'type': 'string', 'minLength': 1 }  // ERROR: Relaxes minLength from 2 to 1\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example - Multiple Parents (Multiple Inheritance):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"// Parent Schema 1: Contactable\n{\n  'id': 10,\n  'title': 'Contactable',\n  'properties': {\n    'email': { 'type': 'string', 'format': 'email' },\n    'phone': { 'type': 'string', 'pattern': '^[0-9+-]+$' }\n  },\n  'required': ['email']\n}\n\n// Parent Schema 2: Addressable\n{\n  'id': 11,\n  'title': 'Addressable',\n  'properties': {\n    'street': { 'type': 'string' },\n    'city': { 'type': 'string' },\n    'postalCode': { 'type': 'string' }\n  },\n  'required': ['city']\n}\n\n// Child Schema - Combines both parents\n{\n  'title': 'Customer',\n  'allOf': ['10', '11'],  // Inherits from BOTH parents\n  'properties': {\n    'customerNumber': { 'type': 'string' },\n    'email': { 'type': 'string', 'format': 'email', 'maxLength': 100 }  // Adds maxLength\n  },\n  'required': ['customerNumber']\n}\n\n// Resolved schema will have: email, phone, street, city, postalCode, customerNumber\n// Required fields: email, city, customerNumber\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Metadata Override Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"// Parent Schema\n{\n  'title': 'Person',\n  'properties': {\n    'name': { \n      'type': 'string',\n      'title': 'Name',\n      'description': 'Person full name',\n      'minLength': 2 \n    }\n  }\n}\n\n// Child Schema - VALID (metadata can be changed)\n{\n  'allOf': ['person'],\n  'properties': {\n    'name': {\n      'title': 'Employee Name',  // ALLOWED: Metadata change\n      'description': 'Full name of the employee',  // ALLOWED: Metadata change\n      'minLength': 3  // ALLOWED: More restrictive\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Constraint Rules:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Change Type"}),(0,r.jsx)(n.th,{children:"Parent Value"}),(0,r.jsx)(n.th,{children:"Child Value"}),(0,r.jsx)(n.th,{children:"Allowed?"}),(0,r.jsx)(n.th,{children:"Reason"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Add property"}),(0,r.jsx)(n.td,{children:"(none)"}),(0,r.jsx)(n.td,{children:"new property"}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"Adding constraints"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Add format"}),(0,r.jsx)(n.td,{children:"'type': 'string'"}),(0,r.jsx)(n.td,{children:"'type': 'string', 'format': 'email'"}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"More restrictive"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Increase minLength"}),(0,r.jsx)(n.td,{children:"'minLength': 2"}),(0,r.jsx)(n.td,{children:"'minLength': 5"}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"More restrictive"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Decrease maxLength"}),(0,r.jsx)(n.td,{children:"'maxLength': 100"}),(0,r.jsx)(n.td,{children:"'maxLength': 50"}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"More restrictive"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Remove enum values"}),(0,r.jsx)(n.td,{children:"'enum': [1,2,3]"}),(0,r.jsx)(n.td,{children:"'enum': [1,2]"}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"More restrictive"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Change title"}),(0,r.jsx)(n.td,{children:"'title': 'Name'"}),(0,r.jsx)(n.td,{children:"'title': 'Full Name'"}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"Metadata only"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Change type"}),(0,r.jsx)(n.td,{children:"'type': 'string'"}),(0,r.jsx)(n.td,{children:"'type': 'number'"}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Breaks compatibility"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Decrease minLength"}),(0,r.jsx)(n.td,{children:"'minLength': 5"}),(0,r.jsx)(n.td,{children:"'minLength': 2"}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Relaxes constraint"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Increase maxLength"}),(0,r.jsx)(n.td,{children:"'maxLength': 50"}),(0,r.jsx)(n.td,{children:"'maxLength': 100"}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Relaxes constraint"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Add enum values"}),(0,r.jsx)(n.td,{children:"'enum': [1,2]"}),(0,r.jsx)(n.td,{children:"'enum': [1,2,3]"}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Relaxes constraint"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Remove format"}),(0,r.jsx)(n.td,{children:"'format': 'email'"}),(0,r.jsx)(n.td,{children:"(no format)"}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Relaxes constraint"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"2-oneof---mutually-exclusive-options",children:"2. oneOf - Mutually Exclusive Options"}),"\n",(0,r.jsx)(n.p,{children:"Use 'oneOf' when an instance must match EXACTLY ONE of several schemas. This is useful for discriminated unions or mutually exclusive choices."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Instance validates against exactly one schema (not zero, not multiple)"}),"\n",(0,r.jsx)(n.li,{children:"Schemas are NOT merged"}),"\n",(0,r.jsx)(n.li,{children:"Useful for polymorphic types"}),"\n",(0,r.jsx)(n.li,{children:"Common in API responses with different object types"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"// Payment Method Schema\n{\n  'title': 'PaymentMethod',\n  'oneOf': ['credit-card-schema', 'bank-transfer-schema', 'paypal-schema'],\n  'properties': {\n    'paymentType': { 'type': 'string', 'enum': ['credit-card', 'bank-transfer', 'paypal'] }\n  }\n}\n\n// Credit Card Schema\n{\n  'id': 'credit-card-schema',\n  'title': 'CreditCard',\n  'properties': {\n    'cardNumber': { 'type': 'string' },\n    'cvv': { 'type': 'string', 'maxLength': 4 },\n    'expiryDate': { 'type': 'string' }\n  },\n  'required': ['cardNumber', 'cvv', 'expiryDate']\n}\n\n// Bank Transfer Schema  \n{\n  'id': 'bank-transfer-schema',\n  'title': 'BankTransfer',\n  'properties': {\n    'iban': { 'type': 'string' },\n    'bic': { 'type': 'string' }\n  },\n  'required': ['iban']\n}\n\n// Valid instance (matches exactly one schema)\n{\n  'paymentType': 'credit-card',\n  'cardNumber': '1234-5678-9012-3456',\n  'cvv': '123',\n  'expiryDate': '12/25'\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"3-anyof---flexible-composition",children:"3. anyOf - Flexible Composition"}),"\n",(0,r.jsx)(n.p,{children:"Use 'anyOf' when an instance must match AT LEAST ONE of several schemas. More flexible than 'oneOf'."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Instance validates against one or more schemas"}),"\n",(0,r.jsx)(n.li,{children:"Schemas are NOT merged"}),"\n",(0,r.jsx)(n.li,{children:"Useful for optional feature combinations"}),"\n",(0,r.jsx)(n.li,{children:"More permissive than 'oneOf'"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"// Document Schema\n{\n  'title': 'Document',\n  'anyOf': ['textual-schema', 'visual-schema', 'metadata-schema'],\n  'properties': {\n    'id': { 'type': 'string' },\n    'title': { 'type': 'string' }\n  }\n}\n\n// Textual Schema\n{\n  'id': 'textual-schema',\n  'properties': {\n    'content': { 'type': 'string' }\n  }\n}\n\n// Visual Schema\n{\n  'id': 'visual-schema',\n  'properties': {\n    'images': { 'type': 'array' }\n  }\n}\n\n// Valid: matches textual schema only\n{ 'id': '1', 'title': 'Doc', 'content': 'text' }\n\n// Valid: matches visual schema only\n{ 'id': '2', 'title': 'Image Doc', 'images': ['img1.jpg'] }\n\n// Valid: matches BOTH schemas\n{ 'id': '3', 'title': 'Rich Doc', 'content': 'text', 'images': ['img1.jpg'] }\n"})}),"\n",(0,r.jsx)(n.h4,{id:"retrieval-automatic-resolution",children:"Retrieval (Automatic Resolution)"}),"\n",(0,r.jsx)(n.p,{children:"When you retrieve a schema with composition:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"For allOf:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"The system automatically detects the 'allOf' or 'extend' property"}),"\n",(0,r.jsx)(n.li,{children:"All referenced schemas are loaded and resolved recursively (supporting multi-level composition)"}),"\n",(0,r.jsx)(n.li,{children:"Properties from all parent schemas are merged with child properties"}),"\n",(0,r.jsx)(n.li,{children:"Child properties can add stricter constraints (validated by LSP)"}),"\n",(0,r.jsx)(n.li,{children:"Required fields are merged (union of all)"}),"\n",(0,r.jsx)(n.li,{children:"The fully resolved schema is returned"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"For oneOf and anyOf:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Referenced schemas are validated to exist"}),"\n",(0,r.jsx)(n.li,{children:"Schemas are NOT merged (each remains separate)"}),"\n",(0,r.jsx)(n.li,{children:"Validation happens at object creation/update time"}),"\n",(0,r.jsx)(n.li,{children:"The schema structure is returned as-is with references intact"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Resolved allOf Example (returned by API):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'title': 'Employee',\n  'allOf': ['42'],\n  'properties': {\n    'firstName': { 'type': 'string', 'minLength': 2 },  // From parent\n    'lastName': { 'type': 'string', 'minLength': 2 },   // From parent\n    'email': { 'type': 'string', 'format': 'email' },   // Parent + child constraint\n    'employeeId': { 'type': 'string' }  // New property\n  },\n  'required': ['firstName', 'lastName', 'employeeId']  // Merged\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"property-merging-rules",children:"Property Merging Rules"}),"\n",(0,r.jsx)(n.p,{children:"When merging parent and child properties:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"New Properties"}),": Properties only in child are included"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Inherited Properties"}),": Properties only in parent are included"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Overridden Properties"}),": Properties in both - child values override parent values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Deep Merge"}),": For nested objects, properties are recursively merged"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Array Replacement"}),": Arrays (like enum values) are replaced, not merged"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example: Deep Property Merge"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"// Parent property\n'address': {\n  'type': 'object',\n  'properties': {\n    'street': { 'type': 'string' },\n    'city': { 'type': 'string' }\n  }\n}\n\n// Child property (adds postal code, overrides city)\n'address': {\n  'properties': {\n    'city': { 'type': 'string', 'minLength': 2 },\n    'postalCode': { 'type': 'string' }\n  }\n}\n\n// Merged result\n'address': {\n  'type': 'object',\n  'properties': {\n    'street': { 'type': 'string' },  // From parent\n    'city': { 'type': 'string', 'minLength': 2 },  // Overridden\n    'postalCode': { 'type': 'string' }  // New\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multi-level-inheritance",children:"Multi-Level Inheritance"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister supports multi-level schema inheritance where schemas can form inheritance chains:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"BaseSchema (person)\n    \u2193 extends\nContactSchema (adds email, phone)\n    \u2193 extends\nEmployeeSchema (adds employeeId, department)\n"})}),"\n",(0,r.jsx)(n.p,{children:"The system automatically resolves the entire chain:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Loads BaseSchema"}),"\n",(0,r.jsx)(n.li,{children:"Applies ContactSchema delta"}),"\n",(0,r.jsx)(n.li,{children:"Applies EmployeeSchema delta"}),"\n",(0,r.jsx)(n.li,{children:"Returns fully resolved EmployeeSchema with all properties"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"using-schema-composition",children:"Using Schema Composition"}),"\n",(0,r.jsx)(n.h4,{id:"creating-a-composed-schema",children:"Creating a Composed Schema"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Via API - Using allOf (Recommended):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"POST /api/schemas\n{\n  'title': 'Employee',\n  'allOf': ['42'],  // Array of parent schema IDs/UUIDs/slugs\n  'properties': {\n    'employeeId': { 'type': 'string' },\n    'department': { 'type': 'string' }\n  },\n  'required': ['employeeId']\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Via API - Multiple Inheritance:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"POST /api/schemas\n{\n  'title': 'Customer',\n  'allOf': ['contactable-schema', 'addressable-schema'],  // Multiple parents\n  'properties': {\n    'customerNumber': { 'type': 'string' }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Via API - Using oneOf:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"POST /api/schemas\n{\n  'title': 'PaymentMethod',\n  'oneOf': ['credit-card', 'bank-transfer', 'paypal'],\n  'properties': {\n    'amount': { 'type': 'number' }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Via Frontend:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Navigate to Schemas \u2192 Add Schema"}),"\n",(0,r.jsx)(n.li,{children:"Go to Configuration tab"}),"\n",(0,r.jsxs)(n.li,{children:["Select composition pattern:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"allOf"}),": Select one or more parent schemas (multiple inheritance)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"oneOf"}),": Select mutually exclusive schema options"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"anyOf"}),": Select flexible schema options"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Add or override properties as needed"}),"\n",(0,r.jsx)(n.li,{children:"Save the schema (validation will check Liskov Substitution Principle for allOf)"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"updating-an-extended-schema",children:"Updating an Extended Schema"}),"\n",(0,r.jsx)(n.p,{children:"When updating a schema that extends another:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Edit the schema normally"}),"\n",(0,r.jsx)(n.li,{children:"Changes are automatically compared with the parent"}),"\n",(0,r.jsx)(n.li,{children:"Only the delta is saved"}),"\n",(0,r.jsx)(n.li,{children:"Full schema is returned after save"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"preventing-circular-references",children:"Preventing Circular References"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister includes protection against circular schema references:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Self-Reference"}),": A schema cannot extend itself"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Circular Chains"}),": Schema A \u2192 Schema B \u2192 Schema C \u2192 Schema A is detected and prevented"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error Messages"}),": Clear error messages when circular references are detected"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performance-considerations-2",children:"Performance Considerations"}),"\n",(0,r.jsx)(n.p,{children:"Schema extension is designed for performance:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Read Optimization"}),": Schemas are resolved at retrieval time, ensuring fresh data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Write Optimization"}),": Delta extraction happens at save time once"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Caching"}),": Resolved schemas can be cached by ID to avoid repeated resolution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Database Efficiency"}),": Storing only deltas reduces database size"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,r.jsx)(n.h4,{id:"1-entity-hierarchies",children:"1. Entity Hierarchies"}),"\n",(0,r.jsx)(n.p,{children:"Create base entities and specialized versions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Person (base)\n  \u2192 Customer (adds customerNumber, preferences)\n  \u2192 Supplier (adds supplierCode, paymentTerms)\n  \u2192 Employee (adds employeeId, department)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"2-versioned-schemas",children:"2. Versioned Schemas"}),"\n",(0,r.jsx)(n.p,{children:"Extend schemas to create new versions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ProductV1\n  \u2192 ProductV2 (adds new fields, maintains backward compatibility)\n    \u2192 ProductV3 (further enhancements)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"3-domain-specific-extensions",children:"3. Domain-Specific Extensions"}),"\n",(0,r.jsx)(n.p,{children:"Create general schemas and domain-specific variants:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Document (base: title, content, created)\n  \u2192 LegalDocument (adds caseNumber, court, ruling)\n  \u2192 TechnicalDocument (adds version, author, reviewers)\n  \u2192 FinancialDocument (adds amount, currency, fiscalYear)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"4-multi-tenant-customization",children:"4. Multi-Tenant Customization"}),"\n",(0,r.jsx)(n.p,{children:"Base schema for all tenants, customizations per tenant:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"OrganisationBase\n  \u2192 OrganisationTenantA (custom fields for Tenant A)\n  \u2192 OrganisationTenantB (custom fields for Tenant B)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"best-practices-6",children:"Best Practices"}),"\n",(0,r.jsx)(n.h4,{id:"1-design-clear-hierarchies",children:"1. Design Clear Hierarchies"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Start with a well-designed base schema"}),"\n",(0,r.jsx)(n.li,{children:"Add properties that are truly common to all children"}),"\n",(0,r.jsx)(n.li,{children:"Avoid overly deep inheritance chains (3-4 levels maximum)"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2-document-extension-purpose",children:"2. Document Extension Purpose"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use schema 'description' to explain why extension is used"}),"\n",(0,r.jsx)(n.li,{children:"Document which properties are overridden and why"}),"\n",(0,r.jsx)(n.li,{children:"Maintain clear naming conventions"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"3-consider-maintenance",children:"3. Consider Maintenance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Changes to parent schemas affect all children"}),"\n",(0,r.jsx)(n.li,{children:"Test child schemas when updating parents"}),"\n",(0,r.jsx)(n.li,{children:"Use versioning for breaking changes"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"4-property-override-strategy",children:"4. Property Override Strategy"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Only override when necessary"}),"\n",(0,r.jsx)(n.li,{children:"Document overridden properties clearly"}),"\n",(0,r.jsx)(n.li,{children:"Prefer adding new properties over overriding"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"5-required-fields",children:"5. Required Fields"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Be careful with required fields in parents"}),"\n",(0,r.jsx)(n.li,{children:"Consider impact on all children"}),"\n",(0,r.jsx)(n.li,{children:"Child schemas can make additional fields required"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"limitations-and-constraints",children:"Limitations and Constraints"}),"\n",(0,r.jsx)(n.h4,{id:"for-allof-extensioninheritance",children:"For allOf (Extension/Inheritance):"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Liskov Substitution Required"}),": Child schemas can only add constraints, never relax them"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"No Constraint Relaxation"}),": Cannot decrease minLength, increase maxLength, add enum values, change types, etc."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Property Removal"}),": Child schemas cannot remove parent properties, only add to them"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type Immutability"}),": Property types cannot be changed (except narrowing to a subset)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": Very deep inheritance chains (5+ levels) may impact resolution performance"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"for-oneofanyof",children:"For oneOf/anyOf:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"No Property Merging"}),": Properties are not merged from referenced schemas"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation Complexity"}),": Complex oneOf schemas may be harder to validate and debug"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ambiguity"}),": anyOf can accept ambiguous instances matching multiple schemas"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"general-limitations",children:"General Limitations:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Circular References"}),": Schemas cannot reference themselves directly or indirectly in a loop"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Delta Storage"}),": Only works for allOf (not oneOf/anyOf)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mixed Patterns"}),": Cannot combine allOf, oneOf, and anyOf in a single schema (use one pattern)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting-2",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h4,{id:"schema-not-found",children:"Schema Not Found"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Error"}),": ",(0,r.jsx)(n.code,{children:"Schema '[identifier]' not found"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify the parent schema exists in the database"}),"\n",(0,r.jsx)(n.li,{children:"Check that the allOf/oneOf/anyOf property contains a valid ID, UUID, or slug"}),"\n",(0,r.jsx)(n.li,{children:"Ensure the schema is not soft-deleted"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"circular-reference",children:"Circular Reference"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Error"}),": ",(0,r.jsx)(n.code,{children:"Circular schema composition detected: schema '[id]' creates a loop"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check the composition chain for circular references (A \u2192 B \u2192 A)"}),"\n",(0,r.jsx)(n.li,{children:"Use schema hierarchy visualization to identify loops"}),"\n",(0,r.jsx)(n.li,{children:"Break the circular dependency by restructuring the schema hierarchy"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"liskov-substitution-violation",children:"Liskov Substitution Violation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Error"}),": ",(0,r.jsx)(n.code,{children:"Schema '[id]': Property '[property]' cannot change type from 'string' to 'number'"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Child schemas cannot change property types"}),"\n",(0,r.jsx)(n.li,{children:"Use a different property name instead"}),"\n",(0,r.jsx)(n.li,{children:"Consider restructuring to use oneOf if you need different types"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Error"}),": ",(0,r.jsx)(n.code,{children:"Schema '[id]': Property '[property]' minLength cannot be decreased from 5 to 2 (relaxes constraint)"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Child schemas can only make constraints MORE restrictive"}),"\n",(0,r.jsx)(n.li,{children:"Keep minLength at 5 or increase it"}),"\n",(0,r.jsx)(n.li,{children:"Update metadata fields instead (title, description) which can be freely changed"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Error"}),": ",(0,r.jsx)(n.code,{children:"Schema '[id]': Property '[property]' enum cannot add values not in parent"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Child schemas can only remove enum values (make more restrictive)"}),"\n",(0,r.jsx)(n.li,{children:"Cannot add enum values as that relaxes the constraint"}),"\n",(0,r.jsx)(n.li,{children:"Use a separate schema or restructure using oneOf"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"property-conflicts",children:"Property Conflicts"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Unexpected property values after composition"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Review property merging rules for allOf"}),"\n",(0,r.jsx)(n.li,{children:"Remember oneOf/anyOf do NOT merge properties"}),"\n",(0,r.jsx)(n.li,{children:"Check that metadata changes don't conflict with validation rules"}),"\n",(0,r.jsx)(n.li,{children:"Use delta storage by checking what's actually stored vs. what's resolved"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"resolution-issues",children:"Resolution Issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issue"}),": Schema properties not merging correctly"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ensure all parent and child properties are valid JSON Schema format"}),"\n",(0,r.jsx)(n.li,{children:"Check that property types match between parent and child"}),"\n",(0,r.jsx)(n.li,{children:"Verify that nested object properties are properly structured"}),"\n",(0,r.jsx)(n.li,{children:"Use the API to retrieve the resolved schema and inspect the result"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"self-reference",children:"Self-Reference"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Error"}),": ",(0,r.jsx)(n.code,{children:"Schema '[id]' cannot reference itself in allOf/oneOf/anyOf"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Remove the schema's own ID from the composition array"}),"\n",(0,r.jsx)(n.li,{children:"Circular self-references are never allowed"}),"\n",(0,r.jsx)(n.li,{children:"Check for accidental inclusion of the schema being edited"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"api-examples",children:"API Examples"}),"\n",(0,r.jsx)(n.h4,{id:"get-extended-schema-resolved",children:"Get Extended Schema (Resolved)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/schemas/employee-schema\n\n# Returns fully resolved schema with parent properties merged\n"})}),"\n",(0,r.jsx)(n.h4,{id:"get-raw-schema-delta-only",children:"Get Raw Schema (Delta Only)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Not directly available - schemas are always resolved on retrieval\n# To see raw delta, query the database directly (for debugging only)\n"})}),"\n",(0,r.jsx)(n.h4,{id:"update-extended-schema",children:"Update Extended Schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"PUT /api/schemas/employee-schema\n{\n  'properties': {\n    'salary': { 'type': 'number' }\n  }\n}\n\n# System automatically extracts delta before saving\n"})}),"\n",(0,r.jsx)(n.h4,{id:"check-which-schemas-extend-this-schema",children:"Check Which Schemas Extend This Schema"}),"\n",(0,r.jsx)(n.p,{children:"All schema endpoints automatically include an '@self.extendedBy' property that lists the UUIDs of schemas that extend the current schema:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/schemas/person-schema\n\n# Returns:\n{\n  'id': 42,\n  'uuid': 'abc-123',\n  'title': 'Person',\n  '@self': {\n    'extendedBy': [\n      'employee-uuid-456',\n      'customer-uuid-789'\n    ]\n  },\n  'properties': { ... }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"This is useful for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Understanding Schema Usage"}),": See which schemas depend on this one"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Impact Analysis"}),": Identify which child schemas will be affected by changes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Schema Management"}),": Track schema relationships and dependencies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Refactoring"}),": Plan schema restructuring with full visibility of dependencies"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The 'extendedBy' property is automatically populated for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Individual schema endpoint: ",(0,r.jsx)(n.code,{children:"GET /api/schemas/{id}"})]}),"\n",(0,r.jsx)(n.li,{children:"Collection endpoint: 'GET /api/schemas'"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Response for Collection:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'results': [\n    {\n      'id': 42,\n      'title': 'Person',\n      '@self': {\n        'extendedBy': ['employee-uuid', 'customer-uuid']\n      },\n      'properties': { ... }\n    },\n    {\n      'id': 43,\n      'title': 'Employee',\n      'extend': '42',\n      '@self': {\n        'extendedBy': []  // No schemas extend Employee\n      },\n      'properties': { ... }\n    }\n  ]\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"advanced-topics",children:"Advanced Topics"}),"\n",(0,r.jsx)(n.h4,{id:"custom-merge-logic",children:"Custom Merge Logic"}),"\n",(0,r.jsx)(n.p,{children:"The default merge logic can handle most cases. For special requirements, the SchemaMapper class provides protected methods that can be extended:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'mergeSchemaProperties()' - Controls property merging"}),"\n",(0,r.jsx)(n.li,{children:"'deepMergeProperty()' - Controls deep property merging"}),"\n",(0,r.jsx)(n.li,{children:"'extractPropertyDelta()' - Controls delta extraction"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"migration-strategies",children:"Migration Strategies"}),"\n",(0,r.jsx)(n.p,{children:"When refactoring schemas to use extension:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create base schema with common properties"}),"\n",(0,r.jsx)(n.li,{children:"Create extended schemas with specific properties"}),"\n",(0,r.jsx)(n.li,{children:"Migrate objects to use new schema structure"}),"\n",(0,r.jsx)(n.li,{children:"Remove duplicate properties from old schemas"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"testing-extended-schemas",children:"Testing Extended Schemas"}),"\n",(0,r.jsx)(n.p,{children:"Test schemas with extension:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create test object with extended schema\nPOST /api/objects/{register}/{extended-schema}\n{\n  'firstName': 'John',  # From parent\n  'employeeId': 'EMP123'  # From child\n}\n\n# Verify object validates against resolved schema\n# Verify all properties (parent + child) are available\n"})}),"\n",(0,r.jsx)(n.h3,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,r.jsx)(n.h4,{id:"composition-pattern-selection-guide",children:"Composition Pattern Selection Guide"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Use Case"}),(0,r.jsx)(n.th,{children:"Pattern"}),(0,r.jsx)(n.th,{children:"Merges Properties?"}),(0,r.jsx)(n.th,{children:"Use When"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Single inheritance"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allOf: ['parent']"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"Extending one base schema"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Multiple inheritance"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allOf: ['parent1', 'parent2']"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"Combining multiple base schemas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Type variants"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"oneOf: ['typeA', 'typeB']"})}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Exactly one type must match"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Optional features"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"anyOf: ['feature1', 'feature2']"})}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"At least one must match"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"what-can-be-changed-in-child-schemas-allof",children:"What Can Be Changed in Child Schemas (allOf)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property Type"}),(0,r.jsx)(n.th,{children:"Can Override?"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Metadata"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"title, description, order, icon, placeholder, help"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Add properties"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"New properties not in parent"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Stricter validation"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"Higher minLength, lower maxLength, fewer enum values"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Add format"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"Add 'format': 'email' to string property"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Add pattern"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"Add regex pattern to string"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Add required"})}),(0,r.jsx)(n.td,{children:"\u2705 Yes"}),(0,r.jsx)(n.td,{children:"Make optional property required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Change type"})}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Cannot change 'string' to 'number'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Relax validation"})}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Cannot lower minLength or raise maxLength"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Add enum values"})}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Cannot expand allowed values"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Remove required"})}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Cannot make required property optional"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Remove format"})}),(0,r.jsx)(n.td,{children:"\u274c No"}),(0,r.jsx)(n.td,{children:"Cannot remove validation constraints"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"schema-exploration--analysis",children:"Schema Exploration & Analysis"}),"\n",(0,r.jsxs)(n.p,{children:["The Schema Exploration feature provides powerful automated analysis of object data to help optimize your schema definitions. It identifies both ",(0,r.jsx)(n.strong,{children:"new properties"})," not yet defined in schemas and ",(0,r.jsx)(n.strong,{children:"improvement opportunities"})," for existing properties."]}),"\n",(0,r.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Schema Exploration scans all objects belonging to a schema and:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Discovers New Properties"}),": Finds properties in object data that aren't defined in the schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analyzes Existing Properties"}),": Compares schema definitions with actual object data to identify enhancement opportunities"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Generates Recommendations"}),": Provides confidence-scored suggestions for schema improvements"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Identifies Issues"}),": Highlights type mismatches, missing constraints, and validation improvements"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"analysis-process",children:"Analysis Process"}),"\n",(0,r.jsx)(n.p,{children:"When you trigger schema exploration, the system:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Retrieves all objects"})," for the selected schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Extracts properties"})," from each object's data structure"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Detects data types and patterns"})," in property values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Identifies properties"})," not currently defined in the schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analyzes existing properties"})," for improvement opportunities"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Compares current schema"})," with real object data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Generates recommendations"})," and confidence scores"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"discovery-types",children:"Discovery Types"}),"\n",(0,r.jsx)(n.h4,{id:"new-properties",children:"New Properties"}),"\n",(0,r.jsx)(n.p,{children:"Properties found in object data that aren't defined in the schema definition:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Marked with \ud83d\udd35 ",(0,r.jsx)(n.strong,{children:"NEW PROPERTY"})," badge"]}),"\n",(0,r.jsx)(n.li,{children:"Included when analysis detects properties missing from schema"}),"\n",(0,r.jsx)(n.li,{children:"Can be added to schema with recommended types and constraints"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"property-enhancements",children:"Property Enhancements"}),"\n",(0,r.jsx)(n.p,{children:"Improvements identified for properties already defined in the schema:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Marked with \ud83d\udd27 ",(0,r.jsx)(n.strong,{children:"IMPROVED PROPERTY"})," badge"]}),"\n",(0,r.jsx)(n.li,{children:"Includes type mismatches, missing constraints, and optimization opportunities"}),"\n",(0,r.jsx)(n.li,{children:"Helps refine existing property definitions"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"analysis-features",children:"Analysis Features"}),"\n",(0,r.jsx)(n.h4,{id:"type-detection",children:"Type Detection"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatic type inference"})," from object data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type variation detection"})," (when properties have mixed types)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Format detection"})," for strings (date, email, URL, UUID, etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pattern recognition"})," (camelCase, snake_case, numeric strings)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"constraint-analysis",children:"Constraint Analysis"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Length analysis"})," for string properties (min/max length)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Range analysis"})," for numeric properties (min/max values)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Enum detection"})," for properties with predefined values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Required field analysis"})," based on null value frequency"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"enhancement-opportunities",children:"Enhancement Opportunities"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Missing constraints"})," (maxLength, format, pattern, enum)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type improvements"})," (string to date, generic to specific types)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Constraint adjustments"})," (current limits vs. actual data ranges)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation rule additions"})," (regex patterns, format specifications)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"filtering--selection",children:"Filtering & Selection"}),"\n",(0,r.jsx)(n.p,{children:"The exploration interface provides multiple filtering options:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Property Type"}),": Filter between All, New Properties, or Existing Improvements"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Confidence Level"}),": High, Medium, or Low confidence recommendations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Search"}),": Find specific properties by name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Selection"}),": Show only selected properties for schema updates"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"usage-recommendations",children:"Usage Recommendations"}),"\n",(0,r.jsx)(n.h4,{id:"for-new-properties",children:"For New Properties"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"High Confidence"}),": Over 80% of objects have this property - strongly recommended for addition\n\u26a0\ufe0f ",(0,r.jsx)(n.strong,{children:"Medium Confidence"}),": 50-80% of objects have this property - consider adding if relevant\n\u274c ",(0,r.jsx)(n.strong,{children:"Low Confidence"}),": Under 50% of objects have this property - may be legacy data or edge cases"]}),"\n",(0,r.jsx)(n.h4,{id:"for-property-enhancements",children:"For Property Enhancements"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Type Issues"}),": Current type doesn't match data - update schema definition\n\u2705 ",(0,r.jsx)(n.strong,{children:"Missing Constraints"}),": Add length limits, formats, or patterns as indicated\n\u2705 ",(0,r.jsx)(n.strong,{children:"Range Adjustments"}),": Adjust min/max values based on actual data ranges\n\u2705 ",(0,r.jsx)(n.strong,{children:"Enum Additions"}),": Convert loose strings to enums when values are predefined"]}),"\n",(0,r.jsx)(n.h3,{id:"best-practices-7",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review High Confidence Items First"}),": Focus on recommendations with 80%+ confidence"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validate Recommendations"}),": Check sample values to ensure they make sense"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test Schema Changes"}),": Validate updated schemas before applying to large datasets"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Iterative Improvement"}),": Run exploration periodically as object data evolves"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor Impact"}),": Watch for validation errors after applying schema changes"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring--troubleshooting",children:"Monitoring & Troubleshooting"}),"\n",(0,r.jsx)(n.h4,{id:"large-datasets",children:"Large Datasets"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Analysis time scales with object count"}),"\n",(0,r.jsx)(n.li,{children:"Progress indicators show current status"}),"\n",(0,r.jsx)(n.li,{children:"Consider sampling for very large schemas (>10K objects)"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"memory-usage",children:"Memory Usage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Analysis loads all objects temporarily"}),"\n",(0,r.jsx)(n.li,{children:"Ensure adequate server memory for large datasets"}),"\n",(0,r.jsx)(n.li,{children:"Monitor Nextcloud container resources"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"common-issues-2",children:"Common Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Empty Results"}),": No objects found - verify schema has data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Memory Errors"}),": Reduce object count or increase container memory"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Slow Performance"}),": Close other applications to free up resources"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"integration-with-schema-management",children:"Integration with Schema Management"}),"\n",(0,r.jsx)(n.p,{children:"Schema Exploration seamlessly integrates with OpenRegister's schema management:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Visual Property Cards"}),": Each discovery shows detailed analysis with badges and metadata"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration Options"}),": Full property configuration (types, constraints, behaviors)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Batch Updates"}),": Select and apply multiple properties simultaneously"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Schema Validation"}),": Automatic validation when applying exploration results"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cache Management"}),": Schema cache automatically cleared after updates"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This feature helps maintain high-quality, well-defined schemas that accurately reflect your actual data patterns and usage."}),"\n",(0,r.jsx)(n.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,r.jsx)(n.h3,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,r.jsx)(n.p,{children:"The Schema feature is built on a multi-layered architecture that provides robust validation, exploration, and integration with the object system."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:'graph TB\n    subgraph "Schema Layer"\n        Schema[Schema Entity<br/>JSON Schema Definition]\n        SchemaMapper[Schema Mapper<br/>Database Operations]\n        SchemaService[Schema Service<br/>Exploration & Analysis]\n        SchemaValidator[Schema Property Validator<br/>JSON Schema Validation]\n    end\n    \n    subgraph "Object Layer"\n        ObjectEntity[Object Entity<br/>Data Storage]\n        ObjectService[Object Service<br/>Business Logic]\n    end\n    \n    subgraph "Search Layer"\n        SolrService[Solr Service<br/>Schema-Aware Indexing]\n        FacetService[Facet Service<br/>Pre-computed Facets]\n    end\n    \n    subgraph "Storage"\n        DB[(MySQL Database<br/>oc_openregister_schemas)]\n        Solr[(Apache Solr<br/>Search Index)]\n    end\n    \n    Schema --\x3e|defines structure| ObjectEntity\n    SchemaValidator --\x3e|validates| Schema\n    SchemaService --\x3e|analyzes| ObjectEntity\n    SchemaService --\x3e|updates| Schema\n    SchemaMapper --\x3e|persists| DB\n    ObjectService --\x3e|validates against| Schema\n    SolrService --\x3e|uses properties| Schema\n    Schema --\x3e|generates| FacetService\n    SolrService --\x3e|indexes| Solr\n    \n    style Schema fill:#e1f5ff\n    style SchemaService fill:#fff4e1\n    style SchemaValidator fill:#ffe1f5\n    style SolrService fill:#e1ffe1\n'})}),"\n",(0,r.jsx)(n.h3,{id:"schema-definition-flow",children:"Schema Definition Flow"}),"\n",(0,r.jsx)(n.p,{children:"When a schema is created or updated, it goes through a comprehensive validation and processing pipeline:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant API as API Endpoint\n    participant Controller as Schema Controller\n    participant SchemaValidator as Schema Property<br/>Validator\n    participant Schema as Schema Entity\n    participant Mapper as Schema Mapper\n    participant DB as Database\n    \n    API->>Controller: POST/PUT /api/schemas\n    Controller->>Schema: hydrate(schemaData)\n    \n    Schema->>Schema: normalizeInversedByProperties()\n    Note over Schema: Convert inversedBy objects<br/>to strings\n    \n    Schema->>SchemaValidator: validateProperties(properties)\n    SchemaValidator->>SchemaValidator: validateProperty(each property)\n    \n    alt Validation Passes\n        SchemaValidator->>Schema: \u2713 Valid\n        Schema->>Schema: regenerateFacetsFromProperties()\n        Note over Schema: Pre-compute facetable<br/>field configuration\n        \n        Schema->>Mapper: insert/update(schema)\n        Mapper->>DB: Save schema\n        DB--\x3e>Mapper: Schema saved\n        Mapper--\x3e>Controller: Schema entity\n        Controller--\x3e>API: 200 OK + Schema JSON\n    else Validation Fails\n        SchemaValidator--\x3e>Schema: \u2717 Exception\n        Schema--\x3e>Controller: ValidationException\n        Controller--\x3e>API: 400 Bad Request + Errors\n    end\n"})}),"\n",(0,r.jsx)(n.h3,{id:"property-validation-system",children:"Property Validation System"}),"\n",(0,r.jsx)(n.p,{children:"The validation system ensures schemas comply with JSON Schema specifications and OpenRegister extensions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    Start[Validate Properties] --\x3e CheckType{Has 'type'<br/>field?}\n    CheckType --\x3e|No| ErrorNoType[\u274c Error: Type required]\n    CheckType --\x3e|Yes| ValidType{Valid type?}\n    \n    ValidType --\x3e|No| ErrorInvalidType[\u274c Error: Invalid type]\n    ValidType --\x3e|Yes| TypeSwitch{Type?}\n    \n    TypeSwitch --\x3e|string| ValidateString[Validate String Property]\n    TypeSwitch --\x3e|number/integer| ValidateNumber[Validate Numeric Property]\n    TypeSwitch --\x3e|array| ValidateArray[Validate Array Property]\n    TypeSwitch --\x3e|object| ValidateObject[Validate Object Property]\n    TypeSwitch --\x3e|file| ValidateFile[Validate File Property]\n    TypeSwitch --\x3e|boolean| ValidateBool[Validate Boolean]\n    \n    ValidateString --\x3e CheckFormat{Has format?}\n    CheckFormat --\x3e|Yes| ValidFormat{Valid format?}\n    ValidFormat --\x3e|No| ErrorFormat[\u274c Error: Invalid format]\n    ValidFormat --\x3e|Yes| StringOK[\u2713 String Valid]\n    CheckFormat --\x3e|No| StringOK\n    \n    ValidateNumber --\x3e CheckRange{Has min/max?}\n    CheckRange --\x3e|Yes| ValidRange{Min \u2264 Max?}\n    ValidRange --\x3e|No| ErrorRange[\u274c Error: Invalid range]\n    ValidRange --\x3e|Yes| NumberOK[\u2713 Number Valid]\n    CheckRange --\x3e|No| NumberOK\n    \n    ValidateArray --\x3e CheckItems{Has items?}\n    CheckItems --\x3e|Yes| ValidateItems[Validate Items Schema]\n    ValidateItems --\x3e ArrayOK[\u2713 Array Valid]\n    CheckItems --\x3e|No| ArrayOK\n    \n    ValidateObject --\x3e CheckProps{Has properties?}\n    CheckProps --\x3e|Yes| ValidateNestedProps[Validate Nested Properties<br/>Recursively]\n    ValidateNestedProps --\x3e ObjectOK[\u2713 Object Valid]\n    CheckProps --\x3e|No| ObjectOK\n    \n    ValidateFile --\x3e CheckFileConfig{Validate file<br/>config}\n    CheckFileConfig --\x3e CheckMimeTypes{Valid MIME<br/>types?}\n    CheckMimeTypes --\x3e|No| ErrorMime[\u274c Error: Invalid MIME]\n    CheckMimeTypes --\x3e|Yes| CheckSize{Valid maxSize?}\n    CheckSize --\x3e|No| ErrorSize[\u274c Error: Invalid size]\n    CheckSize --\x3e|Yes| CheckTags{Valid tags?}\n    CheckTags --\x3e|No| ErrorTags[\u274c Error: Invalid tags]\n    CheckTags --\x3e|Yes| FileOK[\u2713 File Valid]\n    \n    StringOK --\x3e Success[\u2713 Validation Successful]\n    NumberOK --\x3e Success\n    ArrayOK --\x3e Success\n    ObjectOK --\x3e Success\n    FileOK --\x3e Success\n    ValidateBool --\x3e Success\n    \n    style Success fill:#90EE90\n    style ErrorNoType fill:#FFB6C1\n    style ErrorInvalidType fill:#FFB6C1\n    style ErrorFormat fill:#FFB6C1\n    style ErrorRange fill:#FFB6C1\n    style ErrorMime fill:#FFB6C1\n    style ErrorSize fill:#FFB6C1\n    style ErrorTags fill:#FFB6C1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"schema-exploration-process",children:"Schema Exploration Process"}),"\n",(0,r.jsx)(n.p,{children:"Schema exploration analyzes existing objects to discover properties and suggest improvements:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant User as User\n    participant API as API\n    participant SchemaService as Schema Service\n    participant ObjectMapper as Object Mapper\n    participant Analyzer as Property Analyzer\n    participant Schema as Schema\n    \n    User->>API: GET /api/schemas/{id}/explore\n    API->>SchemaService: exploreSchemaProperties(schemaId)\n    \n    SchemaService->>Schema: Load schema\n    Schema--\x3e>SchemaService: Schema entity\n    \n    SchemaService->>ObjectMapper: findBySchema(schemaId)\n    ObjectMapper--\x3e>SchemaService: Object[] (all objects)\n    \n    Note over SchemaService: Analysis Phase\n    \n    loop For each object\n        SchemaService->>Analyzer: analyzePropertyValue(value)\n        Analyzer->>Analyzer: detectType()<br/>detectFormat()<br/>analyzePattern()\n        Analyzer--\x3e>SchemaService: Property analysis\n    end\n    \n    SchemaService->>SchemaService: calculateUsageStats()\n    SchemaService->>SchemaService: generateSuggestions()<br/>(new properties)\n    SchemaService->>SchemaService: analyzeExistingProperties()<br/>(improvements)\n    \n    SchemaService--\x3e>API: Exploration results:<br/>- Discovered properties<br/>- Improvement suggestions<br/>- Usage statistics\n    \n    API--\x3e>User: 200 OK + Analysis JSON\n    \n    Note over User: User reviews and selects<br/>properties to apply\n    \n    User->>API: POST /api/schemas/{id}/update-from-exploration\n    API->>SchemaService: updateSchemaFromExploration(id, properties)\n    \n    SchemaService->>Schema: setProperties(merged properties)\n    SchemaService->>Schema: regenerateFacetsFromProperties()\n    SchemaService->>Schema: Save updated schema\n    \n    Schema--\x3e>SchemaService: Updated schema\n    SchemaService--\x3e>API: Updated schema\n    API--\x3e>User: 200 OK + Updated schema\n"})}),"\n",(0,r.jsx)(n.h3,{id:"property-analysis-flow",children:"Property Analysis Flow"}),"\n",(0,r.jsx)(n.p,{children:"The property analysis system discovers types, formats, patterns, and constraints from actual data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    Start[Analyze Property Value] --\x3e GetType{Determine<br/>Type}\n    \n    GetType --\x3e|string| AnalyzeString[String Analysis]\n    GetType --\x3e|integer| AnalyzeInteger[Integer Analysis]\n    GetType --\x3e|double| AnalyzeDouble[Double Analysis]\n    GetType --\x3e|array| AnalyzeArray[Array Analysis]\n    GetType --\x3e|object| AnalyzeObject[Object Analysis]\n    GetType --\x3e|boolean| AnalyzeBoolean[Boolean Analysis]\n    \n    AnalyzeString --\x3e DetectFormat[Format Detection]\n    DetectFormat --\x3e CheckDate{Date?}\n    CheckDate --\x3e|Yes| FormatDate[Format: date/date-time]\n    CheckDate --\x3e|No| CheckEmail{Email?}\n    CheckEmail --\x3e|Yes| FormatEmail[Format: email]\n    CheckEmail --\x3e|No| CheckUUID{UUID?}\n    CheckUUID --\x3e|Yes| FormatUUID[Format: uuid]\n    CheckUUID --\x3e|No| CheckURL{URL?}\n    CheckURL --\x3e|Yes| FormatURL[Format: url]\n    CheckURL --\x3e|No| CheckIP{IP Address?}\n    CheckIP --\x3e|Yes| FormatIP[Format: ipv4/ipv6]\n    CheckIP --\x3e|No| NoFormat[No specific format]\n    \n    AnalyzeString --\x3e DetectPattern[Pattern Detection]\n    DetectPattern --\x3e PatternTypes[camelCase<br/>PascalCase<br/>snake_case<br/>SCREAMING_SNAKE_CASE<br/>numeric_string<br/>boolean_string]\n    \n    AnalyzeString --\x3e MeasureLength[Length Analysis]\n    MeasureLength --\x3e LengthStats[Min/Max Length]\n    \n    AnalyzeInteger --\x3e NumericRange1[Numeric Range]\n    NumericRange1 --\x3e IntegerStats[Min/Max<br/>Type: integer]\n    \n    AnalyzeDouble --\x3e NumericRange2[Numeric Range]\n    NumericRange2 --\x3e DoubleStats[Min/Max<br/>Type: number]\n    \n    AnalyzeArray --\x3e ArrayStructure[Array Structure]\n    ArrayStructure --\x3e ArrayType{List or<br/>Associative?}\n    ArrayType --\x3e|List| ListAnalysis[Analyze Item Types]\n    ArrayType --\x3e|Associative| AssocAnalysis[Analyze Keys]\n    \n    AnalyzeObject --\x3e ObjectStructure[Object Structure]\n    ObjectStructure --\x3e ExtractKeys[Extract Keys]\n    ExtractKeys --\x3e KeyCount[Key Count]\n    \n    AnalyzeBoolean --\x3e BooleanResult[Boolean Type]\n    \n    FormatDate --\x3e MergeAnalysis[Merge Analysis]\n    FormatEmail --\x3e MergeAnalysis\n    FormatUUID --\x3e MergeAnalysis\n    FormatURL --\x3e MergeAnalysis\n    FormatIP --\x3e MergeAnalysis\n    NoFormat --\x3e MergeAnalysis\n    PatternTypes --\x3e MergeAnalysis\n    LengthStats --\x3e MergeAnalysis\n    IntegerStats --\x3e MergeAnalysis\n    DoubleStats --\x3e MergeAnalysis\n    ListAnalysis --\x3e MergeAnalysis\n    AssocAnalysis --\x3e MergeAnalysis\n    KeyCount --\x3e MergeAnalysis\n    BooleanResult --\x3e MergeAnalysis\n    \n    MergeAnalysis --\x3e CalculateConfidence[Calculate Confidence]\n    CalculateConfidence --\x3e CheckUsage{Usage %?}\n    CheckUsage --\x3e|\u226580%| HighConfidence[High Confidence]\n    CheckUsage --\x3e|50-79%| MediumConfidence[Medium Confidence]\n    CheckUsage --\x3e|<50%| LowConfidence[Low Confidence]\n    \n    HighConfidence --\x3e GenerateSuggestion[Generate Schema Suggestion]\n    MediumConfidence --\x3e GenerateSuggestion\n    LowConfidence --\x3e GenerateSuggestion\n    \n    GenerateSuggestion --\x3e ReturnAnalysis[Return Property Analysis]\n    \n    style HighConfidence fill:#90EE90\n    style MediumConfidence fill:#FFD700\n    style LowConfidence fill:#FFB6C1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"facet-pre-computation",children:"Facet Pre-computation"}),"\n",(0,r.jsx)(n.p,{children:"Schemas can pre-compute facet configurations to optimize search performance:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant Schema as Schema\n    participant Analysis as Facet Analysis\n    participant Property as Property Config\n    participant Storage as Facets Field\n    \n    Note over Schema: regenerateFacetsFromProperties()\n    \n    Schema->>Schema: getProperties()\n    \n    loop For each property\n        Schema->>Property: Check if facetable=true\n        \n        alt Property is facetable\n            Property--\x3e>Analysis: Property config\n            Analysis->>Analysis: determineFacetType(property)\n            \n            alt Date/DateTime\n                Analysis->>Analysis: Type: date_histogram\n                Analysis->>Analysis: Add interval options\n            else Numeric\n                Analysis->>Analysis: Type: range\n                Analysis->>Analysis: Add range support\n            else String/Boolean/Array\n                Analysis->>Analysis: Type: terms\n                alt Has enum\n                    Analysis->>Analysis: Add predefined values\n                end\n            end\n            \n            Analysis--\x3e>Schema: Facet configuration\n        else Not facetable\n            Note over Property: Skip property\n        end\n    end\n    \n    Schema->>Storage: setFacets(facetConfig)\n    Storage->>Storage: Store as JSON in database\n    \n    Note over Storage: Pre-computed facets available<br/>for fast search queries\n"})}),"\n",(0,r.jsx)(n.h3,{id:"schema-aware-solr-indexing",children:"Schema-Aware Solr Indexing"}),"\n",(0,r.jsx)(n.p,{children:"Objects are indexed to Solr using schema property definitions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TB\n    Start[Index Object to Solr] --\x3e GetSchema[Load Schema]\n    GetSchema --\x3e CheckSearchable{Schema<br/>searchable?}\n    \n    CheckSearchable --\x3e|No| SkipIndexing[Skip Indexing<br/>Return]\n    CheckSearchable --\x3e|Yes| CreateDoc[Create Solr Document]\n    \n    CreateDoc --\x3e AddMetadata[Add Metadata Fields<br/>self_id, self_uuid<br/>self_schema, self_register<br/>self_created, self_updated]\n    \n    AddMetadata --\x3e IterateProps[Iterate Schema Properties]\n    \n    IterateProps --\x3e CheckProp{For each<br/>property}\n    \n    CheckProp --\x3e GetValue[Get value from object data]\n    GetValue --\x3e CheckExists{Value<br/>exists?}\n    \n    CheckExists --\x3e|No| NextProp[Next property]\n    CheckExists --\x3e|Yes| DetermineType{Property<br/>type?}\n    \n    DetermineType --\x3e|string| HandleString[Map to Solr string fields<br/>propertyName: value<br/>propertyName_s: value<br/>propertyName_t: value]\n    DetermineType --\x3e|number/integer| HandleNumber[Map to Solr numeric fields<br/>propertyName: value<br/>propertyName_i: int value<br/>propertyName_f: float value]\n    DetermineType --\x3e|boolean| HandleBoolean[Map to Solr boolean field<br/>propertyName: value<br/>propertyName_b: value]\n    DetermineType --\x3e|array| HandleArray[Map array to multi-valued<br/>propertyName: array values]\n    DetermineType --\x3e|object| HandleObject[Flatten nested object<br/>propertyName.field: value]\n    DetermineType --\x3e|file| HandleFile[Skip file properties<br/>Files handled separately]\n    \n    HandleString --\x3e ValidateField[Validate Field for Solr]\n    HandleNumber --\x3e ValidateField\n    HandleBoolean --\x3e ValidateField\n    HandleArray --\x3e ValidateField\n    HandleObject --\x3e ValidateField\n    HandleFile --\x3e NextProp\n    \n    ValidateField --\x3e CheckCompatible{Compatible with<br/>Solr type?}\n    \n    CheckCompatible --\x3e|Yes| AddToDoc[Add to Solr document]\n    CheckCompatible --\x3e|No| LogWarning[Log type mismatch<br/>Skip field]\n    \n    AddToDoc --\x3e NextProp\n    LogWarning --\x3e NextProp\n    \n    NextProp --\x3e MoreProps{More<br/>properties?}\n    MoreProps --\x3e|Yes| CheckProp\n    MoreProps --\x3e|No| AddFullObject[Add complete object<br/>self_object: JSON]\n    \n    AddFullObject --\x3e IndexToSolr[Index document to Solr]\n    IndexToSolr --\x3e Success[\u2713 Indexed Successfully]\n    \n    style SkipIndexing fill:#FFE4B5\n    style Success fill:#90EE90\n    style LogWarning fill:#FFB6C1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"authorization-system",children:"Authorization System"}),"\n",(0,r.jsx)(n.p,{children:"Schemas support group-based CRUD permissions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    Start[Check Permission] --\x3e CheckAdmin{User in<br/>'admin' group?}\n    CheckAdmin --\x3e|Yes| GrantAccess[\u2713 Grant Access]\n    CheckAdmin --\x3e|No| CheckOwner{Is object<br/>owner?}\n    \n    CheckOwner --\x3e|Yes| GrantAccess\n    CheckOwner --\x3e|No| CheckAuth{Schema has<br/>authorization?}\n    \n    CheckAuth --\x3e|No| GrantAccess\n    CheckAuth --\x3e|Yes| CheckAction{Action defined<br/>in authorization?}\n    \n    CheckAction --\x3e|No| GrantAccess\n    CheckAction --\x3e|Yes| CheckGroup{User's group<br/>in allowed list?}\n    \n    CheckGroup --\x3e|Yes| GrantAccess\n    CheckGroup --\x3e|No| DenyAccess[\u2717 Deny Access]\n    \n    style GrantAccess fill:#90EE90\n    style DenyAccess fill:#FFB6C1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-system",children:"Configuration System"}),"\n",(0,r.jsx)(n.p,{children:"Schemas can configure object name, description, and file handling:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "configuration": {\n    "objectNameField": "person.firstName",\n    "objectDescriptionField": "case.summary",\n    "objectSummaryField": "article.abstract",\n    "objectImageField": "profile.avatar",\n    "allowFiles": true,\n    "allowedTags": ["document", "image", "public"],\n    "autoPublish": false,\n    "unique": ["email", "username"]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration Options:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"objectNameField"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Dot-notation path to field for object name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"objectDescriptionField"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Dot-notation path to field for description"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"objectSummaryField"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Dot-notation path to field for summary"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"objectImageField"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Dot-notation path to field for image data"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allowFiles"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Whether schema allows file attachments"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allowedTags"})}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"File tags allowed for this schema"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"autoPublish"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"Whether objects auto-publish on creation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"unique"})}),(0,r.jsx)(n.td,{children:"array"}),(0,r.jsx)(n.td,{children:"Properties that must have unique values"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"database-schema",children:"Database Schema"}),"\n",(0,r.jsxs)(n.p,{children:["Schemas are stored in the ",(0,r.jsx)(n.code,{children:"oc_openregister_schemas"})," table:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE oc_openregister_schemas (\n    id INTEGER PRIMARY KEY AUTO_INCREMENT,\n    uuid VARCHAR(255) UNIQUE NOT NULL,\n    uri VARCHAR(255),\n    slug VARCHAR(255) NOT NULL,\n    title VARCHAR(255),\n    description TEXT,\n    version VARCHAR(50),\n    summary TEXT,\n    required JSON,\n    properties JSON,\n    archive JSON,\n    facets JSON,\n    source VARCHAR(255),\n    hard_validation BOOLEAN DEFAULT FALSE,\n    immutable BOOLEAN DEFAULT FALSE,\n    searchable BOOLEAN DEFAULT TRUE,\n    updated DATETIME,\n    created DATETIME,\n    max_depth INTEGER DEFAULT 0,\n    owner VARCHAR(255),\n    application VARCHAR(255),\n    organisation VARCHAR(255),\n    authorization JSON,\n    deleted DATETIME,\n    configuration JSON,\n    icon VARCHAR(255),\n    groups JSON,\n    INDEX idx_slug (slug),\n    INDEX idx_uuid (uuid),\n    INDEX idx_searchable (searchable)\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"performance-optimizations",children:"Performance Optimizations"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. Facet Pre-computation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Facets generated at schema save time"}),"\n",(0,r.jsx)(n.li,{children:"Eliminates runtime analysis during searches"}),"\n",(0,r.jsxs)(n.li,{children:["Stored in ",(0,r.jsx)(n.code,{children:"facets"})," JSON field"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. Schema Caching"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Schemas cached in memory during request"}),"\n",(0,r.jsx)(n.li,{children:"Reduces database queries for validation"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"3. Lazy Loading"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Schema properties loaded only when needed"}),"\n",(0,r.jsx)(n.li,{children:"JSON fields decoded on demand"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"4. Batch Exploration"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Objects analyzed in batches"}),"\n",(0,r.jsx)(n.li,{children:"Memory-efficient processing"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5. Indexed Fields"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Database indexes on ",(0,r.jsx)(n.code,{children:"slug"}),", ",(0,r.jsx)(n.code,{children:"uuid"}),", ",(0,r.jsx)(n.code,{children:"searchable"})]}),"\n",(0,r.jsx)(n.li,{children:"Fast schema lookups"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Creating a Schema:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Db\\Schema;\nuse OCA\\OpenRegister\\Db\\SchemaMapper;\n\n$schema = new Schema();\n$schema->hydrate([\n    'title' => 'Person',\n    'slug' => 'person',\n    'version' => '1.0.0',\n    'required' => ['firstName', 'lastName', 'email'],\n    'properties' => [\n        'firstName' => [\n            'type' => 'string',\n            'title' => 'First Name',\n            'minLength' => 2,\n            'maxLength' => 50\n        ],\n        'lastName' => [\n            'type' => 'string',\n            'title' => 'Last Name',\n            'minLength' => 2,\n            'maxLength' => 50\n        ],\n        'email' => [\n            'type' => 'string',\n            'format' => 'email',\n            'title' => 'Email Address'\n        ],\n        'age' => [\n            'type' => 'integer',\n            'minimum' => 0,\n            'maximum' => 150\n        ]\n    ],\n    'configuration' => [\n        'objectNameField' => 'firstName',\n        'objectDescriptionField' => 'email'\n    ]\n], $validator);\n\n$schemaMapper->insert($schema);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Validating Properties:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\SchemaPropertyValidatorService;\n\n$validator = new SchemaPropertyValidatorService($logger);\n\ntry {\n    $validator->validateProperties($properties);\n    // Properties are valid\n} catch (\\Exception $e) {\n    // Validation failed: $e->getMessage()\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Exploring Schema:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\SchemaService;\n\n$analysis = $schemaService->exploreSchemaProperties($schemaId);\n\nforeach ($analysis['suggestions'] as $suggestion) {\n    if ($suggestion['confidence'] === 'high') {\n        echo \"Property: {$suggestion['property_name']}\\n\";\n        echo \"Type: {$suggestion['recommended_type']}\\n\";\n        echo \"Usage: {$suggestion['usage_percentage']}%\\n\";\n        echo \"Examples: \" . implode(', ', $suggestion['examples']) . \"\\n\";\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Checking Permissions:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$schema = $schemaMapper->find($schemaId);\n\nif ($schema->hasPermission($userGroupId, 'create', $userId)) {\n    // User has create permission\n    $objectService->createObject($data);\n} else {\n    throw new UnauthorizedException('No permission to create objects');\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Unit Tests:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use PHPUnit\\Framework\\TestCase;\n\nclass SchemaValidationTest extends TestCase\n{\n    public function testValidateStringProperty()\n    {\n        $validator = new SchemaPropertyValidatorService($this->logger);\n        \n        $property = [\n            'type' => 'string',\n            'format' => 'email',\n            'minLength' => 5,\n            'maxLength' => 100\n        ];\n        \n        $this->assertTrue($validator->validateProperty($property, '/email'));\n    }\n    \n    public function testInvalidPropertyType()\n    {\n        $this->expectException(\\Exception::class);\n        $this->expectExceptionMessage('Invalid type');\n        \n        $validator->validateProperty(['type' => 'invalid'], '/field');\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Integration Tests:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Test schema creation\nvendor/bin/phpunit tests/Integration/SchemaIntegrationTest.php\n\n# Test schema exploration\nvendor/bin/phpunit tests/Integration/SchemaExplorationTest.php --filter testExploreProperties\n\n# Test facet generation\nvendor/bin/phpunit tests/Integration/SchemaFacetGenerationTest.php\n"})}),"\n",(0,r.jsx)(n.h3,{id:"best-practices-8",children:"Best Practices"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. Schema Design"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use descriptive property names"}),"\n",(0,r.jsx)(n.li,{children:"Set appropriate constraints (min/max, patterns)"}),"\n",(0,r.jsx)(n.li,{children:"Mark fields as required only when necessary"}),"\n",(0,r.jsx)(n.li,{children:"Use enums for predefined values"}),"\n",(0,r.jsx)(n.li,{children:"Document properties with titles and descriptions"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. Validation Configuration"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Enable ",(0,r.jsx)(n.code,{children:"hardValidation"})," for critical schemas"]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"immutable"})," for schemas that shouldn't change"]}),"\n",(0,r.jsxs)(n.li,{children:["Set ",(0,r.jsx)(n.code,{children:"searchable: false"})," for internal schemas"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"3. Performance"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Mark frequently filtered fields as ",(0,r.jsx)(n.code,{children:"facetable"})]}),"\n",(0,r.jsx)(n.li,{children:"Use appropriate data types (integer vs string)"}),"\n",(0,r.jsx)(n.li,{children:"Avoid deeply nested objects (maxDepth > 5)"}),"\n",(0,r.jsx)(n.li,{children:"Limit array sizes where possible"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"4. Security"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configure authorization for sensitive schemas"}),"\n",(0,r.jsx)(n.li,{children:"Use group-based permissions"}),"\n",(0,r.jsx)(n.li,{children:"Validate file properties thoroughly"}),"\n",(0,r.jsxs)(n.li,{children:["Restrict file types with ",(0,r.jsx)(n.code,{children:"allowedTypes"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5. Maintenance"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Run schema exploration periodically"}),"\n",(0,r.jsx)(n.li,{children:"Update schemas based on high-confidence suggestions"}),"\n",(0,r.jsx)(n.li,{children:"Version schemas when making breaking changes"}),"\n",(0,r.jsxs)(n.li,{children:["Archive old versions in the ",(0,r.jsx)(n.code,{children:"archive"})," property"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-and-debugging",children:"Monitoring and Debugging"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Schema Validation Errors:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check Nextcloud logs\ndocker logs nextcloud-container | grep 'Schema.*validation'\n\n# Check database for invalid schemas\nSELECT id, title, hard_validation FROM oc_openregister_schemas WHERE properties IS NULL;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Exploration Performance:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Monitor exploration execution time\ndocker logs nextcloud-container | grep 'Schema exploration'\n\n# Check object counts per schema\nSELECT schema, COUNT(*) as object_count \nFROM oc_openregister_objects \nGROUP BY schema \nORDER BY object_count DESC;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Solr Indexing Issues:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check schema-aware indexing\ndocker logs nextcloud-container | grep 'schema-aware mapping'\n\n# Verify searchable schemas\nSELECT id, title, searchable FROM oc_openregister_schemas;\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{"use strict";s.d(n,{R:()=>a,x:()=>l});var i=s(96540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}},28825:()=>{},45673:(e,n,s)=>{"use strict";s.d(n,{A:()=>p});var i=s(96540),r=s(20053),t=s(44404),a=(s(34345),s(28794)),l=s(54022),c=s(72077);function d(e){const n=(0,c.kh)("docusaurus-plugin-redoc");return e?n?.[e]:Object.values(n??{})?.[0]}var o=s(74848);const h=e=>{let{id:n,example:s,pointer:c,...h}=e;const p=d(n),{store:x}=(0,l.r)(p);return(0,i.useEffect)((()=>{x.menu.dispose()}),[x]),(0,o.jsx)(t.ThemeProvider,{theme:x.options.theme,children:(0,o.jsx)("div",{className:(0,r.A)(["redocusaurus","redocusaurus-schema",s?null:"hide-example"]),children:(0,o.jsx)(a.SchemaDefinition,{parser:x.spec.parser,options:x.options,schemaRef:c,...h})})})};h.defaultProps={example:!1};const p=h},65537:(e,n,s)=>{"use strict";s.d(n,{A:()=>S});var i=s(96540),r=s(18215),t=s(65627),a=s(56347),l=s(50372),c=s(30604),d=s(11861),o=s(78749);function h(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:s}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:s,attributes:i,default:r}}=e;return{value:n,label:s,attributes:i,default:r}}))}(s);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function x(e){let{value:n,tabValues:s}=e;return s.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:s}=e;const r=(0,a.W6)(),t=function(e){let{queryString:n=!1,groupId:s}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:n,groupId:s});return[(0,c.aZ)(t),(0,i.useCallback)((e=>{if(!t)return;const n=new URLSearchParams(r.location.search);n.set(t,e),r.replace({...r.location,search:n.toString()})}),[t,r])]}function j(e){const{defaultValue:n,queryString:s=!1,groupId:r}=e,t=p(e),[a,c]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!x({value:n,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=s.find((e=>e.default))??s[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:t}))),[d,h]=m({queryString:s,groupId:r}),[j,u]=function(e){let{groupId:n}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,t]=(0,o.Dv)(s);return[r,(0,i.useCallback)((e=>{s&&t.set(e)}),[s,t])]}({groupId:r}),g=(()=>{const e=d??j;return x({value:e,tabValues:t})?e:null})();(0,l.A)((()=>{g&&c(g)}),[g]);return{selectedValue:a,selectValue:(0,i.useCallback)((e=>{if(!x({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);c(e),h(e),u(e)}),[h,u,t]),tabValues:t}}var u=s(9136);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=s(74848);function f(e){let{className:n,block:s,selectedValue:i,selectValue:a,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,t.a_)(),o=e=>{const n=e.currentTarget,s=c.indexOf(n),r=l[s].value;r!==i&&(d(n),a(r))},h=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const s=c.indexOf(e.currentTarget)+1;n=c[s]??c[0];break}case"ArrowLeft":{const s=c.indexOf(e.currentTarget)-1;n=c[s]??c[c.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":s},n),children:l.map((e=>{let{value:n,label:s,attributes:t}=e;return(0,y.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>{c.push(e)},onKeyDown:h,onClick:o,...t,className:(0,r.A)("tabs__item",g.tabItem,t?.className,{"tabs__item--active":i===n}),children:s??n},n)}))})}function v(e){let{lazy:n,children:s,selectedValue:t}=e;const a=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===t));return e?(0,i.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function b(e){const n=j(e);return(0,y.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,y.jsx)(f,{...n,...e}),(0,y.jsx)(v,{...n,...e})]})}function S(e){const n=(0,u.A)();return(0,y.jsx)(b,{...e,children:h(e.children)},String(n))}},67992:()=>{},79329:(e,n,s)=>{"use strict";s.d(n,{A:()=>a});s(96540);var i=s(18215);const r={tabItem:"tabItem_Ymn6"};var t=s(74848);function a(e){let{children:n,hidden:s,className:a}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,i.A)(r.tabItem,a),hidden:s,children:n})}},92441:()=>{},93290:()=>{}}]);