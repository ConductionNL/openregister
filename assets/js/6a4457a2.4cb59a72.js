"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[5745],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var s=i(96540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}},31413:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>o,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Features/search","title":"Search","description":"An overview of how core concepts in Open Register interact with each other.","source":"@site/docs/Features/search.md","sourceDirName":"Features","slug":"/Features/search","permalink":"/docs/Features/search","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Features/search.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Search","sidebar_position":5,"description":"An overview of how core concepts in Open Register interact with each other.","keywords":["Open Register","Core Concepts","Relationships"]},"sidebar":"tutorialSidebar","previous":{"title":"AI Chat Interface","permalink":"/docs/Features/ai"},"next":{"title":"Core Features","permalink":"/docs/Features/events"}}');var r=i(74848),t=i(28453);const l={title:"Search",sidebar_position:5,description:"An overview of how core concepts in Open Register interact with each other.",keywords:["Open Register","Core Concepts","Relationships"]},c="Advanced Search",a={},d=[{value:"Automatic Facets",id:"automatic-facets",level:2},{value:"Key Faceting Features",id:"key-faceting-features",level:3},{value:"Quick Example",id:"quick-example",level:3},{value:"Content Search",id:"content-search",level:2},{value:"Text Extraction Overview",id:"text-extraction-overview",level:3},{value:"Processing Pipeline",id:"processing-pipeline",level:3},{value:"Supported File Types",id:"supported-file-types",level:3},{value:"Search Integration",id:"search-integration",level:3},{value:"Solr Integration",id:"solr-integration",level:2},{value:"Overview",id:"overview",level:2},{value:"Key Benefits",id:"key-benefits",level:2},{value:"Overview",id:"overview-1",level:2},{value:"Open Catalogi Integration",id:"open-catalogi-integration",level:2},{value:"Publications Endpoint Advantages",id:"publications-endpoint-advantages",level:3},{value:"Register and Schema Filtering in Publications",id:"register-and-schema-filtering-in-publications",level:3},{value:"Basic Publications Filtering",id:"basic-publications-filtering",level:4},{value:"Multiple Register/Schema Filtering",id:"multiple-registerschema-filtering",level:4},{value:"Combined with Metadata Filters",id:"combined-with-metadata-filters",level:4},{value:"Comparison: OpenRegister vs Publications Endpoints",id:"comparison-openregister-vs-publications-endpoints",level:3},{value:"Migration Example",id:"migration-example",level:3},{value:"When to Use Each Endpoint",id:"when-to-use-each-endpoint",level:3},{value:"Metadata Filtering",id:"metadata-filtering",level:2},{value:"Core Metadata Fields",id:"core-metadata-fields",level:3},{value:"System Fields",id:"system-fields",level:4},{value:"Timestamps",id:"timestamps",level:4},{value:"Content Fields",id:"content-fields",level:4},{value:"Ownership &amp; Access",id:"ownership--access",level:4},{value:"Status &amp; State",id:"status--state",level:4},{value:"Filtering Operators",id:"filtering-operators",level:3},{value:"Metadata Filtering Examples",id:"metadata-filtering-examples",level:3},{value:"Basic Metadata Filtering",id:"basic-metadata-filtering",level:4},{value:"Advanced Metadata Combinations",id:"advanced-metadata-combinations",level:4},{value:"Register and Schema Filtering",id:"register-and-schema-filtering",level:4},{value:"Date Format Handling",id:"date-format-handling",level:2},{value:"Standard Date Format",id:"standard-date-format",level:3},{value:"Date Range Examples",id:"date-range-examples",level:3},{value:"Frontend Implementation",id:"frontend-implementation",level:3},{value:"Search User Interface",id:"search-user-interface",level:2},{value:"Explicit Search Action",id:"explicit-search-action",level:3},{value:"Multiple Search Terms Support",id:"multiple-search-terms-support",level:3},{value:"Search Performance Monitoring",id:"search-performance-monitoring",level:3},{value:"Full Text Search",id:"full-text-search",level:2},{value:"Wildcard Search",id:"wildcard-search",level:3},{value:"Pattern Matching",id:"pattern-matching",level:3},{value:"Phrase Search",id:"phrase-search",level:3},{value:"Basic Search",id:"basic-search",level:2},{value:"Comparison Operators",id:"comparison-operators",level:2},{value:"Not Equals <code>ne</code>",id:"not-equals-ne",level:3},{value:"Greater Than <code>gt</code>",id:"greater-than-gt",level:3},{value:"Less Than <code>lt</code>",id:"less-than-lt",level:3},{value:"Greater Than or Equal <code>gte</code>",id:"greater-than-or-equal-gte",level:3},{value:"Less Than or Equal <code>lte</code>",id:"less-than-or-equal-lte",level:3},{value:"Contains <code>~</code>",id:"contains-",level:3},{value:"Starts With <code>^</code>",id:"starts-with-",level:3},{value:"Ends With <code>$</code>",id:"ends-with-",level:3},{value:"Combining Multiple Conditions",id:"combining-multiple-conditions",level:2},{value:"AND Operations",id:"and-operations",level:3},{value:"OR Operations",id:"or-operations",level:3},{value:"Special Filters",id:"special-filters",level:2},{value:"Exists Check",id:"exists-check",level:3},{value:"Empty Check",id:"empty-check",level:3},{value:"Null Check",id:"null-check",level:3},{value:"Between Range",id:"between-range",level:3},{value:"Searching Nested Properties",id:"searching-nested-properties",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Indexing",id:"indexing",level:3},{value:"Query Optimization",id:"query-optimization",level:3},{value:"Pagination with Metadata Filters",id:"pagination-with-metadata-filters",level:3},{value:"Search Engine Implementation",id:"search-engine-implementation",level:2},{value:"Solr Integration",id:"solr-integration-1",level:3},{value:"Case-Insensitive Search",id:"case-insensitive-search",level:4},{value:"Ordering and Sorting",id:"ordering-and-sorting",level:4},{value:"Search Performance",id:"search-performance",level:4},{value:"Testing Search",id:"testing-search",level:4},{value:"Search Trails",id:"search-trails",level:2},{value:"Overview",id:"overview-2",level:3},{value:"Key Features",id:"key-features",level:3},{value:"Automatic Search Logging",id:"automatic-search-logging",level:4},{value:"Analytics Dashboard",id:"analytics-dashboard",level:4},{value:"Query Complexity Analysis",id:"query-complexity-analysis",level:4},{value:"Search Trail Creation Flow",id:"search-trail-creation-flow",level:3},{value:"API Endpoints",id:"api-endpoints",level:3},{value:"GET /api/search-trails",id:"get-apisearch-trails",level:4},{value:"GET /api/search-trails/statistics",id:"get-apisearch-trailsstatistics",level:4},{value:"GET /api/search-trails/popular-terms",id:"get-apisearch-trailspopular-terms",level:4},{value:"GET /api/search-trails/activity",id:"get-apisearch-trailsactivity",level:4},{value:"POST /api/search-trails/cleanup",id:"post-apisearch-trailscleanup",level:4},{value:"Database Schema",id:"database-schema",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Retention Policy",id:"retention-policy",level:4},{value:"Privacy Settings",id:"privacy-settings",level:4},{value:"Performance Settings",id:"performance-settings",level:4},{value:"Use Cases",id:"use-cases",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:4},{value:"Search Analytics",id:"search-analytics",level:4},{value:"User Behavior Analysis",id:"user-behavior-analysis",level:4},{value:"Best Practices",id:"best-practices-1",level:3},{value:"Performance Optimization",id:"performance-optimization",level:4},{value:"Privacy and Security",id:"privacy-and-security",level:4},{value:"Analytics and Reporting",id:"analytics-and-reporting",level:4},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"High Storage Usage",id:"high-storage-usage",level:4},{value:"Slow Queries",id:"slow-queries",level:4},{value:"Missing Data",id:"missing-data",level:4},{value:"Architecture Overview",id:"architecture-overview",level:3},{value:"Search Trail Data Capture",id:"search-trail-data-capture",level:3},{value:"Statistics Aggregation",id:"statistics-aggregation",level:3},{value:"Code Examples",id:"code-examples",level:3},{value:"Creating a Search Trail",id:"creating-a-search-trail",level:4},{value:"Retrieving Statistics",id:"retrieving-statistics",level:4},{value:"Performance Optimizations",id:"performance-optimizations",level:3},{value:"Monitoring &amp; Debugging",id:"monitoring--debugging",level:3},{value:"Query Search Trails",id:"query-search-trails",level:4},{value:"Security Considerations",id:"security-considerations",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Invalid Field Names",id:"invalid-field-names",level:3},{value:"Invalid Operators",id:"invalid-operators",level:3},{value:"Invalid Date Formats",id:"invalid-date-formats",level:3},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Architecture Overview",id:"architecture-overview-1",level:3},{value:"Search Request Flow",id:"search-request-flow",level:3},{value:"Query Building Process",id:"query-building-process",level:3},{value:"Weighted Search Implementation",id:"weighted-search-implementation",level:3},{value:"Filter Operators",id:"filter-operators",level:3},{value:"Performance Optimizations",id:"performance-optimizations-1",level:3},{value:"1. Schema Analysis Caching",id:"1-schema-analysis-caching",level:4},{value:"2. Query Result Caching",id:"2-query-result-caching",level:4},{value:"3. Bulk Indexing",id:"3-bulk-indexing",level:4},{value:"4. Selective Field Loading",id:"4-selective-field-loading",level:4},{value:"Monitoring and Debugging",id:"monitoring-and-debugging",level:3},{value:"Query Logging",id:"query-logging",level:4},{value:"Performance Metrics",id:"performance-metrics",level:4},{value:"Health Checks",id:"health-checks",level:4},{value:"Error Handling Flow",id:"error-handling-flow",level:3},{value:"Code Examples",id:"code-examples-1",level:3},{value:"Building a Search Query",id:"building-a-search-query",level:4},{value:"Custom Filter Processing",id:"custom-filter-processing",level:4},{value:"Testing",id:"testing",level:3}];function h(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"advanced-search",children:"Advanced Search"})}),"\n",(0,r.jsx)(n.p,{children:"Open Register provides powerful search capabilities that allow filtering objects based on their properties using a flexible query syntax."}),"\n",(0,r.jsx)(n.h2,{id:"automatic-facets",children:"Automatic Facets"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister provides a comprehensive faceting system that enables dynamic filtering based on object properties and metadata. The system supports multiple facet types and automatic field discovery."}),"\n",(0,r.jsxs)(n.p,{children:["For detailed information about faceting capabilities, see the ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/Features/faceting",children:"Comprehensive Faceting Documentation"})}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"key-faceting-features",children:"Key Faceting Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Facet Types"}),": Terms, date histograms, and numeric ranges"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatic Discovery"}),": Use ",(0,r.jsx)(n.code,{children:"_facetable=true"})," to discover available facetable fields"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Schema-Based"}),": Facets configured via schema properties marked with ",(0,r.jsx)(n.code,{children:"facetable: true"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"UUID Resolution"}),": Automatic conversion of UUIDs to human-readable names"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Disjunctive Faceting"}),": Facet options remain visible even when selected"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Two-Stage System"}),": Discovery (",(0,r.jsx)(n.code,{children:"_facetable=true"}),") and data retrieval (",(0,r.jsx)(n.code,{children:"_facets[...]"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"quick-example",children:"Quick Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Discover available facets\nGET /api/objects/5/24?_facetable=true&_limit=0\n\n# Get facet data\nGET /api/objects/5/24?_facets[@self][register][type]=terms&_facets[status][type]=terms\n"})}),"\n",(0,r.jsx)(n.h2,{id:"content-search",children:"Content Search"}),"\n",(0,r.jsx)(n.p,{children:"Content Search provides powerful search capabilities across objects and their associated files through text extraction and indexing."}),"\n",(0,r.jsxs)(n.p,{children:["For detailed information about text extraction, see the ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/features/text-extraction-sources",children:"Text Extraction Sources Documentation"})}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"text-extraction-overview",children:"Text Extraction Overview"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister processes content from two distinct sources:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Files"}),": Documents (PDF, DOCX), images (OCR), spreadsheets, and text files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Objects"}),": Structured data entities with property values extracted as text"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"processing-pipeline",children:"Processing Pipeline"}),"\n",(0,r.jsx)(n.p,{children:"Both sources go through:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Text Extraction"}),": Files via LLPhant/Dolphin, objects via property concatenation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Chunking"}),": Smart text splitting (recursive or fixed-size strategies)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Solr Indexing"}),": Full-text search indexing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optional Enhancements"}),": Vector embeddings, entity extraction, language detection"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"supported-file-types",children:"Supported File Types"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Documents"}),": PDF, DOCX, DOC, ODT, RTF"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Spreadsheets"}),": XLSX, XLS, CSV"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Presentations"}),": PPTX"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Text Files"}),": TXT, MD, HTML, JSON, XML"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Images"}),": JPG, PNG, GIF, WebP, TIFF (via OCR)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"search-integration",children:"Search Integration"}),"\n",(0,r.jsx)(n.p,{children:"Extracted text is indexed in Solr, enabling:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Full-text search across file content and object properties"}),"\n",(0,r.jsx)(n.li,{children:"Combined search results from files and objects"}),"\n",(0,r.jsx)(n.li,{children:"Faceted search by file type, metadata, and object properties"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"solr-integration",children:"Solr Integration"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister uses Apache Solr as its search engine, providing advanced search and analytics capabilities for objects and their content."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The search system enables:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Full-text search"}),"\n",(0,r.jsx)(n.li,{children:"Metadata search"}),"\n",(0,r.jsx)(n.li,{children:"File content search"}),"\n",(0,r.jsx)(n.li,{children:"Advanced query options"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/features/views",children:"Saved Views"})})," - Save and reuse complex search configurations"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-benefits",children:"Key Benefits"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Discovery"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Find relevant content"}),"\n",(0,r.jsx)(n.li,{children:"Explore relationships"}),"\n",(0,r.jsx)(n.li,{children:"Discover patterns"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Integration"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Combined search results"}),"\n",(0,r.jsx)(n.li,{children:"Unified interface"}),"\n",(0,r.jsx)(n.li,{children:"Rich filtering"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Performance"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optimized indexing"}),"\n",(0,r.jsx)(n.li,{children:"Fast results"}),"\n",(0,r.jsx)(n.li,{children:"Scalable search"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview-1",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The search system enables you to filter objects using query parameters. However, it's important to note that this approach is limited by the maximum URL length supported by browsers and servers (typically 2,048 characters for most browsers)."}),"\n",(0,r.jsx)(n.p,{children:"For more complex queries that exceed URL length limitations, we are planning to implement GraphQL support in the future. This would enable:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Deeply nested queries"}),"\n",(0,r.jsx)(n.li,{children:"Complex filtering logic"}),"\n",(0,r.jsx)(n.li,{children:"Precise field selection"}),"\n",(0,r.jsx)(n.li,{children:"Batch operations"}),"\n",(0,r.jsx)(n.li,{children:"Real-time subscriptions"}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Note: GraphQL implementation is currently pending funding. If you're interested in supporting this feature, please contact us."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"In the meantime, here are the available search capabilities using URL parameters:"}),"\n",(0,r.jsx)(n.h2,{id:"open-catalogi-integration",children:"Open Catalogi Integration"}),"\n",(0,r.jsxs)(n.p,{children:["If you have ",(0,r.jsx)(n.strong,{children:"Open Catalogi"})," installed alongside OpenRegister, you gain access to the more flexible ",(0,r.jsx)(n.code,{children:"/api/publications"})," endpoint. This endpoint provides enhanced filtering capabilities that allow you to search across multiple registers and schemas without being constrained by URL path parameters."]}),"\n",(0,r.jsx)(n.h3,{id:"publications-endpoint-advantages",children:"Publications Endpoint Advantages"}),"\n",(0,r.jsxs)(n.p,{children:["The publications endpoint (",(0,r.jsx)(n.code,{children:"/api/publications"}),") offers several advantages over register/schema-specific endpoints:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-register searching"}),": Filter objects from multiple registers simultaneously"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dynamic schema filtering"}),": Switch between schemas without changing the endpoint"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cleaner URLs"}),": No need to include register/schema in the URL path"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"More flexible queries"}),": Better support for complex filter combinations"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"register-and-schema-filtering-in-publications",children:"Register and Schema Filtering in Publications"}),"\n",(0,r.jsx)(n.p,{children:"When using the publications endpoint, register and schema become regular query parameters instead of URL path components:"}),"\n",(0,r.jsx)(n.h4,{id:"basic-publications-filtering",children:"Basic Publications Filtering"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Search across all registers and schemas\nGET /api/publications\n\n# Filter by specific register\nGET /api/publications?register=5\n\n# Filter by specific schema  \nGET /api/publications?schema=24\n\n# Filter by both register and schema\nGET /api/publications?register=5&schema=24\n"})}),"\n",(0,r.jsx)(n.h4,{id:"multiple-registerschema-filtering",children:"Multiple Register/Schema Filtering"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Objects from multiple registers\nGET /api/publications?register[]=5&register[]=6&register[]=7\n\n# Objects from multiple schemas\nGET /api/publications?schema[]=24&schema[]=25\n\n# Complex combinations\nGET /api/publications?register[]=5&register[]=6&schema[]=24&schema[]=25\n"})}),"\n",(0,r.jsx)(n.h4,{id:"combined-with-metadata-filters",children:"Combined with Metadata Filters"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Date filtering across multiple registers\nGET /api/publications?register[]=5&register[]=6&@self[created][gte]=2025-06-25T00:00:00\n\n# Schema filtering with content search\nGET /api/publications?schema=24&@self[title][~]=budget&_search=annual\n\n# Complex multi-criteria search\nGET /api/publications?register=5&schema[]=24&schema[]=25&@self[published][exists]=true&@self[created][gte]=2025-01-01T00:00:00\n"})}),"\n",(0,r.jsx)(n.h3,{id:"comparison-openregister-vs-publications-endpoints",children:"Comparison: OpenRegister vs Publications Endpoints"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"OpenRegister Endpoint"}),(0,r.jsx)(n.th,{children:"Publications Endpoint"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"URL Format"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/api/objects/5/24?filters"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/api/publications?register=5&schema=24&filters"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cross-register"}),(0,r.jsx)(n.td,{children:"\u274c Not supported"}),(0,r.jsx)(n.td,{children:"\u2705 Supported"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Multiple schemas"}),(0,r.jsx)(n.td,{children:"\u274c Single schema only"}),(0,r.jsx)(n.td,{children:"\u2705 Multiple schemas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"URL complexity"}),(0,r.jsx)(n.td,{children:"Higher (path parameters)"}),(0,r.jsx)(n.td,{children:"Lower (query parameters)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Filter flexibility"}),(0,r.jsx)(n.td,{children:"Limited by path structure"}),(0,r.jsx)(n.td,{children:"Full query parameter flexibility"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"migration-example",children:"Migration Example"}),"\n",(0,r.jsx)(n.p,{children:"Convert existing OpenRegister queries to use the publications endpoint:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# OpenRegister format\nGET /api/objects/5/24?@self[created][gte]=2025-06-25T00:00:00&@self[title][~]=budget\n\n# Equivalent Publications format  \nGET /api/publications?register=5&schema=24&@self[created][gte]=2025-06-25T00:00:00&@self[title][~]=budget\n\n# Enhanced Publications format (multiple schemas)\nGET /api/publications?register=5&schema[]=24&schema[]=25&@self[created][gte]=2025-06-25T00:00:00&@self[title][~]=budget\n"})}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-each-endpoint",children:"When to Use Each Endpoint"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Use OpenRegister endpoints (",(0,r.jsx)(n.code,{children:"/api/objects/{register}/{schema}"}),") when:"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Working with a single, specific register and schema"}),"\n",(0,r.jsx)(n.li,{children:"Building register-specific applications"}),"\n",(0,r.jsx)(n.li,{children:"Need guaranteed register/schema validation in URL routing"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Use Publications endpoint (",(0,r.jsx)(n.code,{children:"/api/publications"}),") when:"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Searching across multiple registers or schemas"}),"\n",(0,r.jsx)(n.li,{children:"Building general-purpose search interfaces"}),"\n",(0,r.jsx)(n.li,{children:"Need maximum query flexibility"}),"\n",(0,r.jsx)(n.li,{children:"Want cleaner, more maintainable URLs"}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Open Catalogi Installation",type:"tip",children:(0,r.jsxs)(n.p,{children:["The publications endpoint requires Open Catalogi to be installed and configured alongside OpenRegister. If you don't see the ",(0,r.jsx)(n.code,{children:"/api/publications"})," endpoint, check your Open Catalogi installation."]})}),"\n",(0,r.jsx)(n.h2,{id:"metadata-filtering",children:"Metadata Filtering"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister supports comprehensive filtering on object metadata using query parameters. All metadata fields can be filtered using the '@self' prefix followed by the field name and optional operator."}),"\n",(0,r.jsx)(n.h3,{id:"core-metadata-fields",children:"Core Metadata Fields"}),"\n",(0,r.jsx)(n.p,{children:"The following metadata fields are available for filtering on all objects:"}),"\n",(0,r.jsx)(n.h4,{id:"system-fields",children:"System Fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"id"})}),(0,r.jsx)(n.td,{children:"Object unique identifier"}),(0,r.jsx)(n.td,{children:"UUID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[id]=550e8400-e29b-41d4-a716-446655440000"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uuid"})}),(0,r.jsx)(n.td,{children:"Object universal unique ID"}),(0,r.jsx)(n.td,{children:"UUID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[uuid]=550e8400-e29b-41d4-a716-446655440000"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"register"})}),(0,r.jsx)(n.td,{children:"Register ID or slug"}),(0,r.jsx)(n.td,{children:"Integer/String"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"@self[register]=5"})," or ",(0,r.jsx)(n.code,{children:"@self[register]=pets"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"schema"})}),(0,r.jsx)(n.td,{children:"Schema ID or slug"}),(0,r.jsx)(n.td,{children:"Integer/String"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"@self[schema]=24"})," or ",(0,r.jsx)(n.code,{children:"@self[schema]=animal"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"version"})}),(0,r.jsx)(n.td,{children:"Object version number"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[version]=1.0.0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"size"})}),(0,r.jsx)(n.td,{children:"Object size in bytes"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[size][gte]=1024"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"schemaVersion"})}),(0,r.jsx)(n.td,{children:"Schema version used"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[schemaVersion]=2.1.0"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"timestamps",children:"Timestamps"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created"})}),(0,r.jsx)(n.td,{children:"Creation timestamp"}),(0,r.jsx)(n.td,{children:"DateTime"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[created][gte]=2025-06-25T00:00:00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"updated"})}),(0,r.jsx)(n.td,{children:"Last update timestamp"}),(0,r.jsx)(n.td,{children:"DateTime"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[updated][lt]=2025-06-30T23:59:59"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"published"})}),(0,r.jsx)(n.td,{children:"Publication timestamp"}),(0,r.jsx)(n.td,{children:"DateTime"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[published][gte]=2025-01-01T00:00:00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"depublished"})}),(0,r.jsx)(n.td,{children:"Depublication timestamp"}),(0,r.jsx)(n.td,{children:"DateTime"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[depublished][lte]=2025-12-31T23:59:59"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"content-fields",children:"Content Fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"Object name"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name][~]=Annual Report"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"description"})}),(0,r.jsx)(n.td,{children:"Object description"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[description][$]=implementation"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uri"})}),(0,r.jsx)(n.td,{children:"Object URI"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[uri][^]=https://api.example.com"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"folder"})}),(0,r.jsx)(n.td,{children:"Object folder path"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[folder][~]=documents"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"ownership--access",children:"Ownership & Access"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"organization"})}),(0,r.jsx)(n.td,{children:"Owning organization ID"}),(0,r.jsx)(n.td,{children:"UUID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[organization]=550e8400-e29b-41d4-a716-446655440000"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"application"})}),(0,r.jsx)(n.td,{children:"Source application ID"}),(0,r.jsx)(n.td,{children:"UUID"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[application]=550e8400-e29b-41d4-a716-446655440000"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"owner"})}),(0,r.jsx)(n.td,{children:"Object owner"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[owner]=john.doe"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"license"})}),(0,r.jsx)(n.td,{children:"Object license"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[license]=CC-BY-4.0"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"source"})}),(0,r.jsx)(n.td,{children:"Data source identifier"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[source]=external-api"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"status--state",children:"Status & State"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"hash"})}),(0,r.jsx)(n.td,{children:"Object content hash"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[hash]=a1b2c3d4e5f6"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uri"})}),(0,r.jsx)(n.td,{children:"Object URI"}),(0,r.jsx)(n.td,{children:"String"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[uri][~]=api.example.com"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"filtering-operators",children:"Filtering Operators"}),"\n",(0,r.jsx)(n.p,{children:"All metadata fields support the following operators for precise filtering:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Operator"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"="})}),(0,r.jsx)(n.td,{children:"Equals (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name]=annual report"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ne"})}),(0,r.jsx)(n.td,{children:"Not equals (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[status][ne]=draft"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gt"})}),(0,r.jsx)(n.td,{children:"Greater than"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[version][gt]=1"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lt"})}),(0,r.jsx)(n.td,{children:"Less than"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[version][lt]=5"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"gte"})}),(0,r.jsx)(n.td,{children:"Greater than or equal"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[created][gte]=2025-01-01T00:00:00"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lte"})}),(0,r.jsx)(n.td,{children:"Less than or equal"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[updated][lte]=2025-12-31T23:59:59"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"~"})}),(0,r.jsx)(n.td,{children:"Contains (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[description][~]=budget"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"^"})}),(0,r.jsx)(n.td,{children:"Starts with (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name][^]=annual"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$"})}),(0,r.jsx)(n.td,{children:"Ends with (case insensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name][$]=2025"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"==="})}),(0,r.jsx)(n.td,{children:"Equals (case sensitive)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[name][===]=Annual Report"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"exists"})}),(0,r.jsx)(n.td,{children:"Property exists check"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[published][exists]=true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"empty"})}),(0,r.jsx)(n.td,{children:"Empty value check"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[summary][empty]=true"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"null"})}),(0,r.jsx)(n.td,{children:"Null value check"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@self[depublished][null]=true"})})]})]})]}),"\n",(0,r.jsxs)(n.admonition,{title:"Why Operator Names Instead of Mathematical Symbols?",type:"info",children:[(0,r.jsxs)(n.p,{children:["We use operator names like ",(0,r.jsx)(n.code,{children:"gte"}),", ",(0,r.jsx)(n.code,{children:"lte"}),", ",(0,r.jsx)(n.code,{children:"gt"}),", ",(0,r.jsx)(n.code,{children:"lt"}),", and ",(0,r.jsx)(n.code,{children:"ne"})," instead of mathematical symbols like ",(0,r.jsx)(n.code,{children:">="}),", ",(0,r.jsx)(n.code,{children:"<="}),", ",(0,r.jsx)(n.code,{children:">"}),", ",(0,r.jsx)(n.code,{children:"<"}),", and ",(0,r.jsx)(n.code,{children:"!="})," to avoid URL encoding problems."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The Problem:"}),"\nWhen using mathematical symbols in URL parameters, they get URL encoded:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"age[>=]=5"})," becomes ",(0,r.jsx)(n.code,{children:"age[%3E=]=5"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"weight[<=]=10"})," becomes ",(0,r.jsx)(n.code,{children:"weight[%3C=]=10"})]}),"\n"]}),(0,r.jsxs)(n.p,{children:["This URL encoding can cause parsing issues with PHP's ",(0,r.jsx)(n.code,{children:"$_GET"})," parameter processing, especially when operators are used within array key brackets."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The Solution:"}),"\nUsing descriptive operator names ensures clean, readable URLs:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"age[gte]=5"})," (greater than or equal)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"weight[lte]=10"})," (less than or equal)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name[ne]=test"})," (not equal)"]}),"\n"]}),(0,r.jsx)(n.p,{children:"This approach maintains compatibility across different web servers and ensures reliable parameter parsing."})]}),"\n",(0,r.jsx)(n.h3,{id:"metadata-filtering-examples",children:"Metadata Filtering Examples"}),"\n",(0,r.jsx)(n.h4,{id:"basic-metadata-filtering",children:"Basic Metadata Filtering"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Filter by register\nGET /api/objects/5/24?@self[register]=5\n\n# Filter by creation date\nGET /api/objects/5/24?@self[created][gte]=2025-06-01T00:00:00\n\n# Filter by name containing specific text\nGET /api/objects/5/24?@self[name][~]=budget\n\n# Filter by published objects\nGET /api/objects/5/24?@self[published][exists]=true\n"})}),"\n",(0,r.jsx)(n.h4,{id:"advanced-metadata-combinations",children:"Advanced Metadata Combinations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Objects created after date AND belonging to specific organization\nGET /api/objects/5/24?@self[created][gte]=2025-01-01T00:00:00&@self[organization]=550e8400-e29b-41d4-a716-446655440000\n\n# Published objects with specific name pattern\nGET /api/objects/5/24?@self[published][exists]=true&@self[name][^]=Annual\n\n# Objects updated within date range\nGET /api/objects/5/24?@self[updated][gte]=2025-06-01T00:00:00&@self[updated][lte]=2025-06-30T23:59:59\n\n# Exclude draft objects\nGET /api/objects/5/24?@self[status][ne]=draft\n"})}),"\n",(0,r.jsx)(n.h4,{id:"register-and-schema-filtering",children:"Register and Schema Filtering"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Objects from multiple registers (when using general search endpoints)\nGET /api/search?@self[register][]=5&@self[register][]=6\n\n# Objects with specific schema\nGET /api/search?@self[schema]=24\n\n# Combined register, schema, and date filter\nGET /api/search?@self[register]=5&@self[schema]=24&@self[created][gte]=2025-06-25T00:00:00\n"})}),"\n",(0,r.jsx)(n.h2,{id:"date-format-handling",children:"Date Format Handling"}),"\n",(0,r.jsxs)(n.p,{children:["When working with date fields like ",(0,r.jsx)(n.code,{children:"created"}),", ",(0,r.jsx)(n.code,{children:"updated"}),", ",(0,r.jsx)(n.code,{children:"published"}),", and ",(0,r.jsx)(n.code,{children:"depublished"}),", it's important to understand the date format requirements."]}),"\n",(0,r.jsx)(n.h3,{id:"standard-date-format",children:"Standard Date Format"}),"\n",(0,r.jsxs)(n.p,{children:["Open Register uses ISO 8601 date format ",(0,r.jsx)(n.strong,{children:"without timezone suffixes"})," for optimal database compatibility:"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Correct Format:"})," ",(0,r.jsx)(n.code,{children:"2025-06-23T14:30:00"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Avoid:"})," ",(0,r.jsx)(n.code,{children:"2025-06-23T14:30:00.000Z"})," or ",(0,r.jsx)(n.code,{children:"2025-06-23T14:30:00+00:00"})]}),"\n",(0,r.jsx)(n.h3,{id:"date-range-examples",children:"Date Range Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Objects created after June 21, 2025 at 22:00\nGET /api/objects?@self[created][gte]=2025-06-21T22:00:00\n\n# Objects updated before June 25, 2025 \nGET /api/objects?@self[updated][lt]=2025-06-25T00:00:00\n\n# Objects published within a specific date range\nGET /api/objects?@self[published][gte]=2025-06-01T00:00:00&@self[published][lte]=2025-06-30T23:59:59\n"})}),"\n",(0,r.jsx)(n.h3,{id:"frontend-implementation",children:"Frontend Implementation"}),"\n",(0,r.jsx)(n.p,{children:"When implementing date filters in JavaScript/frontend code, ensure you convert dates to the correct format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Convert Date object to OpenRegister format\nconst formatDateForOpenRegister = (date) => {\n    if (!date) return null\n    // Remove timezone info to match database format\n    return new Date(date).toISOString().replace(/\\.000Z$/, '')\n}\n\n// Example usage\nconst fromDate = formatDateForOpenRegister(new Date('2025-06-21'))\n// Result: '2025-06-21T00:00:00'\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"This standardized format ensures consistent date comparisons across different timezones and database configurations."})}),"\n",(0,r.jsx)(n.h2,{id:"search-user-interface",children:"Search User Interface"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister provides an optimized search interface with explicit search actions and multiple search term support."}),"\n",(0,r.jsx)(n.h3,{id:"explicit-search-action",children:"Explicit Search Action"}),"\n",(0,r.jsx)(n.p,{children:"Search operations require explicit user action rather than automatic triggering:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User-Controlled"}),": Search executes only when user clicks Search button or presses Enter"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Loading Indicators"}),": Visual feedback during search execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance Statistics"}),": Real-time display of search execution time and result counts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"No Automatic Triggers"}),": Eliminates excessive API calls from typing"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reduced Server Load"}),": Fewer unnecessary API calls (1 call vs 4+ for typing 'test')"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Better Performance"}),": Only executes when user intends to search"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Feedback"}),": Clear indication of search progress and results"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"multiple-search-terms-support",children:"Multiple Search Terms Support"}),"\n",(0,r.jsx)(n.p,{children:"The search interface supports multiple search terms:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Comma or Space Separated"}),": Enter multiple terms separated by commas or spaces"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Visual Term Chips"}),": Each search term displayed as a removable chip"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Individual Term Removal"}),": Remove specific terms without re-entering others"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Combined Search"}),": All terms searched together across object fields"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Search: "budget, annual, 2025"\nResults: Objects containing all three terms\n'})}),"\n",(0,r.jsx)(n.h3,{id:"search-performance-monitoring",children:"Search Performance Monitoring"}),"\n",(0,r.jsx)(n.p,{children:"The system provides real-time performance feedback:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Statistics Displayed:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Total results found"}),"\n",(0,r.jsx)(n.li,{children:"Search execution time in milliseconds"}),"\n",(0,r.jsx)(n.li,{children:"Search term count"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Performance Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Transparency for users"}),"\n",(0,r.jsx)(n.li,{children:"Debugging information for developers"}),"\n",(0,r.jsx)(n.li,{children:"Performance trend tracking"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"full-text-search",children:"Full Text Search"}),"\n",(0,r.jsx)(n.p,{children:"The '_search' parameter allows searching across all text properties of objects in a case-insensitive way:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=nemo\n"})}),"\n",(0,r.jsx)(n.p,{children:'This searches for "nemo" in all text fields like name, description, notes etc.'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Multiple Search Terms:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=budget annual 2025\n"})}),"\n",(0,r.jsx)(n.p,{children:"Searches for objects containing all specified terms."}),"\n",(0,r.jsx)(n.h3,{id:"wildcard-search",children:"Wildcard Search"}),"\n",(0,r.jsx)(n.p,{children:"You can use wildcards in the search term:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"*"})," matches zero or more characters"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=ne*o\n"})}),"\n",(0,r.jsx)(n.p,{children:'Matches "nemo", "negro", "neuro" etc.'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"?"})," matches exactly one character"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=ne?o\n"})}),"\n",(0,r.jsx)(n.p,{children:'Matches "nemo", "nero" but not "neuro"'}),"\n",(0,r.jsx)(n.h3,{id:"pattern-matching",children:"Pattern Matching"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"^"})," matches start of text"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=^ne\n"})}),"\n",(0,r.jsx)(n.p,{children:'Matches text starting with "ne"'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$"})," matches end of text"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?_search=mo$\n"})}),"\n",(0,r.jsx)(n.p,{children:'Matches text ending with "mo"'}),"\n",(0,r.jsx)(n.h3,{id:"phrase-search",children:"Phrase Search"}),"\n",(0,r.jsx)(n.p,{children:"Use quotes for exact phrase matching:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'GET /api/pets?_search="orange fish"\n'})}),"\n",(0,r.jsx)(n.p,{children:'Matches the exact phrase "orange fish"'}),"\n",(0,r.jsx)(n.h2,{id:"basic-search",children:"Basic Search"}),"\n",(0,r.jsx)(n.p,{children:"Simple equals search (case insensitive):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name=nemo\n"})}),"\n",(0,r.jsx)(n.p,{children:'This returns all pets named "nemo", "Nemo", "NEMO", etc.'}),"\n",(0,r.jsx)(n.p,{children:"Case sensitive search:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[===]=Nemo\n"})}),"\n",(0,r.jsx)(n.p,{children:'This returns only pets named exactly "Nemo".'}),"\n",(0,r.jsx)(n.h2,{id:"comparison-operators",children:"Comparison Operators"}),"\n",(0,r.jsxs)(n.h3,{id:"not-equals-ne",children:["Not Equals ",(0,r.jsx)(n.code,{children:"ne"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[ne]=nemo\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns all pets NOT named "nemo" (case insensitive)'}),"\n",(0,r.jsxs)(n.h3,{id:"greater-than-gt",children:["Greater Than ",(0,r.jsx)(n.code,{children:"gt"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[gt]=5\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets older than 5 years"}),"\n",(0,r.jsxs)(n.h3,{id:"less-than-lt",children:["Less Than ",(0,r.jsx)(n.code,{children:"lt"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?weight[lt]=10\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets weighing less than 10kg"}),"\n",(0,r.jsxs)(n.h3,{id:"greater-than-or-equal-gte",children:["Greater Than or Equal ",(0,r.jsx)(n.code,{children:"gte"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[gte]=2\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets 2 years or older"}),"\n",(0,r.jsxs)(n.h3,{id:"less-than-or-equal-lte",children:["Less Than or Equal ",(0,r.jsx)(n.code,{children:"lte"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[lte]=10\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets 10 years or younger"}),"\n",(0,r.jsxs)(n.h3,{id:"contains-",children:["Contains ",(0,r.jsx)(n.code,{children:"~"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[~]=ne\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets with "ne" in their name (like "nemo", "nero", "Nemo", etc) - case insensitive'}),"\n",(0,r.jsxs)(n.h3,{id:"starts-with-",children:["Starts With ",(0,r.jsx)(n.code,{children:"^"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[^]=ne\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets whose names start with "ne" (case insensitive)'}),"\n",(0,r.jsxs)(n.h3,{id:"ends-with-",children:["Ends With ",(0,r.jsx)(n.code,{children:"$"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[$]=mo\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets whose names end with "mo" (case insensitive)'}),"\n",(0,r.jsx)(n.h2,{id:"combining-multiple-conditions",children:"Combining Multiple Conditions"}),"\n",(0,r.jsx)(n.h3,{id:"and-operations",children:"AND Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name=nemo&type=fish\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets named "nemo" (case insensitive) AND of type "fish"'}),"\n",(0,r.jsx)(n.h3,{id:"or-operations",children:"OR Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?name[]=nemo&name[]=dory\n"})}),"\n",(0,r.jsx)(n.p,{children:'Returns pets named either "nemo" OR "dory" (case insensitive)'}),"\n",(0,r.jsx)(n.h2,{id:"special-filters",children:"Special Filters"}),"\n",(0,r.jsx)(n.h3,{id:"exists-check",children:"Exists Check"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?microchip[exists]=true\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets that have a microchip property"}),"\n",(0,r.jsx)(n.h3,{id:"empty-check",children:"Empty Check"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?notes[empty]=true\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets with empty notes"}),"\n",(0,r.jsx)(n.h3,{id:"null-check",children:"Null Check"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?owner[null]=true\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets with no owner"}),"\n",(0,r.jsx)(n.h3,{id:"between-range",children:"Between Range"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[gte]=2&age[lte]=5\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets between 2 and 5 years old (inclusive)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?age[gt]=2&age[lt]=5\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets between 2 and 5 years old (exclusive)"}),"\n",(0,r.jsx)(n.h2,{id:"searching-nested-properties",children:"Searching Nested Properties"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?owner.city=Amsterdam\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets whose owners live in Amsterdam (case insensitive)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET /api/pets?vaccinations.date[gt]=2023-01-01\n"})}),"\n",(0,r.jsx)(n.p,{children:"Returns pets with vaccinations after January 1st, 2023"}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Use URL encoding for special characters"}),"\n",(0,r.jsx)(n.li,{children:"Keep queries focused and specific"}),"\n",(0,r.jsx)(n.li,{children:"Use pagination for large result sets"}),"\n",(0,r.jsx)(n.li,{children:"Consider URL length limitations"}),"\n",(0,r.jsx)(n.li,{children:"Break complex queries into multiple requests if needed"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,r.jsx)(n.h3,{id:"indexing",children:"Indexing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Core metadata fields (",(0,r.jsx)(n.code,{children:"id"}),", ",(0,r.jsx)(n.code,{children:"uuid"}),", ",(0,r.jsx)(n.code,{children:"created"}),", ",(0,r.jsx)(n.code,{children:"updated"}),", ",(0,r.jsx)(n.code,{children:"register"}),", ",(0,r.jsx)(n.code,{children:"schema"}),") are automatically indexed"]}),"\n",(0,r.jsx)(n.li,{children:"Date fields support efficient range queries"}),"\n",(0,r.jsxs)(n.li,{children:["String fields with operators like ",(0,r.jsx)(n.code,{children:"~"}),", ",(0,r.jsx)(n.code,{children:"^"}),", ",(0,r.jsx)(n.code,{children:"$"})," may be slower on large datasets"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"query-optimization",children:"Query Optimization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Efficient: Use indexed fields first\nGET /api/objects/5/24?@self[created][gte]=2025-01-01&@self[title][~]=budget\n\n# Less efficient: Complex string operations on large datasets\nGET /api/objects/5/24?@self[description][~]=very_specific_text\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pagination-with-metadata-filters",children:"Pagination with Metadata Filters"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Always use pagination with filters\nGET /api/objects/5/24?@self[created][gte]=2025-01-01&_limit=50&_offset=0\n"})}),"\n",(0,r.jsx)(n.h2,{id:"search-engine-implementation",children:"Search Engine Implementation"}),"\n",(0,r.jsx)(n.h3,{id:"solr-integration-1",children:"Solr Integration"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister uses Apache Solr as its search engine, providing powerful full-text search and faceting capabilities."}),"\n",(0,r.jsx)(n.h4,{id:"case-insensitive-search",children:"Case-Insensitive Search"}),"\n",(0,r.jsx)(n.p,{children:"All text searches are case-insensitive by default. The search implementation uses 'mb_strtolower()' to normalize search terms before querying Solr:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Search terms are normalized to lowercase\n$cleanTerm = mb_strtolower($cleanTerm);\n"})}),"\n",(0,r.jsx)(n.p,{children:"This ensures that searches work consistently regardless of input case:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'software' = 'SOFTWARE' = 'SoFtWaRe' (all return the same results)"}),"\n",(0,r.jsx)(n.li,{children:"Handles international characters correctly (\xe9, \xf1, \xfc, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Works with UTF-8 encoded strings"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The normalization happens before the query is sent to Solr, ensuring reliable search behavior across different Solr configurations."}),"\n",(0,r.jsx)(n.h4,{id:"ordering-and-sorting",children:"Ordering and Sorting"}),"\n",(0,r.jsx)(n.p,{children:"Objects can be ordered by metadata fields using the '_order' parameter:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sortable Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'@self.name' - Alphabetical by object name (uses 'self_name_s' Solr field)"}),"\n",(0,r.jsx)(n.li,{children:"'@self.published' - Chronological by published date"}),"\n",(0,r.jsx)(n.li,{children:"'@self.created' - Chronological by creation date"}),"\n",(0,r.jsx)(n.li,{children:"'@self.updated' - Chronological by update date"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Sorting Directions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'asc' - Ascending order (A\u2192Z, oldest\u2192newest)"}),"\n",(0,r.jsx)(n.li,{children:"'desc' - Descending order (Z\u2192A, newest\u2192oldest)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Alphabetical order (A\u2192Z)\nGET /api/objects?_source=index&_order[@self.name]=asc\n\n# Reverse alphabetical (Z\u2192A)\nGET /api/objects?_source=index&_order[@self.name]=desc\n\n# Newest first\nGET /api/objects?_source=index&_order[@self.published]=desc\n\n# Oldest first\nGET /api/objects?_source=index&_order[@self.created]=asc\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Technical Implementation:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Text fields use sortable string variants (with '_s' suffix)"}),"\n",(0,r.jsx)(n.li,{children:"Solr schema includes sortable copies of searchable fields"}),"\n",(0,r.jsx)(n.li,{children:"Date fields use native Solr date sorting"}),"\n",(0,r.jsx)(n.li,{children:"Field mapping handled by 'translateSortableField()' method"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"search-performance",children:"Search Performance"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Weighted Field Search:"}),"\nThe search engine uses weighted field boosting to prioritize matches in certain fields:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Example weights\n'self_name^10'        // Name field has highest priority\n'self_title^8'        // Title field is second priority\n'self_description^5'  // Description has medium priority\n'self_summary^3'      // Summary has lower priority\n"})}),"\n",(0,r.jsx)(n.p,{children:"This ensures that matches in object names are ranked higher than matches in descriptions."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Field Types in Solr:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"'text_general' - Analyzed text fields (tokenized, lowercased, stemmed)"}),"\n",(0,r.jsx)(n.li,{children:"'string' - Exact value fields (not tokenized, for sorting/faceting)"}),"\n",(0,r.jsx)(n.li,{children:"'date' - ISO 8601 date fields (for range queries and sorting)"}),"\n",(0,r.jsx)(n.li,{children:"UUID fields - String fields for identifiers"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"testing-search",children:"Testing Search"}),"\n",(0,r.jsx)(n.p,{children:"The search implementation includes comprehensive integration tests:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Test Coverage:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Case-insensitive search (lowercase, uppercase, mixed case)"}),"\n",(0,r.jsx)(n.li,{children:"Ordering by name (ascending, descending)"}),"\n",(0,r.jsx)(n.li,{children:"Ordering by dates (chronological, reverse chronological)"}),"\n",(0,r.jsx)(n.li,{children:"Combined filters with search"}),"\n",(0,r.jsx)(n.li,{children:"Pagination with ordering"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Running Tests:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Run all search tests\nvendor/bin/phpunit tests/Integration/CoreIntegrationTest.php --filter "testCaseInsensitive|testOrdering"\n\n# Run specific test\nvendor/bin/phpunit tests/Integration/CoreIntegrationTest.php --filter testCaseInsensitiveSearchLowercase\n'})}),"\n",(0,r.jsx)(n.p,{children:"See 'SOLR_TESTING_GUIDE.md' in the repository for detailed testing procedures."}),"\n",(0,r.jsx)(n.h2,{id:"search-trails",children:"Search Trails"}),"\n",(0,r.jsx)(n.p,{children:"Search trails provide comprehensive logging and analytics for search operations within OpenRegister. This feature allows administrators to track, analyze, and optimize search performance across all registers and schemas."}),"\n",(0,r.jsx)(n.h3,{id:"overview-2",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Search trails automatically capture detailed information about every search operation performed in the system, including:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Search Terms"}),": What users are searching for"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance Metrics"}),": Execution time, result counts, and success rates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Context"}),": User ID, session ID, IP address, and user agent"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Search Context"}),": Register, schema, filters, and parameters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Request Metadata"}),": HTTP method, URI, and timestamps"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"key-features",children:"Key Features"}),"\n",(0,r.jsx)(n.h4,{id:"automatic-search-logging",children:"Automatic Search Logging"}),"\n",(0,r.jsx)(n.p,{children:"Every search operation is automatically logged with:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Search Context"}),": Register, schema, and search terms"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance Metrics"}),": Execution time, result count, and success status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Information"}),": User ID, session ID, and IP address"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Request Details"}),": User agent, request method, and timestamp"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters"}),": Complete search parameters excluding sensitive information"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"analytics-dashboard",children:"Analytics Dashboard"}),"\n",(0,r.jsx)(n.p,{children:"The search trails interface provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Comprehensive Statistics"}),": Total searches, results, success rates, and performance metrics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Popular Search Terms"}),": Most frequently used search terms with usage counts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Register/Schema Usage"}),": Search activity breakdown by register and schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Agent Statistics"}),": Browser and client distribution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Activity Patterns"}),": Search activity over time (hourly, daily, weekly, monthly)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"query-complexity-analysis",children:"Query Complexity Analysis"}),"\n",(0,r.jsx)(n.p,{children:"Search trails categorize queries by complexity:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Simple"}),": Basic term searches with minimal parameters (\u22643 parameters)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Medium"}),": Multi-parameter searches with basic filters (4-10 parameters)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Complex"}),": Advanced searches with multiple filters and facets (>10 parameters)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"search-trail-creation-flow",children:"Search Trail Creation Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant User\n    participant ObjectsCtrl as Objects Controller\n    participant ObjectService\n    participant SolrService as Solr Service\n    participant TrailService as SearchTrail Service\n    participant TrailMapper as SearchTrail Mapper\n    participant DB as Database\n    \n    User->>ObjectsCtrl: GET /api/objects?_search=term\n    ObjectsCtrl->>ObjectService: Find Objects\n    \n    Note over ObjectsCtrl: Capture Request Start Time\n    \n    ObjectService->>SolrService: Search Query\n    SolrService--\x3e>ObjectService: Search Results\n    ObjectService--\x3e>ObjectsCtrl: Objects + Result Count\n    \n    Note over ObjectsCtrl: Calculate Response Time\n    \n    ObjectsCtrl->>TrailService: Create Search Trail\n    \n    TrailService->>TrailService: Extract Query Parameters\n    Note over TrailService: Filter System Parameters (_*)\n    Note over TrailService: Extract Search Term\n    Note over TrailService: Extract Filters, Sort, Pagination\n    \n    TrailService->>TrailService: Get Request Context\n    Note over TrailService: User ID, Session, IP, User Agent\n    \n    TrailService->>TrailMapper: Create Trail Entity\n    \n    TrailMapper->>TrailMapper: Set Expiry Date\n    Note over TrailMapper: created + retention_days\n    \n    TrailMapper->>DB: INSERT search_trail\n    DB--\x3e>TrailMapper: Trail ID\n    \n    TrailMapper--\x3e>TrailService: SearchTrail Entity\n    TrailService--\x3e>ObjectsCtrl: Trail Created\n    \n    ObjectsCtrl--\x3e>User: Search Results\n"})}),"\n",(0,r.jsx)(n.h3,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,r.jsx)(n.h4,{id:"get-apisearch-trails",children:"GET /api/search-trails"}),"\n",(0,r.jsx)(n.p,{children:"Retrieve paginated search trail entries."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (integer): Number of results per page (default: 50)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"offset"})," (integer): Number of results to skip"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"page"})," (integer): Page number"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"search"})," (string): Search term filter"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"register"})," (string): Filter by register ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"schema"})," (string): Filter by schema ID"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," (string): Filter by user"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"success"})," (boolean): Filter by success status"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dateFrom"})," (datetime): Start date filter"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dateTo"})," (datetime): End date filter"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"searchTerm"})," (string): Filter by search term"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"executionTimeFrom"})," (integer): Minimum execution time (ms)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"executionTimeTo"})," (integer): Maximum execution time (ms)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"resultCountFrom"})," (integer): Minimum result count"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"resultCountTo"})," (integer): Maximum result count"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Request:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"GET /api/search-trails?limit=20&register=users&success=true\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'results': [\n    {\n      'id': 1,\n      'searchTerm': 'user search',\n      'register': 'users',\n      'schema': 'person',\n      'parameters': {\n        'limit': 20,\n        'filters': {\n          'status': 'active'\n        }\n      },\n      'resultCount': 15,\n      'totalResults': 150,\n      'responseTime': 150,\n      'success': true,\n      'user': 'admin',\n      'userName': 'Administrator',\n      'userAgent': 'Mozilla/5.0...',\n      'ipAddress': '192.168.1.100',\n      'session': 'sess_abc123',\n      'created': '2024-01-15T10:30:00Z'\n    }\n  ],\n  'total': 1,\n  'page': 1,\n  'pages': 1,\n  'limit': 20,\n  'offset': 0\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"get-apisearch-trailsstatistics",children:"GET /api/search-trails/statistics"}),"\n",(0,r.jsx)(n.p,{children:"Retrieve comprehensive search statistics."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'total': 1000,\n  'totalResults': 15000,\n  'averageResultsPerSearch': 15,\n  'averageExecutionTime': 180,\n  'successRate': 0.95,\n  'uniqueSearchTerms': 250,\n  'uniqueUsers': 50,\n  'uniqueOrganizations': 10,\n  'queryComplexity': {\n    'simple': 600,\n    'medium': 300,\n    'complex': 100\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"get-apisearch-trailspopular-terms",children:"GET /api/search-trails/popular-terms"}),"\n",(0,r.jsx)(n.p,{children:"Retrieve popular search terms."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (integer): Number of terms to return (default: 10)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"[\n  {\n    'term': 'user',\n    'count': 150,\n    'percentage': 15.0\n  },\n  {\n    'term': 'active',\n    'count': 120,\n    'percentage': 12.0\n  }\n]\n"})}),"\n",(0,r.jsx)(n.h4,{id:"get-apisearch-trailsactivity",children:"GET /api/search-trails/activity"}),"\n",(0,r.jsx)(n.p,{children:"Retrieve search activity data."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"period"})," (string): Period type (hourly, daily, weekly, monthly)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"limit"})," (integer): Number of periods to return"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"[\n  {\n    'period': '2024-01-15',\n    'searches': 50,\n    'results': 750,\n    'averageExecutionTime': 175,\n    'successRate': 0.96\n  }\n]\n"})}),"\n",(0,r.jsx)(n.h4,{id:"post-apisearch-trailscleanup",children:"POST /api/search-trails/cleanup"}),"\n",(0,r.jsx)(n.p,{children:"Clean up old search trail entries."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'days': 30\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:"{\n  'success': true,\n  'message': 'Cleanup completed successfully',\n  'deletedCount': 100\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"database-schema",children:"Database Schema"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Search Trail Table: ",(0,r.jsx)(n.code,{children:"oc_openregister_search_trail"})]})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"id"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Primary key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uuid"})}),(0,r.jsx)(n.td,{children:"VARCHAR(36)"}),(0,r.jsx)(n.td,{children:"Unique identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"search_term"})}),(0,r.jsx)(n.td,{children:"TEXT"}),(0,r.jsxs)(n.td,{children:["Search term from ",(0,r.jsx)(n.code,{children:"_search"})," parameter"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"query_parameters"})}),(0,r.jsx)(n.td,{children:"JSON"}),(0,r.jsx)(n.td,{children:"Full query parameters (excluding system params)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"result_count"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Number of results returned (current page)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"total_results"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Total matching results (before pagination)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"register"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Register ID (foreign key)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"schema"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Schema ID (foreign key)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"register_uuid"})}),(0,r.jsx)(n.td,{children:"VARCHAR(36)"}),(0,r.jsx)(n.td,{children:"Register UUID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"schema_uuid"})}),(0,r.jsx)(n.td,{children:"VARCHAR(36)"}),(0,r.jsx)(n.td,{children:"Schema UUID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user"})}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"User ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_name"})}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"User display name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"register_name"})}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"Register name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"schema_name"})}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"Schema name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"session"})}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"Session ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ip_address"})}),(0,r.jsx)(n.td,{children:"VARCHAR(45)"}),(0,r.jsx)(n.td,{children:"IP address (IPv4/IPv6)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_agent"})}),(0,r.jsx)(n.td,{children:"TEXT"}),(0,r.jsx)(n.td,{children:"User agent string"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"request_uri"})}),(0,r.jsx)(n.td,{children:"TEXT"}),(0,r.jsx)(n.td,{children:"Full request URI"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http_method"})}),(0,r.jsx)(n.td,{children:"VARCHAR(10)"}),(0,r.jsx)(n.td,{children:"HTTP method (GET, POST)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"response_time"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Response time in milliseconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"page"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Page number"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"limit"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Limit parameter"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"offset"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Offset parameter"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"facets_requested"})}),(0,r.jsx)(n.td,{children:"BOOLEAN"}),(0,r.jsx)(n.td,{children:"Whether facets were requested"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"facetable_requested"})}),(0,r.jsx)(n.td,{children:"BOOLEAN"}),(0,r.jsx)(n.td,{children:"Whether facetable discovery was requested"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"filters"})}),(0,r.jsx)(n.td,{children:"JSON"}),(0,r.jsx)(n.td,{children:"Applied filters"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sort_parameters"})}),(0,r.jsx)(n.td,{children:"JSON"}),(0,r.jsx)(n.td,{children:"Sort parameters"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"published_only"})}),(0,r.jsx)(n.td,{children:"BOOLEAN"}),(0,r.jsx)(n.td,{children:"Whether only published objects were queried"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"execution_type"})}),(0,r.jsx)(n.td,{children:"VARCHAR(20)"}),(0,r.jsxs)(n.td,{children:["Execution type: ",(0,r.jsx)(n.code,{children:"sync"})," or ",(0,r.jsx)(n.code,{children:"async"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created"})}),(0,r.jsx)(n.td,{children:"DATETIME"}),(0,r.jsx)(n.td,{children:"Creation timestamp"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"organisation_id"})}),(0,r.jsx)(n.td,{children:"VARCHAR(255)"}),(0,r.jsx)(n.td,{children:"Organisation identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"organisation_id_type"})}),(0,r.jsx)(n.td,{children:"VARCHAR(50)"}),(0,r.jsx)(n.td,{children:"Type of organisation identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"expires"})}),(0,r.jsx)(n.td,{children:"DATETIME"}),(0,r.jsx)(n.td,{children:"Expiration date (created + retention_days)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"size"})}),(0,r.jsx)(n.td,{children:"INTEGER"}),(0,r.jsx)(n.td,{children:"Size of entry in bytes"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Indexes:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["PRIMARY KEY (",(0,r.jsx)(n.code,{children:"id"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["INDEX (",(0,r.jsx)(n.code,{children:"uuid"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["INDEX (",(0,r.jsx)(n.code,{children:"search_term"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["INDEX (",(0,r.jsx)(n.code,{children:"register"}),", ",(0,r.jsx)(n.code,{children:"schema"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["INDEX (",(0,r.jsx)(n.code,{children:"user"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["INDEX (",(0,r.jsx)(n.code,{children:"created"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["INDEX (",(0,r.jsx)(n.code,{children:"expires"}),") -- For efficient cleanup"]}),"\n",(0,r.jsxs)(n.li,{children:["INDEX (",(0,r.jsx)(n.code,{children:"organisation_id"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h4,{id:"retention-policy",children:"Retention Policy"}),"\n",(0,r.jsx)(n.p,{children:"Configure search trail retention:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// In app configuration\n'search_trail_retention_days' => 90,\n'search_trail_cleanup_enabled' => true,\n'search_trail_cleanup_schedule' => 'daily',\n"})}),"\n",(0,r.jsx)(n.h4,{id:"privacy-settings",children:"Privacy Settings"}),"\n",(0,r.jsx)(n.p,{children:"Control what information is logged:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Privacy configuration\n'search_trail_log_ip_addresses' => true,\n'search_trail_log_user_agents' => true,\n'search_trail_log_session_ids' => true,\n'search_trail_anonymize_users' => false,\n"})}),"\n",(0,r.jsx)(n.h4,{id:"performance-settings",children:"Performance Settings"}),"\n",(0,r.jsx)(n.p,{children:"Configure performance thresholds:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Performance monitoring\n'search_trail_slow_query_threshold' => 1000, // milliseconds\n'search_trail_complexity_thresholds' => [\n    'simple' => 3,   // parameters\n    'medium' => 10,  // parameters\n    'complex' => 20, // parameters\n],\n"})}),"\n",(0,r.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,r.jsx)(n.h4,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,r.jsx)(n.p,{children:"Track slow queries and optimize search performance:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Get slow queries (> 1000ms)\n$slowQueries = $searchTrailService->getSlowQueries(1000);\n\n// Alert on performance issues\nif (count($slowQueries) > 10) {\n    $this->sendPerformanceAlert($slowQueries);\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"search-analytics",children:"Search Analytics"}),"\n",(0,r.jsx)(n.p,{children:"Analyze search patterns to improve user experience:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Get popular search terms\n$popularTerms = $searchTrailService->getPopularSearchTerms(10);\n\n// Get search activity over time\n$activity = $searchTrailService->getSearchActivityByTime('daily', 30);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"user-behavior-analysis",children:"User Behavior Analysis"}),"\n",(0,r.jsx)(n.p,{children:"Understand how users search:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Get user-specific search patterns\n$userSearches = $searchTrailService->getUserSearchTrails($userId);\n\n// Analyze search complexity distribution\n$complexity = $searchTrailService->getQueryComplexityDistribution();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"best-practices-1",children:"Best Practices"}),"\n",(0,r.jsx)(n.h4,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Regular Cleanup"}),": Implement automated cleanup of old search trails"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Index Management"}),": Ensure proper database indexes for search performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Batch Processing"}),": Use batch operations for large data sets"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitoring"}),": Monitor search trail table size and performance"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"privacy-and-security",children:"Privacy and Security"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data Retention"}),": Implement appropriate retention policies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access Control"}),": Restrict access to search trail data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Anonymization"}),": Consider anonymizing personal information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Audit Logging"}),": Log access to search trail data"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"analytics-and-reporting",children:"Analytics and Reporting"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Regular Reviews"}),": Regularly review search patterns and performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Trend Analysis"}),": Identify trends in search behavior"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance Monitoring"}),": Monitor search performance over time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User Behavior"}),": Analyze user search patterns for optimization"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h4,{id:"high-storage-usage",children:"High Storage Usage"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Search trail table growing too large."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Implement regular cleanup and archiving"}),"\n",(0,r.jsx)(n.li,{children:"Reduce retention period"}),"\n",(0,r.jsx)(n.li,{children:"Archive old data instead of deleting"}),"\n",(0,r.jsx)(n.li,{children:"Monitor table size regularly"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"slow-queries",children:"Slow Queries"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Search trail queries are slow."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Add database indexes"}),"\n",(0,r.jsx)(n.li,{children:"Optimize query patterns"}),"\n",(0,r.jsx)(n.li,{children:"Use pagination for large result sets"}),"\n",(0,r.jsx)(n.li,{children:"Monitor database performance"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"missing-data",children:"Missing Data"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Search trails not being created."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Check search trail logging configuration"}),"\n",(0,r.jsx)(n.li,{children:"Verify SearchTrailService is being called"}),"\n",(0,r.jsx)(n.li,{children:"Review error logs for failures"}),"\n",(0,r.jsx)(n.li,{children:"Check database connection"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:'graph TB\n    subgraph "Search Flow"\n        USER[User/API Request]\n        CTRL[ObjectsController]\n        SEARCH[Search Service]\n        SOLR[Solr Service]\n    end\n    \n    subgraph "Search Trail Logging"\n        TRAIL[SearchTrailService]\n        MAPPER[SearchTrailMapper]\n        DB[(Database)]\n    end\n    \n    subgraph "Analytics & Reporting"\n        STATS[Statistics Service]\n        POPULAR[Popular Terms]\n        ACTIVITY[Activity Tracking]\n        REGSTATS[Register/Schema Stats]\n        UAGENT[User Agent Stats]\n    end\n    \n    subgraph "Management"\n        CLEANUP[Cleanup Service]\n        EXPIRY[Expiry Check]\n        RETENTION[Retention Policy]\n    end\n    \n    USER --\x3e CTRL\n    CTRL --\x3e SEARCH\n    SEARCH --\x3e SOLR\n    \n    SOLR --\x3e TRAIL\n    TRAIL --\x3e MAPPER\n    MAPPER --\x3e DB\n    \n    DB --\x3e STATS\n    DB --\x3e POPULAR\n    DB --\x3e ACTIVITY\n    DB --\x3e REGSTATS\n    DB --\x3e UAGENT\n    \n    CLEANUP --\x3e EXPIRY\n    EXPIRY --\x3e DB\n    RETENTION --\x3e CLEANUP\n    \n    style TRAIL fill:#4A90E2\n    style DB fill:#50E3C2\n    style CLEANUP fill:#F5A623\n'})}),"\n",(0,r.jsx)(n.h3,{id:"search-trail-data-capture",children:"Search Trail Data Capture"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:'graph TB\n    subgraph "Request Data"\n        REQ_URI[Request URI]\n        REQ_METHOD[HTTP Method]\n        REQ_PARAMS[Query Parameters]\n    end\n    \n    subgraph "Search Context"\n        SEARCH_TERM[Search Term]\n        FILTERS[Filters]\n        SORT[Sort Parameters]\n        FACETS[Facet Requests]\n    end\n    \n    subgraph "User Context"\n        USER_ID[User ID]\n        SESSION[Session ID]\n        IP[IP Address]\n        UAGENT[User Agent]\n    end\n    \n    subgraph "Results Data"\n        RESULT_COUNT[Result Count]\n        RESPONSE_TIME[Response Time]\n        EXEC_TYPE[Execution Type]\n    end\n    \n    REQ_URI --\x3e TRAIL[Search Trail Entity]\n    SEARCH_TERM --\x3e TRAIL\n    FILTERS --\x3e TRAIL\n    USER_ID --\x3e TRAIL\n    RESULT_COUNT --\x3e TRAIL\n    \n    style TRAIL fill:#4A90E2\n'})}),"\n",(0,r.jsx)(n.h3,{id:"statistics-aggregation",children:"Statistics Aggregation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant API\n    participant TrailService as SearchTrail Service\n    participant TrailMapper as SearchTrail Mapper\n    participant DB as Database\n    \n    API->>TrailService: Get Statistics\n    TrailService->>TrailMapper: Get Total Count\n    TrailMapper->>DB: COUNT(*)\n    DB--\x3e>TrailMapper: Total Trails\n    \n    TrailService->>TrailMapper: Get Average Response Time\n    TrailMapper->>DB: AVG(response_time)\n    DB--\x3e>TrailMapper: Avg Response Time\n    \n    TrailService->>TrailMapper: Get Success Rate\n    TrailMapper->>DB: COUNT(result_count > 0) / COUNT(*)\n    DB--\x3e>TrailMapper: Success Rate\n    \n    TrailMapper--\x3e>TrailService: Aggregated Statistics\n    TrailService--\x3e>API: Statistics Response\n"})}),"\n",(0,r.jsx)(n.h3,{id:"code-examples",children:"Code Examples"}),"\n",(0,r.jsx)(n.h4,{id:"creating-a-search-trail",children:"Creating a Search Trail"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\SearchTrailService;\n\n// In ObjectsController after search execution\n$responseTime = round((microtime(true) - $startTime) * 1000, 2); // ms\n\n$trail = $this->searchTrailService->createSearchTrail(\n    query: $query,\n    resultCount: count($results),\n    totalResults: $totalResults,\n    responseTime: $responseTime,\n    executionType: 'sync'\n);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"retrieving-statistics",children:"Retrieving Statistics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Get comprehensive statistics\n$stats = $this->searchTrailService->getSearchStatistics([\n    'register' => 5,\n    'dateFrom' => '2024-01-01',\n    'dateTo' => '2024-12-31'\n]);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"performance-optimizations",children:"Performance Optimizations"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Batch Inserts"}),": Search trails are inserted asynchronously to avoid blocking search responses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Indexed Queries"}),": Database indexes on common filter fields (",(0,r.jsx)(n.code,{children:"user"}),", ",(0,r.jsx)(n.code,{children:"register"}),", ",(0,r.jsx)(n.code,{children:"schema"}),", ",(0,r.jsx)(n.code,{children:"created"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"JSON Field Optimization"}),": ",(0,r.jsx)(n.code,{children:"query_parameters"}),", ",(0,r.jsx)(n.code,{children:"filters"}),", and ",(0,r.jsx)(n.code,{children:"sort_parameters"})," stored as JSON"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Retention Policy"}),": Automatic expiry calculation: ",(0,r.jsx)(n.code,{children:"expires = created + retention_days"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Caching Statistics"}),": Frequently accessed statistics can be cached"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring--debugging",children:"Monitoring & Debugging"}),"\n",(0,r.jsx)(n.h4,{id:"query-search-trails",children:"Query Search Trails"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Get recent search trails\ndocker exec -it master-database-mysql-1 mysql -u nextcloud -pnextcloud nextcloud -e "\nSELECT search_term, result_count, response_time, created \nFROM oc_openregister_search_trail \nORDER BY created DESC \nLIMIT 10;\n"\n\n# Get slow queries\ndocker exec -it master-database-mysql-1 mysql -u nextcloud -pnextcloud nextcloud -e "\nSELECT search_term, response_time, created \nFROM oc_openregister_search_trail \nWHERE response_time > 1000 \nORDER BY response_time DESC \nLIMIT 20;\n"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access Control"}),": Search trail data should be restricted to administrators"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data Privacy"}),": IP addresses and session IDs are personal data - implement GDPR-compliant retention policies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SQL Injection"}),": All queries use parameterized statements"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"XSS Prevention"}),": User agent and search terms are escaped in frontend display"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.h3,{id:"invalid-field-names",children:"Invalid Field Names"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Invalid field name: @self[invalid_field]",\n  "code": 400\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"invalid-operators",children:"Invalid Operators"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Invalid operator: @self[created][invalid_op]",\n  "code": 400\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"invalid-date-formats",children:"Invalid Date Formats"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Invalid date format. Expected: YYYY-MM-DDTHH:MM:SS",\n  "code": 400\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,r.jsx)(n.p,{children:"This section provides detailed technical information about how search is implemented in OpenRegister."}),"\n",(0,r.jsx)(n.h3,{id:"architecture-overview-1",children:"Architecture Overview"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister uses Apache Solr as its search engine, providing powerful full-text search, faceting, and filtering capabilities:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TB\n    A[API Request] --\x3e B[ObjectService]\n    B --\x3e C{Check _source param}\n    C --\x3e|database| D[ObjectEntityMapper]\n    C --\x3e|index| E[GuzzleSolrService]\n    \n    D --\x3e F[(MySQL Database)]\n    F --\x3e G[SQL Query]\n    G --\x3e H[ResultSet]\n    \n    E --\x3e I{SOLR Available?}\n    I --\x3e|No| J[Return Empty Results]\n    I --\x3e|Yes| K[Build SOLR Query]\n    K --\x3e L[Apply Filters]\n    L --\x3e M[Add Facets]\n    M --\x3e N[Execute Search]\n    N --\x3e O[(Apache Solr)]\n    O --\x3e P[Process Results]\n    P --\x3e Q[Reconstruct Objects]\n    \n    H --\x3e R[ObjectEntity Array]\n    Q --\x3e R\n    R --\x3e S[Apply Extensions]\n    S --\x3e T[Return Results]\n    \n    style E fill:#e1f5ff\n    style O fill:#e1ffe1\n    style F fill:#fff4e1\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Components:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ObjectService"}),": High-level orchestration, determines search mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GuzzleSolrService"}),": Main service for Solr integration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ObjectEntityMapper"}),": Database access for non-Solr searches"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query Builder"}),": Translates OpenRegister queries to Solr queries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Filter Processor"}),": Handles metadata and property filters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Facet Engine"}),": Generates facet aggregations"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"search-request-flow",children:"Search Request Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant Client\n    participant API\n    participant ObjectService\n    participant SolrService\n    participant Solr\n    \n    Client->>API: GET /api/objects?_source=index&_search=budget\n    API->>ObjectService: findObjects(_search=budget)\n    \n    Note over ObjectService: Check _source parameter\n    ObjectService->>ObjectService: _source=index? Use Solr\n    \n    ObjectService->>SolrService: searchObjects(query)\n    \n    Note over SolrService: 1. Validate SOLR available\n    SolrService->>SolrService: isAvailable()\n    SolrService->>SolrService: getActiveCollectionName()\n    \n    Note over SolrService: 2. Build SOLR query\n    SolrService->>SolrService: buildSolrQuery(searchParams)\n    SolrService->>SolrService: buildWeightedSearchQuery('budget')\n    SolrService->>SolrService: applyFilters()\n    SolrService->>SolrService: applyFacets()\n    \n    Note over SolrService: 3. Execute search\n    SolrService->>Solr: GET /collection/select?q=...\n    Solr--\x3e>SolrService: SOLR Response\n    \n    Note over SolrService: 4. Process results\n    SolrService->>SolrService: processSearchResults()\n    SolrService->>SolrService: reconstructObjects()\n    \n    SolrService--\x3e>ObjectService: Results array\n    ObjectService--\x3e>API: JSON response\n    API--\x3e>Client: Search results\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Search Flow Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Request Validation"}),": Check for '_source=index' parameter to enable Solr search"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SOLR Availability"}),": Verify Solr service is available and collection exists"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query Building"}),": Convert OpenRegister query to Solr query syntax"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Filter Application"}),": Apply metadata filters, RBAC, multi-tenancy"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Facet Generation"}),": Add facet aggregations if requested"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Search Execution"}),": Send query to Solr and retrieve results"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Result Processing"}),": Convert Solr documents to OpenRegister format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Object Reconstruction"}),": Hydrate full object data from 'self_object' field"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"query-building-process",children:"Query Building Process"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    A[OpenRegister Query] --\x3e B[buildSolrQuery]\n    B --\x3e C[Parse _search parameter]\n    C --\x3e D[buildWeightedSearchQuery]\n    D --\x3e E[Add field boosting]\n    \n    B --\x3e F[Parse filters]\n    F --\x3e G[@self metadata filters]\n    F --\x3e H[Property filters]\n    G --\x3e I[buildFilterQuery]\n    H --\x3e I\n    I --\x3e J[Apply operators]\n    \n    B --\x3e K[Parse sorting]\n    K --\x3e L[translateSortField]\n    L --\x3e M[Map to Solr fields]\n    \n    B --\x3e N[Parse pagination]\n    N --\x3e O[Calculate start/rows]\n    \n    B --\x3e P[Parse facets]\n    P --\x3e Q[Get facetable fields]\n    Q --\x3e R[Add facet.field params]\n    \n    E --\x3e S[Complete SOLR Query]\n    J --\x3e S\n    M --\x3e S\n    O --\x3e S\n    R --\x3e S\n    \n    style B fill:#e1f5ff\n    style S fill:#e1ffe1\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Query Translation Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:'// OpenRegister Query\n{\n  "_search": "annual report",\n  "_limit": 20,\n  "_page": 1,\n  "_order": {"@self.created": "desc"},\n  "@self": {\n    "register": "5",\n    "created": {"gte": "2025-01-01T00:00:00"}\n  },\n  "status": "published",\n  "_facetable": true\n}\n\n// Translated SOLR Query\n{\n  "q": "(self_name:(annual report)^10 OR self_summary:(annual report)^5 OR self_description:(annual report)^2)",\n  "fq": [\n    "self_register:5",\n    "self_created:[2025-01-01T00:00:00Z TO *]",\n    "status_s:published"\n  ],\n  "start": 0,\n  "rows": 20,\n  "sort": "self_created desc",\n  "facet": "true",\n  "facet.field": ["status_s", "self_register_i", "category_s"]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"weighted-search-implementation",children:"Weighted Search Implementation"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister implements intelligent field weighting to improve search relevance:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"private function buildWeightedSearchQuery(string $searchTerm): string\n{\n    $cleanTerm = $this->escapeSolrValue($searchTerm);\n    \n    // Wildcard support for partial matching\n    $wildcardTerm = '*' . $cleanTerm . '*';\n    \n    // Build query with field-specific boosting\n    $queryParts = [\n        \"self_name:($wildcardTerm)^10\",      // Highest priority\n        \"self_summary:($wildcardTerm)^5\",    // Medium-high priority\n        \"self_description:($wildcardTerm)^2\" // Medium priority\n    ];\n    \n    return '(' . implode(' OR ', $queryParts) . ')';\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Field Weight Rationale:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Name (10x)"}),": Most important identifier, should rank highest"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Summary (5x)"}),": Key information, deserves strong ranking"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description (2x)"}),": Detailed content, moderate ranking boost"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Other fields (1x)"}),": Standard relevance scoring"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"filter-operators",children:"Filter Operators"}),"\n",(0,r.jsx)(n.p,{children:"OpenRegister supports comprehensive filter operators that are translated to Solr query syntax:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"OpenRegister"}),(0,r.jsx)(n.th,{children:"Solr Syntax"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'=' (equals)"}),(0,r.jsxs)(n.td,{children:["'",":value","'"]}),(0,r.jsxs)(n.td,{children:["'status_s",":active","'"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'ne' (not equals)"}),(0,r.jsxs)(n.td,{children:["'-field",":value","'"]}),(0,r.jsxs)(n.td,{children:["'-status_s",":inactive","'"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'gt' (greater than)"}),(0,r.jsx)(n.td,{children:"':{value TO *}'"}),(0,r.jsx)(n.td,{children:"'age_i:{30 TO *}'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'gte' (greater or equal)"}),(0,r.jsx)(n.td,{children:"':[value TO *]'"}),(0,r.jsx)(n.td,{children:"'age_i:[30 TO *]'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'lt' (less than)"}),(0,r.jsx)(n.td,{children:"':{* TO value}'"}),(0,r.jsx)(n.td,{children:"'age_i:{* TO 30}'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'lte' (less or equal)"}),(0,r.jsx)(n.td,{children:"':[* TO value]'"}),(0,r.jsx)(n.td,{children:"'age_i:[* TO 30]'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'~' (contains)"}),(0,r.jsx)(n.td,{children:"':*value*'"}),(0,r.jsx)(n.td,{children:"'name_s:*john*'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'^' (starts with)"}),(0,r.jsxs)(n.td,{children:["'",":value","*'"]}),(0,r.jsxs)(n.td,{children:["'name_s",":annual","*'"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'$' (ends with)"}),(0,r.jsx)(n.td,{children:"':*value'"}),(0,r.jsx)(n.td,{children:"'name_s:*2025'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'exists'"}),(0,r.jsx)(n.td,{children:"'field:[* TO *]'"}),(0,r.jsx)(n.td,{children:"'published:[* TO *]'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"'null'"}),(0,r.jsx)(n.td,{children:"'-field:[* TO *]'"}),(0,r.jsx)(n.td,{children:"'-published:[* TO *]'"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"performance-optimizations-1",children:"Performance Optimizations"}),"\n",(0,r.jsx)(n.h4,{id:"1-schema-analysis-caching",children:"1. Schema Analysis Caching"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Pre-compute facet configuration when schema is saved\n$schema->setFacets($this->analyzeFacetableFields($schema));\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Eliminates runtime schema analysis"}),"\n",(0,r.jsx)(n.li,{children:"Reduces search request latency"}),"\n",(0,r.jsx)(n.li,{children:"Improves scalability"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2-query-result-caching",children:"2. Query Result Caching"}),"\n",(0,r.jsx)(n.p,{children:"Search results are cached to improve performance for repeated queries:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"TTL: 300 seconds (5 minutes)"}),"\n",(0,r.jsx)(n.li,{children:"Storage: PSR-6 compliant cache"}),"\n",(0,r.jsx)(n.li,{children:"Invalidation: On object updates"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"3-bulk-indexing",children:"3. Bulk Indexing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Index multiple objects in single request\n$this->bulkIndex($documents, $commit = false);\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Optimization:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Batch size: 1000 documents"}),"\n",(0,r.jsx)(n.li,{children:"Deferred commits"}),"\n",(0,r.jsx)(n.li,{children:"Optimized for bulk imports"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"4-selective-field-loading",children:"4. Selective Field Loading"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Load only required fields from SOLR\n$solrQuery['fl'] = 'id,self_uuid,self_name,self_created';\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Reduced network transfer"}),"\n",(0,r.jsx)(n.li,{children:"Faster deserialization"}),"\n",(0,r.jsx)(n.li,{children:"Lower memory usage"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-and-debugging",children:"Monitoring and Debugging"}),"\n",(0,r.jsx)(n.h4,{id:"query-logging",children:"Query Logging"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$this->logger->debug('Executing SOLR search', [\n    'original_query' => $query,\n    'solr_query' => $solrQuery,\n    'collection' => $collectionName,\n    'execution_time_ms' => $executionTime\n]);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"performance-metrics",children:"Performance Metrics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$metrics = [\n    'searches' => $this->stats['searches'],\n    'indexes' => $this->stats['indexes'],\n    'search_time' => $this->stats['search_time'],\n    'index_time' => $this->stats['index_time'],\n    'errors' => $this->stats['errors']\n];\n"})}),"\n",(0,r.jsx)(n.h4,{id:"health-checks",children:"Health Checks"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check SOLR availability\nGET /api/solr/health\n\n# Response\n{\n  "available": true,\n  "collection": "openregister_nextcloud_core",\n  "document_count": 1234,\n  "index_size_mb": 45.6\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"error-handling-flow",children:"Error Handling Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    A[Search Request] --\x3e B{SOLR Available?}\n    B --\x3e|No| C[Return Empty Results]\n    B --\x3e|Yes| D{Collection Exists?}\n    D --\x3e|No| E[Create Collection]\n    D --\x3e|Yes| F[Execute Query]\n    E --\x3e F\n    F --\x3e G{Query Success?}\n    G --\x3e|No| H[Log Error]\n    G --\x3e|Yes| I[Process Results]\n    H --\x3e C\n    I --\x3e J[Return Results]\n    \n    style C fill:#ffe1e1\n    style J fill:#e1ffe1\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error Scenarios:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SOLR Unavailable"}),": Return empty results with warning"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Collection Missing"}),": Auto-create collection, retry query"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query Syntax Error"}),": Log error, return validation message"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timeout"}),": Reduce query complexity, retry with simplified query"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Result Too Large"}),": Apply pagination, warn about result size"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"code-examples-1",children:"Code Examples"}),"\n",(0,r.jsx)(n.h4,{id:"building-a-search-query",children:"Building a Search Query"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\GuzzleSolrService;\n\n// Execute search with filters\n$results = $solrService->searchObjects([\n    '_search' => 'annual report',\n    '_limit' => 20,\n    '_page' => 1,\n    '_order' => ['@self.created' => 'desc'],\n    '@self' => [\n        'register' => '5',\n        'created' => ['gte' => '2025-01-01T00:00:00']\n    ],\n    'status' => 'published',\n    '_facetable' => true\n]);\n\n// Access results\n$objects = $results['data'];\n$total = $results['total'];\n$facets = $results['facets'];\n"})}),"\n",(0,r.jsx)(n.h4,{id:"custom-filter-processing",children:"Custom Filter Processing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// Build custom filter query\n$filters = [];\n\n// Add metadata filters\nif (isset($query['@self'])) {\n    foreach ($query['@self'] as $field => $value) {\n        $filters[] = $this->buildMetadataFilter($field, $value);\n    }\n}\n\n// Add property filters\nforeach ($query as $key => $value) {\n    if ($key[0] !== '_' && $key !== '@self') {\n        $filters[] = $this->buildPropertyFilter($key, $value);\n    }\n}\n\n$solrQuery['fq'] = $filters;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Run all search tests\nvendor/bin/phpunit tests/Service/GuzzleSolrServiceTest.php\n\n# Test specific scenarios\nvendor/bin/phpunit --filter testWeightedSearch\nvendor/bin/phpunit --filter testFacetedSearch\nvendor/bin/phpunit --filter testFilterOperators\n\n# Integration tests\nvendor/bin/phpunit tests/Integration/SearchIntegrationTest.php\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Test Coverage:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Query building and translation"}),"\n",(0,r.jsx)(n.li,{children:"Filter operator processing"}),"\n",(0,r.jsx)(n.li,{children:"Facet generation"}),"\n",(0,r.jsx)(n.li,{children:"Result processing"}),"\n",(0,r.jsx)(n.li,{children:"Error handling"}),"\n",(0,r.jsx)(n.li,{children:"Performance benchmarks"}),"\n",(0,r.jsx)(n.li,{children:"Case-insensitive search"}),"\n",(0,r.jsx)(n.li,{children:"Ordering and sorting"}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);