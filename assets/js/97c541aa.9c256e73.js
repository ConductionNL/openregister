"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[4608],{28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var t=s(96540);const i={},a=t.createContext(i);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(a.Provider,{value:n},e.children)}},73907:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"fixes/FACET_IMPLEMENTATION","title":"Facet System Implementation Guide","description":"This document describes the implementation of the schema-based faceting system in OpenRegister, including both backend and frontend components.","source":"@site/docs/fixes/FACET_IMPLEMENTATION.md","sourceDirName":"fixes","slug":"/fixes/FACET_IMPLEMENTATION","permalink":"/docs/fixes/FACET_IMPLEMENTATION","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/fixes/FACET_IMPLEMENTATION.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Entity __toString() Magic Method Fix","permalink":"/docs/fixes/ENTITY_TOSTRING_FIX"},"next":{"title":"Facet Performance Analysis & Optimization Plan","permalink":"/docs/fixes/FACET_PERFORMANCE_ANALYSIS"}}');var i=s(74848),a=s(28453);const r={},c="Facet System Implementation Guide",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Backend Components",id:"backend-components",level:2},{value:"Core PHP Classes",id:"core-php-classes",level:3},{value:"Schema Property Configuration",id:"schema-property-configuration",level:3},{value:"Automatic Facet Type Detection",id:"automatic-facet-type-detection",level:3},{value:"Frontend Implementation",id:"frontend-implementation",level:2},{value:"Store Enhancement",id:"store-enhancement",level:3},{value:"New State Properties",id:"new-state-properties",level:4},{value:"Key Methods",id:"key-methods",level:4},{value:"New Getters",id:"new-getters",level:4},{value:"Vue Components",id:"vue-components",level:3},{value:"FacetComponent",id:"facetcomponent",level:4},{value:"SearchSideBar Integration",id:"searchsidebar-integration",level:4},{value:"API Integration",id:"api-integration",level:2},{value:"Backend API Enhancement",id:"backend-api-enhancement",level:3},{value:"Facet Discovery (Schema-Based)",id:"facet-discovery-schema-based",level:4},{value:"Facet Data Request",id:"facet-data-request",level:4},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Schema Configuration Example",id:"schema-configuration-example",level:3},{value:"Programmatic Usage",id:"programmatic-usage",level:3},{value:"Testing",id:"testing",level:2},{value:"Manual Testing",id:"manual-testing",level:3},{value:"Test API Endpoints",id:"test-api-endpoints",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Backend Optimization",id:"backend-optimization",level:3},{value:"Frontend Optimization",id:"frontend-optimization",level:3},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Schema Property Configuration",id:"schema-property-configuration-1",level:3},{value:"Facet Types",id:"facet-types",level:3},{value:"Custom Intervals",id:"custom-intervals",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Debug Tools",id:"debug-tools",level:3},{value:"Migration from Object-Based Faceting",id:"migration-from-object-based-faceting",level:2},{value:"Future Enhancements",id:"future-enhancements",level:2},{value:"Planned Features",id:"planned-features",level:3},{value:"Extension Points",id:"extension-points",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Support",id:"support",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"facet-system-implementation-guide",children:"Facet System Implementation Guide"})}),"\n",(0,i.jsx)(n.p,{children:"This document describes the implementation of the schema-based faceting system in OpenRegister, including both backend and frontend components."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The faceting system provides dynamic filtering capabilities for object searches. It automatically discovers which fields can be used for faceting based on schema property definitions, providing intelligent suggestions based on your schema configuration rather than analyzing object data."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key Features:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Schema-driven discovery"}),": Facetable fields are defined in schema properties with ",(0,i.jsx)(n.code,{children:"'facetable': true"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Efficient performance"}),": No need to analyze object data for field discovery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistent behavior"}),": Facets are always available based on schema design, not data content"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type-aware faceting"}),": Automatically determines appropriate facet types based on schema property types"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"backend-components",children:"Backend Components"}),"\n",(0,i.jsx)(n.h3,{id:"core-php-classes",children:"Core PHP Classes"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"ObjectEntityMapper"})})," - Main database mapper with schema-based facet integration"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Location: ",(0,i.jsx)(n.code,{children:"lib/Db/ObjectEntityMapper.php"})]}),"\n",(0,i.jsxs)(n.li,{children:["Enhanced ",(0,i.jsx)(n.code,{children:"searchObjects()"})," method supports facet requests"]}),"\n",(0,i.jsxs)(n.li,{children:["New ",(0,i.jsx)(n.code,{children:"getFacetableFieldsFromSchemas()"})," method for schema-based discovery"]}),"\n",(0,i.jsxs)(n.li,{children:["Enhanced ",(0,i.jsx)(n.code,{children:"getSimpleFacets()"})," and ",(0,i.jsx)(n.code,{children:"getFacetableFields()"})," methods"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"MariaDbFacetHandler"})})," - Handles JSON object field facets"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Location: ",(0,i.jsx)(n.code,{children:"lib/Db/ObjectHandlers/MariaDbFacetHandler.php"})]}),"\n",(0,i.jsx)(n.li,{children:"Supports terms, date_histogram, and range facets for JSON fields"}),"\n",(0,i.jsx)(n.li,{children:"Works with schema-defined facetable fields"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"MetaDataFacetHandler"})})," - Handles database table column facets"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Location: ",(0,i.jsx)(n.code,{children:"lib/Db/ObjectHandlers/MetaDataFacetHandler.php"})]}),"\n",(0,i.jsx)(n.li,{children:"Optimized for metadata fields (register, schema, created, etc.)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"MariaDbSearchHandler"})})," - Enhanced search capabilities"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Location: ",(0,i.jsx)(n.code,{children:"lib/Db/ObjectHandlers/MariaDbSearchHandler.php"})]}),"\n",(0,i.jsx)(n.li,{children:"Supports complex filtering and sorting operations"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"schema-property-configuration",children:"Schema Property Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Fields are marked as facetable in schema properties using the ",(0,i.jsx)(n.code,{children:"facetable"})," flag:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "properties": {\n    "status": {\n      "type": "string",\n      "title": "Status",\n      "description": "Current status of the item",\n      "facetable": true,\n      "example": "active"\n    },\n    "priority": {\n      "type": "integer",\n      "title": "Priority Level",\n      "description": "Priority from 1 to 10",\n      "facetable": true,\n      "minimum": 1,\n      "maximum": 10\n    },\n    "created_date": {\n      "type": "string",\n      "format": "date",\n      "title": "Creation Date",\n      "description": "When the item was created",\n      "facetable": true\n    },\n    "internal_notes": {\n      "type": "string",\n      "title": "Internal Notes",\n      "description": "Notes for internal use only",\n      "facetable": false\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"automatic-facet-type-detection",children:"Automatic Facet Type Detection"}),"\n",(0,i.jsx)(n.p,{children:"Based on schema property definitions, the system automatically determines appropriate facet types:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"String fields"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Regular strings \u2192 ",(0,i.jsx)(n.code,{children:"terms"})," facet"]}),"\n",(0,i.jsxs)(n.li,{children:["Date/datetime format \u2192 ",(0,i.jsx)(n.code,{children:"date_histogram"})," and ",(0,i.jsx)(n.code,{children:"range"})," facets"]}),"\n",(0,i.jsxs)(n.li,{children:["Email/URI/UUID format \u2192 ",(0,i.jsx)(n.code,{children:"terms"})," facet"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Numeric fields"})," (integer/number): ",(0,i.jsx)(n.code,{children:"range"})," and ",(0,i.jsx)(n.code,{children:"terms"})," facets"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Boolean fields"}),": ",(0,i.jsx)(n.code,{children:"terms"})," facet"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Array fields"}),": ",(0,i.jsx)(n.code,{children:"terms"})," facet"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"frontend-implementation",children:"Frontend Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"store-enhancement",children:"Store Enhancement"}),"\n",(0,i.jsxs)(n.p,{children:["The object store (",(0,i.jsx)(n.code,{children:"src/store/modules/object.js"}),") has been enhanced with comprehensive facet support:"]}),"\n",(0,i.jsx)(n.h4,{id:"new-state-properties",children:"New State Properties"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"facets: {}, // Current facet results\nfacetableFields: {}, // Available facetable fields from schemas\nactiveFacets: {}, // Currently active/selected facets\nfacetsLoading: false, // Loading state for facets\n"})}),"\n",(0,i.jsx)(n.h4,{id:"key-methods",children:"Key Methods"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"getFacetableFields()"})," - Discovers available facetable fields from schemas"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"getFacets()"})," - Retrieves facet data for current context"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"updateActiveFacet()"})," - Manages active facet selection"]}),"\n",(0,i.jsxs)(n.li,{children:["Enhanced ",(0,i.jsx)(n.code,{children:"refreshObjectList()"})," - Automatically includes facets"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"new-getters",children:"New Getters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"availableMetadataFacets"})," - Metadata fields available for faceting"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"availableObjectFieldFacets"})," - Object fields available for faceting (from schemas)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"currentFacets"})," - Current facet results with buckets"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hasFacets"})," / ",(0,i.jsx)(n.code,{children:"hasFacetableFields"})," - Availability checks"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"vue-components",children:"Vue Components"}),"\n",(0,i.jsx)(n.h4,{id:"facetcomponent",children:"FacetComponent"}),"\n",(0,i.jsx)(n.p,{children:"A ready-to-use Vue component for facet management:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Location: ",(0,i.jsx)(n.code,{children:"src/components/FacetComponent.vue"})]}),"\n",(0,i.jsx)(n.li,{children:"Automatically discovers and displays available facets from schemas"}),"\n",(0,i.jsx)(n.li,{children:"Interactive checkbox interface for enabling/disabling facets"}),"\n",(0,i.jsx)(n.li,{children:"Real-time display of facet results"}),"\n",(0,i.jsx)(n.li,{children:"Responsive design following Nextcloud patterns"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"searchsidebar-integration",children:"SearchSideBar Integration"}),"\n",(0,i.jsx)(n.p,{children:"The FacetComponent has been integrated into the existing Filters tab:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Positioned at the bottom of the Filters tab"}),"\n",(0,i.jsx)(n.li,{children:"Seamless integration with existing filters and search functionality"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"api-integration",children:"API Integration"}),"\n",(0,i.jsx)(n.h3,{id:"backend-api-enhancement",children:"Backend API Enhancement"}),"\n",(0,i.jsx)(n.p,{children:"The faceting system integrates with the existing API endpoints by adding new query parameters:"}),"\n",(0,i.jsx)(n.h4,{id:"facet-discovery-schema-based",children:"Facet Discovery (Schema-Based)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /api/objects/{register}/{schema}?_facetable=true&_limit=0\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Response includes ",(0,i.jsx)(n.code,{children:"facetable"})," field with available facet options based on schema definitions:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "results": [],\n  "total": 0,\n  "facetable": {\n    "@self": {\n      "register": {\n        "type": "categorical",\n        "facet_types": ["terms"],\n        "description": "Register that contains the object"\n      }\n    },\n    "object_fields": {\n      "status": {\n        "type": "string",\n        "format": "",\n        "title": "Status",\n        "description": "Current status of the item",\n        "facet_types": ["terms"],\n        "source": "schema",\n        "example": "active"\n      },\n      "priority": {\n        "type": "integer",\n        "title": "Priority Level",\n        "description": "Priority from 1 to 10",\n        "facet_types": ["range", "terms"],\n        "source": "schema",\n        "minimum": 1,\n        "maximum": 10\n      },\n      "created_date": {\n        "type": "string",\n        "format": "date",\n        "title": "Creation Date",\n        "description": "When the item was created",\n        "facet_types": ["date_histogram", "range"],\n        "source": "schema",\n        "intervals": ["day", "week", "month", "year"]\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"facet-data-request",children:"Facet Data Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /api/objects/{register}/{schema}?_facets[@self][register][type]=terms&_facets[status][type]=terms\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Response includes ",(0,i.jsx)(n.code,{children:"facets"})," field with aggregated data:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "results": [...],\n  "total": 150,\n  "facets": {\n    "@self": {\n      "register": {\n        "type": "terms",\n        "buckets": [\n          {"key": "Publications Register", "results": 150}\n        ]\n      }\n    },\n    "status": {\n      "type": "terms", \n      "buckets": [\n        {"key": "active", "results": 120},\n        {"key": "draft", "results": 25},\n        {"key": "archived", "results": 5}\n      ]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,i.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Schema Configuration"}),": Define facetable fields in your schema properties with ",(0,i.jsx)(n.code,{children:"'facetable': true"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Automatic Discovery"}),": When a register and schema are selected, facets are automatically discovered from schema definitions."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interactive Selection"}),": Users can enable/disable facets in the sidebar's Facets tab."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Real-time Results"}),": Facet counts update automatically when filters or search terms change."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"schema-configuration-example",children:"Schema Configuration Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "title": "Publication Schema",\n  "properties": {\n    "title": {\n      "type": "string",\n      "title": "Publication Title",\n      "facetable": false\n    },\n    "category": {\n      "type": "string",\n      "title": "Category",\n      "description": "Publication category",\n      "facetable": true,\n      "example": "Research"\n    },\n    "published_date": {\n      "type": "string",\n      "format": "date",\n      "title": "Publication Date",\n      "facetable": true\n    },\n    "priority": {\n      "type": "integer",\n      "title": "Priority",\n      "minimum": 1,\n      "maximum": 5,\n      "facetable": true\n    },\n    "is_featured": {\n      "type": "boolean",\n      "title": "Featured Publication",\n      "facetable": true\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"programmatic-usage",children:"Programmatic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Get available facetable fields (from schemas)\nconst facetableFields = await objectStore.getFacetableFields()\n\n// Enable specific facets\nawait objectStore.updateActiveFacet('@self.register', 'terms', true)\nawait objectStore.updateActiveFacet('category', 'terms', true)\n\n// Get facet data with custom configuration\nconst customFacets = await objectStore.getFacets({\n  _facets: {\n    '@self': {\n      created: { type: 'date_histogram', interval: 'month' }\n    },\n    priority: { type: 'range', ranges: [\n      { from: 1, to: 3, key: 'Low' },\n      { from: 3, to: 5, key: 'High' }\n    ]}\n  }\n})\n"})}),"\n",(0,i.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,i.jsx)(n.h3,{id:"manual-testing",children:"Manual Testing"}),"\n",(0,i.jsxs)(n.p,{children:["Use the test functions in ",(0,i.jsx)(n.code,{children:"src/tests/facet-integration-test.js"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// In browser console\nwindow.facetTests.testCompleteWorkflow()\nwindow.facetTests.checkStoreState()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"test-api-endpoints",children:"Test API Endpoints"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test Facet Discovery"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /index.php/apps/openregister/api/objects/1/1?_facetable=true&_limit=0\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test Basic Facets"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /index.php/apps/openregister/api/objects/1/1?_facets[@self][register][type]=terms&_limit=0\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,i.jsx)(n.h3,{id:"backend-optimization",children:"Backend Optimization"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Schema-based discovery"}),": No object data analysis required, improving performance significantly"]}),"\n",(0,i.jsx)(n.li,{children:"Facet handlers use efficient database queries"}),"\n",(0,i.jsx)(n.li,{children:"Metadata facets use indexed columns for fast performance"}),"\n",(0,i.jsx)(n.li,{children:"No sampling overhead since discovery is schema-based"}),"\n",(0,i.jsx)(n.li,{children:"Async methods available for concurrent operations"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"frontend-optimization",children:"Frontend Optimization"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Facets are included by default but can be disabled with ",(0,i.jsx)(n.code,{children:"includeFacets: false"})]}),"\n",(0,i.jsx)(n.li,{children:"Store state prevents unnecessary API calls"}),"\n",(0,i.jsx)(n.li,{children:"Loading states provide user feedback"}),"\n",(0,i.jsx)(n.li,{children:"Error handling with automatic fallbacks"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,i.jsx)(n.h3,{id:"schema-property-configuration-1",children:"Schema Property Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Control facet availability by setting ",(0,i.jsx)(n.code,{children:"facetable: true/false"})," in schema properties:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "property_name": {\n    "type": "string",\n    "title": "Display Name",\n    "description": "Field description",\n    "facetable": true,\n    "example": "sample value"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"facet-types",children:"Facet Types"}),"\n",(0,i.jsx)(n.p,{children:"Supported facet types (automatically determined from schema):"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Terms"}),": For categorical data (strings, booleans, low-cardinality data)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Date Histogram"}),": For date/datetime fields with configurable intervals"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Range"}),": For numeric data with custom range definitions"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"custom-intervals",children:"Custom Intervals"}),"\n",(0,i.jsx)(n.p,{children:"Date histogram intervals:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"day"})," - Daily grouping"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"week"})," - Weekly grouping"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"month"})," - Monthly grouping (default)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"year"})," - Yearly grouping"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"No Facets Appear"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensure register and schema are selected"}),"\n",(0,i.jsxs)(n.li,{children:["Check that schema properties have ",(0,i.jsx)(n.code,{children:"'facetable': true"})]}),"\n",(0,i.jsx)(n.li,{children:"Verify schema contains facetable properties"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Missing Fields"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Check schema property definitions"}),"\n",(0,i.jsxs)(n.li,{children:["Ensure ",(0,i.jsx)(n.code,{children:"'facetable': true"})," is set on desired fields"]}),"\n",(0,i.jsx)(n.li,{children:"Verify property types are supported for faceting"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"API Errors"}),": Verify facet parameter formatting in URL"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Performance Issues"}),": Schema-based approach should be much faster than previous object-based analysis"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"debug-tools",children:"Debug Tools"}),"\n",(0,i.jsx)(n.p,{children:"Use browser console:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Check store state\nwindow.facetTests.checkStoreState()\n\n// Test individual components\nawait window.facetTests.testFacetDiscovery()\nawait window.facetTests.testBasicFacets()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"migration-from-object-based-faceting",children:"Migration from Object-Based Faceting"}),"\n",(0,i.jsx)(n.p,{children:"If you're upgrading from the previous object-based faceting system:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update Schema Definitions"}),": Add ",(0,i.jsx)(n.code,{children:"'facetable': true"})," to properties you want to be facetable"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Remove Sample Size Concerns"}),": No longer need to worry about sample sizes for discovery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistent Results"}),": Facets are now always available based on schema, not data content"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Better Performance"}),": No object analysis overhead"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,i.jsx)(n.h3,{id:"planned-features",children:"Planned Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Facet value filtering (search within facet results)"}),"\n",(0,i.jsx)(n.li,{children:"Saved facet configurations"}),"\n",(0,i.jsx)(n.li,{children:"Facet-based data export"}),"\n",(0,i.jsx)(n.li,{children:"Advanced range facet UI with sliders"}),"\n",(0,i.jsx)(n.li,{children:"Hierarchical facets for nested data"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"extension-points",children:"Extension Points"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Custom facet types can be added to handlers"}),"\n",(0,i.jsx)(n.li,{children:"FacetComponent can be extended with additional UI elements"}),"\n",(0,i.jsx)(n.li,{children:"Store methods can be overridden for custom behavior"}),"\n",(0,i.jsx)(n.li,{children:"Schema property extensions for advanced facet configuration"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/Features/faceting",children:"Faceting Features"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/technical/unified-faceting-system",children:"Unified Faceting System"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/technical/schema-based-facets",children:"Schema-Based Facets"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/Features/search",children:"Search Documentation"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,i.jsx)(n.p,{children:"For issues or questions about the faceting system:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Check the troubleshooting section above"}),"\n",(0,i.jsxs)(n.li,{children:["Review the test examples in ",(0,i.jsx)(n.code,{children:"src/tests/facet-integration-test.js"})]}),"\n",(0,i.jsxs)(n.li,{children:["Consult the ",(0,i.jsx)(n.a,{href:"/docs/technical/unified-faceting-system",children:"Unified Faceting System documentation"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);