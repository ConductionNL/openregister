"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[3721],{28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var t=i(96540);const s={},r=t.createContext(s);function d(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(r.Provider,{value:n},e.children)}},84216:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>d,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"Features/webhooks","title":"Webhooks","description":"OpenRegister includes a built-in webhook system that allows you to trigger external workflows and integrations whenever events occur within OpenRegister.","source":"@site/docs/Features/webhooks.md","sourceDirName":"Features","slug":"/Features/webhooks","permalink":"/docs/Features/webhooks","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Features/webhooks.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Multi-Tenancy","permalink":"/docs/Features/multi-tenancy"},"next":{"title":"Vectorization Architecture","permalink":"/docs/Technical/vectorization-architecture"}}');var s=i(74848),r=i(28453);const d={},l="Webhooks",c={},h=[{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:3},{value:"Requirements",id:"requirements",level:2},{value:"Managing Webhooks",id:"managing-webhooks",level:2},{value:"Creating a Webhook",id:"creating-a-webhook",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Listing Webhooks",id:"listing-webhooks",level:3},{value:"Getting a Webhook",id:"getting-a-webhook",level:3},{value:"Updating a Webhook",id:"updating-a-webhook",level:3},{value:"Deleting a Webhook",id:"deleting-a-webhook",level:3},{value:"Testing a Webhook",id:"testing-a-webhook",level:3},{value:"Listing Available Events",id:"listing-available-events",level:3},{value:"Available Events",id:"available-events",level:2},{value:"Object Events",id:"object-events",level:3},{value:"Register Events",id:"register-events",level:3},{value:"Schema Events",id:"schema-events",level:3},{value:"Application Events",id:"application-events",level:3},{value:"Agent Events",id:"agent-events",level:3},{value:"Source Events",id:"source-events",level:3},{value:"Configuration Events",id:"configuration-events",level:3},{value:"View Events",id:"view-events",level:3},{value:"Conversation Events",id:"conversation-events",level:3},{value:"Organisation Events",id:"organisation-events",level:3},{value:"Webhook Payload",id:"webhook-payload",level:2},{value:"Payload Structure",id:"payload-structure",level:3},{value:"Event Filtering",id:"event-filtering",level:2},{value:"Security",id:"security",level:2},{value:"HMAC Signature Verification",id:"hmac-signature-verification",level:3},{value:"Custom Headers",id:"custom-headers",level:3},{value:"Retry Policies",id:"retry-policies",level:2},{value:"Exponential Backoff (default)",id:"exponential-backoff-default",level:3},{value:"Linear Backoff",id:"linear-backoff",level:3},{value:"Fixed Delay",id:"fixed-delay",level:3},{value:"Wildcard Events",id:"wildcard-events",level:2},{value:"Monitoring",id:"monitoring",level:2},{value:"Integrations",id:"integrations",level:2},{value:"Examples",id:"examples",level:2},{value:"Subscribe to All Object Events",id:"subscribe-to-all-object-events",level:3},{value:"Subscribe to Specific Register Changes",id:"subscribe-to-specific-register-changes",level:3},{value:"High Security Webhook with Custom Headers",id:"high-security-webhook-with-custom-headers",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Webhook Not Firing",id:"webhook-not-firing",level:3},{value:"Delivery Failures",id:"delivery-failures",level:3},{value:"Debug Mode",id:"debug-mode",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"API Reference",id:"api-reference",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,s.jsx)(n.p,{children:"OpenRegister includes a built-in webhook system that allows you to trigger external workflows and integrations whenever events occur within OpenRegister."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Webhooks enable real-time integration with external systems by dispatching HTTP requests when specific events occur. OpenRegister's webhook system provides a robust, production-ready solution with automatic retries, event filtering, and comprehensive monitoring."}),"\n",(0,s.jsx)(n.h3,{id:"key-features",children:"Key Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Event-Driven Architecture"}),": Subscribe to specific OpenRegister events"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Automatic Retries"}),": Configurable retry policies (exponential, linear, fixed)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Event Filtering"}),": Filter events based on payload data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Secure"}),": HMAC-SHA256 signature verification"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Statistics"}),": Track delivery success rates and last execution times"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Custom Headers"}),": Add authentication headers or custom metadata"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Wildcard Support"}),": Use wildcards to match multiple events"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Nextcloud 28 or higher"}),"\n",(0,s.jsx)(n.li,{children:"OpenRegister app installed and enabled"}),"\n",(0,s.jsx)(n.li,{children:"External system to receive webhooks (n8n, Windmill, custom endpoint)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"managing-webhooks",children:"Managing Webhooks"}),"\n",(0,s.jsx)(n.p,{children:"OpenRegister provides a RESTful API for managing webhooks."}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-webhook",children:"Creating a Webhook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8080/index.php/apps/openregister/api/webhooks \\\n  -u \'admin:admin\' \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n    "name": "My Webhook",\n    "url": "https://my-server.com/webhook",\n    "method": "POST",\n    "events": [\n      "OCA\\\\OpenRegister\\\\Event\\\\ObjectCreatedEvent",\n      "OCA\\\\OpenRegister\\\\Event\\\\ObjectUpdatedEvent"\n    ],\n    "enabled": true,\n    "timeout": 30,\n    "maxRetries": 3,\n    "retryPolicy": "exponential"\n  }\'\n'})}),"\n",(0,s.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Webhook display name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"url"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Target URL to call"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"method"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"HTTP method (default: POST)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"events"})}),(0,s.jsx)(n.td,{children:"array"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Event class names (empty = all events)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"enabled"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Enable/disable webhook (default: true)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"headers"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Custom HTTP headers"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"secret"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Secret for HMAC signature"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"filters"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Event payload filters"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"timeout"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Request timeout in seconds (default: 30)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"maxRetries"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Maximum retry attempts (default: 3)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"retryPolicy"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Retry policy: exponential, linear, fixed (default: exponential)"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"listing-webhooks",children:"Listing Webhooks"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -X GET http://localhost:8080/index.php/apps/openregister/api/webhooks \\\n  -u 'admin:admin'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"getting-a-webhook",children:"Getting a Webhook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -X GET http://localhost:8080/index.php/apps/openregister/api/webhooks/{id} \\\n  -u 'admin:admin'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"updating-a-webhook",children:"Updating a Webhook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -X PUT http://localhost:8080/index.php/apps/openregister/api/webhooks/{id} \\\n  -u 'admin:admin' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"enabled\": false\n  }'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"deleting-a-webhook",children:"Deleting a Webhook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -X DELETE http://localhost:8080/index.php/apps/openregister/api/webhooks/{id} \\\n  -u 'admin:admin'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"testing-a-webhook",children:"Testing a Webhook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -X POST http://localhost:8080/index.php/apps/openregister/api/webhooks/{id}/test \\\n  -u 'admin:admin'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"listing-available-events",children:"Listing Available Events"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl -X GET http://localhost:8080/index.php/apps/openregister/api/webhooks/events \\\n  -u 'admin:admin'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"available-events",children:"Available Events"}),"\n",(0,s.jsx)(n.p,{children:"OpenRegister dispatches events for all entity lifecycle operations. Below is a complete list of available events."}),"\n",(0,s.jsx)(n.h3,{id:"object-events",children:"Object Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ObjectCreatedEvent"})}),(0,s.jsx)(n.td,{children:"Object created"}),(0,s.jsx)(n.td,{children:"After new object is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ObjectUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"Object updated"}),(0,s.jsx)(n.td,{children:"After object is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ObjectDeletedEvent"})}),(0,s.jsx)(n.td,{children:"Object deleted"}),(0,s.jsx)(n.td,{children:"After object is removed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ObjectLockedEvent"})}),(0,s.jsx)(n.td,{children:"Object locked"}),(0,s.jsx)(n.td,{children:"After object is locked"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ObjectUnlockedEvent"})}),(0,s.jsx)(n.td,{children:"Object unlocked"}),(0,s.jsx)(n.td,{children:"After object is unlocked"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ObjectRevertedEvent"})}),(0,s.jsx)(n.td,{children:"Object reverted"}),(0,s.jsx)(n.td,{children:"After object is reverted to previous version"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"register-events",children:"Register Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\RegisterCreatedEvent"})}),(0,s.jsx)(n.td,{children:"Register created"}),(0,s.jsx)(n.td,{children:"After new register is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\RegisterUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"Register updated"}),(0,s.jsx)(n.td,{children:"After register is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\RegisterDeletedEvent"})}),(0,s.jsx)(n.td,{children:"Register deleted"}),(0,s.jsx)(n.td,{children:"After register is removed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"schema-events",children:"Schema Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\SchemaCreatedEvent"})}),(0,s.jsx)(n.td,{children:"Schema created"}),(0,s.jsx)(n.td,{children:"After new schema is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\SchemaUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"Schema updated"}),(0,s.jsx)(n.td,{children:"After schema is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\SchemaDeletedEvent"})}),(0,s.jsx)(n.td,{children:"Schema deleted"}),(0,s.jsx)(n.td,{children:"After schema is removed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"application-events",children:"Application Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ApplicationCreatedEvent"})}),(0,s.jsx)(n.td,{children:"Application created"}),(0,s.jsx)(n.td,{children:"After new application is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ApplicationUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"Application updated"}),(0,s.jsx)(n.td,{children:"After application is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ApplicationDeletedEvent"})}),(0,s.jsx)(n.td,{children:"Application deleted"}),(0,s.jsx)(n.td,{children:"After application is removed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"agent-events",children:"Agent Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\AgentCreatedEvent"})}),(0,s.jsx)(n.td,{children:"Agent created"}),(0,s.jsx)(n.td,{children:"After new agent is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\AgentUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"Agent updated"}),(0,s.jsx)(n.td,{children:"After agent is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\AgentDeletedEvent"})}),(0,s.jsx)(n.td,{children:"Agent deleted"}),(0,s.jsx)(n.td,{children:"After agent is removed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"source-events",children:"Source Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\SourceCreatedEvent"})}),(0,s.jsx)(n.td,{children:"Source created"}),(0,s.jsx)(n.td,{children:"After new source is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\SourceUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"Source updated"}),(0,s.jsx)(n.td,{children:"After source is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\SourceDeletedEvent"})}),(0,s.jsx)(n.td,{children:"Source deleted"}),(0,s.jsx)(n.td,{children:"After source is removed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"configuration-events",children:"Configuration Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ConfigurationCreatedEvent"})}),(0,s.jsx)(n.td,{children:"Configuration created"}),(0,s.jsx)(n.td,{children:"After new configuration is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ConfigurationUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"Configuration updated"}),(0,s.jsx)(n.td,{children:"After configuration is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ConfigurationDeletedEvent"})}),(0,s.jsx)(n.td,{children:"Configuration deleted"}),(0,s.jsx)(n.td,{children:"After configuration is removed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"view-events",children:"View Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ViewCreatedEvent"})}),(0,s.jsx)(n.td,{children:"View created"}),(0,s.jsx)(n.td,{children:"After new view is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ViewUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"View updated"}),(0,s.jsx)(n.td,{children:"After view is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ViewDeletedEvent"})}),(0,s.jsx)(n.td,{children:"View deleted"}),(0,s.jsx)(n.td,{children:"After view is removed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"conversation-events",children:"Conversation Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ConversationCreatedEvent"})}),(0,s.jsx)(n.td,{children:"Conversation created"}),(0,s.jsx)(n.td,{children:"After new conversation is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ConversationUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"Conversation updated"}),(0,s.jsx)(n.td,{children:"After conversation is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\ConversationDeletedEvent"})}),(0,s.jsx)(n.td,{children:"Conversation deleted"}),(0,s.jsx)(n.td,{children:"After conversation is removed"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"organisation-events",children:"Organisation Events"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"When Triggered"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\OrganisationCreatedEvent"})}),(0,s.jsx)(n.td,{children:"Organisation created"}),(0,s.jsx)(n.td,{children:"After new organisation is saved"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\OrganisationUpdatedEvent"})}),(0,s.jsx)(n.td,{children:"Organisation updated"}),(0,s.jsx)(n.td,{children:"After organisation is modified"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"OCA\\OpenRegister\\Event\\OrganisationDeletedEvent"})}),(0,s.jsx)(n.td,{children:"Organisation deleted"}),(0,s.jsx)(n.td,{children:"After organisation is removed"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"webhook-payload",children:"Webhook Payload"}),"\n",(0,s.jsx)(n.p,{children:"All webhooks receive a standardized payload:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "event": "OCA\\\\OpenRegister\\\\Event\\\\ObjectCreatedEvent",\n  "webhook": {\n    "id": "550e8400-e29b-41d4-a716-446655440000",\n    "name": "My Webhook"\n  },\n  "data": {\n    "objectType": "object",\n    "action": "created",\n    "object": {\n      "id": 123,\n      "uuid": "abc-123",\n      "...": "..."\n    },\n    "register": "my-register-uuid",\n    "schema": "my-schema-uuid"\n  },\n  "timestamp": "2025-11-20T20:00:00+00:00",\n  "attempt": 1\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"payload-structure",children:"Payload Structure"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"event"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Full event class name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"webhook.id"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Webhook UUID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"webhook.name"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Webhook name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"data"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"Event-specific data"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"timestamp"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"ISO 8601 timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"attempt"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:"Delivery attempt number (1 for first attempt)"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"event-filtering",children:"Event Filtering"}),"\n",(0,s.jsxs)(n.p,{children:["You can filter which events trigger webhooks using the ",(0,s.jsx)(n.code,{children:"filters"})," parameter:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "filters": {\n    "objectType": "object",\n    "action": "created",\n    "register": "my-specific-register"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Filters support:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Exact matching"}),": Filter value must match payload value exactly"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Array matching"}),": Payload value must be in the filter array"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dot notation"}),": Access nested payload values (e.g., ",(0,s.jsx)(n.code,{children:"'object.uuid'"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example with array filter:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "filters": {\n    "action": ["created", "updated"]\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,s.jsx)(n.h3,{id:"hmac-signature-verification",children:"HMAC Signature Verification"}),"\n",(0,s.jsxs)(n.p,{children:["When you provide a ",(0,s.jsx)(n.code,{children:"secret"})," during webhook creation, OpenRegister signs each payload with HMAC-SHA256 and includes the signature in the ",(0,s.jsx)(n.code,{children:"X-Webhook-Signature"})," header."]}),"\n",(0,s.jsx)(n.p,{children:"To verify signatures:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import hmac\nimport hashlib\nimport json\n\ndef verify_webhook(payload_body, signature, secret):\n    expected = hmac.new(\n        secret.encode('utf-8'),\n        payload_body,\n        hashlib.sha256\n    ).hexdigest()\n    \n    return hmac.compare_digest(expected, signature)\n\n# In your webhook endpoint\nsignature = request.headers.get('X-Webhook-Signature')\nis_valid = verify_webhook(request.body, signature, 'your-secret')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"custom-headers",children:"Custom Headers"}),"\n",(0,s.jsx)(n.p,{children:"Add authentication headers or custom metadata:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "headers": {\n    "Authorization": "Bearer your-token",\n    "X-Custom-Header": "value"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"retry-policies",children:"Retry Policies"}),"\n",(0,s.jsx)(n.p,{children:"OpenRegister supports three retry policies:"}),"\n",(0,s.jsx)(n.h3,{id:"exponential-backoff-default",children:"Exponential Backoff (default)"}),"\n",(0,s.jsx)(n.p,{children:"Doubles the delay after each failure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Attempt 1: Immediate"}),"\n",(0,s.jsx)(n.li,{children:"Attempt 2: 2 minutes"}),"\n",(0,s.jsx)(n.li,{children:"Attempt 3: 4 minutes"}),"\n",(0,s.jsx)(n.li,{children:"Attempt 4: 8 minutes"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"linear-backoff",children:"Linear Backoff"}),"\n",(0,s.jsx)(n.p,{children:"Increases delay linearly:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Attempt 1: Immediate"}),"\n",(0,s.jsx)(n.li,{children:"Attempt 2: 5 minutes"}),"\n",(0,s.jsx)(n.li,{children:"Attempt 3: 10 minutes"}),"\n",(0,s.jsx)(n.li,{children:"Attempt 4: 15 minutes"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"fixed-delay",children:"Fixed Delay"}),"\n",(0,s.jsx)(n.p,{children:"Constant delay between retries:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"All retries: 5 minutes"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"wildcard-events",children:"Wildcard Events"}),"\n",(0,s.jsx)(n.p,{children:"Subscribe to multiple events using wildcards:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "events": [\n    "OCA\\\\OpenRegister\\\\Event\\\\Object*",\n    "OCA\\\\OpenRegister\\\\Event\\\\*CreatedEvent"\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Or leave ",(0,s.jsx)(n.code,{children:"events"})," empty to receive ",(0,s.jsx)(n.strong,{children:"all events"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "events": []\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,s.jsx)(n.p,{children:"Each webhook tracks delivery statistics:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Metric"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"totalDeliveries"})}),(0,s.jsx)(n.td,{children:"Total delivery attempts"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"successfulDeliveries"})}),(0,s.jsx)(n.td,{children:"Successful deliveries"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"failedDeliveries"})}),(0,s.jsx)(n.td,{children:"Failed deliveries"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"lastTriggeredAt"})}),(0,s.jsx)(n.td,{children:"Last delivery attempt timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"lastSuccessAt"})}),(0,s.jsx)(n.td,{children:"Last successful delivery timestamp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"lastFailureAt"})}),(0,s.jsx)(n.td,{children:"Last failed delivery timestamp"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"integrations",children:"Integrations"}),"\n",(0,s.jsx)(n.p,{children:"See platform-specific integration guides:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/Integrations/n8n",children:"n8n Integration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/Integrations/windmill",children:"Windmill Integration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/Integrations/custom-webhooks",children:"Custom Webhooks"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.h3,{id:"subscribe-to-all-object-events",children:"Subscribe to All Object Events"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Object Monitor",\n  "url": "https://my-server.com/webhooks/objects",\n  "events": ["OCA\\\\OpenRegister\\\\Event\\\\Object*"],\n  "enabled": true\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"subscribe-to-specific-register-changes",children:"Subscribe to Specific Register Changes"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Register Monitor",\n  "url": "https://my-server.com/webhooks/register",\n  "events": [\n    "OCA\\\\OpenRegister\\\\Event\\\\RegisterCreatedEvent",\n    "OCA\\\\OpenRegister\\\\Event\\\\RegisterUpdatedEvent"\n  ],\n  "filters": {\n    "register": "my-register-uuid"\n  },\n  "enabled": true\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"high-security-webhook-with-custom-headers",children:"High Security Webhook with Custom Headers"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Secure Webhook",\n  "url": "https://my-server.com/secure-webhook",\n  "secret": "my-super-secret-key",\n  "headers": {\n    "Authorization": "Bearer my-api-token",\n    "X-Source": "OpenRegister"\n  },\n  "events": [],\n  "enabled": true\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"webhook-not-firing",children:"Webhook Not Firing"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Check if webhook is enabled: ",(0,s.jsx)(n.code,{children:"GET /api/webhooks/{id}"})]}),"\n",(0,s.jsx)(n.li,{children:"Verify events are being triggered (check logs)"}),"\n",(0,s.jsx)(n.li,{children:"Ensure URL is accessible from Nextcloud container"}),"\n",(0,s.jsx)(n.li,{children:"Check network connectivity and firewall rules"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"delivery-failures",children:"Delivery Failures"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Check webhook statistics for error patterns"}),"\n",(0,s.jsxs)(n.li,{children:["Review Nextcloud logs: ",(0,s.jsx)(n.code,{children:"docker logs nextcloud | grep 'Webhook'"})]}),"\n",(0,s.jsxs)(n.li,{children:["Test webhook manually: ",(0,s.jsx)(n.code,{children:"POST /api/webhooks/{id}/test"})]}),"\n",(0,s.jsx)(n.li,{children:"Verify target endpoint is responding correctly"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"debug-mode",children:"Debug Mode"}),"\n",(0,s.jsx)(n.p,{children:"Enable debug logging in Nextcloud:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"// config/config.php\n'loglevel' => 0,  // 0 = debug, 4 = error\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then monitor logs:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker logs -f nextcloud | grep -E 'Webhook|OpenRegister'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use Secrets"}),": Always configure HMAC secrets for production webhooks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Set Appropriate Timeouts"}),": Balance between reliability and resource usage"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Filter Events"}),": Only subscribe to events you need"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Monitor Statistics"}),": Regularly check delivery success rates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Handle Retries"}),": Design endpoints to be idempotent"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validate Signatures"}),": Always verify HMAC signatures in production"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use HTTPS"}),": Secure webhook URLs with TLS encryption"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Test First"}),": Use the test endpoint before going live"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsxs)(n.p,{children:["For complete API documentation, see the ",(0,s.jsx)(n.a,{href:"/docs/api/events-reference",children:"Events API Reference"}),"."]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);