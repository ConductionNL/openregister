"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[3465],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>r});var t=i(96540);const a={},s=t.createContext(a);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(s.Provider,{value:n},e.children)}},92687:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"development/frontend","title":"Frontend Architecture","description":"Frontend development guide including initialization and hot-loading","source":"@site/docs/development/frontend.md","sourceDirName":"development","slug":"/development/frontend","permalink":"/docs/development/frontend","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/development/frontend.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11,"title":"Frontend Architecture","description":"Frontend development guide including initialization and hot-loading"},"sidebar":"tutorialSidebar","previous":{"title":"Testing","permalink":"/docs/development/testing"},"next":{"title":"CLI Commands","permalink":"/docs/development/commands"}}');var a=i(74848),s=i(28453);const o={sidebar_position:11,title:"Frontend Architecture",description:"Frontend development guide including initialization and hot-loading"},r="Frontend Architecture",l={},d=[{value:"Technology Stack",id:"technology-stack",level:2},{value:"Application Initialization",id:"application-initialization",level:2},{value:"Hot-Loading System",id:"hot-loading-system",level:3},{value:"Architecture Diagram",id:"architecture-diagram",level:4},{value:"Hot-Loaded Entities",id:"hot-loaded-entities",level:4},{value:"Implementation",id:"implementation",level:3},{value:"Service Location",id:"service-location",level:4},{value:"Key Functions",id:"key-functions",level:4},{value:"initializeAppData()",id:"initializeappdata",level:5},{value:"reloadAppData()",id:"reloadappdata",level:5},{value:"Application Integration",id:"application-integration",level:4},{value:"Organisation Switching Integration",id:"organisation-switching-integration",level:4},{value:"Performance Benefits",id:"performance-benefits",level:3},{value:"Before Hot-Loading",id:"before-hot-loading",level:4},{value:"After Hot-Loading",id:"after-hot-loading",level:4},{value:"Parallel Loading",id:"parallel-loading",level:4},{value:"Console Logging",id:"console-logging",level:3},{value:"Soft vs Hard Reload",id:"soft-vs-hard-reload",level:2},{value:"Hard Reload (Default)",id:"hard-reload-default",level:3},{value:"Soft Reload",id:"soft-reload",level:3},{value:"Implementation in Stores",id:"implementation-in-stores",level:3},{value:"Usage in Views",id:"usage-in-views",level:3},{value:"Benefits",id:"benefits",level:3},{value:"Component Usage Patterns",id:"component-usage-patterns",level:2},{value:"Adding New Hot-Loaded Entities",id:"adding-new-hot-loaded-entities",level:2},{value:"1. Create a loader function",id:"1-create-a-loader-function",level:3},{value:"2. Add to Promise.all()",id:"2-add-to-promiseall",level:3},{value:"3. Import the store",id:"3-import-the-store",level:3},{value:"When NOT to Hot-Load",id:"when-not-to-hot-load",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Data Not Loading",id:"data-not-loading",level:3},{value:"Slow Initialization",id:"slow-initialization",level:3},{value:"Cache Issues",id:"cache-issues",level:3},{value:"After Organisation Switch",id:"after-organisation-switch",level:3},{value:"Directory Structure",id:"directory-structure",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"frontend-architecture",children:"Frontend Architecture"})}),"\n",(0,a.jsx)(n.p,{children:"This guide covers the frontend architecture of OpenRegister, including the Vue.js component structure, state management with Pinia, and the application initialization system."}),"\n",(0,a.jsx)(n.h2,{id:"technology-stack",children:"Technology Stack"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Framework"}),": Vue.js 2 (Options API)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"State Management"}),": Pinia"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"UI Components"}),": Nextcloud Vue Components"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Icons"}),": Material Design Icons (MDI)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Build Tool"}),": Webpack"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Language"}),": JavaScript/TypeScript"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"application-initialization",children:"Application Initialization"}),"\n",(0,a.jsx)(n.p,{children:"OpenRegister implements a centralized initialization system to hot-load essential application data at startup. This ensures that frequently used data is immediately available without requiring API calls when modals or components open."}),"\n",(0,a.jsx)(n.h3,{id:"hot-loading-system",children:"Hot-Loading System"}),"\n",(0,a.jsx)(n.p,{children:"The initialization system pre-loads commonly used entities into their respective Pinia stores when the application starts. This eliminates loading delays when users interact with features like the Configuration modal, where organisations and applications are needed immediately."}),"\n",(0,a.jsx)(n.h4,{id:"architecture-diagram",children:"Architecture Diagram"}),"\n",(0,a.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant User\n    participant App as App.vue\n    participant Init as AppInitializationService\n    participant Stores as Pinia Stores\n    participant API as Backend API\n\n    User->>App: Opens Application\n    App->>Init: initializeAppData()\n    \n    par Parallel Loading\n        Init->>Stores: Load Registers\n        Stores->>API: GET /registers\n        API--\x3e>Stores: Registers Data\n        \n        Init->>Stores: Load Schemas\n        Stores->>API: GET /schemas\n        API--\x3e>Stores: Schemas Data\n        \n        Init->>Stores: Load Organisations\n        Stores->>API: GET /organisations\n        API--\x3e>Stores: Organisations Data\n        \n        Init->>Stores: Load Applications\n        Stores->>API: GET /applications\n        API--\x3e>Stores: Applications Data\n        \n        Init->>Stores: Load Views\n        Stores->>API: GET /views\n        API--\x3e>Stores: Views Data\n        \n        Init->>Stores: Load Agents\n        Stores->>API: GET /agents\n        API--\x3e>Stores: Agents Data\n        \n        Init->>Stores: Load Sources\n        Stores->>API: GET /sources\n        API--\x3e>Stores: Sources Data\n    end\n    \n    Init--\x3e>App: All Data Loaded\n    App--\x3e>User: Application Ready"}),"\n",(0,a.jsx)(n.h4,{id:"hot-loaded-entities",children:"Hot-Loaded Entities"}),"\n",(0,a.jsx)(n.p,{children:"The following entities are hot-loaded at application startup:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Core Entities:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Registers"}),": Database register definitions"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Schemas"}),": JSON schema definitions for data validation"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Configuration Dependencies:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Organisations"}),": Organisation entities for multi-tenancy"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Applications"}),": Application entities for access control"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Extended Entities:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Views"}),": Custom view definitions"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Agents"}),": AI agent configurations"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Sources"}),": External data source connections"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"implementation",children:"Implementation"}),"\n",(0,a.jsx)(n.h4,{id:"service-location",children:"Service Location"}),"\n",(0,a.jsx)(n.p,{children:"The initialization logic is centralized in:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"src/services/AppInitializationService.js\n"})}),"\n",(0,a.jsx)(n.h4,{id:"key-functions",children:"Key Functions"}),"\n",(0,a.jsx)(n.h5,{id:"initializeappdata",children:"initializeAppData()"}),"\n",(0,a.jsx)(n.p,{children:"The main initialization function that loads all essential data in parallel:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"export async function initializeAppData() {\n    console.log('[AppInit] Starting application data initialization...')\n    \n    const startTime = performance.now()\n    \n    try {\n        // Load all essential data in parallel for maximum performance\n        await Promise.all([\n            // Core entities\n            loadRegisters(),\n            loadSchemas(),\n            \n            // Configuration dependencies\n            loadOrganisations(),\n            loadApplications(),\n            \n            // Extended entities\n            loadViews(),\n            loadAgents(),\n            loadSources(),\n        ])\n        \n        const endTime = performance.now()\n        console.log('[AppInit] \u2713 All data loaded successfully in ' + Math.round(endTime - startTime) + 'ms')\n    } catch (error) {\n        console.error('[AppInit] \u2717 Error during initialization:', error)\n        // Don't throw - allow app to continue even if some data fails to load\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h5,{id:"reloadappdata",children:"reloadAppData()"}),"\n",(0,a.jsx)(n.p,{children:"Forces a refresh of all hot-loaded data. This is called when switching organisations:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"export async function reloadAppData() {\n    console.log('[AppInit] Reloading all application data...')\n    \n    const startTime = performance.now()\n    \n    try {\n        // Force reload all data in parallel\n        await Promise.all([\n            forceLoadRegisters(),\n            forceLoadSchemas(),\n            forceLoadOrganisations(),\n            forceLoadApplications(),\n            forceLoadViews(),\n            forceLoadAgents(),\n            forceLoadSources(),\n        ])\n        \n        const endTime = performance.now()\n        console.log('[AppInit] \u2713 All data reloaded successfully in ' + Math.round(endTime - startTime) + 'ms')\n    } catch (error) {\n        console.error('[AppInit] \u2717 Error during reload:', error)\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h4,{id:"application-integration",children:"Application Integration"}),"\n",(0,a.jsx)(n.p,{children:"The initialization is triggered in 'App.vue' when the application mounts:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// src/App.vue\nimport { initializeAppData } from './services/AppInitializationService.js'\n\nexport default {\n    name: 'App',\n    mounted() {\n        // Initialize hot-loading of essential application data\n        // This loads registers, schemas, organisations, applications, views, agents, and sources\n        initializeAppData()\n        \n        // Set up dashboard store watchers\n        setupDashboardStoreWatchers()\n    },\n}\n"})}),"\n",(0,a.jsx)(n.h4,{id:"organisation-switching-integration",children:"Organisation Switching Integration"}),"\n",(0,a.jsx)(n.p,{children:"When a user switches organisations, all data is reloaded to reflect the new organisational context:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// src/views/organisation/OrganisationsIndex.vue\nimport { reloadAppData } from '../../services/AppInitializationService.js'\n\nasync setActiveOrganisation(uuid) {\n    try {\n        await organisationStore.setActiveOrganisationById(uuid)\n        this.showSuccessMessage('Active organisation changed successfully')\n        \n        // Reload all hot-loaded data for the new organisation context\n        console.log('[OrganisationsIndex] Reloading application data after organisation switch...')\n        await reloadAppData()\n    } catch (error) {\n        this.showErrorMessage('Failed to change active organisation: ' + error.message)\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"performance-benefits",children:"Performance Benefits"}),"\n",(0,a.jsx)(n.h4,{id:"before-hot-loading",children:"Before Hot-Loading"}),"\n",(0,a.jsx)(n.p,{children:"When a user opened the Configuration modal:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Modal opens"}),"\n",(0,a.jsx)(n.li,{children:"Shows loading state"}),"\n",(0,a.jsx)(n.li,{children:"Fetches organisations (500-2000ms)"}),"\n",(0,a.jsx)(n.li,{children:"Fetches applications (500-2000ms)"}),"\n",(0,a.jsx)(n.li,{children:"Modal becomes interactive (1000-4000ms total delay)"}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"after-hot-loading",children:"After Hot-Loading"}),"\n",(0,a.jsx)(n.p,{children:"When a user opens the Configuration modal:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Modal opens with data immediately available (0ms delay)"}),"\n",(0,a.jsx)(n.li,{children:"No loading states needed"}),"\n",(0,a.jsx)(n.li,{children:"Instant interactivity"}),"\n"]}),"\n",(0,a.jsx)(n.h4,{id:"parallel-loading",children:"Parallel Loading"}),"\n",(0,a.jsx)(n.p,{children:"All entities are loaded in parallel using 'Promise.all()', which means:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"If 7 entities each take 1 second to load sequentially = 7 seconds total"}),"\n",(0,a.jsx)(n.li,{children:"With parallel loading = ~1 second total (the slowest single request)"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Typical initialization times: ",(0,a.jsx)(n.strong,{children:"200-500ms"})," for all entities combined"]}),"\n",(0,a.jsx)(n.h3,{id:"console-logging",children:"Console Logging"}),"\n",(0,a.jsx)(n.p,{children:"The service provides detailed console output for debugging and performance monitoring:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"[AppInit] Starting application data initialization...\n[AppInit] Loading registers...\n[AppInit] Loading schemas...\n[AppInit] Loading organisations...\n[AppInit] Loading applications...\n[AppInit] Loading views...\n[AppInit] Loading agents...\n[AppInit] Loading sources...\n[AppInit] \u2713 Loaded 7 registers\n[AppInit] \u2713 Loaded 49 schemas\n[AppInit] \u2713 Loaded 2 organisations\n[AppInit] \u2713 Loaded 3 applications\n[AppInit] \u2713 Views loaded\n[AppInit] \u2713 Loaded 5 agents\n[AppInit] \u2713 Loaded 4 sources\n[AppInit] \u2713 All data loaded successfully in 387ms\n"})}),"\n",(0,a.jsx)(n.h2,{id:"soft-vs-hard-reload",children:"Soft vs Hard Reload"}),"\n",(0,a.jsx)(n.p,{children:"OpenRegister implements a soft/hard reload pattern to prevent unnecessary loading spinners while keeping data fresh."}),"\n",(0,a.jsx)(n.h3,{id:"hard-reload-default",children:"Hard Reload (Default)"}),"\n",(0,a.jsxs)(n.p,{children:["A ",(0,a.jsx)(n.strong,{children:"hard reload"})," shows loading states and spinners. Use this when:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:'User explicitly clicks a "Refresh" button'}),"\n",(0,a.jsx)(n.li,{children:"You need to show the user that data is being fetched"}),"\n",(0,a.jsx)(n.li,{children:"The component needs immediate visual feedback"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Hard reload - shows loading spinner\nagentStore.refreshAgentList()\n"})}),"\n",(0,a.jsx)(n.h3,{id:"soft-reload",children:"Soft Reload"}),"\n",(0,a.jsxs)(n.p,{children:["A ",(0,a.jsx)(n.strong,{children:"soft reload"})," updates data silently in the background without showing loading states. Use this when:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Navigating to a page with hot-loaded data"}),"\n",(0,a.jsx)(n.li,{children:"Data is likely already fresh from hot-loading"}),"\n",(0,a.jsx)(n.li,{children:"You want to update data without disrupting the UI"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Soft reload - no loading spinner\nagentStore.refreshAgentList(null, true)  // second parameter = soft\n"})}),"\n",(0,a.jsx)(n.h3,{id:"implementation-in-stores",children:"Implementation in Stores"}),"\n",(0,a.jsx)(n.p,{children:"All refresh methods support a 'soft' parameter:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"/**\n * Refresh the agent list from the API\n *\n * @param {string|null} search - Optional search term\n * @param {boolean} soft - If true, don't show loading state (default: false)\n * @returns {Promise} Promise with response and data\n */\nasync refreshAgentList(search = null, soft = false) {\n    console.log('AgentStore: Starting refreshAgentList (soft=' + soft + ')')\n    \n    // Only set loading state for hard reloads\n    if (!soft) {\n        this.loading = true\n    }\n    this.error = null\n    \n    try {\n        // ... fetch data ...\n    } finally {\n        if (!soft) {\n            this.loading = false\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"usage-in-views",children:"Usage in Views"}),"\n",(0,a.jsx)(n.p,{children:"Views should use soft reload on mount since data is hot-loaded:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// In view component\nmounted() {\n    // Use soft reload (no loading spinner) since data is hot-loaded at app startup\n    agentStore.refreshAgentList(null, true)\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"Refresh buttons should use hard reload to provide user feedback:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-vue",children:'<template>\n    <NcActionButton @click="agentStore.refreshAgentList()">\n        <template #icon>\n            <Refresh :size="20" />\n        </template>\n        Refresh\n    </NcActionButton>\n</template>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"benefits",children:"Benefits"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Aspect"}),(0,a.jsx)(n.th,{children:"Before"}),(0,a.jsx)(n.th,{children:"After"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Page navigation"}),(0,a.jsx)(n.td,{children:"Shows loading spinner for 500-2000ms"}),(0,a.jsx)(n.td,{children:"Instant display with fresh data"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"User experience"}),(0,a.jsx)(n.td,{children:"Feels slow, unnecessary waiting"}),(0,a.jsx)(n.td,{children:"Smooth, responsive navigation"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Data freshness"}),(0,a.jsx)(n.td,{children:"Only updates when mounted"}),(0,a.jsx)(n.td,{children:"Silently refreshes in background"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Explicit refresh"}),(0,a.jsx)(n.td,{children:"Same as mount"}),(0,a.jsx)(n.td,{children:"Clear visual feedback with spinner"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"component-usage-patterns",children:"Component Usage Patterns"}),"\n",(0,a.jsx)(n.p,{children:"Components can safely assume data is pre-loaded and should use soft reload:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// \u274c Bad: Hard reload on mount (shows unnecessary spinner)\nmounted() {\n    agentStore.refreshAgentList()\n}\n\n// \u2705 Good: Soft reload on mount (no spinner, data updates silently)\nmounted() {\n    // Use soft reload since data is hot-loaded at app startup\n    agentStore.refreshAgentList(null, true)\n}\n\n// \u2705 Good: Hard reload on user action (shows spinner for feedback)\nmethods: {\n    handleRefreshClick() {\n        agentStore.refreshAgentList()  // Hard reload with spinner\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"adding-new-hot-loaded-entities",children:"Adding New Hot-Loaded Entities"}),"\n",(0,a.jsx)(n.p,{children:"To add a new entity type to hot-loading:"}),"\n",(0,a.jsx)(n.h3,{id:"1-create-a-loader-function",children:"1. Create a loader function"}),"\n",(0,a.jsx)(n.p,{children:"In 'src/services/AppInitializationService.js':"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"async function loadMyEntity() {\n    if (!myEntityStore.myEntityList || myEntityStore.myEntityList.length === 0) {\n        console.log('[AppInit] Loading my entities...')\n        await myEntityStore.refreshMyEntityList()\n        console.log('[AppInit] \u2713 Loaded ' + (myEntityStore.myEntityList?.length || 0) + ' my entities')\n    } else {\n        console.log('[AppInit] \u21b7 My entities already loaded (' + myEntityStore.myEntityList.length + ')')\n    }\n}\n\nasync function forceLoadMyEntity() {\n    console.log('[AppInit] Reloading my entities...')\n    await myEntityStore.refreshMyEntityList()\n    console.log('[AppInit] \u2713 Reloaded ' + (myEntityStore.myEntityList?.length || 0) + ' my entities')\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"2-add-to-promiseall",children:"2. Add to Promise.all()"}),"\n",(0,a.jsx)(n.p,{children:"In both 'initializeAppData()' and 'reloadAppData()':"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"await Promise.all([\n    loadRegisters(),\n    loadSchemas(),\n    loadOrganisations(),\n    loadApplications(),\n    loadViews(),\n    loadAgents(),\n    loadSources(),\n    loadMyEntity(),  // Add your new loader here\n])\n"})}),"\n",(0,a.jsx)(n.h3,{id:"3-import-the-store",children:"3. Import the store"}),"\n",(0,a.jsx)(n.p,{children:"At the top of the file:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"import { \n    registerStore,\n    schemaStore,\n    organisationStore,\n    applicationStore,\n    viewsStore,\n    agentStore,\n    sourceStore,\n    myEntityStore,  // Add your new store\n} from '../store/store.js'\n"})}),"\n",(0,a.jsx)(n.h2,{id:"when-not-to-hot-load",children:"When NOT to Hot-Load"}),"\n",(0,a.jsx)(n.p,{children:"Don't hot-load entities that are:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Large datasets"}),": Entities with thousands of items (use pagination/search instead)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Rarely used"}),": Data only needed in specific, infrequently accessed features"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"User-specific"}),": Data that varies by user context (may cause conflicts)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Dynamic"}),": Data that changes frequently and needs real-time updates"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,a.jsx)(n.p,{children:"The initialization service is designed to be resilient:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Non-blocking"}),": Errors don't prevent the application from loading"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Logged"}),": All errors are logged to the console with '[AppInit]' prefix"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Graceful Degradation"}),": If one entity fails to load, others still proceed"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Retry Logic"}),": Components can still trigger individual refreshes if needed"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.h3,{id:"data-not-loading",children:"Data Not Loading"}),"\n",(0,a.jsx)(n.p,{children:"If data isn't appearing in components:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Check browser console for '[AppInit]' errors"}),"\n",(0,a.jsx)(n.li,{children:"Verify the store has a 'refresh...List()' method"}),"\n",(0,a.jsx)(n.li,{children:"Ensure the store is exported in 'src/store/store.js'"}),"\n",(0,a.jsx)(n.li,{children:"Check API endpoint is accessible (Network tab)"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"slow-initialization",children:"Slow Initialization"}),"\n",(0,a.jsx)(n.p,{children:"If initialization takes longer than 1 second:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Check individual entity load times in console"}),"\n",(0,a.jsx)(n.li,{children:"Investigate slow API endpoints (Network tab)"}),"\n",(0,a.jsx)(n.li,{children:"Consider database indexing for slow queries"}),"\n",(0,a.jsx)(n.li,{children:"Check if data volume is too large for hot-loading"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"cache-issues",children:"Cache Issues"}),"\n",(0,a.jsx)(n.p,{children:"If stale data is being shown:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Individual components can force a refresh"}),"\n",(0,a.jsx)(n.li,{children:"Store update methods should invalidate cache"}),"\n",(0,a.jsx)(n.li,{children:"Consider implementing a 'Refresh All' button for users"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"after-organisation-switch",children:"After Organisation Switch"}),"\n",(0,a.jsx)(n.p,{children:"If data doesn't update after switching organisations:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Verify 'reloadAppData()' is being called"}),"\n",(0,a.jsx)(n.li,{children:"Check console for '[AppInit]' reload messages"}),"\n",(0,a.jsx)(n.li,{children:"Ensure all stores have proper organisation filtering"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 components/       # Reusable Vue components\n\u251c\u2500\u2500 views/           # Page-level Vue components\n\u251c\u2500\u2500 store/           # Pinia stores\n\u2502   \u2514\u2500\u2500 modules/     # Individual store modules\n\u251c\u2500\u2500 services/        # Business logic services\n\u2502   \u2514\u2500\u2500 AppInitializationService.js\n\u251c\u2500\u2500 modals/          # Modal dialogs\n\u251c\u2500\u2500 sidebars/        # Sidebar components\n\u251c\u2500\u2500 entities/        # TypeScript entity definitions\n\u251c\u2500\u2500 router/          # Vue Router configuration\n\u251c\u2500\u2500 App.vue          # Root application component\n\u2514\u2500\u2500 main.js          # Application entry point\n"})}),"\n",(0,a.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/docs/Features/multi-tenancy",children:"Multi-Tenancy Feature"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/docs/development/rbac",children:"RBAC and Multi-Tenancy"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/docs/development/testing",children:"Testing"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/docs/development/Services/styleguide",children:"Component Development"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);