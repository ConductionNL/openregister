"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[1159],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var r=i(96540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}},80969:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"technical/import-export","title":"Import and Export","description":"The OpenRegister application supports importing and exporting data in multiple formats:","source":"@site/docs/technical/import-export.md","sourceDirName":"technical","slug":"/technical/import-export","permalink":"/docs/technical/import-export","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/technical/import-export.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Import/Export Implementation","permalink":"/docs/technical/import-export-implementation"},"next":{"title":"Import Service","permalink":"/docs/technical/import-service"}}');var s=i(74848),t=i(28453);const l={},o="Import and Export",c={},a=[{value:"Import",id:"import",level:2},{value:"Import Methods",id:"import-methods",level:3},{value:"JSON Import",id:"json-import",level:4},{value:"Excel Import",id:"excel-import",level:4},{value:"CSV Import",id:"csv-import",level:4},{value:"Import Parameters",id:"import-parameters",level:3},{value:"File Format Specifications",id:"file-format-specifications",level:3},{value:"JSON Format",id:"json-format",level:4},{value:"Excel Format",id:"excel-format",level:4},{value:"CSV Format",id:"csv-format",level:4},{value:"Import Process",id:"import-process",level:3},{value:"Response Format",id:"response-format",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Export",id:"export",level:2},{value:"Export Methods",id:"export-methods",level:3},{value:"JSON Export",id:"json-export",level:4},{value:"Excel Export",id:"excel-export",level:4},{value:"CSV Export",id:"csv-export",level:4},{value:"Export Parameters",id:"export-parameters",level:3},{value:"Export Process",id:"export-process",level:3},{value:"Error Handling",id:"error-handling-1",level:3},{value:"Best Practices",id:"best-practices",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"import-and-export",children:"Import and Export"})}),"\n",(0,s.jsx)(n.p,{children:"The OpenRegister application supports importing and exporting data in multiple formats:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"JSON for configuration data"}),"\n",(0,s.jsx)(n.li,{children:"Excel (.xlsx) for bulk data"}),"\n",(0,s.jsx)(n.li,{children:"CSV for simple data"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"import",children:"Import"}),"\n",(0,s.jsxs)(n.p,{children:["The import functionality is handled by the ",(0,s.jsx)(n.code,{children:"ImportService"})," class, which provides methods for different file formats."]}),"\n",(0,s.jsx)(n.h3,{id:"import-methods",children:"Import Methods"}),"\n",(0,s.jsx)(n.h4,{id:"json-import",children:"JSON Import"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function importFromJson(string $jsonData, ?Register $register = null, ?Schema $schema = null): array\n"})}),"\n",(0,s.jsx)(n.h4,{id:"excel-import",children:"Excel Import"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function importFromExcel(string $filePath, ?Register $register = null, ?Schema $schema = null): array\n"})}),"\n",(0,s.jsx)(n.h4,{id:"csv-import",children:"CSV Import"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function importFromCsv(string $filePath, ?Register $register = null, ?Schema $schema = null): array\n"})}),"\n",(0,s.jsx)(n.h3,{id:"import-parameters",children:"Import Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"filePath"})," (string): Path to the file to import"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"register"})," (Register|null): Optional register to associate with imported objects"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"schema"})," (Schema|null): Optional schema to associate with imported objects"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"file-format-specifications",children:"File Format Specifications"}),"\n",(0,s.jsx)(n.h4,{id:"json-format",children:"JSON Format"}),"\n",(0,s.jsx)(n.p,{children:"The import JSON should follow this structure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "schemas": [\n    {\n      "name": "string",\n      "description": "string",\n      "fields": [\n        {\n          "name": "string",\n          "type": "string",\n          "required": boolean,\n          "description": "string"\n        }\n      ],\n      "metadata": {\n        // Additional schema metadata\n      }\n    }\n  ],\n  "objects": [\n    {\n      "name": "string",\n      "schema": "string",\n      "data": {\n        // Object data matching schema fields\n      },\n      "metadata": {\n        // Additional object metadata\n      }\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"excel-format",children:"Excel Format"}),"\n",(0,s.jsx)(n.p,{children:"Excel files should follow these guidelines:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"First row contains headers matching schema properties"}),"\n",(0,s.jsx)(n.li,{children:"Each subsequent row represents an object"}),"\n",(0,s.jsx)(n.li,{children:"Multiple sheets can be used for different schemas"}),"\n",(0,s.jsx)(n.li,{children:"Sheet names should match schema names"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"csv-format",children:"CSV Format"}),"\n",(0,s.jsx)(n.p,{children:"CSV files should follow these guidelines:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"First row contains headers matching schema properties"}),"\n",(0,s.jsx)(n.li,{children:"Each subsequent row represents an object"}),"\n",(0,s.jsx)(n.li,{children:"Uses comma as delimiter"}),"\n",(0,s.jsx)(n.li,{children:"Uses double quotes for text fields"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"import-process",children:"Import Process"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"File Validation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Validates file format and structure"}),"\n",(0,s.jsx)(n.li,{children:"Checks for required fields"}),"\n",(0,s.jsx)(n.li,{children:"Verifies schema references"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Data Processing"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reads data from file"}),"\n",(0,s.jsx)(n.li,{children:"Maps fields to schema properties"}),"\n",(0,s.jsx)(n.li,{children:"Validates data types and constraints"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Object Creation/Update"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Creates new objects or updates existing ones"}),"\n",(0,s.jsx)(n.li,{children:"Maintains object relationships"}),"\n",(0,s.jsx)(n.li,{children:"Preserves metadata"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"response-format",children:"Response Format"}),"\n",(0,s.jsx)(n.p,{children:"The import operation returns an array with the following structure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "message": "Import successful",\n  "summary": {\n    "created": [ { "action": "created", "timestamp": "...", ... } ],    // Log entries for newly created objects\n    "updated": [ { "action": "updated", "timestamp": "...", ... } ],    // Log entries for updated objects\n    "unchanged": [ { "action": "unchanged", "timestamp": "...", ... } ] // Log entries for unchanged objects\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:'Each entry in "created", "updated", and "unchanged" is a log array (see "lastLog" property on ObjectEntity). The "lastLog" property is set at runtime and is not persisted in the database.'}),"\n",(0,s.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.p,{children:"The import process includes strict validation and will throw exceptions in the following cases:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"JsonException"}),": When the provided JSON data is invalid"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"InvalidArgumentException"}),": When the file structure is invalid or required fields are missing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"RuntimeException"}),": When file processing fails"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"export",children:"Export"}),"\n",(0,s.jsxs)(n.p,{children:["The export functionality is handled by the ",(0,s.jsx)(n.code,{children:"ExportService"})," class, which provides methods for different file formats."]}),"\n",(0,s.jsx)(n.h3,{id:"export-methods",children:"Export Methods"}),"\n",(0,s.jsx)(n.h4,{id:"json-export",children:"JSON Export"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function exportToJson(Register $register, bool $includeObjects = false): string\n"})}),"\n",(0,s.jsx)(n.h4,{id:"excel-export",children:"Excel Export"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function exportToExcel(Register $register, bool $includeObjects = false): Spreadsheet\n"})}),"\n",(0,s.jsx)(n.h4,{id:"csv-export",children:"CSV Export"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"public function exportToCsv(Register $register, bool $includeObjects = false): string\n"})}),"\n",(0,s.jsx)(n.h3,{id:"export-parameters",children:"Export Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"register"})," (Register): The register to export"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"includeObjects"})," (boolean): Whether to include objects in the export"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"export-process",children:"Export Process"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Data Collection"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Retrieves register data"}),"\n",(0,s.jsx)(n.li,{children:"Optionally includes associated objects"}),"\n",(0,s.jsx)(n.li,{children:"Gathers metadata and relationships"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Format Conversion"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Converts data to target format"}),"\n",(0,s.jsx)(n.li,{children:"Maintains data structure"}),"\n",(0,s.jsx)(n.li,{children:"Preserves relationships"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"File Generation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Creates file in requested format"}),"\n",(0,s.jsx)(n.li,{children:"Includes all necessary data"}),"\n",(0,s.jsx)(n.li,{children:"Maintains data integrity"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"error-handling-1",children:"Error Handling"}),"\n",(0,s.jsx)(n.p,{children:"The export process will throw exceptions in the following cases:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"RuntimeException"}),": When file generation fails"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"InvalidArgumentException"}),": When invalid parameters are provided"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Data Validation"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Validate data before import"}),"\n",(0,s.jsx)(n.li,{children:"Check file format and structure"}),"\n",(0,s.jsx)(n.li,{children:"Verify schema compatibility"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Implement proper error handling"}),"\n",(0,s.jsx)(n.li,{children:"Provide meaningful error messages"}),"\n",(0,s.jsx)(n.li,{children:"Log import/export operations"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Performance"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use batch processing for large files"}),"\n",(0,s.jsx)(n.li,{children:"Implement proper memory management"}),"\n",(0,s.jsx)(n.li,{children:"Consider using streaming for large exports"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Security"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Validate file types"}),"\n",(0,s.jsx)(n.li,{children:"Sanitize input data"}),"\n",(0,s.jsx)(n.li,{children:"Implement proper access control"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);