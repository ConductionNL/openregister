"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[9028],{28453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>o});var i=s(96540);const a={},r=i.createContext(a);function t(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:t(n.components),i.createElement(r.Provider,{value:e},n.children)}},54472:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"api/organisations","title":"Organisation API Endpoints","description":"The Organisation API provides comprehensive multi-tenancy management capabilities, enabling users to create, manage, and interact with organisations within OpenRegister.","source":"@site/docs/api/organisations.md","sourceDirName":"api","slug":"/api/organisations","permalink":"/docs/api/organisations","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/api/organisations.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Objects API","permalink":"/docs/api/objects"},"next":{"title":"schemas","permalink":"/docs/api/schemas"}}');var a=s(74848),r=s(28453);const t={},o="Organisation API Endpoints",d={},c=[{value:"Authentication",id:"authentication",level:2},{value:"Core Endpoints",id:"core-endpoints",level:2},{value:"List User Organizations",id:"list-user-organizations",level:3},{value:"Create Organisation",id:"create-organisation",level:3},{value:"Get Organisation Details",id:"get-organisation-details",level:3},{value:"Update Organisation",id:"update-organisation",level:3},{value:"Active Organisation Management",id:"active-organisation-management",level:2},{value:"Get Active Organisation",id:"get-active-organisation",level:3},{value:"Set Active Organisation",id:"set-active-organisation",level:3},{value:"User-Organisation Relationships",id:"user-organisation-relationships",level:2},{value:"Join Organisation",id:"join-organisation",level:3},{value:"Leave Organisation",id:"leave-organisation",level:3},{value:"Search and Discovery",id:"search-and-discovery",level:2},{value:"Search Organisations",id:"search-organisations",level:3},{value:"System Management",id:"system-management",level:2},{value:"Organisation Statistics",id:"organisation-statistics",level:3},{value:"Clear Organisation Cache",id:"clear-organisation-cache",level:3},{value:"Entity Organisation Context",id:"entity-organisation-context",level:2},{value:"Register Creation Example",id:"register-creation-example",level:3},{value:"Schema Creation Example",id:"schema-creation-example",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Common Error Codes",id:"common-error-codes",level:3},{value:"Error Response Format",id:"error-response-format",level:3},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Access Control",id:"access-control",level:3},{value:"Data Isolation",id:"data-isolation",level:3},{value:"Audit Trails",id:"audit-trails",level:3}];function l(n){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"organisation-api-endpoints",children:"Organisation API Endpoints"})}),"\n",(0,a.jsx)(e.p,{children:"The Organisation API provides comprehensive multi-tenancy management capabilities, enabling users to create, manage, and interact with organisations within OpenRegister."}),"\n",(0,a.jsx)(e.h2,{id:"authentication",children:"Authentication"}),"\n",(0,a.jsx)(e.p,{children:"All organisation endpoints require authentication. Include the following headers with your requests:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-http",children:"Authorization: Basic <base64-encoded-credentials>\nOCS-APIREQUEST: true\nContent-Type: application/json\n"})}),"\n",(0,a.jsx)(e.h2,{id:"core-endpoints",children:"Core Endpoints"}),"\n",(0,a.jsx)(e.h3,{id:"list-user-organizations",children:"List User Organizations"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"GET"})," ",(0,a.jsx)(e.code,{children:"/api/organisations"})]}),"\n",(0,a.jsx)(e.p,{children:"Returns all organisations the authenticated user belongs to, including the currently active organisation."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'total': 3,\n  'active': {\n    'id': 2,\n    'uuid': 'e6d272630b866cad2dee3aa3ac879281',\n    'name': 'ACME Corporation',\n    'description': 'Test organisation for ACME Inc.',\n    'users': ['admin'],\n    'userCount': 1,\n    'isDefault': false,\n    'owner': 'admin',\n    'created': '2025-07-21T21:24:26+00:00',\n    'updated': '2025-07-21T21:24:26+00:00'\n  },\n  'list': [\n    {\n      'id': 2,\n      'uuid': 'e6d272630b866cad2dee3aa3ac879281',\n      'name': 'ACME Corporation',\n      'description': 'Test organisation for ACME Inc.',\n      'users': ['admin'],\n      'userCount': 1,\n      'isDefault': false,\n      'owner': 'admin',\n      'created': '2025-07-21T21:24:26+00:00',\n      'updated': '2025-07-21T21:24:26+00:00'\n    }\n  ]\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     'http://localhost/index.php/apps/openregister/api/organisations'\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"create-organisation",children:"Create Organisation"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"POST"})," ",(0,a.jsx)(e.code,{children:"/api/organisations"})]}),"\n",(0,a.jsx)(e.p,{children:"Creates a new organisation and automatically adds the authenticated user as the owner and first member."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Request Body:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'name': 'Organization Name',\n  'description': 'Organization description'\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Required Fields:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"name"})," (string): Organisation name (required, non-empty)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"description"})," (string, optional): Organisation description"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'message': 'Organisation created successfully',\n  'organisation': {\n    'id': 5,\n    'uuid': '55ebf05fce0a58e42ab0fc989c09c9e7',\n    'name': 'Organization Name',\n    'description': 'Organization description',\n    'users': ['admin'],\n    'userCount': 1,\n    'isDefault': false,\n    'owner': 'admin',\n    'created': '2025-07-21T21:30:03+00:00',\n    'updated': '2025-07-21T21:30:03+00:00'\n  }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     -H 'Content-Type: application/json' \\\n     -X POST \\\n     -d '{'name': 'API Test Corp', 'description': 'Testing organisation creation via API'}' \\\n     'http://localhost/index.php/apps/openregister/api/organisations'\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Error Responses:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"400 Bad Request"}),": ",(0,a.jsx)(e.code,{children:"{'error': 'Organisation name is required'}"})," when name is empty"]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"get-organisation-details",children:"Get Organisation Details"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"GET"})," ",(0,a.jsx)(e.code,{children:"/api/organisations/{uuid}"})]}),"\n",(0,a.jsx)(e.p,{children:"Retrieves details for a specific organisation by UUID. User must be a member of the organisation."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"uuid"})," (string): The UUID of the organisation"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'organisation': {\n    'id': 5,\n    'uuid': '55ebf05fce0a58e42ab0fc989c09c9e7',\n    'name': 'Organization Name',\n    'description': 'Organization description',\n    'users': ['admin'],\n    'userCount': 1,\n    'isDefault': false,\n    'owner': 'admin',\n    'created': '2025-07-21T21:30:03+00:00',\n    'updated': '2025-07-21T21:30:03+00:00'\n  }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     'http://localhost/index.php/apps/openregister/api/organisations/55ebf05fce0a58e42ab0fc989c09c9e7'\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Error Responses:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"404 Not Found"}),": ",(0,a.jsx)(e.code,{children:"{'error': 'Access denied to this organisation'}"})," when user doesn't belong to organisation or organisation doesn't exist"]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"update-organisation",children:"Update Organisation"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"PUT"})," ",(0,a.jsx)(e.code,{children:"/api/organisations/{uuid}"})]}),"\n",(0,a.jsx)(e.p,{children:"Updates an existing organisation's details. User must be a member of the organisation."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"uuid"})," (string): The UUID of the organisation"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Request Body:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'name': 'Updated Organization Name',\n  'description': 'Updated organization description'\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'message': 'Organisation updated successfully',\n  'organisation': {\n    'id': 5,\n    'uuid': '55ebf05fce0a58e42ab0fc989c09c9e7',\n    'name': 'Updated Organization Name',\n    'description': 'Updated organization description',\n    'users': ['admin'],\n    'userCount': 1,\n    'isDefault': false,\n    'owner': 'admin',\n    'created': '2025-07-21T21:30:03+00:00',\n    'updated': '2025-07-21T21:30:26+00:00'\n  }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     -H 'Content-Type: application/json' \\\n     -X PUT \\\n     -d '{'name': 'Updated API Test Corp', 'description': 'Updated description for testing'}' \\\n     'http://localhost/index.php/apps/openregister/api/organisations/55ebf05fce0a58e42ab0fc989c09c9e7'\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"active-organisation-management",children:"Active Organisation Management"}),"\n",(0,a.jsx)(e.h3,{id:"get-active-organisation",children:"Get Active Organisation"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"GET"})," ",(0,a.jsx)(e.code,{children:"/api/organisations/active"})]}),"\n",(0,a.jsx)(e.p,{children:"Returns the currently active organisation for the authenticated user's session."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'activeOrganisation': {\n    'id': 2,\n    'uuid': 'e6d272630b866cad2dee3aa3ac879281',\n    'name': 'ACME Corporation',\n    'description': 'Test organisation for ACME Inc.',\n    'users': ['admin'],\n    'userCount': 1,\n    'isDefault': false,\n    'owner': 'admin',\n    'created': '2025-07-21T21:24:26+00:00',\n    'updated': '2025-07-21T21:24:26+00:00'\n  }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     'http://localhost/index.php/apps/openregister/api/organisations/active'\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"set-active-organisation",children:"Set Active Organisation"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"POST"})," ",(0,a.jsx)(e.code,{children:"/api/organisations/{uuid}/set-active"})]}),"\n",(0,a.jsx)(e.p,{children:"Sets the specified organisation as the active organisation for the user's session. User must be a member of the organisation."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"uuid"})," (string): The UUID of the organisation to set as active"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'message': 'Active organisation set successfully',\n  'activeOrganisation': {\n    'id': 5,\n    'uuid': '55ebf05fce0a58e42ab0fc989c09c9e7',\n    'name': 'Updated API Test Corp',\n    'description': 'Updated description for testing',\n    'users': ['admin'],\n    'userCount': 1,\n    'isDefault': false,\n    'owner': 'admin',\n    'created': '2025-07-21T21:30:03+00:00',\n    'updated': '2025-07-21T21:30:26+00:00'\n  }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     -X POST \\\n     'http://localhost/index.php/apps/openregister/api/organisations/55ebf05fce0a58e42ab0fc989c09c9e7/set-active'\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Error Responses:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"404 Not Found"}),": ",(0,a.jsx)(e.code,{children:"{'error': 'User does not belong to this organisation'}"})," when user is not a member"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"404 Not Found"}),": ",(0,a.jsx)(e.code,{children:"{'error': 'Organisation not found'}"})," when organisation doesn't exist"]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"user-organisation-relationships",children:"User-Organisation Relationships"}),"\n",(0,a.jsx)(e.h3,{id:"join-organisation",children:"Join Organisation"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"POST"})," ",(0,a.jsx)(e.code,{children:"/api/organisations/{uuid}/join"})]}),"\n",(0,a.jsx)(e.p,{children:"Adds a user to the specified organisation. By default, adds the authenticated user, but can optionally add a different user by providing a userId in the request body."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"uuid"})," (string): The UUID of the organisation to join"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Request Body (Optional):"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'userId': 'username'\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Optional Fields:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"userId"})," (string, optional): The user ID to add to the organisation. If not provided, the authenticated user is added."]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'message': 'Successfully joined organisation'\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Examples:"})}),"\n",(0,a.jsx)(e.p,{children:"Join organisation as current user:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'newuser:password' \\\n     -H 'OCS-APIREQUEST: true' \\\n     -X POST \\\n     'http://localhost/index.php/apps/openregister/api/organisations/55ebf05fce0a58e42ab0fc989c09c9e7/join'\n"})}),"\n",(0,a.jsx)(e.p,{children:"Join organisation on behalf of another user:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:password' \\\n     -H 'OCS-APIREQUEST: true' \\\n     -H 'Content-Type: application/json' \\\n     -X POST \\\n     -d '{'userId': 'specificuser'}' \\\n     'http://localhost/index.php/apps/openregister/api/organisations/55ebf05fce0a58e42ab0fc989c09c9e7/join'\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Error Responses:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"404 Not Found"}),": ",(0,a.jsx)(e.code,{children:"{'error': 'Organisation not found'}"})," when organisation doesn't exist"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"400 Bad Request"}),": ",(0,a.jsx)(e.code,{children:"{'error': 'User already belongs to this organisation'}"})," when user is already a member"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"404 Not Found"}),": ",(0,a.jsx)(e.code,{children:"{'error': 'Target user not found'}"})," when specified userId does not exist"]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"leave-organisation",children:"Leave Organisation"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"POST"})," ",(0,a.jsx)(e.code,{children:"/api/organisations/{uuid}/leave"})]}),"\n",(0,a.jsx)(e.p,{children:"Removes the authenticated user from the specified organisation."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Path Parameters:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"uuid"})," (string): The UUID of the organisation to leave"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'message': 'Successfully left organisation',\n  'organisation': {\n    'id': 5,\n    'uuid': '55ebf05fce0a58e42ab0fc989c09c9e7',\n    'name': 'Organization Name',\n    'description': 'Organization description',\n    'users': ['admin'],\n    'userCount': 1,\n    'isDefault': false,\n    'owner': 'admin',\n    'created': '2025-07-21T21:30:03+00:00',\n    'updated': '2025-07-21T21:30:26+00:00'\n  }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'someuser:password' \\\n     -H 'OCS-APIREQUEST: true' \\\n     -X POST \\\n     'http://localhost/index.php/apps/openregister/api/organisations/55ebf05fce0a58e42ab0fc989c09c9e7/leave'\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Error Responses:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"404 Not Found"}),": ",(0,a.jsx)(e.code,{children:"{'error': 'User does not belong to this organisation'}"})," when user is not a member"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"400 Bad Request"}),": ",(0,a.jsx)(e.code,{children:"{'error': 'Cannot leave organisation - this is your only organisation'}"})," when it's the user's last organisation"]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"search-and-discovery",children:"Search and Discovery"}),"\n",(0,a.jsx)(e.h3,{id:"search-organisations",children:"Search Organisations"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"GET"})," ",(0,a.jsx)(e.code,{children:"/api/organisations/search"})]}),"\n",(0,a.jsx)(e.p,{children:"Searches organisations by name. Returns all organisations when query is empty, or filtered organisations matching the search term."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Query Parameters:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"query"})," (string, optional): Search term to filter organisations by name. If empty, returns all organisations."]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'organisations': [\n    {\n      'id': 2,\n      'uuid': 'e6d272630b866cad2dee3aa3ac879281',\n      'name': 'ACME Corporation',\n      'description': 'Test organisation for ACME Inc.',\n      'userCount': 1,\n      'isDefault': false,\n      'created': '2025-07-21T21:24:26+00:00',\n      'updated': '2025-07-21T21:24:26+00:00'\n    }\n  ]\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Examples:"})}),"\n",(0,a.jsx)(e.p,{children:"Search for specific organisations:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     'http://localhost/index.php/apps/openregister/api/organisations/search?query=ACME'\n"})}),"\n",(0,a.jsx)(e.p,{children:"Get all organisations:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     'http://localhost/index.php/apps/openregister/api/organisations/search'\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"system-management",children:"System Management"}),"\n",(0,a.jsx)(e.h3,{id:"organisation-statistics",children:"Organisation Statistics"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"GET"})," ",(0,a.jsx)(e.code,{children:"/api/organisations/stats"})]}),"\n",(0,a.jsx)(e.p,{children:"Returns system-wide organisation statistics."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'statistics': {\n    'total': 5,\n    'default': 1,\n    'custom': 4\n  }\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     'http://localhost/index.php/apps/openregister/api/organisations/stats'\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h3,{id:"clear-organisation-cache",children:"Clear Organisation Cache"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"POST"})," ",(0,a.jsx)(e.code,{children:"/api/organisations/clear-cache"})]}),"\n",(0,a.jsx)(e.p,{children:"Clears the organisation cache for performance optimization. Useful for debugging or when organisation data has been updated externally."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response Format:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'message': 'Cache cleared successfully'\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Usage Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -u 'admin:admin' \\\n     -H 'OCS-APIREQUEST: true' \\\n     -X POST \\\n     'http://localhost/index.php/apps/openregister/api/organisations/clear-cache'\n"})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"entity-organisation-context",children:"Entity Organisation Context"}),"\n",(0,a.jsx)(e.p,{children:"When creating registers, schemas, or objects, they are automatically assigned to the user's currently active organisation. The organisation UUID will be included in the entity's response:"}),"\n",(0,a.jsx)(e.h3,{id:"register-creation-example",children:"Register Creation Example"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'id': 9,\n  'uuid': '51364151-d9d1-4045-9add-ad3182e83ab8',\n  'title': 'Customer Database',\n  'description': 'Customer records for ACME Corp',\n  'organisation': 'e6d272630b866cad2dee3aa3ac879281',\n  ...\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"schema-creation-example",children:"Schema Creation Example"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'id': 52,\n  'uuid': '8e61f403-284d-4579-93f4-442ef93f6ed7',\n  'title': 'Customer Schema',\n  'description': 'Schema for customer records',\n  'organisation': 'e6d272630b866cad2dee3aa3ac879281',\n  ...\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,a.jsx)(e.p,{children:"All organisation endpoints return consistent error responses:"}),"\n",(0,a.jsx)(e.h3,{id:"common-error-codes",children:"Common Error Codes"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"400 Bad Request"}),": Invalid input or business rule violation"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"401 Unauthorized"}),": Authentication required"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"404 Not Found"}),": Resource not found or access denied"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"500 Internal Server Error"}),": Server error"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"error-response-format",children:"Error Response Format"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:"{\n  'error': 'Error message describing the issue'\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,a.jsx)(e.p,{children:"The organisation API includes built-in rate limiting to prevent abuse:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Organisation Creation"}),": Maximum 10 organisations per user per hour"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Join/Leave Operations"}),": Maximum 50 operations per user per hour"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Search Operations"}),": Maximum 100 searches per user per minute"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Cache Clear"}),": Maximum 10 cache clears per user per hour"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Rate limit headers are included in responses:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-http",children:"X-RateLimit-Limit: 10\nX-RateLimit-Remaining: 7\nX-RateLimit-Reset: 1642781234\n"})}),"\n",(0,a.jsx)(e.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,a.jsx)(e.h3,{id:"access-control",children:"Access Control"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Users can only access organisations they belong to"}),"\n",(0,a.jsx)(e.li,{children:"Organisation creation automatically makes the user the owner"}),"\n",(0,a.jsx)(e.li,{children:"Cross-organisation access is prevented at the API level"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"data-isolation",children:"Data Isolation"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"All API responses are filtered by organisation membership"}),"\n",(0,a.jsx)(e.li,{children:"Database queries include organisation context filtering"}),"\n",(0,a.jsx)(e.li,{children:"Session-based active organisation prevents data leakage"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"audit-trails",children:"Audit Trails"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"All organisation operations are logged with user and organisation context"}),"\n",(0,a.jsx)(e.li,{children:"Organisation membership changes are tracked in audit logs"}),"\n",(0,a.jsx)(e.li,{children:"Failed access attempts are logged for security monitoring"}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsxs)(e.em,{children:["For comprehensive implementation details, see ",(0,a.jsx)(e.a,{href:"/docs/Features/multi-tenancy",children:"Multi-Tenancy Technical Documentation"})]}),"\n",(0,a.jsxs)(e.em,{children:["For testing information, see ",(0,a.jsx)(e.a,{href:"/docs/technical/multi-tenancy-testing",children:"Multi-Tenancy Testing Framework"})]})]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(l,{...n})}):l(n)}}}]);