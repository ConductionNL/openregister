"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[8192],{28453:(e,r,i)=>{i.d(r,{R:()=>a,x:()=>l});var n=i(96540);const s={},t=n.createContext(s);function a(e){const r=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(t.Provider,{value:r},e.children)}},57536:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"Features/enhanced-validation-errors","title":"Enhanced Validation Errors","description":"Improved validation error messages for better user experience","source":"@site/docs/Features/enhanced-validation-errors.md","sourceDirName":"Features","slug":"/Features/enhanced-validation-errors","permalink":"/docs/Features/enhanced-validation-errors","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Features/enhanced-validation-errors.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"title":"Enhanced Validation Errors","sidebar_position":8,"description":"Improved validation error messages for better user experience","keywords":["Open Register","Validation","Error Messages","User Experience"]},"sidebar":"tutorialSidebar","previous":{"title":"Acces Control","permalink":"/docs/Features/access-control"},"next":{"title":"Organisations","permalink":"/docs/Features/organisations"}}');var s=i(74848),t=i(28453);const a={title:"Enhanced Validation Errors",sidebar_position:8,description:"Improved validation error messages for better user experience",keywords:["Open Register","Validation","Error Messages","User Experience"]},l="Enhanced Validation Errors",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Key Benefits",id:"key-benefits",level:2},{value:"Problem",id:"problem",level:2},{value:"Error Flow Comparison",id:"error-flow-comparison",level:3},{value:"Solution",id:"solution",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Simplified Validation Flow",id:"simplified-validation-flow",level:3},{value:"Built-in Error Formatting",id:"built-in-error-formatting",level:3},{value:"Integration",id:"integration",level:3},{value:"Key Improvement: Built-in generateErrorMessage()",id:"key-improvement-built-in-generateerrormessage",level:3},{value:"Error Response Structure",id:"error-response-structure",level:3},{value:"Real-World API Response Examples",id:"real-world-api-response-examples",level:3},{value:"Benefits",id:"benefits",level:2},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Compatibility with Opis JsonSchema 2.3.0",id:"compatibility-with-opis-jsonschema-230",level:3},{value:"Files Changed",id:"files-changed",level:2},{value:"Modified Files",id:"modified-files",level:3},{value:"Approach Benefits",id:"approach-benefits",level:3}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"enhanced-validation-errors",children:"Enhanced Validation Errors"})}),"\n",(0,s.jsx)(r.p,{children:"OpenRegister provides clear, actionable validation error messages that help users quickly identify and fix issues when creating or updating objects."}),"\n",(0,s.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(r.p,{children:"When objects fail validation against their schema, OpenRegister returns detailed error messages that specify exactly what needs to be fixed, rather than generic error codes or unclear messages."}),"\n",(0,s.jsx)(r.h2,{id:"key-benefits",children:"Key Benefits"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Clear Messages"}),": Users know exactly which properties have issues"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Actionable Feedback"}),": Error messages explain what needs to be fixed"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Faster Development"}),": Developers can quickly identify validation problems"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Better API Integration"}),": Clear error responses help with API integration"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Reduced Support"}),": Fewer questions about unclear error messages"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"problem",children:"Problem"}),"\n",(0,s.jsx)(r.p,{children:"Previously, when validation failed, users would receive generic error messages like:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"The required properties ({missing}) are missing"})}),"\n",(0,s.jsx)(r.li,{children:"'Invalid object'"}),"\n",(0,s.jsx)(r.li,{children:"Generic type mismatch errors"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"These messages didn't tell users exactly which properties were missing or what the specific validation issues were."}),"\n",(0,s.jsx)(r.h3,{id:"error-flow-comparison",children:"Error Flow Comparison"}),"\n",(0,s.jsx)(r.mermaid,{value:'graph TD\n    A[Object Validation] --\x3e B{Validation Result}\n    \n    subgraph "Before: Generic Messages"\n        B --\x3e C[Opis Error Message]\n        C --\x3e D["The required properties ({missing}) are missing"]\n        D --\x3e E[Confused User]\n    end\n    \n    subgraph "After: Clear Messages"\n        B --\x3e F[Enhanced Error Processing]\n        F --\x3e G["The required property \'title\' is missing"]\n        G --\x3e H[User Knows What to Fix]\n    end'}),"\n",(0,s.jsx)(r.h2,{id:"solution",children:"Solution"}),"\n",(0,s.jsxs)(r.p,{children:["A streamlined approach that enhances validation error messages directly within the existing ",(0,s.jsx)(r.code,{children:"ValidateObject"})," service, requiring no additional dependencies or complex configuration."]}),"\n",(0,s.jsx)(r.h2,{id:"implementation",children:"Implementation"}),"\n",(0,s.jsx)(r.h3,{id:"simplified-validation-flow",children:"Simplified Validation Flow"}),"\n",(0,s.jsx)(r.p,{children:"The enhanced validation system works through a streamlined approach without additional dependencies:"}),"\n",(0,s.jsx)(r.mermaid,{value:"sequenceDiagram\n    participant User\n    participant ObjectService\n    participant ValidateObject\n    participant OpisValidator as Opis JsonSchema\n    \n    User->>ObjectService: Create/Update Object\n    ObjectService->>ValidateObject: validateObject()\n    ValidateObject->>OpisValidator: validate()\n    OpisValidator--\x3e>ValidateObject: ValidationResult\n    \n    alt Validation Failed\n        ValidateObject->>ValidateObject: generateErrorMessage()\n        Note over ValidateObject: Built-in error formatting logic\n        ValidateObject--\x3e>ObjectService: Meaningful Error Message\n        ObjectService->>ObjectService: throw ValidationException(meaningfulMessage)\n        ObjectService--\x3e>User: Clear Error Response\n    else Validation Passed\n        ValidateObject--\x3e>ObjectService: Valid Result\n        ObjectService--\x3e>User: Success Response\n    end"}),"\n",(0,s.jsx)(r.h3,{id:"built-in-error-formatting",children:"Built-in Error Formatting"}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"ValidateObject"})," class now includes built-in error formatting methods that provide detailed error messages for various validation scenarios:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Required Properties"}),": 'The required property email is missing'"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Type Mismatches"}),": 'Property age should be of type integer but is string'"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Format Validation"}),": 'Property email should match the format email but the value invalid-email does not'"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Length Constraints"}),": 'Property name should have at least 3 characters, but has 1'"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Value Ranges"}),": 'Property age should be at least 18, but is 16'"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Enum Values"}),": 'Property status should be one of: active, inactive, pending, but is deleted'"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"integration",children:"Integration"}),"\n",(0,s.jsx)(r.p,{children:"The enhanced error formatting is automatically used throughout the validation system through a simple, streamlined approach:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"ValidateObject Handler"}),": Contains built-in error formatting logic in the ",(0,s.jsx)(r.code,{children:"generateErrorMessage()"})," method"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"ObjectService"}),": Updated to use meaningful error messages instead of generic Opis messages"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Error Response"}),": Provides both summary and detailed error information"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"No Additional Dependencies"}),": No need for separate classes or dependency injection"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"key-improvement-built-in-generateerrormessage",children:"Key Improvement: Built-in generateErrorMessage()"}),"\n",(0,s.jsxs)(r.p,{children:["The solution was simplified by implementing the error formatting logic directly in the ",(0,s.jsx)(r.code,{children:"ValidateObject"})," class. This method:"]}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Intercepts Generic Messages"}),": Catches the generic Opis error messages before they reach the user"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Built-in Formatting"}),": Processes validation errors through built-in formatting logic"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Returns Clear Messages"}),": Provides specific, actionable error messages"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Maintains Context"}),": Preserves all technical details for debugging while presenting user-friendly messages"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Zero Dependencies"}),": No additional classes or configuration needed"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Before (in ObjectService.php):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"if ($result->isValid() === false) {\n    throw new ValidationException($result->error()->message(), errors: $result->error());\n    // Generic message: 'The required properties ({missing}) are missing'\n}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"After (in ObjectService.php):"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"if ($result->isValid() === false) {\n    $meaningfulMessage = $this->validateHandler->generateErrorMessage($result);\n    throw new ValidationException($meaningfulMessage, errors: $result->error());\n    // Clear message: 'The required property title is missing'\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"error-response-structure",children:"Error Response Structure"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:"{\n  'status': 'error',\n  'message': 'Validation failed',\n  'errors': [\n    {\n      'property': 'email',\n      'keyword': 'required',\n      'message': 'The required property 'email' is missing',\n      'value': null,\n      'path': ['email'],\n      'schemaPath': ['required']\n    }\n  ]\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"real-world-api-response-examples",children:"Real-World API Response Examples"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Missing Required Properties:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:"{\n  'status': 'error',\n  'message': 'Validation failed',\n  'errors': [\n    {\n      'property': null,\n      'message': 'The required property 'title' is missing'\n    }\n  ]\n}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Type Mismatch:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:"{\n  'status': 'error', \n  'message': 'Validation failed',\n  'errors': [\n    {\n      'property': 'age',\n      'message': 'Property 'age' should be of type 'integer' but is 'string''\n    }\n  ]\n}\n"})}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Multiple Validation Errors:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-json",children:"{\n  'status': 'error',\n  'message': 'Validation failed', \n  'errors': [\n    {\n      'property': null,\n      'message': 'The required properties (name, email, address) are missing'\n    }\n  ]\n}\n"})}),"\n",(0,s.jsx)(r.h2,{id:"benefits",children:"Benefits"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Improved User Experience"}),": Users get clear, actionable error messages"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Faster Development"}),": Developers can quickly identify validation issues"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Better API Documentation"}),": Clear error responses help with API integration"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Reduced Support"}),": Fewer questions about unclear error messages"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Simple Implementation"}),": No additional dependencies or complex setup"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Maintainable"}),": All logic contained within existing service structure"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,s.jsx)(r.h3,{id:"compatibility-with-opis-jsonschema-230",children:"Compatibility with Opis JsonSchema 2.3.0"}),"\n",(0,s.jsx)(r.p,{children:"The enhanced error formatter was specifically updated to work with Opis JsonSchema version 2.3.0, which has different method signatures compared to newer versions:"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Key API Changes Handled:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Data Path Access"}),": Uses ",(0,s.jsx)(r.code,{children:"$error->data()->fullPath()"})," instead of ",(0,s.jsx)(r.code,{children:"$error->dataPointer()"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Value Access"}),": Uses ",(0,s.jsx)(r.code,{children:"$error->data()->value()"})," instead of direct ",(0,s.jsx)(r.code,{children:"$error->data()"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Error Arguments"}),": Properly accesses validation parameters through ",(0,s.jsx)(r.code,{children:"$error->args()"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Schema Information"}),": Simplified schema path generation to work with available API methods"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Method Mappings:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-php",children:"// Old (incompatible) approach:\n$dataPointer = $error->dataPointer();    // Method doesn't exist in 2.3.0\n$schemaPointer = $error->schemaPointer(); // Method doesn't exist in 2.3.0\n\n// New (compatible) approach:\n$dataPath = $error->data()->fullPath();   // Works with 2.3.0\n$value = $error->data()->value();         // Works with 2.3.0\n$args = $error->args();                   // Works with 2.3.0\n"})}),"\n",(0,s.jsx)(r.h2,{id:"files-changed",children:"Files Changed"}),"\n",(0,s.jsx)(r.h3,{id:"modified-files",children:"Modified Files"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"lib/Service/ObjectHandlers/ValidateObject.php"})," - Added built-in enhanced error formatting methods"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"lib/Service/ObjectService.php"})," - Updated to use meaningful error messages"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"approach-benefits",children:"Approach Benefits"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Simple"}),": No new classes or dependencies required"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Maintainable"}),": All error formatting logic in one place"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Efficient"}),": Direct implementation without additional overhead"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Reliable"}),": Uses existing infrastructure without new injection points"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"This streamlined approach provides all the benefits of enhanced validation error messages while maintaining simplicity and avoiding additional complexity in the codebase."})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);