"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[8705],{28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var s=r(96540);const i={},a=s.createContext(i);function t(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(a.Provider,{value:n},e.children)}},30953:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Features/search-trails","title":"Search Trails","description":"Search trails provide comprehensive logging and analytics for search operations within the OpenRegister application. This feature allows administrators to track, analyze, and optimize search performance across all registers and schemas.","source":"@site/docs/Features/search-trails.md","sourceDirName":"Features","slug":"/Features/search-trails","permalink":"/docs/Features/search-trails","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Features/search-trails.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Multi-Tenancy","permalink":"/docs/Features/multi-tenancy"},"next":{"title":"Vectorization Architecture","permalink":"/docs/Technical/vectorization-architecture"}}');var i=r(74848),a=r(28453);const t={},l="Search Trails",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Automatic Search Logging",id:"automatic-search-logging",level:3},{value:"Analytics Dashboard",id:"analytics-dashboard",level:3},{value:"Advanced Filtering",id:"advanced-filtering",level:3},{value:"Query Complexity Analysis",id:"query-complexity-analysis",level:3},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"GET /api/search-trails",id:"get-apisearch-trails",level:3},{value:"GET /api/search-trails/statistics",id:"get-apisearch-trailsstatistics",level:3},{value:"GET /api/search-trails/popular-terms",id:"get-apisearch-trailspopular-terms",level:3},{value:"GET /api/search-trails/activity",id:"get-apisearch-trailsactivity",level:3},{value:"GET /api/search-trails/register-schema-stats",id:"get-apisearch-trailsregister-schema-stats",level:3},{value:"GET /api/search-trails/user-agent-stats",id:"get-apisearch-trailsuser-agent-stats",level:3},{value:"POST /api/search-trails/cleanup",id:"post-apisearch-trailscleanup",level:3},{value:"Frontend Interface",id:"frontend-interface",level:2},{value:"Search Trail Management",id:"search-trail-management",level:3},{value:"Advanced Filtering",id:"advanced-filtering-1",level:3},{value:"Analytics Dashboard",id:"analytics-dashboard-1",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Retention Policy",id:"retention-policy",level:3},{value:"Privacy Settings",id:"privacy-settings",level:3},{value:"Performance Settings",id:"performance-settings",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Privacy and Security",id:"privacy-and-security",level:3},{value:"Analytics and Reporting",id:"analytics-and-reporting",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Custom Analytics",id:"custom-analytics",level:3},{value:"Custom Reporting",id:"custom-reporting",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Debug Mode",id:"debug-mode",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Future Enhancements",id:"future-enhancements",level:2},{value:"Planned Features",id:"planned-features",level:3},{value:"Integration Possibilities",id:"integration-possibilities",level:3},{value:"Summary",id:"summary",level:2},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Architecture Overview",id:"architecture-overview",level:3},{value:"Search Trail Creation Flow",id:"search-trail-creation-flow",level:3},{value:"Search Trail Data Capture",id:"search-trail-data-capture",level:3},{value:"Statistics Aggregation",id:"statistics-aggregation",level:3},{value:"Cleanup Process",id:"cleanup-process",level:3},{value:"Database Schema",id:"database-schema",level:3},{value:"Code Examples",id:"code-examples",level:3},{value:"Creating a Search Trail",id:"creating-a-search-trail",level:4},{value:"Retrieving Statistics",id:"retrieving-statistics",level:4},{value:"Getting Popular Search Terms",id:"getting-popular-search-terms",level:4},{value:"Activity Analysis",id:"activity-analysis",level:4},{value:"Manual Cleanup",id:"manual-cleanup",level:4},{value:"Query Complexity Classification",id:"query-complexity-classification",level:3},{value:"System Parameter Filtering",id:"system-parameter-filtering",level:3},{value:"Performance Optimizations",id:"performance-optimizations",level:3},{value:"Integration Points",id:"integration-points",level:3},{value:"1. ObjectsController",id:"1-objectscontroller",level:4},{value:"2. Cron Jobs",id:"2-cron-jobs",level:4},{value:"3. Analytics Dashboard",id:"3-analytics-dashboard",level:4},{value:"4. Solr Integration",id:"4-solr-integration",level:4},{value:"Best Practices",id:"best-practices-1",level:3},{value:"Monitoring &amp; Debugging",id:"monitoring--debugging",level:3},{value:"Enable Debug Logging",id:"enable-debug-logging",level:4},{value:"Query Search Trails",id:"query-search-trails",level:4},{value:"Check Table Size",id:"check-table-size",level:4},{value:"Security Considerations",id:"security-considerations",level:3},{value:"Future Enhancements",id:"future-enhancements-1",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"search-trails",children:"Search Trails"})}),"\n",(0,i.jsx)(n.p,{children:"Search trails provide comprehensive logging and analytics for search operations within the OpenRegister application. This feature allows administrators to track, analyze, and optimize search performance across all registers and schemas."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Search trails automatically capture detailed information about every search operation performed in the system, including:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Search terms and parameters"}),"\n",(0,i.jsx)(n.li,{children:"Execution time and performance metrics"}),"\n",(0,i.jsx)(n.li,{children:"Result counts and success rates"}),"\n",(0,i.jsx)(n.li,{children:"User information and session details"}),"\n",(0,i.jsx)(n.li,{children:"Register and schema context"}),"\n",(0,i.jsx)(n.li,{children:"Request metadata and user agent information"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsx)(n.h3,{id:"automatic-search-logging",children:"Automatic Search Logging"}),"\n",(0,i.jsx)(n.p,{children:"Every search operation is automatically logged with:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Search Context"}),": Register, schema, and search terms"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance Metrics"}),": Execution time, result count, and success status"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User Information"}),": User ID, session ID, and IP address"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Request Details"}),": User agent, request method, and timestamp"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),": Complete search parameters excluding sensitive information"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"analytics-dashboard",children:"Analytics Dashboard"}),"\n",(0,i.jsx)(n.p,{children:"The search trails interface provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Comprehensive Statistics"}),": Total searches, results, success rates, and performance metrics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Popular Search Terms"}),": Most frequently used search terms with usage counts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Register/Schema Usage"}),": Search activity breakdown by register and schema"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User Agent Statistics"}),": Browser and client distribution"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Activity Patterns"}),": Search activity over time (hourly, daily, weekly, monthly)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"advanced-filtering",children:"Advanced Filtering"}),"\n",(0,i.jsx)(n.p,{children:"Filter search trails by:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Time Range"}),": From and to dates for specific periods"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Success Status"}),": Successful or failed searches"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User"}),": Specific users or groups"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Register/Schema"}),": Specific registers or schemas"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Search Terms"}),": Specific search terms or patterns"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance"}),": Execution time and result count ranges"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"query-complexity-analysis",children:"Query Complexity Analysis"}),"\n",(0,i.jsx)(n.p,{children:"Search trails categorize queries by complexity:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Simple"}),": Basic term searches with minimal parameters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Medium"}),": Multi-parameter searches with basic filters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Complex"}),": Advanced searches with multiple filters and facets"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"get-apisearch-trails",children:"GET /api/search-trails"}),"\n",(0,i.jsx)(n.p,{children:"Retrieve paginated search trail entries."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"limit"})," (integer): Number of results per page (default: 50)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"offset"})," (integer): Number of results to skip"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"page"})," (integer): Page number"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"search"})," (string): Search term filter"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"register"})," (string): Filter by register ID"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"schema"})," (string): Filter by schema ID"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"user"})," (string): Filter by user"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"success"})," (boolean): Filter by success status"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"dateFrom"})," (datetime): Start date filter"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"dateTo"})," (datetime): End date filter"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"searchTerm"})," (string): Filter by search term"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"executionTimeFrom"})," (integer): Minimum execution time (ms)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"executionTimeTo"})," (integer): Maximum execution time (ms)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"resultCountFrom"})," (integer): Minimum result count"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"resultCountTo"})," (integer): Maximum result count"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Request:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /api/search-trails?limit=20&register=users&success=true\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'results': [\n    {\n      'id': 1,\n      'searchTerm': 'user search',\n      'register': 'users',\n      'schema': 'person',\n      'parameters': {\n        'limit': 20,\n        'filters': {\n          'status': 'active'\n        }\n      },\n      'resultCount': 15,\n      'executionTime': 150,\n      'success': true,\n      'user': 'admin',\n      'userName': 'Administrator',\n      'userAgent': 'Mozilla/5.0...',\n      'ipAddress': '192.168.1.100',\n      'sessionId': 'sess_abc123',\n      'created': '2024-01-15T10:30:00Z'\n    }\n  ],\n  'total': 1,\n  'page': 1,\n  'pages': 1,\n  'limit': 20,\n  'offset': 0\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"get-apisearch-trailsstatistics",children:"GET /api/search-trails/statistics"}),"\n",(0,i.jsx)(n.p,{children:"Retrieve comprehensive search statistics."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'total': 1000,\n  'totalResults': 15000,\n  'averageResultsPerSearch': 15,\n  'averageExecutionTime': 180,\n  'successRate': 0.95,\n  'uniqueSearchTerms': 250,\n  'uniqueUsers': 50,\n  'uniqueOrganizations': 10,\n  'queryComplexity': {\n    'simple': 600,\n    'medium': 300,\n    'complex': 100\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"get-apisearch-trailspopular-terms",children:"GET /api/search-trails/popular-terms"}),"\n",(0,i.jsx)(n.p,{children:"Retrieve popular search terms."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"limit"})," (integer): Number of terms to return (default: 10)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"[\n  {\n    'term': 'user',\n    'count': 150,\n    'percentage': 15.0\n  },\n  {\n    'term': 'active',\n    'count': 120,\n    'percentage': 12.0\n  }\n]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"get-apisearch-trailsactivity",children:"GET /api/search-trails/activity"}),"\n",(0,i.jsx)(n.p,{children:"Retrieve search activity data."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"period"})," (string): Period type (hourly, daily, weekly, monthly)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"limit"})," (integer): Number of periods to return"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"[\n  {\n    'period': '2024-01-15',\n    'searches': 50,\n    'results': 750,\n    'averageExecutionTime': 175,\n    'successRate': 0.96\n  }\n]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"get-apisearch-trailsregister-schema-stats",children:"GET /api/search-trails/register-schema-stats"}),"\n",(0,i.jsx)(n.p,{children:"Retrieve register and schema usage statistics."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"[\n  {\n    'register': 'users',\n    'registerName': 'User Registry',\n    'schema': 'person',\n    'schemaName': 'Person Schema',\n    'searchCount': 200,\n    'averageExecutionTime': 150,\n    'successRate': 0.95\n  }\n]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"get-apisearch-trailsuser-agent-stats",children:"GET /api/search-trails/user-agent-stats"}),"\n",(0,i.jsx)(n.p,{children:"Retrieve user agent statistics."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"[\n  {\n    'userAgent': 'Mozilla/5.0...',\n    'browser': 'Chrome',\n    'version': '120.0',\n    'platform': 'Windows',\n    'count': 500,\n    'percentage': 50.0\n  }\n]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"post-apisearch-trailscleanup",children:"POST /api/search-trails/cleanup"}),"\n",(0,i.jsx)(n.p,{children:"Clean up old search trail entries."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'days': 30\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:"{\n  'success': true,\n  'message': 'Cleanup completed successfully',\n  'deletedCount': 100\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"frontend-interface",children:"Frontend Interface"}),"\n",(0,i.jsx)(n.h3,{id:"search-trail-management",children:"Search Trail Management"}),"\n",(0,i.jsx)(n.p,{children:"The search trails interface provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Table View"}),": Paginated list of search trail entries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Detailed Information"}),": Complete search context and parameters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Action Buttons"}),": View details, copy data, and delete entries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Bulk Operations"}),": Select multiple entries for bulk actions"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"advanced-filtering-1",children:"Advanced Filtering"}),"\n",(0,i.jsx)(n.p,{children:"Filter search trails using:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Register/Schema Selection"}),": Dropdown filters for specific registers and schemas"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Success Status"}),": Filter by successful or failed searches"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User Selection"}),": Multi-select user filter"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Date Range"}),": From and to date pickers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Search Terms"}),": Text input for search term filtering"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance Ranges"}),": Min/max inputs for execution time and result counts"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"analytics-dashboard-1",children:"Analytics Dashboard"}),"\n",(0,i.jsx)(n.p,{children:"The analytics dashboard includes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Key Metrics"}),": Total searches, results, success rates, and performance"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Popular Terms"}),": Most frequently searched terms with usage counts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Activity Charts"}),": Search activity over time with selectable periods"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Register/Schema Usage"}),": Usage statistics by register and schema"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User Agent Distribution"}),": Browser and client statistics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Query Complexity"}),": Distribution of simple, medium, and complex queries"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"retention-policy",children:"Retention Policy"}),"\n",(0,i.jsx)(n.p,{children:"Configure search trail retention:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// In app configuration\n'search_trail_retention_days' => 90,\n'search_trail_cleanup_enabled' => true,\n'search_trail_cleanup_schedule' => 'daily',\n"})}),"\n",(0,i.jsx)(n.h3,{id:"privacy-settings",children:"Privacy Settings"}),"\n",(0,i.jsx)(n.p,{children:"Control what information is logged:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Privacy configuration\n'search_trail_log_ip_addresses' => true,\n'search_trail_log_user_agents' => true,\n'search_trail_log_session_ids' => true,\n'search_trail_anonymize_users' => false,\n"})}),"\n",(0,i.jsx)(n.h3,{id:"performance-settings",children:"Performance Settings"}),"\n",(0,i.jsx)(n.p,{children:"Configure performance thresholds:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Performance monitoring\n'search_trail_slow_query_threshold' => 1000, // milliseconds\n'search_trail_complexity_thresholds' => [\n    'simple' => 3,   // parameters\n    'medium' => 10,  // parameters\n    'complex' => 20, // parameters\n],\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Regular Cleanup"}),": Implement automated cleanup of old search trails"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Index Management"}),": Ensure proper database indexes for search performance"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Batch Processing"}),": Use batch operations for large data sets"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monitoring"}),": Monitor search trail table size and performance"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"privacy-and-security",children:"Privacy and Security"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data Retention"}),": Implement appropriate retention policies"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Access Control"}),": Restrict access to search trail data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Anonymization"}),": Consider anonymizing personal information"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Audit Logging"}),": Log access to search trail data"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"analytics-and-reporting",children:"Analytics and Reporting"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Regular Reviews"}),": Regularly review search patterns and performance"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Trend Analysis"}),": Identify trends in search behavior"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance Monitoring"}),": Monitor search performance over time"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User Behavior"}),": Analyze user search patterns for optimization"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,i.jsx)(n.h3,{id:"custom-analytics",children:"Custom Analytics"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Custom analytics query\n$searchTrailService = new SearchTrailService();\n$stats = $searchTrailService->getSearchStatistics([\n    'register' => 'users',\n    'dateFrom' => '2024-01-01',\n    'dateTo' => '2024-01-31'\n]);\n\n// Process statistics\n$popularTerms = $searchTrailService->getPopularSearchTerms(10);\n$activityData = $searchTrailService->getSearchActivityByTime('daily');\n"})}),"\n",(0,i.jsx)(n.h3,{id:"custom-reporting",children:"Custom Reporting"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Generate custom report\n$report = [\n    'period' => '2024-01',\n    'totalSearches' => $stats['total'],\n    'successRate' => $stats['successRate'],\n    'popularTerms' => $popularTerms,\n    'activityData' => $activityData\n];\n\n// Export or process report\n$this->exportReport($report);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Monitor slow queries\n$slowQueries = $searchTrailService->getSlowQueries(1000); // > 1000ms\n\n// Alert on performance issues\nif (count($slowQueries) > 10) {\n    $this->sendPerformanceAlert($slowQueries);\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"High Storage Usage"}),": Implement regular cleanup and archiving"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Slow Queries"}),": Add database indexes and optimize queries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Missing Data"}),": Check search trail logging configuration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance Issues"}),": Monitor database performance and optimize"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"debug-mode",children:"Debug Mode"}),"\n",(0,i.jsx)(n.p,{children:"Enable debug mode for detailed logging:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Enable debug logging\n'search_trail_debug' => true,\n'search_trail_log_level' => 'debug',\n"})}),"\n",(0,i.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"Search trail logging is designed to be non-intrusive:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Failed logging does not affect search operations"}),"\n",(0,i.jsx)(n.li,{children:"Errors are logged separately for monitoring"}),"\n",(0,i.jsx)(n.li,{children:"Fallback mechanisms ensure data integrity"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,i.jsx)(n.h3,{id:"planned-features",children:"Planned Features"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Machine Learning"}),": Predictive search suggestions based on trails"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Advanced Visualization"}),": Interactive charts and dashboards"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Export Capabilities"}),": PDF and Excel export functionality"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"API Rate Limiting"}),": Based on search trail analysis"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Personalization"}),": User-specific search optimization"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"integration-possibilities",children:"Integration Possibilities"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"External Analytics"}),": Integration with Google Analytics or similar"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Business Intelligence"}),": Export to BI tools for advanced analysis"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Alerting Systems"}),": Integration with monitoring and alerting platforms"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Search Optimization"}),": Automatic index optimization based on patterns"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"Search trails provide powerful insights into search behavior and performance within the OpenRegister application. The feature enables administrators to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Track and analyze all search operations"}),"\n",(0,i.jsx)(n.li,{children:"Monitor performance and identify bottlenecks"}),"\n",(0,i.jsx)(n.li,{children:"Understand user behavior and search patterns"}),"\n",(0,i.jsx)(n.li,{children:"Optimize search functionality based on real usage data"}),"\n",(0,i.jsx)(n.li,{children:"Maintain comprehensive audit trails for compliance"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The combination of detailed logging, advanced analytics, and intuitive interfaces makes search trails an essential tool for managing and optimizing search operations in large-scale registry systems."}),"\n",(0,i.jsx)(n.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:'graph TB\n    subgraph "Search Flow"\n        USER[User/API Request]\n        CTRL[ObjectsController]\n        SEARCH[Search Service]\n        SOLR[Solr Service]\n    end\n    \n    subgraph "Search Trail Logging"\n        TRAIL[SearchTrailService]\n        MAPPER[SearchTrailMapper]\n        DB[(Database)]\n    end\n    \n    subgraph "Analytics & Reporting"\n        STATS[Statistics Service]\n        POPULAR[Popular Terms]\n        ACTIVITY[Activity Tracking]\n        REGSTATS[Register/Schema Stats]\n        UAGENT[User Agent Stats]\n    end\n    \n    subgraph "Management"\n        CLEANUP[Cleanup Service]\n        EXPIRY[Expiry Check]\n        RETENTION[Retention Policy]\n    end\n    \n    USER --\x3e CTRL\n    CTRL --\x3e SEARCH\n    SEARCH --\x3e SOLR\n    \n    SOLR --\x3e TRAIL\n    TRAIL --\x3e MAPPER\n    MAPPER --\x3e DB\n    \n    DB --\x3e STATS\n    DB --\x3e POPULAR\n    DB --\x3e ACTIVITY\n    DB --\x3e REGSTATS\n    DB --\x3e UAGENT\n    \n    CLEANUP --\x3e EXPIRY\n    EXPIRY --\x3e DB\n    RETENTION --\x3e CLEANUP\n    \n    style TRAIL fill:#4A90E2\n    style DB fill:#50E3C2\n    style CLEANUP fill:#F5A623\n'})}),"\n",(0,i.jsx)(n.h3,{id:"search-trail-creation-flow",children:"Search Trail Creation Flow"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant User\n    participant ObjectsCtrl as Objects Controller\n    participant ObjectService\n    participant SolrService as Solr Service\n    participant TrailService as SearchTrail Service\n    participant TrailMapper as SearchTrail Mapper\n    participant DB as Database\n    participant RegMapper as Register Mapper\n    participant SchemaMapper as Schema Mapper\n    \n    User->>ObjectsCtrl: GET /api/objects?_search=term\n    ObjectsCtrl->>ObjectService: Find Objects\n    \n    Note over ObjectsCtrl: Capture Request Start Time\n    \n    ObjectService->>SolrService: Search Query\n    SolrService--\x3e>ObjectService: Search Results\n    ObjectService--\x3e>ObjectsCtrl: Objects + Result Count\n    \n    Note over ObjectsCtrl: Calculate Response Time\n    \n    ObjectsCtrl->>TrailService: Create Search Trail\n    \n    TrailService->>TrailService: Extract Query Parameters\n    Note over TrailService: Filter System Parameters (_*)\n    Note over TrailService: Extract Search Term\n    Note over TrailService: Extract Filters, Sort, Pagination\n    \n    TrailService->>TrailService: Get Request Context\n    Note over TrailService: User ID, Session, IP, User Agent\n    \n    TrailService->>TrailMapper: Create Trail Entity\n    \n    TrailMapper->>RegMapper: Resolve Register ID/UUID\n    RegMapper--\x3e>TrailMapper: Register Info\n    \n    TrailMapper->>SchemaMapper: Resolve Schema ID/UUID\n    SchemaMapper--\x3e>TrailMapper: Schema Info\n    \n    TrailMapper->>TrailMapper: Set Expiry Date\n    Note over TrailMapper: created + retention_days\n    \n    TrailMapper->>DB: INSERT search_trail\n    DB--\x3e>TrailMapper: Trail ID\n    \n    alt Self-Clearing Enabled\n        TrailMapper->>TrailMapper: Clear Expired Trails\n        TrailMapper->>DB: DELETE expired trails\n    end\n    \n    TrailMapper--\x3e>TrailService: SearchTrail Entity\n    TrailService--\x3e>ObjectsCtrl: Trail Created\n    \n    ObjectsCtrl--\x3e>User: Search Results\n"})}),"\n",(0,i.jsx)(n.h3,{id:"search-trail-data-capture",children:"Search Trail Data Capture"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:'graph TB\n    subgraph "Request Data"\n        REQ_URI[Request URI]\n        REQ_METHOD[HTTP Method]\n        REQ_PARAMS[Query Parameters]\n        REQ_HEADERS[Headers]\n    end\n    \n    subgraph "Search Context"\n        SEARCH_TERM[Search Term]\n        FILTERS[Filters]\n        SORT[Sort Parameters]\n        FACETS[Facet Requests]\n    end\n    \n    subgraph "Pagination"\n        PAGE[Page Number]\n        LIMIT[Limit]\n        OFFSET[Offset]\n    end\n    \n    subgraph "User Context"\n        USER_ID[User ID]\n        USER_NAME[User Name]\n        SESSION[Session ID]\n        IP[IP Address]\n        UAGENT[User Agent]\n    end\n    \n    subgraph "Register/Schema Context"\n        REG_ID[Register ID]\n        REG_UUID[Register UUID]\n        REG_NAME[Register Name]\n        SCHEMA_ID[Schema ID]\n        SCHEMA_UUID[Schema UUID]\n        SCHEMA_NAME[Schema Name]\n    end\n    \n    subgraph "Results Data"\n        RESULT_COUNT[Result Count]\n        TOTAL_RESULTS[Total Results]\n        RESPONSE_TIME[Response Time]\n        EXEC_TYPE[Execution Type]\n    end\n    \n    subgraph "Metadata"\n        CREATED[Created Timestamp]\n        EXPIRES[Expiry Date]\n        ORG_ID[Organisation ID]\n        SIZE[Entry Size]\n    end\n    \n    REQ_URI --\x3e TRAIL[Search Trail Entity]\n    REQ_METHOD --\x3e TRAIL\n    REQ_PARAMS --\x3e TRAIL\n    \n    SEARCH_TERM --\x3e TRAIL\n    FILTERS --\x3e TRAIL\n    SORT --\x3e TRAIL\n    FACETS --\x3e TRAIL\n    \n    PAGE --\x3e TRAIL\n    LIMIT --\x3e TRAIL\n    OFFSET --\x3e TRAIL\n    \n    USER_ID --\x3e TRAIL\n    USER_NAME --\x3e TRAIL\n    SESSION --\x3e TRAIL\n    IP --\x3e TRAIL\n    UAGENT --\x3e TRAIL\n    \n    REG_ID --\x3e TRAIL\n    REG_UUID --\x3e TRAIL\n    REG_NAME --\x3e TRAIL\n    SCHEMA_ID --\x3e TRAIL\n    SCHEMA_UUID --\x3e TRAIL\n    SCHEMA_NAME --\x3e TRAIL\n    \n    RESULT_COUNT --\x3e TRAIL\n    TOTAL_RESULTS --\x3e TRAIL\n    RESPONSE_TIME --\x3e TRAIL\n    EXEC_TYPE --\x3e TRAIL\n    \n    CREATED --\x3e TRAIL\n    EXPIRES --\x3e TRAIL\n    ORG_ID --\x3e TRAIL\n    SIZE --\x3e TRAIL\n    \n    style TRAIL fill:#4A90E2\n'})}),"\n",(0,i.jsx)(n.h3,{id:"statistics-aggregation",children:"Statistics Aggregation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"sequenceDiagram\n    participant API\n    participant TrailService as SearchTrail Service\n    participant TrailMapper as SearchTrail Mapper\n    participant DB as Database\n    \n    API->>TrailService: Get Statistics\n    \n    TrailService->>TrailMapper: Get Total Count\n    TrailMapper->>DB: COUNT(*)\n    DB--\x3e>TrailMapper: Total Trails\n    \n    TrailService->>TrailMapper: Get Result Totals\n    TrailMapper->>DB: SUM(result_count), SUM(total_results)\n    DB--\x3e>TrailMapper: Result Sums\n    \n    TrailService->>TrailMapper: Get Average Response Time\n    TrailMapper->>DB: AVG(response_time)\n    DB--\x3e>TrailMapper: Avg Response Time\n    \n    TrailService->>TrailMapper: Get Success Rate\n    TrailMapper->>DB: COUNT(result_count > 0) / COUNT(*)\n    DB--\x3e>TrailMapper: Success Rate\n    \n    TrailService->>TrailMapper: Get Unique Counts\n    TrailMapper->>DB: COUNT(DISTINCT search_term)\n    TrailMapper->>DB: COUNT(DISTINCT user)\n    TrailMapper->>DB: COUNT(DISTINCT organisation_id)\n    DB--\x3e>TrailMapper: Unique Counts\n    \n    TrailService->>TrailMapper: Get Query Complexity\n    TrailMapper->>DB: Analyze query_parameters JSON\n    DB--\x3e>TrailMapper: Complexity Distribution\n    \n    TrailMapper--\x3e>TrailService: Aggregated Statistics\n    \n    TrailService->>TrailService: Calculate Derived Metrics\n    Note over TrailService: Average Results Per Search\n    Note over TrailService: Performance Trends\n    \n    TrailService--\x3e>API: Statistics Response\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cleanup-process",children:"Cleanup Process"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mermaid",children:"graph TB\n    START[Cleanup Trigger]\n    \n    START --\x3e CHECK{Self-Clearing Enabled?}\n    CHECK --\x3e|No| CRON[Cron Job Trigger]\n    CHECK --\x3e|Yes| AUTO[Auto-Cleanup on Create]\n    \n    CRON --\x3e MANUAL[Manual Cleanup API]\n    AUTO --\x3e CLEANUP[Cleanup Process]\n    MANUAL --\x3e CLEANUP\n    \n    CLEANUP --\x3e GET_DATE[Get Current Date]\n    GET_DATE --\x3e QUERY[Query Expired Trails]\n    \n    QUERY --\x3e FILTER{Filter: expires < NOW()}\n    FILTER --\x3e DELETE[DELETE Expired Trails]\n    \n    DELETE --\x3e COUNT[Count Deleted]\n    COUNT --\x3e LOG[Log Cleanup Results]\n    LOG --\x3e RETURN[Return Status]\n    \n    RETURN --\x3e END[End]\n    \n    style AUTO fill:#50E3C2\n    style MANUAL fill:#F5A623\n    style DELETE fill:#E74C3C\n"})}),"\n",(0,i.jsx)(n.h3,{id:"database-schema",children:"Database Schema"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Search Trail Table: ",(0,i.jsx)(n.code,{children:"oc_openregister_search_trail"})]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Column"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Primary key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"uuid"})}),(0,i.jsx)(n.td,{children:"VARCHAR(36)"}),(0,i.jsx)(n.td,{children:"Unique identifier"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"search_term"})}),(0,i.jsx)(n.td,{children:"TEXT"}),(0,i.jsxs)(n.td,{children:["Search term from ",(0,i.jsx)(n.code,{children:"_search"})," parameter"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"query_parameters"})}),(0,i.jsx)(n.td,{children:"JSON"}),(0,i.jsx)(n.td,{children:"Full query parameters (excluding system params)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"result_count"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Number of results returned (current page)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"total_results"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Total matching results (before pagination)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"register"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Register ID (foreign key)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"schema"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Schema ID (foreign key)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"register_uuid"})}),(0,i.jsx)(n.td,{children:"VARCHAR(36)"}),(0,i.jsx)(n.td,{children:"Register UUID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"schema_uuid"})}),(0,i.jsx)(n.td,{children:"VARCHAR(36)"}),(0,i.jsx)(n.td,{children:"Schema UUID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user"})}),(0,i.jsx)(n.td,{children:"VARCHAR(255)"}),(0,i.jsx)(n.td,{children:"User ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user_name"})}),(0,i.jsx)(n.td,{children:"VARCHAR(255)"}),(0,i.jsx)(n.td,{children:"User display name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"register_name"})}),(0,i.jsx)(n.td,{children:"VARCHAR(255)"}),(0,i.jsx)(n.td,{children:"Register name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"schema_name"})}),(0,i.jsx)(n.td,{children:"VARCHAR(255)"}),(0,i.jsx)(n.td,{children:"Schema name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"session"})}),(0,i.jsx)(n.td,{children:"VARCHAR(255)"}),(0,i.jsx)(n.td,{children:"Session ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ip_address"})}),(0,i.jsx)(n.td,{children:"VARCHAR(45)"}),(0,i.jsx)(n.td,{children:"IP address (IPv4/IPv6)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user_agent"})}),(0,i.jsx)(n.td,{children:"TEXT"}),(0,i.jsx)(n.td,{children:"User agent string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"request_uri"})}),(0,i.jsx)(n.td,{children:"TEXT"}),(0,i.jsx)(n.td,{children:"Full request URI"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http_method"})}),(0,i.jsx)(n.td,{children:"VARCHAR(10)"}),(0,i.jsx)(n.td,{children:"HTTP method (GET, POST)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"response_time"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Response time in milliseconds"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"page"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Page number"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"limit"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Limit parameter"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"offset"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Offset parameter"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"facets_requested"})}),(0,i.jsx)(n.td,{children:"BOOLEAN"}),(0,i.jsx)(n.td,{children:"Whether facets were requested"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"facetable_requested"})}),(0,i.jsx)(n.td,{children:"BOOLEAN"}),(0,i.jsx)(n.td,{children:"Whether facetable discovery was requested"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"filters"})}),(0,i.jsx)(n.td,{children:"JSON"}),(0,i.jsx)(n.td,{children:"Applied filters"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sort_parameters"})}),(0,i.jsx)(n.td,{children:"JSON"}),(0,i.jsx)(n.td,{children:"Sort parameters"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"published_only"})}),(0,i.jsx)(n.td,{children:"BOOLEAN"}),(0,i.jsx)(n.td,{children:"Whether only published objects were queried"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"execution_type"})}),(0,i.jsx)(n.td,{children:"VARCHAR(20)"}),(0,i.jsxs)(n.td,{children:["Execution type: ",(0,i.jsx)(n.code,{children:"sync"})," or ",(0,i.jsx)(n.code,{children:"async"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"created"})}),(0,i.jsx)(n.td,{children:"DATETIME"}),(0,i.jsx)(n.td,{children:"Creation timestamp"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"organisation_id"})}),(0,i.jsx)(n.td,{children:"VARCHAR(255)"}),(0,i.jsx)(n.td,{children:"Organisation identifier"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"organisation_id_type"})}),(0,i.jsx)(n.td,{children:"VARCHAR(50)"}),(0,i.jsx)(n.td,{children:"Type of organisation identifier"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"expires"})}),(0,i.jsx)(n.td,{children:"DATETIME"}),(0,i.jsx)(n.td,{children:"Expiration date (created + retention_days)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"size"})}),(0,i.jsx)(n.td,{children:"INTEGER"}),(0,i.jsx)(n.td,{children:"Size of entry in bytes"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Indexes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["PRIMARY KEY (",(0,i.jsx)(n.code,{children:"id"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["INDEX (",(0,i.jsx)(n.code,{children:"uuid"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["INDEX (",(0,i.jsx)(n.code,{children:"search_term"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["INDEX (",(0,i.jsx)(n.code,{children:"register"}),", ",(0,i.jsx)(n.code,{children:"schema"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["INDEX (",(0,i.jsx)(n.code,{children:"user"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["INDEX (",(0,i.jsx)(n.code,{children:"created"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["INDEX (",(0,i.jsx)(n.code,{children:"expires"}),") -- For efficient cleanup"]}),"\n",(0,i.jsxs)(n.li,{children:["INDEX (",(0,i.jsx)(n.code,{children:"organisation_id"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"code-examples",children:"Code Examples"}),"\n",(0,i.jsx)(n.h4,{id:"creating-a-search-trail",children:"Creating a Search Trail"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"use OCA\\OpenRegister\\Service\\SearchTrailService;\n\n// In ObjectsController after search execution\n$responseTime = round((microtime(true) - $startTime) * 1000, 2); // ms\n\n$trail = $this->searchTrailService->createSearchTrail(\n    query: $query,\n    resultCount: count($results),\n    totalResults: $totalResults,\n    responseTime: $responseTime,\n    executionType: 'sync'\n);\n"})}),"\n",(0,i.jsx)(n.h4,{id:"retrieving-statistics",children:"Retrieving Statistics"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Get comprehensive statistics\n$stats = $this->searchTrailService->getSearchStatistics([\n    'register' => 5,\n    'dateFrom' => '2024-01-01',\n    'dateTo' => '2024-12-31'\n]);\n\n// Returns:\n// [\n//     'total' => 1000,\n//     'totalResults' => 15000,\n//     'averageResultsPerSearch' => 15.0,\n//     'averageExecutionTime' => 180,\n//     'successRate' => 0.95,\n//     'uniqueSearchTerms' => 250,\n//     'uniqueUsers' => 50,\n//     'uniqueOrganizations' => 10,\n//     'queryComplexity' => [\n//         'simple' => 600,\n//         'medium' => 300,\n//         'complex' => 100\n//     ]\n// ]\n"})}),"\n",(0,i.jsx)(n.h4,{id:"getting-popular-search-terms",children:"Getting Popular Search Terms"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Get top 10 popular search terms\n$popularTerms = $this->searchTrailService->getPopularSearchTerms(10);\n\n// Returns:\n// [\n//     ['term' => 'user', 'count' => 150, 'percentage' => 15.0],\n//     ['term' => 'active', 'count' => 120, 'percentage' => 12.0],\n//     ...\n// ]\n"})}),"\n",(0,i.jsx)(n.h4,{id:"activity-analysis",children:"Activity Analysis"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Get daily search activity for last 30 days\n$activity = $this->searchTrailService->getSearchActivityByTime(\n    period: 'daily',\n    limit: 30\n);\n\n// Returns:\n// [\n//     [\n//         'period' => '2024-01-15',\n//         'searches' => 50,\n//         'results' => 750,\n//         'averageExecutionTime' => 175,\n//         'successRate' => 0.96\n//     ],\n//     ...\n// ]\n"})}),"\n",(0,i.jsx)(n.h4,{id:"manual-cleanup",children:"Manual Cleanup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// Clean up search trails older than 90 days\n$result = $this->searchTrailService->clearExpiredSearchTrails();\n\n// Returns:\n// [\n//     'success' => true,\n//     'deleted' => 1,\n//     'cleanup_date' => '2024-01-15 10:30:00',\n//     'message' => 'Self-clearing: deleted expired search trail entries'\n// ]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"query-complexity-classification",children:"Query Complexity Classification"}),"\n",(0,i.jsx)(n.p,{children:"Search trails automatically classify queries by complexity:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"private function calculateQueryComplexity(array $queryParameters): string\n{\n    $paramCount = count($queryParameters);\n    \n    if ($paramCount <= 3) {\n        return 'simple';   // Basic search with minimal filters\n    } elseif ($paramCount <= 10) {\n        return 'medium';   // Multi-parameter search with filters\n    } else {\n        return 'complex';  // Advanced search with many filters/facets\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"system-parameter-filtering",children:"System Parameter Filtering"}),"\n",(0,i.jsxs)(n.p,{children:["System parameters (starting with ",(0,i.jsx)(n.code,{children:"_"}),") are automatically excluded from tracking:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"private function filterSystemParameters(array $query): array\n{\n    return array_filter($query, function ($key) {\n        // Exclude parameters starting with _\n        return !str_starts_with($key, '_');\n    }, ARRAY_FILTER_USE_KEY);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"performance-optimizations",children:"Performance Optimizations"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Batch Inserts"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Search trails are inserted asynchronously to avoid blocking search responses"}),"\n",(0,i.jsx)(n.li,{children:"Non-critical operation - failures don't affect search results"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Indexed Queries"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Database indexes on common filter fields (",(0,i.jsx)(n.code,{children:"user"}),", ",(0,i.jsx)(n.code,{children:"register"}),", ",(0,i.jsx)(n.code,{children:"schema"}),", ",(0,i.jsx)(n.code,{children:"created"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Composite index on (",(0,i.jsx)(n.code,{children:"expires"}),") for efficient cleanup queries"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"JSON Field Optimization"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"query_parameters"}),", ",(0,i.jsx)(n.code,{children:"filters"}),", and ",(0,i.jsx)(n.code,{children:"sort_parameters"})," stored as JSON"]}),"\n",(0,i.jsx)(n.li,{children:"Allows flexible querying without schema changes"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Retention Policy"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Automatic expiry calculation: ",(0,i.jsx)(n.code,{children:"expires = created + retention_days"})]}),"\n",(0,i.jsx)(n.li,{children:"Background cleanup via cron jobs (default: disabled for self-clearing)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Caching Statistics"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Frequently accessed statistics can be cached"}),"\n",(0,i.jsx)(n.li,{children:"Cache invalidation on new trail creation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"integration-points",children:"Integration Points"}),"\n",(0,i.jsx)(n.h4,{id:"1-objectscontroller",children:"1. ObjectsController"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Automatically creates search trail after every search operation"}),"\n",(0,i.jsx)(n.li,{children:"Captures full request context and timing"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"2-cron-jobs",children:"2. Cron Jobs"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Background job for periodic cleanup of expired trails"}),"\n",(0,i.jsx)(n.li,{children:"Configurable retention period (default: 365 days)"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"3-analytics-dashboard",children:"3. Analytics Dashboard"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Vue.js frontend for visualizing search trail data"}),"\n",(0,i.jsx)(n.li,{children:"Real-time statistics and trend analysis"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"4-solr-integration",children:"4. Solr Integration"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Captures Solr-specific search parameters"}),"\n",(0,i.jsx)(n.li,{children:"Tracks facet requests and complexity"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"best-practices-1",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Retention Policy"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Set retention period based on compliance requirements"}),"\n",(0,i.jsx)(n.li,{children:"Default: 365 days"}),"\n",(0,i.jsx)(n.li,{children:"Consider GDPR/privacy regulations"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Privacy Considerations"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"IP addresses and user agents are logged by default"}),"\n",(0,i.jsx)(n.li,{children:"Consider anonymization for sensitive environments"}),"\n",(0,i.jsx)(n.li,{children:"Provide opt-out mechanisms if required"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Performance Monitoring"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Monitor search trail table size regularly"}),"\n",(0,i.jsx)(n.li,{children:"Set up alerts for slow queries (> 1000ms)"}),"\n",(0,i.jsx)(n.li,{children:"Archive old data instead of deleting if needed"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Self-Clearing Configuration"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Disabled by default (use cron jobs instead)"}),"\n",(0,i.jsx)(n.li,{children:"Enable only for low-traffic environments"}),"\n",(0,i.jsx)(n.li,{children:"Can cause performance impact on search operations"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Search trail failures should not affect search operations"}),"\n",(0,i.jsx)(n.li,{children:"Log errors separately for monitoring"}),"\n",(0,i.jsx)(n.li,{children:"Implement fallback mechanisms"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"monitoring--debugging",children:"Monitoring & Debugging"}),"\n",(0,i.jsx)(n.h4,{id:"enable-debug-logging",children:"Enable Debug Logging"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// In SearchTrailService\n$this->logger->debug('Creating search trail', [\n    'search_term' => $searchTerm,\n    'result_count' => $resultCount,\n    'response_time' => $responseTime\n]);\n"})}),"\n",(0,i.jsx)(n.h4,{id:"query-search-trails",children:"Query Search Trails"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Get recent search trails\ndocker exec -it master-database-mysql-1 mysql -u nextcloud -pnextcloud nextcloud -e "\nSELECT search_term, result_count, response_time, created \nFROM oc_openregister_search_trail \nORDER BY created DESC \nLIMIT 10;\n"\n\n# Get slow queries\ndocker exec -it master-database-mysql-1 mysql -u nextcloud -pnextcloud nextcloud -e "\nSELECT search_term, response_time, created \nFROM oc_openregister_search_trail \nWHERE response_time > 1000 \nORDER BY response_time DESC \nLIMIT 20;\n"\n\n# Get popular search terms\ndocker exec -it master-database-mysql-1 mysql -u nextcloud -pnextcloud nextcloud -e "\nSELECT search_term, COUNT(*) as count \nFROM oc_openregister_search_trail \nWHERE search_term IS NOT NULL \nGROUP BY search_term \nORDER BY count DESC \nLIMIT 10;\n"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"check-table-size",children:"Check Table Size"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'docker exec -it master-database-mysql-1 mysql -u nextcloud -pnextcloud nextcloud -e "\nSELECT \n    COUNT(*) as total_trails,\n    MIN(created) as oldest_trail,\n    MAX(created) as newest_trail,\n    AVG(response_time) as avg_response_time,\n    MAX(response_time) as max_response_time\nFROM oc_openregister_search_trail;\n"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Access Control"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Search trail data should be restricted to administrators"}),"\n",(0,i.jsx)(n.li,{children:"Use RBAC to control access to analytics endpoints"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Privacy"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"IP addresses and session IDs are personal data"}),"\n",(0,i.jsx)(n.li,{children:"Implement retention policies compliant with GDPR/privacy laws"}),"\n",(0,i.jsx)(n.li,{children:"Provide data export and deletion capabilities for users"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"SQL Injection"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All queries use parameterized statements"}),"\n",(0,i.jsx)(n.li,{children:"User input is never directly concatenated into queries"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"XSS Prevention"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"User agent and search terms are escaped in frontend display"}),"\n",(0,i.jsx)(n.li,{children:"JSON fields are properly validated before storage"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"future-enhancements-1",children:"Future Enhancements"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Machine Learning Integration"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Predict search intent based on historical patterns"}),"\n",(0,i.jsx)(n.li,{children:"Suggest related searches"}),"\n",(0,i.jsx)(n.li,{children:"Optimize ranking based on click-through rates"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Real-Time Analytics"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"WebSocket integration for live search metrics"}),"\n",(0,i.jsx)(n.li,{children:"Real-time dashboard updates"}),"\n",(0,i.jsx)(n.li,{children:"Instant performance alerts"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Advanced Visualization"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Heat maps for search activity"}),"\n",(0,i.jsx)(n.li,{children:"Geographic distribution of searches (based on IP)"}),"\n",(0,i.jsx)(n.li,{children:"User journey visualization"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"A/B Testing Support"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Compare search algorithms"}),"\n",(0,i.jsx)(n.li,{children:"Track conversion rates"}),"\n",(0,i.jsx)(n.li,{children:"Optimize search relevance"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Export Capabilities"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CSV/Excel export for offline analysis"}),"\n",(0,i.jsx)(n.li,{children:"Integration with BI tools (Tableau, Power BI)"}),"\n",(0,i.jsx)(n.li,{children:"Custom report generation"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);